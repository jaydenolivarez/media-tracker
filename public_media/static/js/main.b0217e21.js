/*! For license information please see main.b0217e21.js.LICENSE.txt */
(()=>{var e={52:(e,t,n)=>{"use strict";n.d(t,{KO:()=>Z,MF:()=>Q,Sx:()=>J,Us:()=>H,Wp:()=>X,j6:()=>q,om:()=>W,xZ:()=>$});var r=n(8812),i=n(443),o=n(1529),a=n(2799);class s{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",u="0.13.2",c=new i.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",f="@firebase/analytics",p="@firebase/app-check-compat",g="@firebase/app-check",m="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",b="@firebase/data-connect",w="@firebase/database-compat",x="@firebase/functions",S="@firebase/functions-compat",k="@firebase/installations",T="@firebase/installations-compat",C="@firebase/messaging",E="@firebase/messaging-compat",I="@firebase/performance",D="@firebase/performance-compat",A="@firebase/remote-config",_="@firebase/remote-config-compat",P="@firebase/storage",j="@firebase/storage-compat",R="@firebase/firestore",O="@firebase/ai",N="@firebase/firestore-compat",M="firebase",L="[DEFAULT]",F={[l]:"fire-core",[d]:"fire-core-compat",[f]:"fire-analytics",[h]:"fire-analytics-compat",[g]:"fire-app-check",[p]:"fire-app-check-compat",[m]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[b]:"fire-data-connect",[w]:"fire-rtdb-compat",[x]:"fire-fn",[S]:"fire-fn-compat",[k]:"fire-iid",[T]:"fire-iid-compat",[C]:"fire-fcm",[E]:"fire-fcm-compat",[I]:"fire-perf",[D]:"fire-perf-compat",[A]:"fire-rc",[_]:"fire-rc-compat",[P]:"fire-gcs",[j]:"fire-gcs-compat",[R]:"fire-fst",[N]:"fire-fst-compat",[O]:"fire-vertex","fire-js":"fire-js",[M]:"fire-js-all"},z=new Map,U=new Map,V=new Map;function B(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function W(e){const t=e.name;if(V.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;V.set(t,e);for(const n of z.values())B(n,e);for(const n of U.values())B(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;q(e,t).clearInstance(n)}function $(e){return null!==e&&void 0!==e&&void 0!==e.settings}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},G=new o.FA("app","Firebase",K);class Y{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw G.create("app-deleted",{appName:this._name})}}const Q="11.10.0";function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:L,automaticDataCollectionEnabled:!0},t),a=i.name;if("string"!==typeof a||!a)throw G.create("bad-app-name",{appName:String(a)});if(n||(n=(0,o.T9)()),!n)throw G.create("no-options");const s=z.get(a);if(s){if((0,o.bD)(n,s.options)&&(0,o.bD)(i,s.config))return s;throw G.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of V.values())l.addComponent(r);const u=new Y(n,i,l);return z.set(a,u),u}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;const t=z.get(e);if(!t&&e===L&&(0,o.T9)())return X();if(!t)throw G.create("no-app",{appName:e});return t}function Z(e,t,n){var i;let o=null!==(i=F[e])&&void 0!==i?i:e;n&&(o+=`-${n}`);const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=[`Unable to register library "${o}" with version "${t}":`];return a&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}W(new r.uA(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw G.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof o.g)c.warn(n.message);else{const e=G.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});c.warn(e.message)}}}function ie(e){return`${e.name}!${e.options.appId}`}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){c.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,o.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return c.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof o.g)c.warn(t.message);else{const e=G.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});c.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ue;ue="",W(new r.uA("platform-logger",e=>new s(e),"PRIVATE")),W(new r.uA("heartbeat",e=>new oe(e),"PRIVATE")),Z(l,u,ue),Z(l,u,"esm2017"),Z("fire-js","")},234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6819),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,i.default)(e,12*n)}},238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6260),i=n(8355),o=n(3666),a=n(2239);function s(e,t){var n,s,l,u,c,d,h,f;(0,o.A)(1,arguments);var p=(0,a.q)(),g=(0,i.A)(null!==(n=null!==(s=null!==(l=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:p.weekStartsOn)&&void 0!==s?s:null===(h=p.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.A)(e),y=m.getDay(),v=(y<g?7:0)+y-g;return m.setDate(m.getDate()-v),m.setHours(0,0,0,0),m}},407:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(5780),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Vy:()=>u});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class u{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},579:(e,t,n)=>{"use strict";e.exports=n(5180)},775:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),i=n(6260),o=n(3666);function a(e){var t,n;if((0,o.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=(0,i.A)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)}),n||new Date(NaN)}},1010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){var n;(0,i.A)(1,arguments);var o=e||{},a=(0,r.A)(o.start),s=(0,r.A)(o.end).getTime();if(!(a.getTime()<=s))throw new RangeError("Invalid interval");var l=[],u=a;u.setHours(0,0,0,0);var c=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=s;)l.push((0,r.A)(u)),u.setDate(u.getDate()+c),u.setHours(0,0,0,0);return l}},1049:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6260),i=n(1740),o=n(1104),a=n(3666);var s=6048e5;function l(e){(0,a.A)(1,arguments);var t=(0,r.A)(e),n=(0,i.A)(t).getTime()-function(e){(0,a.A)(1,arguments);var t=(0,o.A)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.A)(n)}(t).getTime();return Math.round(n/s)+1}},1074:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfUAAADICAYAAADx23jWAAAACXBIWXMAAAsSAAALEgHS3X78AAAgAElEQVR4nO3df3DU9Z0/8Kc3nUnOuhC4+SYtUbJKQ2g7hIg2nWqbLOvAeOlRQhvMVE7dOJkvVg4lwFCwQhLUyjGQQKme3KRmleIZSVvQKTowrosV74wVQ5i2YLRuvMKV7VwE0zrwF/fHe1dCyGY/n/f7/fn9fMzstELen88rb5LP6/P+fdXFixdhhVB5NAIg+wkDKLPkRkSXGwKQApAEkBwZTCSdDIaIyE5X6UzqofJoPYAYgEXaLkqkbj+A+MhgYp/TgRARWUlLUg+VR2MA2sDWOLnbEIC2kcFE3OlAiIisoJTUMy3z7WAyJ28ZArCSLXci8huppB4qjxYBiIPd7ORt+wHERgYTZ50OhIhIB9NJPVQerQKwD2ydkz8MAagfGUz0Ox0IEZGqvzPzxZmx8ySY0Mk/ygAkMz/bRESeZrilnnnodVsaDZGzmjiJjoi8zFBLnQmdAqKbLXYi8rK8LfXMGHoSwGQ7AiJy2DkAEY6xE5EXTZjUM7Pc+8ExdAqWIQBVnBVPRF6Tr/s9DiZ0Cp4yiJ99IiJPyZnUMxvLcB06BdWizO8AEZFnTNRS325bFETuxN8BIvKUcZN6ZgYwu90p6Mo4G56IvCRXS73NziCIXKzN6QCIiIy6IqlnxhHZSicSyji2TkReMV5LPWZ3EEQuF3M6ACIiI8ZL6pzxTnQ5/k4QkSdcltRD5dGIM2EQuRt/N4jIC8a21CNOBEHkARGnAyAiyodJnciYiNMBEBHlMzaph50IgsgDwk4HQESUz9ikzqVsROPj7wYRuZ6h89SJiIjI/ZjUiYiIfIJJnYiIyCeY1ImIiHyCSZ2IiMgnmNSJiIh8gkmdiIjIJ5jUiYiIfIJJnYiIyCeY1ImIiHyCSZ2IiMgnmNSJiIh8gkmdiIjIJ5jUiYiIfIJJnYiIyCeY1ImIiHyCSZ2IiMgnmNSJiIh8gkmdiIjIJ5jUiYiIfIJJnYiIyCeY1ImIiHzic04HQEREgZCUKBPPfMggJnUiIrJDrUSZpO4g/I7d70RERD7BpE5EROQTTOpEREQ+waRORETkE0zqREREPsGkTkRE5BO+WtJWMa0En//7ApSXXYfQ568GANx6y005v/7Im+8AAEb+9ikGh/4bZ4bP4tTHn9gSKxERkW6eTeoV00pQNetLmDXzBsy98auIRqtNX6OhYcG4f97bexADx0/i5Psf4tjgH5noiYjIEzyT1EOFBfhW5Zcxf9438J3v3Ibi4qmW3auhYcFlCT+R6EPy8Fs4kHwTJ0+fsey+RlRMK8G6FU2OxpDL2bPn8Lvfvz/u350+8xf8+X+HAQCDp85g5PwFO0MjIgqEqy5evPjZf4TKoxcn+FpH1FVXYf68b6C5eYnToQAABgYG0R3vxctvvOVIC37ujOk4/Erc9vtaobf3IFJDp3DivT+i/8T7jr8w5TMymLjK6RiIPEwmv7QDaNMch6+5sqUeKixA4/warF+3zNIWuYzKynJ0dqxHJ4Curr3Y3ftrHP3gI6fD8qSxwx/p9DCe3b0frx15G68fP+FQVERE3uWqlnrplEloblyENavd2b2cS2/vQezses6W5O6nlvpE0ulh/PSJPXjh5VddM6fBwZZ6FYAIgH0AUg7FQKSKLXUbuCKpZ1vmnR3rpa8xenJbdux2dJItnTIJJVOLAABzv1KBUOgaVM6uyDlZTjaGzTu7Le1GrphWgt8e/g/Lru9GG1t3ouuXBxwfh7cxqYchkngEQD2AyZk/nwcecEHexaRuA8eTel11FXZ2Pmy6m11nV23N7Fm4afaX0fC921FZWa50LcC+JJRdwjf3KxUoLf2C9CoAFem0eIGyepgknR7GipZHcaCv39L7TMTCpF4EkbwjmU9Zjq9jUicvY1K3gWNJvXTKJDy69n7TLeVEog+7fva8ZQ/3mtmzsLhunvLEvHR6GE33PWz72HB2lcCPfvgDLS8oWVu3dePto8fxwZ/+J29PxNwZ0/GFf5iKii9dj0jt17W+aHR17cXGHU870mrXnNRHJ/E5BsswqZOXManbwJGkLtM6HxgYxIq1j9k2KU3X+L6TXcfNC+crDWkA4iVqbXun0pBC6ZRJ+OaNs/HA8ru1vGgkEn24f92PbR9r15zUZX7XmNTJy5jUbWBrUg8VFmBV7A5TiTKdHsbjm3eh66VDFkaWm2yPwmg6EqOsljsXY1P7CunyN9d+X2vcddVVWnoR0ulh1C1ZbmudMqkTKWFSt4Fte7+HCgvw8x3tphJ6ItGHuiXLHUvoAHDq40/QtH4zmpdt+Gz82KxotBoH9j6BmtmzNEeXX9cvD0jH3dt7UHvSPNDXj1u/twzNyzYoXae4eCqe3rkJocICTZEREXmfLUm9YloJ+l/dY2psdeu2bixats41G5L0JI6g5p/uRSLRJ1W+uHgqfv3LJ1FXXaU5somNnL+AZ3fvlyqb3RvfCj2JI7i59vsYGBiUvkZlZTl+vqNdY1RERN5meVKvmFaCA3ufMDV+3rxsA9qf2m1hVHJOffwJFi1bh63buqWv0bOnA43RWzVGld/bR4/bej+jTp4+g9uXPiD9ogSIXpDmhfM1RkVE5F2WJnWZhN64dBV6EkcsjEpd+1O7lbqPu3Y9gtb77tIY0cSy6/bNei/135ojudLI+Qv45wdblRJ7Z8d6VEwr0RgVEZE3WZbUZRO6k+uQzehJHEHj0lXS5desbrKtK152xcBfP/1UcyTjGzl/AWvbO6XH/gG49pAbIiI7WZLUZRL61m3dnknoWQf6+pUSe8+eDtvH2N3q5OkzeGhDp3T5hoYFmDtjusaIiIi8R3tSDxUW4Omdm0wl9N7eg64cQzfiQF+/8hg7k5HQkziC3t6D0uUXzq/VGA0RkfdoT+o/aW0xtQY5nR7GA+3yLTQ3aH9qN7q69kqX3/tsB0qnTNIY0ZVUZpnbaWfXc9Jl16xu4hI3Igo0rUm95c7FpjdpWXL3KscP6tBh446npRNncfFUPLn5Ic0RXe699z609Pq6HP3gI6XW+rcqv6wxGiIib9GW1OfOmG5657Kt27p9cxb5yPkLuHfFRuny0Wg1Wu5crDEi79r7q1eky86f9w2NkRAReYuWpB4qLMDeZztMlUmnh9ERf0HH7V3j5OkzaFn1uHT5Te0rOL4O4DcDf5AuW82Jh0QUYFqS+qYH7zV99OZDGzp90e0+VtdLh5TGr3du+VHgx4VHzl+Q7oKvrCwPfP0RUXApJ/W5M6abPqZ0YGDQ9RvMqFix9jHpspWV5WicX6MxGm9S2aK2vJQb0RBRMH1O9QI7t/zIdJnH/vXfVG/ratnJXrInu3V2rMfLb7xl+9GibqKym901V1+tMRKyUCTP3/cDOGtDHF4RyfP3rC/rhDOfXFKZj+OUknrzwvmmj9BMp4eVxky94uEtTyod19rcuMiza/d1OPO/H0uXnRm+Dq8fP6ExGlJUBZGQqiAejGY3FDgG8cDshzh6NqkrMJdifTmrCkB95n+rAJSZKDsEUfdJXKp/W1+0pJN6qLAA69ctM13up0/s8eVY+linPv4EW7d1mzpqdrQ1q5vQ1bM/sK11t5zOZ0Is87HSduh7QKyEeOhYoQjioVgPkZwmK15vTuazCEBr5s/2A9iX+Xi9dcr6cl4VxO9EPdTqvyzzGf0idgxAHKLuUwrXNkQ6qTfOrzE9OQ4AXnj5Vdlbes5Lhw5LJ3WArXWPCcN8i8qsORqvVaTxWlm6HoxGLMp8ugE8A/HQTFp8T91YX86LQfwb6PzdGmsOgM7M5zBE3cetupnURDnZVnoi0ReolqfqRiprVjdZvtMckQYRiATxLoB7YH2CGuseAK9lYojYfG8ZEbC+nFYF8f13w9qEPlZt5p4pWNSzJ5XU6265WaqV/lzPSzK38zSVjVQA4I5/vE1TJETahSEejK/B+l4KI2pxKVmFHY1kfGGwvtygDeKFysl/gzKI5F6v+8JSSf2B5XdL3eyNd49LlfOyA339SkeK/svypRqjCYajvz/pdAhB0AbgQ7gjOY1VCzFfYKXTgYzSBtaX04ogvs/WfF9oo6TuC5pO6jWzZ5me8Q4Er+t9tGd375cuW1w8lcezkpuE4b4H43gmQ4xhJmHN/AGjwmB9uUERxPdmZ1d7PvthwaRF00l9cd08qRslD78lVc4Pnn9Rflwd4H7mZvnlPAEXqodIUG56MOZTCzF+6cSbMevLHdyY0AGLJsuZSuqhwgLTu8dlvXPc/2vTczl5+oxSF3xz85LAbX0q+/0mEn2aI6GMGIBfwf5JXTpMhnio25moYmB9uUUS7kvo5yCWuGlnKqmrHGv57qA3jv60ikoXPBC8I0Vlt3o9+u7vNEdCEAmq28LrH4NY6nMY4mFnhckQk6O0T0waRwysL7fYDn0JfQiX6j37OSZ5LUsSOmBynbpsN/DAwGAgNpyZyNtH1SYJfm3ubBzos2qvEPcpL7tOqtxrR97WHEngxaA3Qe3H5btt5ZLdzSsCveu445lrWvXLFAPryy0iAB5UKJ9tTe9D/p3hwrj0b1CP/C8Szid1la73vgAlo1xUt8a9+65gbUQza+YNpsuk08NObg+bNPn1MhOnnoG+HamMXCcGPQlqCKLFFIfxiUH9mU8889/1ELOzVWePZ7uWI9CfqGJgfblJm0LZHZnyRus/lfnsy5QrwqVdJscmeMu63gETSf3G8uulb/K7378vXdYvRs5fQCLRh2i0Wqp8cfFUVEwr8eL2qVIWzP+m6TI/fWKPBZEYloS5xC6T1OMm76GiCuoJ6hzEA267cjSXWkwRiHowsx/3WJNxqQWqa/Yx68tdIpB7oTkH8UKUVLz/WYh/x+2ZWNpGxWNZQgdMjKnfNFt+TFflxC0/UR3vnXHtFzVF4m4V00qklk0GaQtiixVB/cFzGCLR6UhQoyUz131G8TpzoC821pf7yK65j0D/i3Myc915EP/O7kjqkdqvS9/kr59+Kl3WT06890el8hVfku8t8ZK6yC2my2zd1h3YfRAsEIday+4ZiIdYSkMs4zkL0a0pf7CCcA/0TASLg/XlJkUQ+9yb1QJrhxiSEP/O7kjqst3GADB4KhhdxvkMDqn1WFTOrtAUiXuFCgtM76KXTg+jI/6CRREFTj3kHohZTbD+tLqsONQT1XaobbbC+nIfmReP7DwGzzOU1OfOmK50k6DPfM9S3RSlpuZmTZG4l8zpfw9t6OTPmB5FUNsQY4dieRlxqCWqMsh31bK+3CkiUcYXCR0wmNRllxcBUNp0xY8GBgaly8ocouMlpVMmmT79r6trL3oSRyyKKHBWQn4p1H4497CPQyRIWSsh1/pkfbmTzKY5Sd1BOMVQUg99/mrpG7z++m+ly/rRe++pbcKj2mviZo+uvd/Ui0si0YeNO562MKJAKYJ8khmCfV3IuayE/EYgk2H+e2d9uZfMZjNeW66Xk6GkfustN1kdR2Ckhk45HYIrNS+cj4aGBYa/Pp0extp2drtrpNLqjMEdS51iCmXNtj5ZX+5urQeWoaQ+dSr/7XQ5derPSuW/8A/+64Kvq65CZ8d6w1+fTg+jbsnywKzZt4FKqzO745kb9EO+W3kyjCc51pe5+iIbGUrqKjPf6XIjf1Nb3jet5P9pisQd6qqr0LOnw/DXM6FbQmVbUbd1w7ZBfj90o98L60tw2/eiIux0ALqYPnqV1Kgua/OTljsXm0roiUQfqm5byoSun+zDWee2tbpkd/KSUQZjk6xYX4LR+vKCiNMB6MKkTrYLFRag+/F12NS+wnCZja07sWjZOo6h6xeG/ClWbl0GFFcoG8vz92GwvkaLaYrBaW1OB6BL3qTu59nWZL+66ir0v7rH8KS4dHoY3/7u/eh87lcWRxZYsjuEHYN7ZwynIMauZUTy/D3r63IRfWFoIzOr3wvr7w1hS91mQdxdr3TKJDRGb8WRX+xCz54Ow8vWNrbuRNVtS508eS0IZJNUXGcQFohLlpuDicdXWV+Xy1dfTkhKluuED4YTTJ2nTuqC0H1cOmUSZlw7DTPD12HhP91meqJlb+9BPLzlSe7lbg/Zozkt3b9aA5X4qpB77Jv1daWJ6ssJScifo/4uxI57cV3B2I1JnXJqXXs/hoeNL6etqblZade7rq692N37a+XtdMmwiGS5Y3DXQzyX/ZDblz2C8ZNcRDKOoNaXU/ZBbPAje8hON8T3tBLu2E/AFMuT+syZwThZzI/sXMrYvGwDt3u1X0SyXFJjDFZKQi5J5eqCjSjE4QVJ6K0vJ8UBtCqUz55I1wb3TnAcl+Vj6jLnYlNuquvc3eqB5XcjVFjgdBhBE5Ysl9QYg5WSkuVyJamw5PWSkuXslpQs58akvh2ita5iMsQ4ewpilr8ndmHLm9TPmOh+Jev5dZ17ZWU5GufXOB1G0IQly7l1FvdYsnHm2lgmbHMcdtNdX046C32z2csguuRTEC8LYU3XtUTepK5jslLFtBLla5D/dXas58+KvWQnfaV0BmEx2UNLIuP8Gesrt4jOIDTZB7Hhjy6TISbgfQjRqxHTeG1tbJko9/m/Z7dqlmoXs509J4lEn6GJcmYOYsln3YomNK3frO16pN1hpwMwKQX5zWJ0YH05KwYxPKD7e6rNfLZDjN9vh0te3gwl9YGBQaWx8blfqeCM5ozyUrWWqJ3LvNq3PGno361p/WaUTpmEOeU3YMni25WSfEPDArxy6DecNGe9iGQ5r43H9UNu8ld4zH9HJO8f1PpykwhEy9qKl5Vs6/1BiBe4Njg8h8LQRDnVM8BDoWuUypMwMDDodAg5nfr4Exzo60fT+s349nfvRzo9LH2tHz/Swklz7uWV8WFVYU3XYX057yxEYre616QWwGsQST1i8b1yMpTUB46fVLpJ5ewKpfIkqL5c2eX14ydQt2S5dGIvLp6KTQ/eqzkqCqiU0wF4TMrpACySTeyyR82aMTq5274ywFBSP/3ntNJNdI65ep3KeehH3nxHYyTWOnn6DJrue1i6fHPzEtTMnqUxIgqolNMBeEzK6QAsthLAYsgfN2tGLcQOdW023OszhpK6jmVUnNUsqJyHfvrMXzRGYr3Xj5/Axtad0uUfb2M3vIXcuLbYzVhf/rEPYrhA9hAbs1ohhmHCdtzMWFLXcAjJjGu/qHwNP1CZX/DBn/5HYyT26PrlAem5AJWV5Wj+bp3miCjDExtpuAjry1/OQuwYNw/2rFCYA5HYI1bfyFBSHzl/AYlEn9KNvjZ3tlJ5v5CdX5BOD+Pkae+d8DZy/gLWt3VKl9/UvoLH/1qDE7jMYX35UxIi0dqR3CdDjLXHrLyJ4W1ik4ffUrrRgvnfVCrvF7J74b/44quaI7HP68dPoKtrr3T51rX3a4yGMry21EpWWLJcasx/s74mltIYgxOSuJTcdW5YM55uyB/hm5fhpP7O8T8o3aiyshylUyYpXcMPZNf7/9fbA5ojsdfWf98jPRs+Gq1G88L5miMiSUHphk5pug7ry1uSEC3p6wG0QH3/+FzisGiehuGk/u6g+nKqb94Y7C54lW7kN949rjES+536+BM8vnmXdHluIesaXpsw5nS8Tt/fLK/Fa5UULu3zfiNE613njPnJsOjMdsNJfeT8BaUuVAC4s3GhUnmvk13ONjAwaOtOclbpeumQ0tyMLa0tGqMJvJRkOa+1PGXjHTuGnrL5/k7RVV9+0g/Reg8DaIe+5D4HFix3M3X06qHX/lPpZtFodaC74GUnC/b+4hXNkTinfcuT0mWj0Wo0Rm/VGE2gpSTLeW1fcNlDWMaOoackrxPU+vKjsxBJuAj6kvtKaH7xM5XUfzOgNq4OBLsLfu6NX5Uq98LL3p0kN9bRDz7C1m3d0uV//EhLoF8MNZMdL/RKF61snLlOKmN9jU/2ZDcva4NouavuUDcZ+o6IBWAyqY+cv6D0QAaAB5bfrVTeq0qnTEI0Wm26XCLR54uu99E64i8obSH7KGfD65KSLBfRGIOVZJNUrq7klOT1IpLl7Ka7vvwue2a76g51MS3RZJhK6gDw0iG1pXyVleWBXHc8p/wGqXK7fva85kicN3L+Ah7aIL92vaFhAbvh9UhKlotojMFKEclyuZJUUvJ6EclydotIlgtqUs/aB1F3som9DBp7c0wn9aMffKR8WthdDd9WKu9F8+d9w3SZdHpYy5CHG/UkjqC396B0eXbDayH7MI7oDMJCsmuBc9UL62t8QU/qgPpucdrWrZtO6gDw2L/+m9JNm5uXBO6B/J3v3Ga6zE+f2IOR8xcsiMYdNu+UH8phN7wWSclyk2Hh5hma1EPEadY55K6XXH+eT1DrK2j6ISbQyXCupQ4AB/r6lVvrzY2LlMp7SV11FYqLzS9n89MEufGcPH1G6cAXdsMrOwv5SU5eSFIykhP8HevrSkmdQfjAdsh1w4d1BSCV1AH11vqa1U2Baa3LdL1v3dbtuwly41E58AUAunY9wk1p1CQly90D967BLoKIT8a+PH+flLxuUOsraM5CblMZbUsfpZM6W+vGlE6ZhObmJabKpNPD6Oqx61RAZ6ke+AKITWl4RKu0uEJZrUtxNFKJK1+SiitcO4j1FURJJ28undQBYMXax5RuvmZ1k+9nwt/xj+bH0h/fvCsQrfQs1QNfotFqHtEqrx/y66+1b5yhQRHkk9R+5N9EhfV1iZH6CqKUkzdXSupHP/hIeetYP5/AFSoswL8sX2qqzMDAIHoOvW5RRO6lcuALII5orZk9S2NErmTVJibbJctp3zhDg5WQm/AFGK8H1pcgWw9+5+hqAKWkDgAbdzyt9DD28wlcjfNrTE+QW9/W6esZ77mc+vgTpbXrAND91KN+74a3qpUXVyjbCvecwV0FEY+MIRjvNo1L3gMIZn2RjZST+sj5C1jR8qjSNfx4AlfplElYv26ZqTJdXXvx+vETFkXkfqpr14uLp+In3jn0RWaGbER3EBlnoXaGdFxTHKriCmXbTHwt68uCg0h8JCJRRtsJcMpJHRCT5lS74f022WnN/19qqpWeTg9j446nLYzIGx7e8qRSz09DwwKv9PzIdNFZuYd4m0LZWsXyOmyH/AziIZhPcG2S9wKCWV9BEpYoo63LXktSB0Q3vMqxmtFoNVbF7tAVjqPmzphuesb7krtXua7b/Zqrr7b9njq64Ts71nthAqbMBCMrNzFJQe1wilZo3sPahBiABxXKy4xzp8D6ovHJ/I66L6mPnL+Ate2dSq2sNaubPL+ZSKiwAHuf7TBVpnnZBhz94COLIhJmzrzefJnwdRZEkp9qNzwA7H22w+09P7K/xFZuYtIGtW7AbtifqGKZ+8o6DPllWW1gfdHlwgBk1mondQWgLakDYoewpvseVrpG165HUFftlZMKr7TpwXtNdbtv3daNnsQRCyMSKivLLb+HTqrd8MXFU/HzHbI7NtpCNqnfA+u64bOnTqmwM1HFoJagzkEtVtaXe8Ucum9cslxSVwBakzog1hw3Ll2ldI2ePR2eTOwtdy421e2eSPSh/andFkbkXTq64aPRarTed5emiLRT6W6Lw9qZ8GpHMYrE0aYcycS2Qy1BASIhpxSvEQfry23qIb7XFOxN7m0Q8yXM0rreX3tSB8TEuaAl9rrqKmxqX2H46xOJPvzzg7KrSexRWvoFR+/fkziiPAHTxUM6KchvYjIH4s3eqsReD/XZuK0QMYZVgxmjCuKFSGVMGBCz1+PK0QisL3fJDlGV4fLkbuXGP9shvzxQ63p/S5I6EKzEXlddhZ49xsfRswndrolxspPGwmWlmiMxT3UfBMDVQzoqY5NzYL4lUgRjY/JnoWf5XC2ADyGSQVjxWuHMdd6F+j7Zx6C3Bcf6cpexP+Ojk3t8nL9XEYHaS9NhaF7vf9XFixc/+49QefTiBF8rxWzCG8/Wbd2u7aZujN6Krl2PGP56uxM6oPZvECqPao7GvLkzpuPwK3Hl69xc+32cPH1GuvzIYOIq5SAuVwXx0FV1DuLBkhzn74oy9wlDPNwAwOj3EYN6l+1oz0C8yBh9mSmCeGjGIDf5aDzHMte0YnvTGFhfE5HJL+0wNzQRAfCaga87B1GvycwnZeIe2ZfjGOS620ebB68ldUAklZ2dD0sdP5qVSPTh/nU/ds2e6KHCAqyK3YE1q5sMl+ntPYgH2u3fMa7zhz8wvcQuq3HpKhzoc3TXQxGHyZen8aTTw6hbslw6sVuQ1AHxMCnL90Wamfk+YtCbqLIOQ7yInM18+iFePopw6UVE9YE5lpUJPSsG1lcudiT17ZBrNWdfjFPIneCzL8e6TlTbAQuWB9qS1AGgYloJDux9Qimxp9PDeGhDpy2zxSdSMa0EW1pbEI1WGy7jVG9D6ZRJONEn38vb23sQTes3a4xIXut9d5l6iRqPSmK3KKnHYE0SmMiNMDdRLwb7Y9TNjoSeFQPrazx2JPUU7H9JlmHZz6NlY+pjnTx9BlW3LVXeBrRr1yM48otdjmwuEiosQMudi/Hbw/9hOKGn08NoXLrKkYQeKizAk5sfUrpGQ8MC18wgb39qt/L69eLiqTiw9wk3jbHHIX7B7WR2wlAcgNrblLMOw76EDrC+nFIFbyT0cxDd95bUr21JHRAb1DSt34yWVY8rXaeyshyHX4mj+/F1tpzMFSosQPPC+eh/dY/pGe51S5Y70n09d8Z0/HxHu6nehFzWrG5C5w9/gNIpkzREpuaB9k6lnQsBkdh79nS4aTtZL+zQFYdo4Wvbo9om7XAmQcXB+rJbzOkADDgHUb8pq25gW/f7WBXTSrBuRRMaGhYoX2tgYBA/eeJZvPHuca1j7nNnTMfC+bW4+65FpocNWlY9jq6XDmmLJZ9QYQHKS0tQ+/Wb0PC92y3bbKaray/+6+0B9J94X2nSmYpQYQE2PXiv9DyB0RKJPqxt7zT0vVjU/Z61EoDawnzjVCbnFEFMMNI9fqvbEMRDPulsGKyvUazufk/B3S31YxAt9JSVNyi1WQsAAAWTSURBVHEsqWfpmEQ3WiLRh+Tht/DO8T/ggz+dNpXkK6aVYMa1X8TX5s6WSuSAGIN+eMuTlk3oCxUWoHF+DQDgq1/5EoqKJqOm5mZt9WdWItGH4eGzGDh+EiMjf8XpM3+xrWei5c7FpnpOJrJ1Wzeef/HghMnd4qQOiNbdPRbfAwBaoL42Npa5huxZ3FZqh4jNTa3NGFhfVib1MMQ8ETfWLyAmxbXBhp9Jx5M6cClRrV+3zJLklB2HTQ2dwqlTf/7sz2+95SYAwNSpRcrd1AMDg1ix9jHL93DXtbzLSnYug6uZPQvdTz2q9aXwuZ6Xxu31sSGpA/Kzd80wO/kol6LMdayO16hnIOJJORtGTkGvL6tb6kUQPV4r4Z7kbnuPkSuS+mf3tzi5WyGR6MOunz1vW+uUSX2c+0ksL8xnvOETm5I6ILro4rDuwaQrqWeFIR6kMdj/MM2uN26De5P5WGEEs77smP0OiOQeg6hjp7rjhyDijtt9Y1snyuUzcv4Cul46hKrblqJx6SoMDAw6HVJOW7d1o/b2GBYtW+eKddxBNnL+Atqf2o1Z1fXYuq1beQc6ABj526caIpO2D+LB3w5vTLRKQTxAwxCzvu2YzX8sc68wxAM8ZcM9dUmB9WWlsxA9XmGIyYo7IL8ls1n7ASzGpR39bOeqlvp4KqaVoC5yi6WTv4zKds0eePO3jp19zpa6MXXVVUpzI2pvj10xlGJjS3207O5V9VDbJewYLu2epbI9rVFhiFm+2Y9qi2kIl8fvpvFyHcJgfVktDPF7VJX56NhEZvTvVRIuqGfXJ/XRKqaV4Fs3VeLWW27SMms+n3R6GC+++CoOvfafODb4R9fsZkfmlE6ZhBnXTsPM8HWfTS6cOfP6CV8SZ1XXOzWmnk8El3YSC+PKPcKzu46N/v9JWyKbWHbXs6pR/z/XevlU5pPdOW309xQUrC97RMb8b7auxxr7e5WC2kmLlvFUUh9r7ozpKC+7DrNm3oBwWanSLPCBgUG8996HOPLmOzh95i9M4gFSOmUSSqZe/rwcb8KjS5I6EVFOnk7quYz3kL7m6qvx10+vHCcdPHXGsa508hYmdSJyu885HYAVTn38CVvZREQUOK6a/U5ERETymNSJiIh8gkmdiIjIJ5jUiYiIfIJJnYiIyCeY1ImIiHyCSZ2IiMgnmNSJiIh8gkmdiIjIJ5jUiYiIfIJJnYiIyCeY1ImIiHyCSZ2IiMgnmNSJiIh8gkmdiIjIJz5L6qHyaNjBOIiIiEjRZ0l9ZDCRcjAOIiIiUsTudyIiIp9gUiciIvKJsUl9yJEoiNyPvxtE5Hpjk3rKiSCIPCDldABERPmMTepJJ4Ig8oCk0wEQEeXDpE5kTNLpAIiI8rnq4sWLl/1BqDx6McfXEgXWyGDiKqdjICLKZ7zZ7/ttj4LI3fg7QUSeMF5Sj9sdBJHLxZ0OgIjIiCu63wEgVB5NASizPRoi9xkaGUyEnQ6CiMiIXJvPtNkZBJGLtTkdABGRUeO21AG21onAVjoRecxE28SutC0KInfi7wAReUrOpD4ymNgHzvql4Nqf+R0gIvKMfAe6xMA9ryl4hiB+9omIPGXCpD4ymDgLoB7AOXvCIXLcOQD1mZ99IiJPyXv06shgoh8cW6TgWJn5mSci8hxD56mPDCbiAJqsDYXIcU2Zn3UiIk8ylNSByxI7u+LJb86BCZ2IfCDnOvVcQuXRKgD7wDXs5A9DEGPo7HInIs8z3FLPyjz8qsDlbuR9+wFUMaETkV+YbqmPFiqP1gPYDrbayVuGICbEcR06EfmKUlLPCpVHYxB7ZDO5k5sNAWjj2DkR+ZWWpJ6VabnHACzSdlEidfsBxNkyJyK/05rURwuVRyMAsp8w2IonewwBSAFIAkiODCaSTgZDRGSn/wO/dOrOlSjcsAAAAABJRU5ErkJggg=="},1082:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6260),i=n(6740),o=n(3666);function a(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function s(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(e),s=(0,r.A)(t),l=a(n,s),u=Math.abs((0,i.default)(n,s));n.setDate(n.getDate()-l*u);var c=l*(u-Number(a(n,s)===-l));return 0===c?0:c}},1104:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6260),i=n(3666),o=n(1740);function a(e){(0,i.A)(1,arguments);var t=(0,r.A)(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=(0,o.A)(a),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=(0,o.A)(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},1529:(e,t,n)=>{"use strict";n.d(t,{cY:()=>p,FA:()=>O,g:()=>R,dM:()=>j,u:()=>s,Uj:()=>a,p9:()=>Y,Fy:()=>y,tD:()=>B,bD:()=>L,hp:()=>V,T9:()=>h,Tj:()=>c,yU:()=>d,XA:()=>f,mS:()=>l,Ku:()=>Q,ZQ:()=>x,sr:()=>C,zJ:()=>g,c1:()=>T,Im:()=>M,lT:()=>I,zW:()=>_,jZ:()=>S,lV:()=>E,nr:()=>D,Ov:()=>A,gE:()=>m,Am:()=>z,I9:()=>U,P1:()=>w,eX:()=>P});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==l)throw new o;const u=t<<2|a>>4;if(r.push(u),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UPLOAD_ENDPOINT:"https://chunkeddropboxupload-owwuszp6nq-uc.a.run.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},c=e=>{var t,n;return null===(n=null===(t=u())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=c(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=u())||void 0===t?void 0:t[`_${e}`]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function m(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(o)),""].join(".")}const v={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||v[e]===t||v[e]||b)return;function n(e){return`__firebase__banner__${e}`}v[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function k(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function T(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function E(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function D(){return!k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){return!k()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function j(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class R extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(N,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new R(n,o,t)}}const N=/\{\$([^}]+)}/g;function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(F(n)&&F(o)){if(!L(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F(e){return null!==e&&"object"===typeof e}function z(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function B(e,t){const n=new W(e,t);return n.subscribe.bind(n)}class W{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q(){}const H=1e3,$=2,K=144e5,G=.5;function Y(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:H)*Math.pow(t,e),r=Math.round(G*n*(Math.random()-.5)*2);return Math.min(K,n+r)}function Q(e){return e&&e._delegate?e._delegate:e}},1555:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(2239),i=n(6260),o=n(8355),a=n(3666);function s(e,t){var n,s,l,u,c,d,h,f;(0,a.A)(1,arguments);var p=(0,r.q)(),g=(0,o.A)(null!==(n=null!==(s=null!==(l=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:p.weekStartsOn)&&void 0!==s?s:null===(h=p.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,i.A)(e),y=m.getDay(),v=6+(y<g?-7:0)-(y-g);return m.setDate(m.getDate()+v),m.setHours(23,59,59,999),m}},1740:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e),n=t.getUTCDay(),o=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t}},1751:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=d(n(5173)),a=d(n(5237)),s=n(7384),l=n(5889),u=d(n(1824)),c=d(n(8139));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,r,o=y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),w(v(t=o.call(this,e)),"handleRangeChange",function(e){var n=t.props,r=n.onChange,i=n.ranges,o=n.focusedRange,a=i[o[0]];r&&a&&r(w({},a.key||"range".concat(o[0]+1),p(p({},a),e)))}),t.state={rangeOffset:0,focusedInput:-1},t}return t=s,(n=[{key:"getRangeOptionValue",value:function(e){var t=this.props,n=t.ranges,r=void 0===n?[]:n,i=t.focusedRange,o=void 0===i?[]:i;if("function"!==typeof e.getCurrentValue)return"";var a=r[o[0]]||{};return e.getCurrentValue(a)||""}},{key:"getSelectedRange",value:function(e,t){var n=e.findIndex(function(e){return!(!e.startDate||!e.endDate||e.disabled)&&t.isSelected(e)});return{selectedRange:e[n],focusedRangeIndex:n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.headerContent,r=t.footerContent,o=t.onPreviewChange,s=t.inputRanges,l=t.staticRanges,d=t.ranges,h=t.renderStaticRangeLabel,f=t.rangeColors,p=t.className;return i.default.createElement("div",{className:(0,c.default)(a.default.definedRangesWrapper,p)},n,i.default.createElement("div",{className:a.default.staticRanges},l.map(function(t,n){var r,s=e.getSelectedRange(d,t),l=s.selectedRange,u=s.focusedRangeIndex;return r=t.hasCustomRendering?h(t):t.label,i.default.createElement("button",{type:"button",className:(0,c.default)(a.default.staticRange,w({},a.default.staticRangeSelected,Boolean(l))),style:{color:l?l.color||f[u]:null},key:n,onClick:function(){return e.handleRangeChange(t.range(e.props))},onFocus:function(){return o&&o(t.range(e.props))},onMouseOver:function(){return o&&o(t.range(e.props))},onMouseLeave:function(){o&&o()}},i.default.createElement("span",{tabIndex:-1,className:a.default.staticRangeLabel},r))})),i.default.createElement("div",{className:a.default.inputRanges},s.map(function(t,n){return i.default.createElement(u.default,{key:n,styles:a.default,label:t.label,onFocus:function(){return e.setState({focusedInput:n,rangeOffset:0})},onBlur:function(){return e.setState({rangeOffset:0})},onChange:function(n){return e.handleRangeChange(t.range(n,e.props))},value:e.getRangeOptionValue(t)})})),r)}}])&&g(t.prototype,n),r&&g(t,r),s}(i.Component);x.propTypes={inputRanges:o.default.array,staticRanges:o.default.array,ranges:o.default.arrayOf(l.rangeShape),focusedRange:o.default.arrayOf(o.default.number),onPreviewChange:o.default.func,onChange:o.default.func,footerContent:o.default.any,headerContent:o.default.any,rangeColors:o.default.arrayOf(o.default.string),className:o.default.string,renderStaticRangeLabel:o.default.func},x.defaultProps={inputRanges:s.defaultInputRanges,staticRanges:s.defaultStaticRanges,ranges:[],rangeColors:["#3d91ff","#3ecf8e","#fed14c"],focusedRange:[0,0]};var S=x;t.default=S},1783:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=O(n(5173)),a=n(5889),s=O(n(6105)),l=O(n(8199)),u=n(3974),c=O(n(8139)),d=O(n(8082)),h=n(9627),f=O(n(5277)),p=O(n(775)),g=O(n(1082)),m=O(n(2431)),y=O(n(5479)),v=O(n(6255)),b=O(n(2128)),w=O(n(3764)),x=O(n(3778)),S=O(n(2950)),k=O(n(234)),T=O(n(407)),C=O(n(1555)),E=O(n(238)),I=O(n(1010)),D=O(n(9993)),A=O(n(3498)),_=O(n(6819)),P=O(n(8001)),j=O(n(5237)),R=n(1888);function O(e){return e&&e.__esModule?e:{default:e}}function N(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function L(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return q(e)}(this,n)}}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,e);var t,n,r,o=W(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),$(q(n=o.call(this,e,t)),"focusToDate",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.scroll.enabled){var i=(0,w.default)(e,t.minDate,n.dateOptions),o=n.list.getVisibleRange();r&&o.includes(i)||(n.isFirstRender=!0,n.list.scrollTo(i),n.setState({focusedDate:e}))}else{if(r&&t.preventSnapRefocus){var a=(0,w.default)(e,n.state.focusedDate),s="forwards"===t.calendarFocus&&a>=0,l="backwards"===t.calendarFocus&&a<=0;if((s||l)&&Math.abs(a)<t.months)return}n.setState({focusedDate:e})}}),$(q(n),"updateShownDate",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.scroll.enabled?U(U({},e),{},{months:n.list.getVisibleRange().length}):e,r=(0,u.calcFocusDate)(n.state.focusedDate,t);n.focusToDate(r,t)}),$(q(n),"updatePreview",function(e){if(e){var t={startDate:e,endDate:e,color:n.props.color};n.setState({preview:t})}else n.setState({preview:null})}),$(q(n),"changeShownDate",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set",r=n.state.focusedDate,i=n.props,o=i.onShownDateChange,a=i.minDate,s=i.maxDate,l={monthOffset:function(){return(0,_.default)(r,e)},setMonth:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return(0,x.default)(r,e)}),setYear:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return(0,S.default)(r,e)}),set:function(){return e}},u=(0,p.default)([(0,f.default)([l[t](),a]),s]);n.focusToDate(u,n.props,!1),o&&o(u)}),$(q(n),"handleRangeFocusChange",function(e,t){n.props.onRangeFocusChange&&n.props.onRangeFocusChange([e,t])}),$(q(n),"handleScroll",function(){var e=n.props,t=e.onShownDateChange,r=e.minDate,i=n.state.focusedDate,o=q(n).isFirstRender,a=n.list.getVisibleRange();if(void 0!==a[0]){var s=(0,_.default)(r,a[0]||0);!(0,m.default)(s,i)&&!o&&(n.setState({focusedDate:s}),t&&t(s)),n.isFirstRender=!1}}),$(q(n),"renderMonthAndYear",function(e,t,r){var o=r.showMonthArrow,s=r.minDate,l=r.maxDate,u=r.showMonthAndYearPickers,d=r.ariaLabels,h=(l||a.defaultProps.maxDate).getFullYear(),f=(s||a.defaultProps.minDate).getFullYear(),p=n.styles;return i.default.createElement("div",{onMouseUp:function(e){return e.stopPropagation()},className:p.monthAndYearWrapper},o?i.default.createElement("button",{type:"button",className:(0,c.default)(p.nextPrevButton,p.prevButton),onClick:function(){return t(-1,"monthOffset")},"aria-label":d.prevButton},i.default.createElement("i",null)):null,u?i.default.createElement("span",{className:p.monthAndYearPickers},i.default.createElement("span",{className:p.monthPicker},i.default.createElement("select",{value:e.getMonth(),onChange:function(e){return t(e.target.value,"setMonth")},"aria-label":d.monthPicker},n.state.monthNames.map(function(e,t){return i.default.createElement("option",{key:t,value:t},e)}))),i.default.createElement("span",{className:p.monthAndYearDivider}),i.default.createElement("span",{className:p.yearPicker},i.default.createElement("select",{value:e.getFullYear(),onChange:function(e){return t(e.target.value,"setYear")},"aria-label":d.yearPicker},new Array(h-f+1).fill(h).map(function(e,t){var n=e-t;return i.default.createElement("option",{key:n,value:n},n)})))):i.default.createElement("span",{className:p.monthAndYearPickers},n.state.monthNames[e.getMonth()]," ",e.getFullYear()),o?i.default.createElement("button",{type:"button",className:(0,c.default)(p.nextPrevButton,p.nextButton),onClick:function(){return t(1,"monthOffset")},"aria-label":d.nextButton},i.default.createElement("i",null)):null)}),$(q(n),"renderDateDisplay",function(){var e=n.props,t=e.focusedRange,r=e.color,o=e.ranges,a=e.rangeColors,s=e.dateDisplayFormat,u=e.editableDateInputs,d=e.startDatePlaceholder,h=e.endDatePlaceholder,f=e.ariaLabels,p=a[t[0]]||r,g=n.styles;return i.default.createElement("div",{className:g.dateDisplayWrapper},o.map(function(e,r){return!1===e.showDateDisplay||e.disabled&&!e.showDateDisplay?null:i.default.createElement("div",{className:g.dateDisplay,key:r,style:{color:e.color||p}},i.default.createElement(l.default,{className:(0,c.default)(g.dateDisplayItem,$({},g.dateDisplayItemActive,t[0]===r&&0===t[1])),readOnly:!u,disabled:e.disabled,value:e.startDate,placeholder:d,dateOptions:n.dateOptions,dateDisplayFormat:s,ariaLabel:f.dateInput&&f.dateInput[e.key]&&f.dateInput[e.key].startDate,onChange:n.onDragSelectionEnd,onFocus:function(){return n.handleRangeFocusChange(r,0)}}),i.default.createElement(l.default,{className:(0,c.default)(g.dateDisplayItem,$({},g.dateDisplayItemActive,t[0]===r&&1===t[1])),readOnly:!u,disabled:e.disabled,value:e.endDate,placeholder:h,dateOptions:n.dateOptions,dateDisplayFormat:s,ariaLabel:f.dateInput&&f.dateInput[e.key]&&f.dateInput[e.key].endDate,onChange:n.onDragSelectionEnd,onFocus:function(){return n.handleRangeFocusChange(r,1)}}))}))}),$(q(n),"onDragSelectionStart",function(e){var t=n.props,r=t.onChange;t.dragSelectionEnabled?n.setState({drag:{status:!0,range:{startDate:e,endDate:e},disablePreview:!0}}):r&&r(e)}),$(q(n),"onDragSelectionEnd",function(e){var t=n.props,r=t.updateRange,i=t.displayMode,o=t.onChange;if(t.dragSelectionEnabled)if("date"!==i&&n.state.drag.status){var a={startDate:n.state.drag.range.startDate,endDate:e};"dateRange"!==i||(0,T.default)(a.startDate,e)?n.setState({drag:{status:!1,range:{}}},function(){return o&&o(e)}):n.setState({drag:{status:!1,range:{}}},function(){r&&r(a)})}else o&&o(e)}),$(q(n),"onDragSelectionMove",function(e){var t=n.state.drag;t.status&&n.props.dragSelectionEnabled&&n.setState({drag:{status:t.status,range:{startDate:t.range.startDate,endDate:e},disablePreview:!0}})}),$(q(n),"estimateMonthSize",function(e,t){var r=n.props,i=r.direction,o=r.minDate,a=n.state.scrollArea;if(t&&(n.listSizeCache=t,t[e]))return t[e];if("horizontal"===i)return a.monthWidth;var s=(0,_.default)(o,e),l=(0,u.getMonthDisplayRange)(s,n.dateOptions),c=l.start,d=l.end;return(0,g.default)(d,c,n.dateOptions)+1>35?a.longMonthHeight:a.monthHeight}),n.dateOptions={locale:e.locale},void 0!==e.weekStartsOn&&(n.dateOptions.weekStartsOn=e.weekStartsOn),n.styles=(0,u.generateStyles)([j.default,e.classNames]),n.listSizeCache={},n.isFirstRender=!0,n.state={monthNames:n.getMonthNames(),focusedDate:(0,u.calcFocusDate)(null,e),drag:{status:!1,range:{startDate:null,endDate:null},disablePreview:!1},scrollArea:n.calcScrollArea(e)},n}return t=a,(n=[{key:"getMonthNames",value:function(){var e=this;return L(Array(12).keys()).map(function(t){return e.props.locale.localize.month(t)})}},{key:"calcScrollArea",value:function(e){var t=e.direction,n=e.months,r=e.scroll;if(!r.enabled)return{enabled:!1};var i=r.longMonthHeight||r.monthHeight;return"vertical"===t?{enabled:!0,monthHeight:r.monthHeight||220,longMonthHeight:i||260,calendarWidth:"auto",calendarHeight:(r.calendarHeight||i||240)*n}:{enabled:!0,monthWidth:r.monthWidth||332,calendarWidth:(r.calendarWidth||r.monthWidth||332)*n,monthHeight:i||300,calendarHeight:i||300}}},{key:"componentDidMount",value:function(){var e=this;this.props.scroll.enabled&&setTimeout(function(){return e.focusToDate(e.state.focusedDate)})}},{key:"componentDidUpdate",value:function(e){var t={dateRange:"ranges",date:"date"}[this.props.displayMode];this.props[t]!==e[t]&&this.updateShownDate(this.props),e.locale===this.props.locale&&e.weekStartsOn===this.props.weekStartsOn||(this.dateOptions={locale:this.props.locale},void 0!==this.props.weekStartsOn&&(this.dateOptions.weekStartsOn=this.props.weekStartsOn),this.setState({monthNames:this.getMonthNames()})),(0,h.shallowEqualObjects)(e.scroll,this.props.scroll)||this.setState({scrollArea:this.calcScrollArea(this.props)})}},{key:"renderWeekdays",value:function(){var e=this,t=new Date;return i.default.createElement("div",{className:this.styles.weekDays},(0,I.default)({start:(0,E.default)(t,this.dateOptions),end:(0,C.default)(t,this.dateOptions)}).map(function(t,n){return i.default.createElement("span",{className:e.styles.weekDay,key:n},(0,D.default)(t,e.props.weekdayDisplayFormat,e.dateOptions))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.showDateDisplay,r=t.onPreviewChange,o=t.scroll,a=t.direction,l=t.disabledDates,u=t.disabledDay,h=t.maxDate,f=t.minDate,p=t.rangeColors,g=t.color,m=t.navigatorRenderer,x=t.className,S=t.preview,k=this.state,T=k.scrollArea,C=k.focusedDate,E="vertical"===a,I=m||this.renderMonthAndYear,D=this.props.ranges.map(function(e,t){return U(U({},e),{},{color:e.color||p[t]||g})});return i.default.createElement("div",{className:(0,c.default)(this.styles.calendarWrapper,x),onMouseUp:function(){return e.setState({drag:{status:!1,range:{}}})},onMouseLeave:function(){e.setState({drag:{status:!1,range:{}}})}},n&&this.renderDateDisplay(),I(C,this.changeShownDate,this.props),o.enabled?i.default.createElement("div",null,E&&this.renderWeekdays(this.dateOptions),i.default.createElement("div",{className:(0,c.default)(this.styles.infiniteMonths,E?this.styles.monthsVertical:this.styles.monthsHorizontal),onMouseLeave:function(){return r&&r()},style:{width:T.calendarWidth+11,height:T.calendarHeight+11},onScroll:this.handleScroll},i.default.createElement(d.default,{length:(0,w.default)((0,v.default)(h),(0,y.default)((0,b.default)(f),-1),this.dateOptions),treshold:500,type:"variable",ref:function(t){return e.list=t},itemSizeEstimator:this.estimateMonthSize,axis:E?"y":"x",itemRenderer:function(t,n){var o=(0,_.default)(f,t);return i.default.createElement(s.default,M({},e.props,{onPreviewChange:r||e.updatePreview,preview:S||e.state.preview,ranges:D,key:n,drag:e.state.drag,dateOptions:e.dateOptions,disabledDates:l,disabledDay:u,month:o,onDragSelectionStart:e.onDragSelectionStart,onDragSelectionEnd:e.onDragSelectionEnd,onDragSelectionMove:e.onDragSelectionMove,onMouseLeave:function(){return r&&r()},styles:e.styles,style:E?{height:e.estimateMonthSize(t)}:{height:T.monthHeight,width:e.estimateMonthSize(t)},showMonthName:!0,showWeekDays:!E}))}}))):i.default.createElement("div",{className:(0,c.default)(this.styles.months,E?this.styles.monthsVertical:this.styles.monthsHorizontal)},new Array(this.props.months).fill(null).map(function(t,n){var o=(0,_.default)(e.state.focusedDate,n);return"backwards"===e.props.calendarFocus&&(o=(0,A.default)(e.state.focusedDate,e.props.months-1-n)),i.default.createElement(s.default,M({},e.props,{onPreviewChange:r||e.updatePreview,preview:S||e.state.preview,ranges:D,key:n,drag:e.state.drag,dateOptions:e.dateOptions,disabledDates:l,disabledDay:u,month:o,onDragSelectionStart:e.onDragSelectionStart,onDragSelectionEnd:e.onDragSelectionEnd,onDragSelectionMove:e.onDragSelectionMove,onMouseLeave:function(){return r&&r()},styles:e.styles,showWeekDays:!E||0===n,showMonthName:!E||n>0}))})))}}])&&V(t.prototype,n),r&&V(t,r),a}(i.PureComponent);K.defaultProps={showMonthArrow:!0,showMonthAndYearPickers:!0,disabledDates:[],disabledDay:function(){},classNames:{},locale:P.default,ranges:[],focusedRange:[0,0],dateDisplayFormat:"MMM d, yyyy",monthDisplayFormat:"MMM yyyy",weekdayDisplayFormat:"E",dayDisplayFormat:"d",showDateDisplay:!0,showPreview:!0,displayMode:"date",months:1,color:"#3d91ff",scroll:{enabled:!1},direction:"vertical",maxDate:(0,k.default)(new Date,20),minDate:(0,k.default)(new Date,-100),rangeColors:["#3d91ff","#3ecf8e","#fed14c"],startDatePlaceholder:"Early",endDatePlaceholder:"Continuous",editableDateInputs:!1,dragSelectionEnabled:!0,fixedHeight:!1,calendarFocus:"forwards",preventSnapRefocus:!1,ariaLabels:{}},K.propTypes={showMonthArrow:o.default.bool,showMonthAndYearPickers:o.default.bool,disabledDates:o.default.array,disabledDay:o.default.func,minDate:o.default.object,maxDate:o.default.object,date:o.default.object,onChange:o.default.func,onPreviewChange:o.default.func,onRangeFocusChange:o.default.func,classNames:o.default.object,locale:o.default.object,shownDate:o.default.object,onShownDateChange:o.default.func,ranges:o.default.arrayOf(a.rangeShape),preview:o.default.shape({startDate:o.default.object,endDate:o.default.object,color:o.default.string}),dateDisplayFormat:o.default.string,monthDisplayFormat:o.default.string,weekdayDisplayFormat:o.default.string,weekStartsOn:o.default.number,dayDisplayFormat:o.default.string,focusedRange:o.default.arrayOf(o.default.number),initialFocusedRange:o.default.arrayOf(o.default.number),months:o.default.number,className:o.default.string,showDateDisplay:o.default.bool,showPreview:o.default.bool,displayMode:o.default.oneOf(["dateRange","date"]),color:o.default.string,updateRange:o.default.func,scroll:o.default.shape({enabled:o.default.bool,monthHeight:o.default.number,longMonthHeight:o.default.number,monthWidth:o.default.number,calendarWidth:o.default.number,calendarHeight:o.default.number}),direction:o.default.oneOf(["vertical","horizontal"]),startDatePlaceholder:o.default.string,endDatePlaceholder:o.default.string,navigatorRenderer:o.default.func,rangeColors:o.default.arrayOf(o.default.string),editableDateInputs:o.default.bool,dragSelectionEnabled:o.default.bool,fixedHeight:o.default.bool,calendarFocus:o.default.string,preventSnapRefocus:o.default.bool,ariaLabels:R.ariaLabelsShape};var G=K;t.default=G},1786:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e).getDay();return 0===t||6===t}},1824:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),a=(i=n(5173))&&i.__esModule?i:{default:i};function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,r,i=c(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(d(n=i.call(this,e,t)),"onChange",function(e){var t=n.props.onChange,r=parseInt(e.target.value,10);t(r=isNaN(r)?0:Math.max(Math.min(99999,r),0))}),n}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.value,r=t.label,i=t.placeholder;return n!==e.value||r!==e.label||i!==e.placeholder}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholder,r=e.value,i=e.styles,a=e.onBlur,s=e.onFocus;return o.default.createElement("div",{className:i.inputRange},o.default.createElement("input",{className:i.inputRangeInput,placeholder:n,value:r,min:0,max:99999,onChange:this.onChange,onFocus:s,onBlur:a}),o.default.createElement("span",{className:i.inputRangeLabel},t))}}])&&l(t.prototype,n),r&&l(t,r),a}(o.Component);f.propTypes={value:a.default.oneOfType([a.default.string,a.default.number]),label:a.default.oneOfType([a.default.element,a.default.node]).isRequired,placeholder:a.default.string,styles:a.default.shape({inputRange:a.default.string,inputRangeInput:a.default.string,inputRangeLabel:a.default.string}).isRequired,onBlur:a.default.func.isRequired,onFocus:a.default.func.isRequired,onChange:a.default.func.isRequired},f.defaultProps={value:"",placeholder:"-"};var p=f;t.default=p},1888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ariaLabelsShape=void 0;var r,i=(r=n(5173))&&r.__esModule?r:{default:r};var o=i.default.shape({dateInput:i.default.objectOf(i.default.shape({startDate:i.default.string,endDate:i.default.string})),monthPicker:i.default.string,yearPicker:i.default.string,prevButton:i.default.string,nextButton:i.default.string});t.ariaLabelsShape=o},1903:()=>{},2128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},2217:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6260),i=n(3666),o=n(9511),a=n(8355),s=n(2239);function l(e,t){var n,l,u,c,d,h,f,p;(0,i.A)(1,arguments);var g=(0,r.A)(e),m=g.getUTCFullYear(),y=(0,s.q)(),v=(0,a.A)(null!==(n=null!==(l=null!==(u=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==u?u:y.firstWeekContainsDate)&&void 0!==l?l:null===(f=y.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(m+1,0,v),b.setUTCHours(0,0,0,0);var w=(0,o.A)(b,t),x=new Date(0);x.setUTCFullYear(m,0,v),x.setUTCHours(0,0,0,0);var S=(0,o.A)(x,t);return g.getTime()>=w.getTime()?m+1:g.getTime()>=S.getTime()?m:m-1}},2239:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r={};function i(){return r}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2395:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FunctionsError:()=>f,connectFunctionsEmulator:()=>I,getFunctions:()=>E,httpsCallable:()=>D,httpsCallableFromURL:()=>A});var r=n(52),i=n(1529),o=n(8812);const a="type.googleapis.com/google.protobuf.Int64Value",s="type.googleapis.com/google.protobuf.UInt64Value";function l(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function u(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>u(e));if("function"===typeof e||"object"===typeof e)return l(e,e=>u(e));throw new Error("Data cannot be encoded in JSON: "+e)}function c(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case a:case s:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>c(e)):"function"===typeof e||"object"===typeof e?l(e,e=>c(e)):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends i.g{constructor(e,t,n){super(`${d}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,f.prototype)}}function p(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new f("internal","internal");r=h[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=c(n))}}catch(o){}return"ok"===r?null:new f(r,i,n)}class g{constructor(e,t,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===i||void 0===i||i.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const m="us-central1",y=/^data: (.*?)(?:\n|$)/;class v{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new g(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=m}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function b(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return S(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return k(e,i,n,r||{})}(e,t,n,r),r}async function w(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(a){return{status:0,json:null}}let o=null;try{o=await i.json()}catch(a){}return{status:i.status,json:o}}async function x(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function S(e,t,n,r){const i={data:n=u(n)},o=await x(e,r),a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new f("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),s=await Promise.race([w(t,i,o,e.fetchImpl),a.promise,e.cancelAllRequests]);if(a.cancel(),!s)throw new f("cancelled","Firebase Functions instance was deleted.");const l=p(s.status,s.json);if(l)throw l;if(!s.json)throw new f("internal","Response is not valid JSON object.");let d=s.json.data;if("undefined"===typeof d&&(d=s.json.result),"undefined"===typeof d)throw new f("internal","Response is missing data field.");return{data:c(d)}}async function k(e,t,n,r){var i;const o={data:n=u(n)},a=await x(e,r);let s,l,d;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:a,signal:null===r||void 0===r?void 0:r.signal})}catch(m){if(m instanceof Error&&"AbortError"===m.name){const e=new f("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const e=p(0,null);return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const h=new Promise((e,t)=>{l=e,d=t});null===(i=null===r||void 0===r?void 0:r.signal)||void 0===i||i.addEventListener("abort",()=>{const e=new f("cancelled","Request was cancelled.");d(e)});const g=function(e,t,n,r){const i=(e,r)=>{const i=e.match(y);if(!i)return;const o=i[1];try{const e=JSON.parse(o);if("result"in e)return void t(c(e.result));if("message"in e)return void r.enqueue(c(e.message));if("error"in e){const t=p(0,e);return r.error(t),void n(t)}}catch(a){if(a instanceof f)return r.error(a),void n(a)}},o=new TextDecoder;return new ReadableStream({start(t){let a="";return s();async function s(){if(null===r||void 0===r?void 0:r.aborted){const e=new f("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:u}=await e.read();if(u)return a.trim()&&i(a.trim(),t),void t.close();if(null===r||void 0===r?void 0:r.aborted){const r=new f("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}a+=o.decode(l,{stream:!0});const c=a.split("\n");a=c.pop()||"";for(const e of c)e.trim()&&i(e.trim(),t);return s()}catch(l){const e=l instanceof f?l:p(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(s.body.getReader(),l,d,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=g.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:h}}const T="@firebase/functions",C="0.12.9";function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),o=(0,i.yU)("functions");return o&&I(n,...o),n}function I(e,t,n){!function(e,t,n){const r=(0,i.zJ)(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&((0,i.gE)(e.emulatorOrigin),(0,i.P1)("Functions",!0))}((0,i.Ku)(e),t,n)}function D(e,t,n){return b((0,i.Ku)(e),t,n)}function A(e,t,n){return function(e,t,n){const r=r=>S(e,t,r,n||{});return r.stream=(n,r)=>k(e,t,n,r||{}),r}((0,i.Ku)(e),t,n)}var _;(0,r.om)(new o.uA(d,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new v(r,i,o,a,n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(T,C,_),(0,r.KO)(T,C,"esm2017")},2431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}},2608:(e,t,n)=>{"use strict";n.d(t,{addTaskComment:()=>o,addTaskLog:()=>i});var r=n(5472);async function i(e,t){const n=(0,r.getFirestore)(),i=(0,r.doc)(n,"tasks",e);await(0,r.updateDoc)(i,{log:(0,r.arrayUnion)(t)})}async function o(e,t){const n=(0,r.getFirestore)(),i=(0,r.doc)(n,"tasks",e);await(0,r.updateDoc)(i,{comments:(0,r.arrayUnion)(t)})}},2799:(e,t,n)=>{"use strict";n.d(t,{P2:()=>m});const r=(e,t)=>t.some(t=>e instanceof t);let i,o;const a=new WeakMap,s=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),p(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return l.set(o,t.sort?t.sort():[t]),p(o)}}function f(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(s.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});s.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(p(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),c.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),c.set(t,e)),t}const g=e=>c.get(e);function m(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=p(a);return r&&a.addEventListener("upgradeneeded",e=>{r(p(a.result),e.oldVersion,e.newVersion,p(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return b.set(t,o),o}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},2882:(e,t,n)=>{"use strict";n.d(t,{parseICalEvents:()=>h,aC:()=>f,he:()=>c});var r=n(5472),i=n(5813);const o="icalCache",a=18e5;function s(e){return(0,i.sha256)(e)}async function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=(0,r.getFirestore)(),l=s(e),u=(0,r.doc)(i,o,l),c=Date.now()+a;await(0,r.setDoc)(u,{icalUrl:e,weeklyAvailability:t,expires:c,lastFetched:(0,r.serverTimestamp)(),...n?{rawIcalText:n}:{}})}let u=!1;function c(e){u=!0===e}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return null;const n=await async function(e){const t=(0,r.getFirestore)(),n=s(e),i=(0,r.doc)(t,o,n),a=await(0,r.getDoc)(i);if(!a.exists())return null;const l=a.data();return!l.expires||l.expires<Date.now()?null:l}(e);if(u)return n?n.weeklyAvailability:null;if(n)return n.weeklyAvailability;try{const n=await fetch(e),r=await n.text(),i=h(r),o=new Date(t);o.setHours(0,0,0,0);const a=[],s=i.map(e=>({start:new Date(e.start),end:new Date(e.end)})),u=new Map,c=new Map;for(const e of s){const t=e.end.toISOString().slice(0,10),n=e.start.toISOString().slice(0,10);u.set(t,!0),c.set(n,!0)}for(let e=0;e<7;e++){const t=new Date(o);t.setDate(o.getDate()+e);const n=t.toISOString().slice(0,10),r=t.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"});let i=!1,l=!1;for(const e of s){e.start.toISOString().slice(0,10)===n&&(i=!0),e.start<=t&&e.end>t&&(l=!0)}let d=!l;u.has(n)&&c.has(n)&&(d=!1,i=!0),a.push({date:n,label:r,available:d,isTurn:i})}return await l(e,a,r),a}catch(i){return await l(e,[],null),[]}}function h(e){const t=[],n=/BEGIN:VEVENT([\s\S]*?)END:VEVENT/g;let r;for(;null!==(r=n.exec(e));){const e=r[1],n=/DTSTART(?:;[^:\n]*)?:(\d{8})(T\d{6}Z)?/.exec(e),i=/DTEND(?:;[^:\n]*)?:(\d{8})(T\d{6}Z)?/.exec(e);if(n&&i)if(n[2]||i[2]){const e=new Date(`${n[1].slice(0,4)}-${n[1].slice(4,6)}-${n[1].slice(6,8)}T${n[2]?n[2].slice(1,7):"00:00:00"}`),r=new Date(`${i[1].slice(0,4)}-${i[1].slice(4,6)}-${i[1].slice(6,8)}T${i[2]?i[2].slice(1,7):"00:00:00"}`);t.push({start:e,end:r})}else{const e=new Date(`${n[1].slice(0,4)}-${n[1].slice(4,6)}-${n[1].slice(6,8)}T00:00:00`),r=new Date(`${i[1].slice(0,4)}-${i[1].slice(4,6)}-${i[1].slice(6,8)}T00:00:00`);t.push({start:e,end:r})}}return t}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const n=e.filter(e=>"Scheduling"===e.stage),r=new Date(t);r.setHours(0,0,0,0);const i=[];for(let s=0;s<7;s++){const e=new Date(r);e.setDate(r.getDate()+s),i.push({date:e.toISOString().slice(0,10),label:e.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),tasks:[],hasTurn:!1})}const o=[];for(const s of n){if(!s.ical){o.push(s);continue}let e=[];try{e=await d(s.ical,t)}catch(a){o.push(s);continue}for(let t=0;t<i.length;t++)if(e&&e[t]&&(e[t].available||e[t].isTurn)){const n=!!e[t].isTurn;i[t].tasks.push({task:s,isTurn:n}),n&&(i[t].hasTurn=!0)}}return{days:i,tasksWithoutIcal:o}}},2950:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6260),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e),a=(0,r.A)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(a),n)}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6819),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,i.default)(e,-n)}},3666:(e,t,n)=>{"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>r})},3764:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}},3778:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6260),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e),a=(0,r.A)(t),s=n.getFullYear(),l=n.getDate(),u=new Date(0);u.setFullYear(s,a,15),u.setHours(0,0,0,0);var c=function(e){(0,o.A)(1,arguments);var t=(0,i.A)(e),n=t.getFullYear(),r=t.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}(u);return n.setMonth(a,Math.min(l,c)),n}},3902:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=y(n(5173)),a=y(n(1783)),s=n(5889),l=n(3974),u=y(n(5277)),c=y(n(9519)),d=y(n(775)),h=y(n(5479)),f=y(n(6740)),p=y(n(7278)),g=y(n(8139)),m=y(n(5237));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return C(e)}(this,n)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(s,e);var t,n,r,o=T(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),I(C(n=o.call(this,e,t)),"calcNewSelection",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.focusedRange||n.state.focusedRange,i=n.props,o=i.ranges,a=i.onChange,s=i.maxDate,g=i.moveRangeOnFirstSelection,m=i.retainEndDateOnFirstSelection,y=i.disabledDates,v=o[r[0]];if(!v||!a)return{};var b,w=v.startDate,x=v.endDate,S=new Date;if(t)if(0===r[1]){var k=(0,f.default)(x||S,w);w=e,x=g?(0,h.default)(e,k):m?!x||(0,p.default)(e,x)?x:e:e||S,s&&(x=(0,d.default)([x,s])),b=[r[0],1]}else x=e;else w=e.startDate,x=e.endDate;var T=0===r[1];if((0,p.default)(x,w)){T=!T;var C=[x,w];w=C[0],x=C[1]}var E=y.filter(function(e){return(0,c.default)(e,{start:w,end:x})});(E.length>0&&(T?w=(0,h.default)((0,u.default)(E),1):x=(0,h.default)((0,d.default)(E),-1)),b)||(b=[(0,l.findNextRangeIndex)(n.props.ranges,r[0]),0]);return{wasValid:!(E.length>0),range:{startDate:w,endDate:x},nextFocusRange:b}}),I(C(n),"setSelection",function(e,t){var r=n.props,i=r.onChange,o=r.ranges,a=r.onRangeFocusChange,s=(n.props.focusedRange||n.state.focusedRange)[0],l=o[s];if(l){var u=n.calcNewSelection(e,t);i(I({},l.key||"range".concat(s+1),x(x({},l),u.range))),n.setState({focusedRange:u.nextFocusRange,preview:null}),a&&a(u.nextFocusRange)}}),I(C(n),"handleRangeFocusChange",function(e){n.setState({focusedRange:e}),n.props.onRangeFocusChange&&n.props.onRangeFocusChange(e)}),I(C(n),"updatePreview",function(e){var t;if(e){var r=n.props,i=r.rangeColors,o=r.ranges,a=n.props.focusedRange||n.state.focusedRange,s=(null===(t=o[a[0]])||void 0===t?void 0:t.color)||i[a[0]]||s;n.setState({preview:x(x({},e.range),{},{color:s})})}else n.setState({preview:null})}),n.state={focusedRange:e.initialFocusedRange||[(0,l.findNextRangeIndex)(e.ranges),0],preview:null},n.styles=(0,l.generateStyles)([m.default,e.classNames]),n}return t=s,(n=[{key:"render",value:function(){var e=this;return i.default.createElement(a.default,b({focusedRange:this.state.focusedRange,onRangeFocusChange:this.handleRangeFocusChange,preview:this.state.preview,onPreviewChange:function(t){e.updatePreview(t?e.calcNewSelection(t):null)}},this.props,{displayMode:"dateRange",className:(0,g.default)(this.styles.dateRangeWrapper,this.props.className),onChange:this.setSelection,updateRange:function(t){return e.setSelection(t,!1)},ref:function(t){e.calendar=t}}))}}])&&S(t.prototype,n),r&&S(t,r),s}(i.Component);D.defaultProps={classNames:{},ranges:[],moveRangeOnFirstSelection:!1,retainEndDateOnFirstSelection:!1,rangeColors:["#3d91ff","#3ecf8e","#fed14c"],disabledDates:[]},D.propTypes=x(x({},a.default.propTypes),{},{onChange:o.default.func,onRangeFocusChange:o.default.func,className:o.default.string,ranges:o.default.arrayOf(s.rangeShape),moveRangeOnFirstSelection:o.default.bool,retainEndDateOnFirstSelection:o.default.bool});var A=D;t.default=A},3974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcFocusDate=function(e,t){var n,r=t.shownDate,i=t.date,a=t.months,s=t.ranges,l=t.focusedRange;if("dateRange"===t.displayMode){var d=s[l[0]]||{};n={start:d.startDate,end:d.endDate}}else n={start:i,end:i};n.start=(0,c.default)(n.start||new Date),n.end=(0,u.default)(n.end||n.start);var h=n.start||n.end||r||new Date;if(!e)return r||h;if((0,o.default)(n.start,n.end)>a)return e;return h},t.findNextRangeIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.findIndex(function(e,n){return n>t&&!1!==e.autoFocus&&!e.disabled});return-1!==n?n:e.findIndex(function(e){return!1!==e.autoFocus&&!e.disabled})},t.getMonthDisplayRange=function(e,t,n){var r=(0,c.default)(e,t),o=(0,u.default)(e,t),d=(0,l.default)(r,t),h=(0,s.default)(o,t);n&&(0,a.default)(h,d)<=34&&(h=(0,i.default)(h,7));return{start:d,end:h,startDateOfMonth:r,endDateOfMonth:o}},t.generateStyles=function(e){return e.length?e.filter(function(e){return Boolean(e)}).reduce(function(e,t){return Object.keys(t).forEach(function(n){e[n]=(0,r.default)(e[n],t[n])}),e},{}):{}};var r=d(n(8139)),i=d(n(5479)),o=d(n(3764)),a=d(n(6740)),s=d(n(1555)),l=d(n(238)),u=d(n(6255)),c=d(n(2128));function d(e){return e&&e.__esModule?e:{default:e}}},4016:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=d(n(5173)),a=d(n(3902)),s=d(n(1751)),l=n(3974),u=d(n(8139)),c=d(n(5237));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(d,e);var t,n,r,o=b(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=o.call(this,e)).state={focusedRange:[(0,l.findNextRangeIndex)(e.ranges),0]},t.styles=(0,l.generateStyles)([c.default,e.classNames]),t}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.state.focusedRange;return i.default.createElement("div",{className:(0,u.default)(this.styles.dateRangePickerWrapper,this.props.className)},i.default.createElement(s.default,m({focusedRange:t,onPreviewChange:function(t){return e.dateRange.updatePreview(t?e.dateRange.calcNewSelection(t,"string"===typeof t):null)}},this.props,{range:this.props.ranges[t[0]],className:void 0})),i.default.createElement(a.default,m({onRangeFocusChange:function(t){return e.setState({focusedRange:t})},focusedRange:t},this.props,{ref:function(t){return e.dateRange=t},className:void 0})))}}])&&y(t.prototype,n),r&&y(t,r),d}(i.Component);x.defaultProps={},x.propTypes=p(p(p({},a.default.propTypes),s.default.propTypes),{},{className:o.default.string});var S=x;t.default=S},4123:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(6260),i=n(9511),o=n(2217),a=n(3666),s=n(8355),l=n(2239);var u=6048e5;function c(e,t){(0,a.A)(1,arguments);var n=(0,r.A)(e),c=(0,i.A)(n,t).getTime()-function(e,t){var n,r,u,c,d,h,f,p;(0,a.A)(1,arguments);var g=(0,l.q)(),m=(0,s.A)(null!==(n=null!==(r=null!==(u=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==u?u:g.firstWeekContainsDate)&&void 0!==r?r:null===(f=g.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1),y=(0,o.A)(e,t),v=new Date(0);return v.setUTCFullYear(y,0,m),v.setUTCHours(0,0,0,0),(0,i.A)(v,t)}(n,t).getTime();return Math.round(c/u)+1}},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function T(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(){}function A(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case h:return A((c=e._init)(e._payload),t,i,o,a)}}if(c)return a=a(e),c=""===o?"."+I(e,0):o,x(a)?(i="",null!=c&&(i=c.replace(E,"$&/")+"/"),A(a,t,i,"",function(e){return e})):null!=a&&(C(a)&&(l=a,u=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+c,a=T(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var d,p=""===o?".":o+":";if(x(e))for(var g=0;g<e.length;g++)c+=A(o=e[g],t,i,s=p+I(o,g),a);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(o=e.next()).done;)c+=A(o=o.value,t,i,s=p+I(o,g++),a);else if("object"===s){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(D,D):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function _(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return T(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return T(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,j)}catch(o){j(o)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.0"},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4394:()=>{},4967:(e,t,n)=>{"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{A:()=>r})},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5161:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8355),i=n(6260),o=n(3666);function a(e,t){return(0,o.A)(2,arguments),function(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e).getTime(),a=(0,r.A)(t);return new Date(n+a)}(e,-(0,r.A)(t))}},5173:(e,t,n)=>{e.exports=n(1497)()},5180:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},5237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={dateRangeWrapper:"rdrDateRangeWrapper",calendarWrapper:"rdrCalendarWrapper",dateDisplay:"rdrDateDisplay",dateDisplayItem:"rdrDateDisplayItem",dateDisplayItemActive:"rdrDateDisplayItemActive",monthAndYearWrapper:"rdrMonthAndYearWrapper",monthAndYearPickers:"rdrMonthAndYearPickers",nextPrevButton:"rdrNextPrevButton",month:"rdrMonth",weekDays:"rdrWeekDays",weekDay:"rdrWeekDay",days:"rdrDays",day:"rdrDay",dayNumber:"rdrDayNumber",dayPassive:"rdrDayPassive",dayToday:"rdrDayToday",dayStartOfWeek:"rdrDayStartOfWeek",dayEndOfWeek:"rdrDayEndOfWeek",daySelected:"rdrDaySelected",dayDisabled:"rdrDayDisabled",dayStartOfMonth:"rdrDayStartOfMonth",dayEndOfMonth:"rdrDayEndOfMonth",dayWeekend:"rdrDayWeekend",dayStartPreview:"rdrDayStartPreview",dayInPreview:"rdrDayInPreview",dayEndPreview:"rdrDayEndPreview",dayHovered:"rdrDayHovered",dayActive:"rdrDayActive",inRange:"rdrInRange",endEdge:"rdrEndEdge",startEdge:"rdrStartEdge",prevButton:"rdrPprevButton",nextButton:"rdrNextButton",selected:"rdrSelected",months:"rdrMonths",monthPicker:"rdrMonthPicker",yearPicker:"rdrYearPicker",dateDisplayWrapper:"rdrDateDisplayWrapper",definedRangesWrapper:"rdrDefinedRangesWrapper",staticRanges:"rdrStaticRanges",staticRange:"rdrStaticRange",inputRanges:"rdrInputRanges",inputRange:"rdrInputRange",inputRangeInput:"rdrInputRangeInput",dateRangePickerWrapper:"rdrDateRangePickerWrapper",staticRangeLabel:"rdrStaticRangeLabel",staticRangeSelected:"rdrStaticRangeSelected",monthName:"rdrMonthName",infiniteMonths:"rdrInfiniteMonths",monthsVertical:"rdrMonthsVertical",monthsHorizontal:"rdrMonthsHorizontal"}},5277:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),i=n(6260),o=n(3666);function a(e){var t,n;if((0,o.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=(0,i.A)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)}),n||new Date(NaN)}},5472:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:()=>wf,AggregateField:()=>dh,AggregateQuerySnapshot:()=>hh,Bytes:()=>fh,CACHE_SIZE_UNLIMITED:()=>Yd,CollectionReference:()=>Fd,DocumentReference:()=>Ld,DocumentSnapshot:()=>_f,FieldPath:()=>ph,FieldValue:()=>mh,Firestore:()=>Qd,FirestoreError:()=>F,GeoPoint:()=>yh,LoadBundleTask:()=>Gd,PersistentCacheIndexManager:()=>Dp,Query:()=>Md,QueryCompositeFilterConstraint:()=>ef,QueryConstraint:()=>Qh,QueryDocumentSnapshot:()=>jf,QueryEndAtConstraint:()=>hf,QueryFieldFilterConstraint:()=>Jh,QueryLimitConstraint:()=>af,QueryOrderByConstraint:()=>rf,QuerySnapshot:()=>Rf,QueryStartAtConstraint:()=>uf,SnapshotMetadata:()=>Af,Timestamp:()=>Se,Transaction:()=>yp,VectorValue:()=>vh,WriteBatch:()=>pp,_AutoId:()=>X,_ByteString:()=>Pn,_DatabaseId:()=>Hn,_DocumentKey:()=>ue,_EmptyAppCheckTokenProvider:()=>G,_EmptyAuthCredentialsProvider:()=>V,_FieldPath:()=>le,_TestingHooks:()=>Lp,_cast:()=>me,_debugAssert:()=>N,_internalAggregationQueryToProtoRunAggregationQueryRequest:()=>Mp,_internalQueryToProtoQueryTarget:()=>Np,_isBase64Available:()=>_n,_logWarn:()=>_,_validateIsNotUsedTogether:()=>de,addDoc:()=>Kf,aggregateFieldEqual:()=>Ef,aggregateQuerySnapshotEqual:()=>If,and:()=>nf,arrayRemove:()=>Sp,arrayUnion:()=>xp,average:()=>Tf,clearIndexedDbPersistence:()=>ih,collection:()=>zd,collectionGroup:()=>Ud,connectFirestoreEmulator:()=>Nd,count:()=>Cf,deleteAllPersistentCacheIndexes:()=>jp,deleteDoc:()=>$f,deleteField:()=>bp,disableNetwork:()=>sh,disablePersistentCacheIndexAutoCreation:()=>Pp,doc:()=>Vd,documentId:()=>gh,documentSnapshotFromJSON:()=>Pf,enableIndexedDbPersistence:()=>th,enableMultiTabIndexedDbPersistence:()=>nh,enableNetwork:()=>ah,enablePersistentCacheIndexAutoCreation:()=>_p,endAt:()=>pf,endBefore:()=>ff,ensureFirestoreConfigured:()=>Zd,executeWrite:()=>Xf,getAggregateFromServer:()=>ep,getCountFromServer:()=>Zf,getDoc:()=>Lf,getDocFromCache:()=>zf,getDocFromServer:()=>Uf,getDocs:()=>Vf,getDocsFromCache:()=>Bf,getDocsFromServer:()=>Wf,getFirestore:()=>Jd,getPersistentCacheIndexManager:()=>Ap,increment:()=>kp,initializeFirestore:()=>Xd,limit:()=>sf,limitToLast:()=>lf,loadBundle:()=>uh,memoryEagerGarbageCollector:()=>op,memoryLocalCache:()=>sp,memoryLruGarbageCollector:()=>ap,namedQuery:()=>ch,onSnapshot:()=>Gf,onSnapshotResume:()=>Yf,onSnapshotsInSync:()=>Qf,or:()=>tf,orderBy:()=>of,persistentLocalCache:()=>lp,persistentMultipleTabManager:()=>hp,persistentSingleTabManager:()=>dp,query:()=>Xh,queryEqual:()=>Wd,querySnapshotFromJSON:()=>Of,refEqual:()=>Bd,runTransaction:()=>vp,serverTimestamp:()=>wp,setDoc:()=>qf,setIndexConfiguration:()=>Ep,setLogLevel:()=>I,snapshotEqual:()=>Mf,startAfter:()=>df,startAt:()=>cf,sum:()=>kf,terminate:()=>lh,updateDoc:()=>Hf,vector:()=>Tp,waitForPendingWrites:()=>oh,where:()=>Zh,writeBatch:()=>Cp});var r,i,o=n(52),a=n(8812),s=n(443),l=n(1529),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function o(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function s(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new o([0|e],0>e?-1:0)}):new o([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return g(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}var u=s(0),d=s(1),h=s(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function g(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(d)}function m(e,t){return e.add(g(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(u,u);if(p(e))return t=b(g(e),t),new v(g(t.g),g(t.h));if(p(t))return t=b(e,g(t)),new v(g(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),o=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=o.add(r);0>=a.l(e)&&(i=i.add(n),o=a),r=x(r,1),n=x(n,1)}return t=m(e,i.j(t)),new v(i,t)}for(i=u;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(o=l(n)).j(t);p(a)||0<a.l(e);)a=(o=l(n-=r)).j(t);f(o)&&(o=d),i=i.add(o),e=m(e,a)}return new v(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}(e=o.prototype).m=function(){if(p(this))return-g(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+g(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=b(n,t).g,o=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=m(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?g(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),s=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new o(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return u;if(p(this))return p(e)?g(this).j(g(e)):g(g(this).j(e));if(p(e))return g(this.j(g(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,s=65535&this.i(r),c=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=s*d,y(n,2*r+2*i),n[2*r+2*i+1]+=a*d,y(n,2*r+2*i+1),n[2*r+2*i+1]+=s*c,y(n,2*r+2*i+1),n[2*r+2*i+2]+=a*c,y(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new o(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=c.Md5=t,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return g(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=u,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),s=parseInt(t.substring(o,o+a),n);8>a?(a=l(Math.pow(n,a)),i=i.j(a).add(l(s))):i=(i=i.j(r)).add(l(s))}return i},r=c.Integer=o}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,g,m,y,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function S(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function T(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function E(e){return E[" "](e),e}E[" "]=function(){};var I=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){i.setTimeout(()=>{throw e},0)}function O(){var e=z;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new M,e=>e.reset());class M{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,z=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},U=()=>{const e=i.Promise.resolve(void 0);L=()=>{e.then(V)}};var V=()=>{for(var e;e=O();){try{e.h.call(e.g)}catch(n){R(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function B(){this.s=this.s,this.C=this.C}function W(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},W.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function H(e,t){if(W.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(I){e:{try{E(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}x(H,W);var $={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),G=0;function Y(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++G,this.da=this.fa=!1}function Q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Z(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Y(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ne(e,t[o],n,r,i);return null}return n=de(n),e&&e[K]?e.K(t,n,a(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=ue(e);if(l||(e[ee]=l=new X(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)q||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(se(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ie(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ie(e,t[o],n,r,i);return null}return n=de(n),e&&e[K]?e.L(t,n,a(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function oe(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)oe(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=de(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(o=e.g[t],n,r,i))&&(Q(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=ue(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,i)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[K])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(se(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ue(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):Q(e)}}}function se(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ae(e),e=n.call(r,t)}return e}function ue(e){return(e=e[ee])instanceof X?e:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ce]||(e[ce]=function(t){return e.handleEvent(t)}),e[ce])}function he(){B.call(this),this.i=new X(this),this.M=this,this.F=null}function fe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new W(t,e);else if(t instanceof W)t.target=t.target||e;else{var i=t;P(t=new W(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=pe(a,r,!0,t)&&i}if(i=pe(a=t.g=e,r,!0,t)&&i,i=pe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=pe(a=t.g=n[o],r,!1,t)&&i}function pe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&J(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function ge(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function me(e){e.g=ge(()=>{e.g=null,e.i&&(e.i=!1,me(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,B),he.prototype[K]=!0,he.prototype.removeEventListener=function(e,t,n,r){oe(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Q(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(e){B.call(this),this.h=e,this.g={}}x(ve,B);var be=[];function we(e){D(e.g,function(e,t){this.g.hasOwnProperty(t)&&ae(e)},e),e.g={}}ve.prototype.N=function(){ve.aa.N.call(this),we(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=i.JSON.stringify,Se=i.JSON.parse,ke=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Te(){}function Ce(e){return e.h||(e.h=e.i())}function Ee(){}Te.prototype.h=null;var Ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function De(){W.call(this,"d")}function Ae(){W.call(this,"c")}x(De,W),x(Ae,W);var _e={},Pe=null;function je(){return Pe=Pe||new he}function Re(e){W.call(this,_e.La,e)}function Oe(e){const t=je();fe(t,new Re(t))}function Ne(e,t){W.call(this,_e.STAT_EVENT,e),this.stat=t}function Me(e){const t=je();fe(t,new Ne(t,e))}function Le(e,t){W.call(this,_e.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ze(){this.g=!0}function Ue(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return xe(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}_e.La="serverreachability",x(Re,W),_e.STAT_EVENT="statevent",x(Ne,W),_e.Ma="timingevent",x(Le,W),ze.prototype.xa=function(){this.g=!1},ze.prototype.info=function(){};var Ve,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},We={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function qe(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}x(qe,Te),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},Ve=new qe;var Ke={},Ge={};function Ye(e,t,n){e.L=1,e.v=xt(mt(t)),e.m=n,e.P=!0,Qe(e,null)}function Qe(e,t){e.F=Date.now(),Ze(e),e.A=mt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new $e,e.g=kn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(be[0]=i.toString()),i=be);for(var o=0;o<i.length;o++){var a=ne(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Oe(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");a=2<=d.length&&"type"==d[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ge:(n=Number(t.substring(n,r)),isNaN(n)?Ke:(r+=1)+n>t.length?Ge:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(u(e.ba,e),t)}function tt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||vn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function it(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ut(n.h,e)))if(!e.K&&ut(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),sn(n)}pn(n),Me(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(u(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!T(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(ct(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),a.K){dt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(tt(s),Ze(s)),r.g=a}else fn(r);0<n.i.length&&un(n)}else"stop"!=u[0]&&"close"!=u[0]||wn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?wn(n,7):an(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Oe()}catch(c){}}He.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Oe(),tt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=nn(this.g);e="";var o=r.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Me(12),rt(this),nt(this);break e}Ue(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Je(this,s),e==Ge){4==h&&(this.s=4,Me(14),n=!1),Ue(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ke){this.s=4,Me(15),Ue(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ue(this.i,this.l,e,null),it(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Me(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),gn(d),d.M=!0,Me(11))}}else Ue(this.i,this.l,s,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ue(this.i,this.l,s,null),it(this,s);4==h&&rt(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=j(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),rt(this),nt(this)}}}catch(h){}},He.prototype.cancel=function(){this.J=!0,rt(this)},He.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Oe(),Me(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var ot=class{constructor(e,t){this.g=e,this.map=t}};function at(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function st(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ut(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ct(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return S(e.i)}function ft(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}at.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var pt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof gt){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,vt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(pt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),vt(this,t[4]),this.l=St(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function mt(e){return new gt(e)}function yt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=kt(t,At)),e.i=new Pt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kt(t,Et,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(kt(t,Et,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(kt(n,"/"==n.charAt(0)?Dt:It,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",kt(n,_t)),e.join("")};var Ct,Et=/[#\/\?@]/g,It=/[#\?:]/g,Dt=/[#\?]/g,At=/[#\?@]/g,_t=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rt(e,t){jt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return jt(e),t=Mt(e,t),e.g.has(t)}function Nt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),S(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Lt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Ft(){this.g=new ke}function zt(e,t,n){const r=n||"";try{ft(e,function(e,n){let i=e;a(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ut(e){this.l=e.Ub||null,this.j=e.eb||!1}function Vt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Wt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return D(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function $t(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Kt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){jt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Ot(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},x(Ut,Te),Ut.prototype.g=function(){return new Vt(this.l,this.j)},Ut.prototype.i=(Ct={},function(){return Ct}),x(Vt,he),(e=Vt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wt(this):qt(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Wt(this))},e.Qa=function(e){this.g&&(this.response=e,Wt(this))},e.ga=function(){this.g&&Wt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Kt,he);var Gt=/^https?$/i,Yt=["POST","PUT"];function Qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,fe(e,"complete"),fe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))ge(e.Ea,0,e);else if(fe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(pt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Gt.test(a?a.toLowerCase():"")}n=o}if(n)fe(e,"complete"),fe(e,"success");else{e.m=6;try{var s=2<tn(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||fe(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=mt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new He(e,e.j,t)).L=2,t.v=xt(mt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=kn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function sn(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function ln(e){sn(e),e.u&&(i.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function un(e){if(!st(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||U(),F||(L(),F=!0),z.add(t,e),e.B=0}}function cn(e,t){var n;n=t?t.l:e.U++;const r=mt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&$t(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ct(e.h,n),Ye(n,r,t)}function dn(e,t){e.H&&D(e.H,function(e,n){wt(t,n,e)}),e.l&&ft({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let s=0;s<n;s++){let n=i[s].g;const l=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),a=!1;else try{zt(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||U(),F||(L(),F=!0),z.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(u(e.Fa,e),bn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function mn(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=mt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&$t(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(mt(t)),n.m=null,n.P=!0,Qe(n,e)}function yn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),gn(e),e.g=null;var r=2}else{if(!ut(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;fe(r=je(),new Le(r,n)),un(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(u(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new gt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||yt(r,"https"),xt(r),t?function(e,t){const n=new ze;if(i.Image){const r=new Image;r.onload=c(Lt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Lt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Lt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Lt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ze;const n=new AbortController,r=setTimeout(()=>{n.abort(),Lt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Lt(0,0,!0,t):Lt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Lt(0,0,!1,t)})}(r.toString(),n)}else Me(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(k(e.ka,t),k(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof gt?mt(n):new gt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),vt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new gt(null);r&&yt(a,r),t&&(a.g=t),o&&vt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function kn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Ut({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Tn(){}function Cn(){}function En(e,t){he.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!T(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function In(e){De.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Dn(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ve.g(),this.v=this.o?Ce(this.o):Ce(Ve),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Qt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Yt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Qt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,fe(this,"complete"),fe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Se(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Me(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),un(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new He(this,this.j,e);let o=this.o;if(this.S&&(o?(o=A(o),P(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),wt(n=mt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Ht(o)))+"&"+t:this.m&&$t(n,this.m,o)),ct(this.h,i),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),i.T=!0,Ye(i,n,null)):Ye(i,n,t),this.G=2}}else 3==this.G&&(e?cn(this,e):0==this.i.length||st(this.h)||cn(this))},e.Fa=function(){if(this.u=null,mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),sn(this),mn(this))},e.Za=function(){null!=this.C&&(this.C=null,sn(this),pn(this),Me(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new En(e,t)},x(En,he),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){an(this.g)},En.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new ot(t.Ya++,e)),3==t.G&&un(t)},En.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,En.aa.N.call(this)},x(In,De),x(Dn,Ae),x(An,Tn),An.prototype.ua=function(){fe(this.g,"a")},An.prototype.ta=function(e){fe(this.g,new In(e))},An.prototype.sa=function(e){fe(this.g,new Dn)},An.prototype.ra=function(){fe(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,v=w.createWebChannelTransport=function(){return new Cn},y=w.getStatEventTarget=function(){return je()},m=w.Event=_e,g=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,p=w.ErrorCode=Be,We.COMPLETE="complete",f=w.EventType=We,Ee.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=Ee,w.FetchXmlHttpFactory=Ut,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,d=w.XhrIo=Kt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",S="4.8.0";class k{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");let T="11.10.0";const C=new s.Vy("@firebase/firestore");function E(){return C.logLevel}function I(e){C.setLogLevel(e)}function D(e){if(C.logLevel<=s.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.debug(`Firestore (${T}): ${e}`,...i)}}function A(e){if(C.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.error(`Firestore (${T}): ${e}`,...i)}}function _(e){if(C.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);C.warn(`Firestore (${T}): ${e}`,...i)}}function P(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function j(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,R(e,r,n)}function R(e,t,n){let r=`FIRESTORE (${T}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw A(r),new Error(r)}function O(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||R(t,i,r)}function N(e,t){e||j(57014,t)}function M(e,t){return e}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class z{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}}class B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class W{constructor(e){this.t=e,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){O(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new z;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new z,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new z)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken,31837,{l:t}),new U(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e,2055,{h:e}),new k(e)}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=k.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,o.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){O(void 0===this.o,3512);const n=e=>{null!=e.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,D("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(O("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new $(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class G{getToken(){return Promise.resolve(new $(""))}invalidateToken(){}start(e,t){}shutdown(){}}function Y(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Q(){return new TextEncoder}class X{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Y(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function J(e,t){return e<t?-1:e>t?1:0}function Z(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return J(r,i);{const o=Q(),a=te(o.encode(ee(e,n)),o.encode(ee(t,n)));return 0!==a?a:J(r,i)}}n+=r>65535?2:1}return J(e.length,t.length)}function ee(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function te(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return J(e[n],t[n]);return J(e.length,t.length)}function ne(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function re(e){return e+"\0"}const ie="__name__";class oe{constructor(e,t,n){void 0===t?t=0:t>e.length&&j(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&j(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===oe.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oe?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=oe.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return J(e.length,t.length)}static compareSegments(e,t){const n=oe.isNumericId(e),r=oe.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?oe.extractNumericId(e).compare(oe.extractNumericId(t)):Z(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ae extends oe{construct(e,t,n){return new ae(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new ae(e)}static emptyPath(){return new ae([])}}const se=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends oe{construct(e,t,n){return new le(e,t,n)}static isValidIdentifier(e){return se.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ie}static keyField(){return new le([ie])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new F(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new F(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new F(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new F(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new le(t)}static emptyPath(){return new le([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(ae.fromString(e))}static fromName(e){return new ue(ae.fromString(e).popFirst(5))}static empty(){return new ue(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new ae(e.slice()))}}function ce(e,t,n){if(!n)throw new F(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function de(e,t,n,r){if(!0===t&&!0===r)throw new F(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function he(e){if(!ue.isDocumentKey(e))throw new F(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fe(e){if(ue.isDocumentKey(e))throw new F(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function pe(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ge(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":j(12329,{type:typeof e})}function me(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ge(e);throw new F(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function ye(e,t){if(t<=0)throw new F(L.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function ve(e,t){const n={typeString:e};return t&&(n.value=t),n}function be(e,t){if(!pe(e))throw new F(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(L.INVALID_ARGUMENT,n);return!0}const we=-62135596800,xe=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*xe);return new Se(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<we)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xe}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(be(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-we;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:ve("string",Se._jsonSchemaVersion),seconds:ve("number"),nanoseconds:ve("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Se(0,0))}static max(){return new ke(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Te=-1;class Ce{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ee(e){return e.fields.find(e=>2===e.kind)}function Ie(e){return e.fields.filter(e=>2!==e.kind)}function De(e,t){let n=J(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=_e(e.fields[r],t.fields[r]),0!==n)return n;return J(e.fields.length,t.fields.length)}Ce.UNKNOWN_ID=-1;class Ae{constructor(e,t){this.fieldPath=e,this.kind=t}}function _e(e,t){const n=le.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:J(e.kind,t.kind)}class Pe{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pe(0,Oe.min())}}function je(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(1e9===r?new Se(n+1,0):new Se(n,r));return new Oe(i,ue.empty(),t)}function Re(e){return new Oe(e.readTime,e.key,Te)}class Oe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oe(ke.min(),ue.empty(),Te)}static max(){return new Oe(ke.max(),ue.empty(),Te)}}function Ne(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ue.comparator(e.documentKey,t.documentKey),0!==n?n:J(e.largestBatchId,t.largestBatchId))}const Me="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Le{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Fe(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Me)throw e;D("LocalStore","Unexpectedly lost primary lease")}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(e){return ze.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,n)=>{t(e)})}static reject(e){return new ze((t,n)=>{n(e)})}static waitFor(e){return new ze((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=ze.resolve(!1);for(const n of e)t=t.next(e=>e?ze.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ze((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new ze((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const Ue="SimpleDb";class Ve{static open(e,t,n,r){try{return new Ve(t,e.transaction(r,n))}catch(e){throw new He(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new z,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new He(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Qe(t.target.error);this.S.reject(new He(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(D(Ue,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ke(t)}}class Be{static delete(e){return D(Ue,"Removing database:",e),Ge((0,l.mS)().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,l.zW)())return!1;if(Be.F())return!0;const e=(0,l.ZQ)(),t=Be.M(e),n=0<t&&t<10,r=We(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===Be.M((0,l.ZQ)())&&A("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(D(Ue,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new He(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new F(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new F(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new He(e,r))},r.onupgradeneeded=e=>{D(Ue,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.B.q(t,r.transaction,e.oldVersion,this.version).next(()=>{D(Ue,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const t=e.target;this.L=t.version},{passive:!0})),this.db.addEventListener("versionchange",e=>{var t;null===e.newVersion&&(_('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),null===(t=this.databaseDeletedListener)||void 0===t||t.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.k(e);const t=Ve.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next(e=>(t.v(),e)).catch(e=>(t.abort(e),ze.reject(e))).toPromise();return o.catch(()=>{}),await t.D,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(D(Ue,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function We(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class qe{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Ge(this.$.delete())}}class He extends F{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $e(e){return"IndexedDbTransactionError"===e.name}class Ke{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(D(Ue,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(D(Ue,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ge(n)}add(e){return D(Ue,"ADD",this.store.name,e,e),Ge(this.store.add(e))}get(e){return Ge(this.store.get(e)).next(t=>(void 0===t&&(t=null),D(Ue,"GET",this.store.name,e,t),t))}delete(e){return D(Ue,"DELETE",this.store.name,e),Ge(this.store.delete(e))}count(){return D(Ue,"COUNT",this.store.name),Ge(this.store.count())}j(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new ze((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.J(e,(e,n)=>{t.push(n)}).next(()=>t)}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ze((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Y(e,t){D(Ue,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Z=!1;const r=this.cursor(n);return this.J(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.J(r,t)}ee(e){const t=this.cursor({});return new ze((n,r)=>{t.onerror=e=>{const t=Qe(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}J(e,t){const n=[];return new ze((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new qe(i),a=t(i.primaryKey,i.value,o);if(a instanceof ze){const e=a.catch(e=>(o.done(),ze.reject(e)));n.push(e)}o.isDone?r():null===o.W?i.continue():i.continue(o.W)}}).next(()=>ze.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ge(e){return new ze((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Qe(e.target.error);n(t)}})}let Ye=!1;function Qe(e){const t=Be.M((0,l.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ye||(Ye=!0,setTimeout(()=>{throw e},0)),e}}return e}const Xe="IndexBackfiller";class Je{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ne(e){D(Xe,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.te.re();D(Xe,`Documents written: ${e}`)}catch(e){$e(e)?D(Xe,"Ignoring IndexedDB error during index backfill: ",e):await Fe(e)}await this.ne(6e4)})}}class Ze{constructor(e,t){this.localStore=e,this.persistence=t}async re(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))}ie(e,t){const n=new Set;let r=t,i=!0;return ze.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return D(Xe,`Processing collection: ${t}`),this.se(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}se(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.oe(r,n)).next(n=>(D(Xe,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}oe(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Re(t);Ne(r,n)>0&&(n=r)}),new Oe(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class et{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}et.ue=-1;const tt=-1;function nt(e){return null==e}function rt(e){return 0===e&&1/e==-1/0}function it(e){return"number"==typeof e&&Number.isInteger(e)&&!rt(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ot="\x01";function at(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lt(t)),t=st(e.get(n),t);return lt(t)}function st(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ot:n+="\x01\x11";break;default:n+=t}}return n}function lt(e){return e+ot+"\x01"}function ut(e){const t=e.length;if(O(t>=2,64408,{path:e}),2===t)return O(e.charAt(0)===ot&&"\x01"===e.charAt(1),56145,{path:e}),ae.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf(ot,o);switch((t<0||t>n)&&j(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:j(61167,{path:e})}o=t+2}return new ae(r)}const ct="remoteDocuments",dt="owner",ht="owner",ft="mutationQueues",pt="mutations",gt="batchId",mt="userMutationsIndex",yt=["userId","batchId"];function vt(e,t){return[e,at(t)]}function bt(e,t,n){return[e,at(t),n]}const wt={},xt="documentMutations",St="remoteDocumentsV14",kt=["prefixPath","collectionGroup","readTime","documentId"],Tt="documentKeyIndex",Ct=["prefixPath","collectionGroup","documentId"],Et="collectionGroupIndex",It=["collectionGroup","readTime","prefixPath","documentId"],Dt="remoteDocumentGlobal",At="remoteDocumentGlobalKey",_t="targets",Pt="queryTargetsIndex",jt=["canonicalId","targetId"],Rt="targetDocuments",Ot=["targetId","path"],Nt="documentTargetsIndex",Mt=["path","targetId"],Lt="targetGlobalKey",Ft="targetGlobal",zt="collectionParents",Ut=["collectionId","parent"],Vt="clientMetadata",Bt="bundles",Wt="namedQueries",qt="indexConfiguration",Ht="collectionGroupIndex",$t="indexState",Kt=["indexId","uid"],Gt="sequenceNumberIndex",Yt=["uid","sequenceNumber"],Qt="indexEntries",Xt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jt="documentKeyIndex",Zt=["indexId","uid","orderedDocumentKey"],en="documentOverlays",tn=["userId","collectionPath","documentId"],nn="collectionPathOverlayIndex",rn=["userId","collectionPath","largestBatchId"],on="collectionGroupOverlayIndex",an=["userId","collectionGroup","largestBatchId"],sn="globals",ln=[ft,pt,xt,ct,_t,dt,Ft,Rt,Vt,Dt,zt,Bt,Wt],un=[...ln,en],cn=[ft,pt,xt,St,_t,dt,Ft,Rt,Vt,Dt,zt,Bt,Wt,en],dn=cn,hn=[...dn,qt,$t,Qt],fn=hn,pn=[...hn,sn],gn=pn;class mn extends Le{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function yn(e,t){const n=M(e);return Be.N(n.ce,t)}function vn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wn(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function xn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Sn{constructor(e,t){this.comparator=e,this.root=t||Tn.EMPTY}insert(e,t){return new Sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kn(this.root,e,this.comparator,!1)}getReverseIterator(){return new kn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kn(this.root,e,this.comparator,!0)}}class kn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Tn.RED,this.left=null!=r?r:Tn.EMPTY,this.right=null!=i?i:Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Tn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Tn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1,Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new En(this.data.getIterator())}getIteratorFrom(e){return new En(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Cn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class En{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function In(e){return e.hasNext()?e.getNext():void 0}class Dn{constructor(e){this.fields=e,e.sort(le.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Cn(le.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ne(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class An extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function _n(){return"undefined"!=typeof atob}class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new An("Invalid base64 string: "+e):e}}(e);return new Pn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const jn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(e){if(O(!!e,39018),"string"==typeof e){let t=0;const n=jn.exec(e);if(O(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:On(e.seconds),nanos:On(e.nanos)}}function On(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nn(e){return"string"==typeof e?Pn.fromBase64String(e):Pn.fromUint8Array(e)}const Mn="server_timestamp",Ln="__type__",Fn="__previous_value__",zn="__local_write_time__";function Un(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ln])||void 0===n?void 0:n.stringValue)===Mn}function Vn(e){const t=e.mapValue.fields[Fn];return Un(t)?Vn(t):t}function Bn(e){const t=Rn(e.mapValue.fields[zn].timestampValue);return new Se(t.seconds,t.nanos)}class Wn{constructor(e,t,n,r,i,o,a,s,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=u}}const qn="(default)";class Hn{constructor(e,t){this.projectId=e,this.database=t||qn}static empty(){return new Hn("","")}get isDefaultDatabase(){return this.database===qn}isEqual(e){return e instanceof Hn&&e.projectId===this.projectId&&e.database===this.database}}const $n="__type__",Kn="__max__",Gn={mapValue:{fields:{__type__:{stringValue:Kn}}}},Yn="__vector__",Qn="value",Xn={nullValue:"NULL_VALUE"};function Jn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Un(e)?4:gr(e)?9007199254740991:fr(e)?10:11:j(28295,{value:e})}function Zn(e,t){if(e===t)return!0;const n=Jn(e);if(n!==Jn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bn(e).isEqual(Bn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Rn(e.timestampValue),r=Rn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nn(e.bytesValue).isEqual(Nn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return On(e.geoPointValue.latitude)===On(t.geoPointValue.latitude)&&On(e.geoPointValue.longitude)===On(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return On(e.integerValue)===On(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=On(e.doubleValue),r=On(t.doubleValue);return n===r?rt(n)===rt(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ne(e.arrayValue.values||[],t.arrayValue.values||[],Zn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vn(n)!==vn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zn(n[i],r[i])))return!1;return!0}(e,t);default:return j(52216,{left:e})}}function er(e,t){return void 0!==(e.values||[]).find(e=>Zn(e,t))}function tr(e,t){if(e===t)return 0;const n=Jn(e),r=Jn(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=On(e.integerValue||e.doubleValue),r=On(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nr(e.timestampValue,t.timestampValue);case 4:return nr(Bn(e),Bn(t));case 5:return Z(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nn(e),r=Nn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=J(n[i],r[i]);if(0!==e)return e}return J(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=J(On(e.latitude),On(t.latitude));return 0!==n?n:J(On(e.longitude),On(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return rr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a[Qn])||void 0===n?void 0:n.arrayValue,u=null===(r=s[Qn])||void 0===r?void 0:r.arrayValue,c=J((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==u?void 0:u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:rr(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Gn.mapValue&&t===Gn.mapValue)return 0;if(e===Gn.mapValue)return 1;if(t===Gn.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Z(r[a],o[a]);if(0!==e)return e;const t=tr(n[r[a]],i[o[a]]);if(0!==t)return t}return J(r.length,o.length)}(e.mapValue,t.mapValue);default:throw j(23264,{le:n})}}function nr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return J(e,t);const n=Rn(e),r=Rn(t),i=J(n.seconds,r.seconds);return 0!==i?i:J(n.nanos,r.nanos)}function rr(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=tr(n[i],r[i]);if(e)return e}return J(n.length,r.length)}function ir(e){return or(e)}function or(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Rn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ue.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=or(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${or(e.fields[i])}`;return n+"}"}(e.mapValue):j(61005,{value:e})}function ar(e){switch(Jn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vn(e);return t?16+ar(t):16;case 5:return 2*e.stringValue.length;case 6:return Nn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ar(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return bn(e.fields,(e,n)=>{t+=e.length+ar(n)}),t}(e.mapValue);default:throw j(13486,{value:e})}}function sr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function lr(e){return!!e&&"integerValue"in e}function ur(e){return!!e&&"arrayValue"in e}function cr(e){return!!e&&"nullValue"in e}function dr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function hr(e){return!!e&&"mapValue"in e}function fr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[$n])||void 0===n?void 0:n.stringValue)===Yn}function pr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=pr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=pr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function gr(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Kn}const mr={mapValue:{fields:{[$n]:{stringValue:Yn},[Qn]:{arrayValue:{}}}}};function yr(e){return"nullValue"in e?Xn:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sr(Hn.empty(),ue.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?fr(e)?mr:{mapValue:{}}:j(35942,{value:e})}function vr(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sr(Hn.empty(),ue.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?mr:"mapValue"in e?fr(e)?{mapValue:{}}:Gn:j(61959,{value:e})}function br(e,t){const n=tr(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function wr(e,t){const n=tr(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class xr{constructor(e){this.value=e}static empty(){return new xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!hr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pr(t)}setAll(e){let t=le.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=pr(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());hr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];hr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new xr(pr(this.value))}}function Sr(e){const t=[];return bn(e.fields,(e,n)=>{const r=new le([e]);if(hr(n)){const e=Sr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Dn(t)}class kr{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kr(e,0,ke.min(),ke.min(),ke.min(),xr.empty(),0)}static newFoundDocument(e,t,n,r){return new kr(e,1,t,ke.min(),n,r,0)}static newNoDocument(e,t){return new kr(e,2,t,ke.min(),ke.min(),xr.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,ke.min(),ke.min(),xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tr{constructor(e,t){this.position=e,this.inclusive=t}}function Cr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ue.comparator(ue.fromName(a.referenceValue),n.key):tr(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Er(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zn(e.position[n],t.position[n]))return!1;return!0}class Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Dr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ar{}class _r extends Ar{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ur(e,t,n):"array-contains"===t?new qr(e,n):"in"===t?new Hr(e,n):"not-in"===t?new $r(e,n):"array-contains-any"===t?new Kr(e,n):new _r(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Vr(e,n):new Br(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(tr(t,this.value)):null!==t&&Jn(this.value)===Jn(t)&&this.matchesComparison(tr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends Ar{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Pr(e,t)}matches(e){return jr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function jr(e){return"and"===e.op}function Rr(e){return"or"===e.op}function Or(e){return Nr(e)&&jr(e)}function Nr(e){for(const t of e.filters)if(t instanceof Pr)return!1;return!0}function Mr(e){if(e instanceof _r)return e.field.canonicalString()+e.op.toString()+ir(e.value);if(Or(e))return e.filters.map(e=>Mr(e)).join(",");{const t=e.filters.map(e=>Mr(e)).join(",");return`${e.op}(${t})`}}function Lr(e,t){return e instanceof _r?function(e,t){return t instanceof _r&&e.op===t.op&&e.field.isEqual(t.field)&&Zn(e.value,t.value)}(e,t):e instanceof Pr?function(e,t){return t instanceof Pr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Lr(n,t.filters[r]),!0)}(e,t):void j(19439)}function Fr(e,t){const n=e.filters.concat(t);return Pr.create(n,e.op)}function zr(e){return e instanceof _r?function(e){return`${e.field.canonicalString()} ${e.op} ${ir(e.value)}`}(e):e instanceof Pr?function(e){return e.op.toString()+" {"+e.getFilters().map(zr).join(" ,")+"}"}(e):"Filter"}class Ur extends _r{constructor(e,t,n){super(e,t,n),this.key=ue.fromName(n.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vr extends _r{constructor(e,t){super(e,"in",t),this.keys=Wr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Br extends _r{constructor(e,t){super(e,"not-in",t),this.keys=Wr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ue.fromName(e.referenceValue))}class qr extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ur(t)&&er(t.arrayValue,this.value)}}class Hr extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&er(this.value.arrayValue,t)}}class $r extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(er(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!er(this.value.arrayValue,t)}}class Kr extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ur(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>er(this.value.arrayValue,e))}}class Gr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function Yr(e){return new Gr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Qr(e){const t=M(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Mr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),nt(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ir(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ir(e)).join(",")),t.Pe=e}return t.Pe}function Xr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Lr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Er(e.startAt,t.startAt)&&Er(e.endAt,t.endAt)}function Jr(e){return ue.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zr(e,t){return e.filters.filter(e=>e instanceof _r&&e.field.isEqual(t))}function ei(e,t,n){let r=Xn,i=!0;for(const o of Zr(e,t)){let e=Xn,t=!0;switch(o.op){case"<":case"<=":e=yr(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Xn}br({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];br({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function ti(e,t,n){let r=Gn,i=!0;for(const o of Zr(e,t)){let e=Gn,t=!0;switch(o.op){case">=":case">":e=vr(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Gn}wr({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];wr({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ni{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ri(e,t,n,r,i,o,a,s){return new ni(e,t,n,r,i,o,a,s)}function ii(e){return new ni(e)}function oi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ai(e){return null!==e.collectionGroup}function si(e){const t=M(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Cn(le.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Ir(r,n))}),e.has(le.keyField().canonicalString())||t.Te.push(new Ir(le.keyField(),n))}return t.Te}function li(e){const t=M(e);return t.Ie||(t.Ie=ci(t,si(e))),t.Ie}function ui(e){const t=M(e);return t.de||(t.de=ci(t,e.explicitOrderBy)),t.de}function ci(e,t){if("F"===e.limitType)return Yr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ir(e.field,t)});const n=e.endAt?new Tr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tr(e.startAt.position,e.startAt.inclusive):null;return Yr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function di(e,t){const n=e.filters.concat([t]);return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hi(e,t,n){return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fi(e,t){return Xr(li(e),li(t))&&e.limitType===t.limitType}function pi(e){return`${Qr(li(e))}|lt:${e.limitType}`}function gi(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>zr(e)).join(", ")}]`),nt(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ir(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ir(e)).join(",")),`Target(${t})`}(li(e))}; limitType=${e.limitType})`}function mi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ue.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of si(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Cr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,si(e),t))&&!(e.endAt&&!function(e,t,n){const r=Cr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,si(e),t))}(e,t)}function yi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vi(e){return(t,n)=>{let r=!1;for(const i of si(e)){const e=bi(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function bi(e,t,n){const r=e.field.isKeyField()?ue.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?tr(r,i):j(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:e.dir})}}class wi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bn(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return xn(this.inner)}size(){return this.innerSize}}const xi=new Sn(ue.comparator);function Si(){return xi}const ki=new Sn(ue.comparator);function Ti(){let e=ki;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ci(e){let t=ki;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ei(){return Di()}function Ii(){return Di()}function Di(){return new wi(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ai=new Sn(ue.comparator),_i=new Cn(ue.comparator);function Pi(){let e=_i;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ji=new Cn(J);function Ri(){return ji}function Oi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rt(t)?"-0":t}}function Ni(e){return{integerValue:""+e}}function Mi(e,t){return it(t)?Ni(t):Oi(e,t)}class Li{constructor(){this._=void 0}}function Fi(e,t,n){return e instanceof Vi?function(e,t){const n={fields:{[Ln]:{stringValue:Mn},[zn]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Un(t)&&(t=Vn(t)),t&&(n.fields[Fn]=t),{mapValue:n}}(n,t):e instanceof Bi?Wi(e,t):e instanceof qi?Hi(e,t):function(e,t){const n=Ui(e,t),r=Ki(n)+Ki(e.Ee);return lr(n)&&lr(e.Ee)?Ni(r):Oi(e.serializer,r)}(e,t)}function zi(e,t,n){return e instanceof Bi?Wi(e,t):e instanceof qi?Hi(e,t):n}function Ui(e,t){return e instanceof $i?function(e){return lr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Vi extends Li{}class Bi extends Li{constructor(e){super(),this.elements=e}}function Wi(e,t){const n=Gi(t);for(const r of e.elements)n.some(e=>Zn(e,r))||n.push(r);return{arrayValue:{values:n}}}class qi extends Li{constructor(e){super(),this.elements=e}}function Hi(e,t){let n=Gi(t);for(const r of e.elements)n=n.filter(e=>!Zn(e,r));return{arrayValue:{values:n}}}class $i extends Li{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ki(e){return On(e.integerValue||e.doubleValue)}function Gi(e){return ur(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Yi{constructor(e,t){this.field=e,this.transform=t}}class Qi{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ji(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Zi{}function eo(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new co(e.key,Xi.none()):new oo(e.key,e.data,Xi.none());{const n=e.data,r=xr.empty();let i=new Cn(le.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ao(e.key,r,new Dn(i.toArray()),Xi.none())}}function to(e,t,n){e instanceof oo?function(e,t,n){const r=e.value.clone(),i=lo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ao?function(e,t,n){if(!Ji(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=lo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(so(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function no(e,t,n,r){return e instanceof oo?function(e,t,n,r){if(!Ji(e.precondition,t))return n;const i=e.value.clone(),o=uo(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ao?function(e,t,n,r){if(!Ji(e.precondition,t))return n;const i=uo(e.fieldTransforms,r,t),o=t.data;return o.setAll(so(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ji(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ro(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ui(r.transform,e||null);null!=i&&(null===n&&(n=xr.empty()),n.set(r.field,i))}return n||null}function io(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ne(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Bi&&t instanceof Bi||e instanceof qi&&t instanceof qi?ne(e.elements,t.elements,Zn):e instanceof $i&&t instanceof $i?Zn(e.Ee,t.Ee):e instanceof Vi&&t instanceof Vi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class oo extends Zi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ao extends Zi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function so(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function lo(e,t,n){const r=new Map;O(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,zi(a,s,n[i]))}return r}function uo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Fi(e,o,t))}return r}class co extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ho extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&to(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=no(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=no(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ii();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=eo(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(ke.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pi())}isEqual(e){return this.batchId===e.batchId&&ne(this.mutations,e.mutations,(e,t)=>io(e,t))&&ne(this.baseMutations,e.baseMutations,(e,t)=>io(e,t))}}class po{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){O(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=Ai;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new po(e,t,n,r)}}class go{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mo{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class yo{constructor(e,t){this.count=e,this.unchangedNames=t}}var vo,bo;function wo(e){switch(e){case L.OK:return j(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return j(15467,{code:e})}}function xo(e){if(void 0===e)return A("GRPC error has no .code"),L.UNKNOWN;switch(e){case vo.OK:return L.OK;case vo.CANCELLED:return L.CANCELLED;case vo.UNKNOWN:return L.UNKNOWN;case vo.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case vo.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case vo.INTERNAL:return L.INTERNAL;case vo.UNAVAILABLE:return L.UNAVAILABLE;case vo.UNAUTHENTICATED:return L.UNAUTHENTICATED;case vo.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case vo.NOT_FOUND:return L.NOT_FOUND;case vo.ALREADY_EXISTS:return L.ALREADY_EXISTS;case vo.PERMISSION_DENIED:return L.PERMISSION_DENIED;case vo.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case vo.ABORTED:return L.ABORTED;case vo.OUT_OF_RANGE:return L.OUT_OF_RANGE;case vo.UNIMPLEMENTED:return L.UNIMPLEMENTED;case vo.DATA_LOSS:return L.DATA_LOSS;default:return j(39323,{code:e})}}(bo=vo||(vo={}))[bo.OK=0]="OK",bo[bo.CANCELLED=1]="CANCELLED",bo[bo.UNKNOWN=2]="UNKNOWN",bo[bo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bo[bo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bo[bo.NOT_FOUND=5]="NOT_FOUND",bo[bo.ALREADY_EXISTS=6]="ALREADY_EXISTS",bo[bo.PERMISSION_DENIED=7]="PERMISSION_DENIED",bo[bo.UNAUTHENTICATED=16]="UNAUTHENTICATED",bo[bo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bo[bo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bo[bo.ABORTED=10]="ABORTED",bo[bo.OUT_OF_RANGE=11]="OUT_OF_RANGE",bo[bo.UNIMPLEMENTED=12]="UNIMPLEMENTED",bo[bo.INTERNAL=13]="INTERNAL",bo[bo.UNAVAILABLE=14]="UNAVAILABLE",bo[bo.DATA_LOSS=15]="DATA_LOSS";let So=null;const ko=new r([4294967295,4294967295],0);function To(e){const t=Q().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function Co(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([o,a],0)]}class Eo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Io(`Invalid padding: ${t}`);if(n<0)throw new Io(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Io(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Io(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=r.fromNumber(this.fe)}pe(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ko)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=To(e),[n,r]=Co(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Eo(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.fe)return;const t=To(e),[n,r]=Co(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Do{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Do(ke.min(),r,new Sn(J),Si(),Pi())}}class Ao{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ao(n,t,Pi(),Pi(),Pi())}}class _o{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Po{constructor(e,t){this.targetId=e,this.De=t}}class jo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ro{constructor(){this.ve=0,this.Ce=Mo(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pi(),t=Pi(),n=Pi();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j(38017,{changeType:i})}}),new Ao(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Mo()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,O(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Oo{constructor(e){this.We=e,this.Ge=new Map,this.ze=Si(),this.je=No(),this.Je=No(),this.He=new Sn(J)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(Jr(i))if(0===n){const e=new ue(i.path);this.Xe(t,e,kr.newNoDocument(e,ke.min()))}else O(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==So||So.ct(function(e,t,n,r,i){var o,a,s,l,u,c;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,i))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Nn(n).toUint8Array()}catch(e){if(e instanceof An)return _("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Eo(o,r,i)}catch(e){return _(e instanceof Io?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&Jr(i.target)){const t=new ue(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,kr.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Pi();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new Do(e,t,this.He,this.ze,n);return this.ze=Si(),this.je=No(),this.Je=No(),this.He=new Sn(J),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ro,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Cn(J),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Cn(J),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||D("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ro),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function No(){return new Sn(ue.comparator)}function Mo(){return new Sn(ue.comparator)}const Lo={asc:"ASCENDING",desc:"DESCENDING"},Fo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zo={and:"AND",or:"OR"};class Uo{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vo(e,t){return e.useProto3Json||nt(t)?t:{value:t}}function Bo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wo(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qo(e,t){return Bo(e,t.toTimestamp())}function Ho(e){return O(!!e,49232),ke.fromTimestamp(function(e){const t=Rn(e);return new Se(t.seconds,t.nanos)}(e))}function $o(e,t){return Ko(e,t).canonicalString()}function Ko(e,t){const n=function(e){return new ae(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Go(e){const t=ae.fromString(e);return O(ya(t),10190,{key:t.toString()}),t}function Yo(e,t){return $o(e.databaseId,t.path)}function Qo(e,t){const n=Go(t);if(n.get(1)!==e.databaseId.projectId)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ue(ea(n))}function Xo(e,t){return $o(e.databaseId,t)}function Jo(e){const t=Go(e);return 4===t.length?ae.emptyPath():ea(t)}function Zo(e){return new ae(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ea(e){return O(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ta(e,t,n){return{name:Yo(e,t),fields:n.value.mapValue.fields}}function na(e,t,n){const r=Qo(e,t.name),i=Ho(t.updateTime),o=t.createTime?Ho(t.createTime):ke.min(),a=new xr({mapValue:{fields:t.fields}}),s=kr.newFoundDocument(r,i,o,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function ra(e,t){let n;if(t instanceof oo)n={update:ta(e,t.key,t.value)};else if(t instanceof co)n={delete:Yo(e,t.key)};else if(t instanceof ao)n={update:ta(e,t.key,t.data),updateMask:ma(t.fieldMask)};else{if(!(t instanceof ho))return j(16599,{Rt:t.type});n={verify:Yo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Vi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $i)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw j(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:j(27497)}(e,t.precondition)),n}function ia(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Xi.updateTime(Ho(e.updateTime)):void 0!==e.exists?Xi.exists(e.exists):Xi.none()}(t.currentDocument):Xi.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)O("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Vi;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Bi(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new qi(e)}else"increment"in t?n=new $i(e,t.increment):j(16584,{proto:t});const r=le.fromServerFormat(t.fieldPath);return new Yi(r,n)}(e,t)):[];if(t.update){t.update.name;const i=Qo(e,t.update.name),o=new xr({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Dn(t.map(e=>le.fromServerFormat(e)))}(t.updateMask);return new ao(i,o,e,n,r)}return new oo(i,o,n,r)}if(t.delete){const r=Qo(e,t.delete);return new co(r,n)}if(t.verify){const r=Qo(e,t.verify);return new ho(r,n)}return j(1463,{proto:t})}function oa(e,t){return{documents:[Xo(e,t.path)]}}function aa(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xo(e,i);const o=function(e){if(0!==e.length)return ga(Pr.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:fa(e.field),direction:ca(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Vo(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function sa(e,t,n,r){const{Vt:i,parent:o}=aa(e,t),a={},s=[];let l=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+l++;a[t]=e.alias,"count"===e.aggregateType?s.push({alias:t,count:{}}):"avg"===e.aggregateType?s.push({alias:t,avg:{field:fa(e.fieldPath)}}):"sum"===e.aggregateType&&s.push({alias:t,sum:{field:fa(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:i.structuredQuery},parent:i.parent},ft:a,parent:o}}function la(e){let t=Jo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=ua(e);return t instanceof Pr&&Or(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Ir(pa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,nt(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Tr(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Tr(n,t)}(n.endAt)),ri(t,i,a,o,s,"F",l,u)}function ua(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pa(e.unaryFilter.field);return _r.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=pa(e.unaryFilter.field);return _r.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pa(e.unaryFilter.field);return _r.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=pa(e.unaryFilter.field);return _r.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(e):void 0!==e.fieldFilter?function(e){return _r.create(pa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pr.create(e.compositeFilter.filters.map(e=>ua(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(e.compositeFilter.op))}(e):j(30097,{filter:e})}function ca(e){return Lo[e]}function da(e){return Fo[e]}function ha(e){return zo[e]}function fa(e){return{fieldPath:e.canonicalString()}}function pa(e){return le.fromServerFormat(e.fieldPath)}function ga(e){return e instanceof _r?function(e){if("=="===e.op){if(dr(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NAN"}};if(cr(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dr(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NOT_NAN"}};if(cr(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(e.field),op:da(e.op),value:e.value}}}(e):e instanceof Pr?function(e){const t=e.getFilters().map(e=>ga(e));return 1===t.length?t[0]:{compositeFilter:{op:ha(e.op),filters:t}}}(e):j(54877,{filter:e})}function ma(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ya(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class va{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ke.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ke.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pn.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ba{constructor(e){this.gt=e}}function wa(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xa(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Yo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bo(e,t.version.toTimestamp()),createTime:Bo(e,t.createTime.toTimestamp())}}(e.gt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sa(t.version)};else{if(!t.isUnknownDocument())return j(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Sa(t.version)}}return r}function xa(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sa(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ka(e){const t=new Se(e.seconds,e.nanoseconds);return ke.fromTimestamp(t)}function Ta(e,t){const n=(t.baseMutations||[]).map(t=>ia(e.gt,t));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map(t=>ia(e.gt,t)),i=Se.fromMillis(t.localWriteTimeMs);return new fo(t.batchId,i,n,r)}function Ca(e){const t=ka(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ka(e.lastLimboFreeSnapshotVersion):ke.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return O(1===t,1966,{count:t}),li(ii(Jo(e.documents[0])))}(e.query):function(e){return li(la(e))}(e.query),new va(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Pn.fromBase64String(e.resumeToken))}function Ea(e,t){const n=Sa(t.snapshotVersion),r=Sa(t.lastLimboFreeSnapshotVersion);let i;i=Jr(t.target)?oa(e.gt,t.target):aa(e.gt,t.target).Vt;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qr(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ia(e){const t=la({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hi(t,t.limit,"L"):t}function Da(e,t){return new go(t.largestBatchId,ia(e.gt,t.overlayMutation))}function Aa(e,t){const n=t.path.lastSegment();return[e,at(t.path.popLast()),n]}function _a(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Sa(r.readTime),documentKey:at(r.documentKey.path),largestBatchId:r.largestBatchId}}class Pa{getBundleMetadata(e,t){return ja(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:ka(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return ja(e).put(function(e){return{bundleId:e.id,createTime:Sa(Ho(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ra(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:Ia(e.bundledQuery),readTime:ka(e.readTime)}}(e)})}saveNamedQuery(e,t){return Ra(e).put(function(e){return{name:e.name,readTime:Sa(Ho(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ja(e){return yn(e,Bt)}function Ra(e){return yn(e,Wt)}class Oa{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const n=t.uid||"";return new Oa(e,n)}getOverlay(e,t){return Na(e).get(Aa(this.userId,t)).next(e=>e?Da(this.serializer,e):null)}getOverlays(e,t){const n=Ei();return ze.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const o=new go(t,i);r.push(this.wt(e,o))}),ze.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(at(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Na(e).Y(nn,r))}),ze.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Ei(),i=at(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Na(e).j(nn,o).next(e=>{for(const t of e){const e=Da(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=Ei();let o;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Na(e).X({index:on,range:a},(e,t,n)=>{const a=Da(this.serializer,t);i.size()<r||a.largestBatchId===o?(i.set(a.getKey(),a),o=a.largestBatchId):n.done()}).next(()=>i)}wt(e,t){return Na(e).put(function(e,t,n){const[r,i,o]=Aa(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ra(e.gt,n.mutation)}}(this.serializer,this.userId,t))}}function Na(e){return yn(e,en)}class Ma{St(e){return yn(e,sn)}getSessionToken(e){return this.St(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Pn.fromUint8Array(t):Pn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class La{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(On(e.integerValue));else if("doubleValue"in e){const n=On(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),rt(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=Rn(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Nn(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?gr(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):fr(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):j(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const o=Qn,a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(On(a)),this.xt(o,t),this.Dt(i[o],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),ue.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}La.Ut=new La;const Fa=255;function za(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Ua(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=za(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Va{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Wt(n.value),n=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.jt(n.value),n=t.next();this.Jt()}Ht(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Wt(e);else if(e<2048)this.Wt(960|e>>>6),this.Wt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Wt(480|e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e);else{const e=t.codePointAt(0);this.Wt(240|e>>>18),this.Wt(128|63&e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e)}}this.Gt()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.jt(e);else if(e<2048)this.jt(960|e>>>6),this.jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.jt(480|e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e);else{const e=t.codePointAt(0);this.jt(240|e>>>18),this.jt(128|63&e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e)}}this.Jt()}Zt(e){const t=this.Xt(e),n=Ua(t);this.en(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}tn(e){const t=this.Xt(e),n=Ua(t);this.en(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}nn(){this.rn(Fa),this.rn(255)}sn(){this._n(Fa),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Wt(e){const t=255&e;0===t?(this.rn(0),this.rn(255)):t===Fa?(this.rn(Fa),this.rn(0)):this.rn(t)}jt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===Fa?(this._n(Fa),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ba{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class Wa{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class qa{constructor(){this.un=new Va,this.cn=new Ba(this.un),this.ln=new Wa(this.un)}seed(e){this.un.seed(e)}hn(e){return 0===e?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}class Ha{constructor(e,t,n,r){this.Pn=e,this.Tn=t,this.In=n,this.dn=r}En(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Ha(this.Pn,this.Tn,this.In,n)}An(e,t,n){return{indexId:this.Pn,uid:e,arrayValue:Ga(this.In),directionalValue:Ga(this.dn),orderedDocumentKey:Ga(t),documentKey:n.path.toArray()}}Rn(e,t,n){const r=this.An(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function $a(e,t){let n=e.Pn-t.Pn;return 0!==n?n:(n=Ka(e.In,t.In),0!==n?n:(n=Ka(e.dn,t.dn),0!==n?n:ue.comparator(e.Tn,t.Tn)))}function Ka(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Ga(e){return(0,l.Ov)()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Ya(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Qa{constructor(e){this.Vn=new Cn((e,t)=>le.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Vn=this.Vn.add(e):this.fn.push(e)}}get gn(){return this.Vn.size>1}pn(e){if(O(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Ee(e);if(void 0!==t&&!this.yn(t))return!1;const n=Ie(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.yn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Vn.size>0){const e=this.Vn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.wn(e,t)||!this.Sn(this.mn[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.mn.length||!this.Sn(this.mn[o++],e))return!1}return!0}bn(){if(this.gn)return null;let e=new Cn(le.comparator);const t=[];for(const n of this.fn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ae(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ae(n.field,0))}for(const n of this.mn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ae(n.field,"asc"===n.dir?0:1)));return new Ce(Ce.UNKNOWN_ID,this.collectionId,t,Pe.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Xa(e){var t,n;if(O(e instanceof _r||e instanceof Pr,20012),e instanceof _r){if(e instanceof Hr){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>_r.create(e.field,"==",t)))||[];return Pr.create(r,"or")}return e}const r=e.filters.map(e=>Xa(e));return Pr.create(r,e.op)}function Ja(e){if(0===e.getFilters().length)return[];const t=ns(Xa(e));return O(ts(t),7391),Za(t)||es(t)?[t]:t.getFilters()}function Za(e){return e instanceof _r}function es(e){return e instanceof Pr&&Or(e)}function ts(e){return Za(e)||es(e)||function(e){if(e instanceof Pr&&Rr(e)){for(const t of e.getFilters())if(!Za(t)&&!es(t))return!1;return!0}return!1}(e)}function ns(e){if(O(e instanceof _r||e instanceof Pr,34018),e instanceof _r)return e;if(1===e.filters.length)return ns(e.filters[0]);const t=e.filters.map(e=>ns(e));let n=Pr.create(t,e.op);return n=os(n),ts(n)?n:(O(n instanceof Pr,64498),O(jr(n),40251),O(n.filters.length>1,57927),n.filters.reduce((e,t)=>rs(e,t)))}function rs(e,t){let n;return O(e instanceof _r||e instanceof Pr,38388),O(t instanceof _r||t instanceof Pr,25473),n=e instanceof _r?t instanceof _r?function(e,t){return Pr.create([e,t],"and")}(e,t):is(e,t):t instanceof _r?is(t,e):function(e,t){if(O(e.filters.length>0&&t.filters.length>0,48005),jr(e)&&jr(t))return Fr(e,t.getFilters());const n=Rr(e)?e:t,r=Rr(e)?t:e,i=n.filters.map(e=>rs(e,r));return Pr.create(i,"or")}(e,t),os(n)}function is(e,t){if(jr(t))return Fr(t,e.getFilters());{const n=t.filters.map(t=>rs(e,t));return Pr.create(n,"or")}}function os(e){if(O(e instanceof _r||e instanceof Pr,11850),e instanceof _r)return e;const t=e.getFilters();if(1===t.length)return os(t[0]);if(Nr(e))return e;const n=t.map(e=>os(e)),r=[];return n.forEach(t=>{t instanceof _r?r.push(t):t instanceof Pr&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Pr.create(r,e.op)}class as{constructor(){this.Dn=new ss}addToCollectionParentIndex(e,t){return this.Dn.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}deleteAllFieldIndexes(e){return ze.resolve()}createTargetIndexes(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(Oe.min())}getMinOffsetFromCollectionGroup(e,t){return ze.resolve(Oe.min())}updateCollectionGroup(e,t,n){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class ss{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Cn(ae.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Cn(ae.comparator)).toArray()}}const ls="IndexedDbIndexManager",us=new Uint8Array(0);class cs{constructor(e,t){this.databaseId=t,this.vn=new ss,this.Cn=new wi(e=>Qr(e),(e,t)=>Xr(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:at(r)};return ds(e).put(i)}return ze.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[re(t),""],!1,!0);return ds(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ut(r.parent))}return n})}addFieldIndex(e,t){const n=fs(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ps(e);return i.next(e=>{n.put(_a(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=fs(e),r=ps(e),i=hs(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=fs(e),n=hs(e),r=ps(e);return t.Y().next(()=>n.Y()).next(()=>r.Y())}createTargetIndexes(e,t){return ze.forEach(this.Fn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Qa(t).bn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=hs(e);let r=!0;const i=new Map;return ze.forEach(this.Fn(t),t=>this.Mn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Pi();const r=[];return ze.forEach(i,(i,o)=>{D(ls,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}(i)} to execute ${Qr(t)}`);const a=function(e,t){const n=Ee(t);if(void 0===n)return null;for(const r of Zr(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),s=function(e,t){const n=new Map;for(const r of Ie(t))for(const t of Zr(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Ie(t)){const t=0===i.kind?ei(e,i.fieldPath,e.startAt):ti(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Tr(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of Ie(t)){const t=0===i.kind?ti(e,i.fieldPath,e.endAt):ei(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Tr(n,r)}(o,i),c=this.xn(i,o,l),d=this.xn(i,o,u),h=this.On(i,o,s),f=this.Nn(i.indexId,a,c,l.inclusive,d,u.inclusive,h);return ze.forEach(f,i=>n.H(i,t.limit).next(t=>{t.forEach(t=>{const n=ue.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return ze.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(t=0===e.filters.length?[e]:Ja(Pr.create(e.filters,"and")).map(t=>Yr(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,n,r,i,o,a){const s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),u=[];for(let c=0;c<s;++c){const s=t?this.Bn(t[c/l]):us,d=this.Ln(e,s,n[c%l],r),h=this.kn(e,s,i[c%l],o),f=a.map(t=>this.Ln(e,s,t,!0));u.push(...this.createRange(d,h,f))}return u}Ln(e,t,n,r){const i=new Ha(e,ue.empty(),t,n);return r?i:i.En()}kn(e,t,n,r){const i=new Ha(e,ue.empty(),t,n);return r?i.En():i}Mn(e,t){const n=new Qa(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.pn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Fn(t);return ze.forEach(r,t=>this.Mn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Cn(le.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}qn(e,t){const n=new qa;for(const r of Ie(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.hn(r.kind);La.Ut.bt(e,i)}return n.an()}Bn(e){const t=new qa;return La.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const n=new qa;return La.Ut.bt(sr(this.databaseId,t),n.hn(function(e){const t=Ie(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.an()}On(e,t,n){if(null===n)return[];let r=[];r.push(new qa);let i=0;for(const o of Ie(e)){const e=n[i++];for(const n of r)if(this.$n(t,o.fieldPath)&&ur(e))r=this.Un(r,o,e);else{const t=n.hn(o.kind);La.Ut.bt(e,t)}}return this.Kn(r)}xn(e,t,n){return this.On(e,t,n.position)}Kn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].an();return t}Un(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new qa;n.seed(e.an()),La.Ut.bt(o,n.hn(t.kind)),i.push(n)}return i}$n(e,t){return!!e.filters.find(e=>e instanceof _r&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=fs(e),r=ps(e);return(t?n.j(Ht,IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return ze.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Pe(t.sequenceNumber,new Oe(ka(t.readTime),new ue(ut(t.documentKey)),t.largestBatchId)):Pe.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Ae(le.fromServerFormat(t),n)});return new Ce(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:J(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=fs(e),i=ps(e);return this.Wn(e).next(e=>r.j(Ht,IDBKeyRange.bound(t,t)).next(t=>ze.forEach(t,t=>i.put(_a(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return ze.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?ze.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),ze.forEach(i,n=>this.Gn(e,t,n).next(t=>{const i=this.zn(r,n);return t.isEqual(i)?ze.resolve():this.jn(e,r,n,t,i)}))))})}Jn(e,t,n,r){return hs(e).put(r.An(this.uid,this.Qn(n,t.key),t.key))}Hn(e,t,n,r){return hs(e).delete(r.Rn(this.uid,this.Qn(n,t.key),t.key))}Gn(e,t,n){const r=hs(e);let i=new Cn($a);return r.X({index:Jt,range:IDBKeyRange.only([n.indexId,this.uid,Ga(this.Qn(n,t))])},(e,r)=>{i=i.add(new Ha(n.indexId,t,Ya(r.arrayValue),Ya(r.directionalValue)))}).next(()=>i)}zn(e,t){let n=new Cn($a);const r=this.qn(t,e);if(null==r)return n;const i=Ee(t);if(null!=i){const o=e.data.field(i.fieldPath);if(ur(o))for(const i of o.arrayValue.values||[])n=n.add(new Ha(t.indexId,e.key,this.Bn(i),r))}else n=n.add(new Ha(t.indexId,e.key,us,r));return n}jn(e,t,n,r,i){D(ls,"Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),a=t.getIterator();let s=In(o),l=In(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const r=n(s,l);r<0?t=!0:r>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(r(l),l=In(a)):t?(i(s),s=In(o)):(s=In(o),l=In(a))}}(r,i,$a,r=>{o.push(this.Jn(e,t,n,r))},r=>{o.push(this.Hn(e,t,n,r))}),ze.waitFor(o)}Wn(e){let t=1;return ps(e).X({index:Gt,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>$a(e,t)).filter((e,t,n)=>!t||0!==$a(e,n[t-1]));const r=[];r.push(e);for(const o of n){const n=$a(o,e),i=$a(o,t);if(0===n)r[0]=e.En();else if(n>0&&i<0)r.push(o),r.push(o.En());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Yn(r[o],r[o+1]))return[];const e=r[o].Rn(this.uid,us,ue.empty()),t=r[o+1].Rn(this.uid,us,ue.empty());i.push(IDBKeyRange.bound(e,t))}return i}Yn(e,t){return $a(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gs)}getMinOffset(e,t){return ze.mapArray(this.Fn(t),t=>this.Mn(e,t).next(e=>e||j(44426))).next(gs)}}function ds(e){return yn(e,zt)}function hs(e){return yn(e,Qt)}function fs(e){return yn(e,qt)}function ps(e){return yn(e,$t)}function gs(e){O(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ne(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Oe(t.readTime,t.documentKey,n)}const ms={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ys=41943040;class vs{static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function bs(e,t,n){const r=e.store(pt),i=e.store(xt),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=r.X({range:a},(e,t,n)=>(s++,n.delete()));o.push(l.next(()=>{O(1===s,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const e=bt(t,c.key.path,n.batchId);o.push(i.delete(e)),u.push(c.key)}return ze.waitFor(o).next(()=>u)}function ws(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw j(14731);t=e.noDocument}return JSON.stringify(t).length}vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(ys,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);class xs{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Zn={}}static yt(e,t,n,r){O(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new xs(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).X({index:mt,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Ts(e),o=ks(e);return o.add({}).next(a=>{O("number"==typeof a,49019);const s=new fo(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>ra(e.gt,t)),i=n.mutations.map(t=>ra(e.gt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),u=[];let c=new Cn((e,t)=>J(e.canonicalString(),t.canonicalString()));for(const e of r){const t=bt(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(i.put(t,wt))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Zn[a]=s.keys()}),ze.waitFor(u).next(()=>s)})}lookupMutationBatch(e,t){return ks(e).get(t).next(e=>e?(O(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Ta(this.serializer,e)):null)}Xn(e,t){return this.Zn[t]?ze.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Zn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ks(e).X({index:mt,range:r},(e,t,r)=>{t.userId===this.userId&&(O(t.batchId>=n,47524,{er:n}),i=Ta(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=tt;return ks(e).X({index:mt,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,tt],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).j(mt,t).next(e=>e.map(e=>Ta(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=vt(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ts(e).X({range:r},(n,r,o)=>{const[a,s,l]=n,u=ut(s);if(a===this.userId&&t.path.isEqual(u))return ks(e).get(l).next(e=>{if(!e)throw j(61480,{tr:n,batchId:l});O(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(Ta(this.serializer,e))});o.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cn(J);const r=[];return t.forEach(t=>{const i=vt(this.userId,t.path),o=IDBKeyRange.lowerBound(i),a=Ts(e).X({range:o},(e,r,i)=>{const[o,a,s]=e,l=ut(a);o===this.userId&&t.path.isEqual(l)?n=n.add(s):i.done()});r.push(a)}),ze.waitFor(r).next(()=>this.nr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=vt(this.userId,n),o=IDBKeyRange.lowerBound(i);let a=new Cn(J);return Ts(e).X({range:o},(e,t,i)=>{const[o,s,l]=e,u=ut(s);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(a=a.add(l)):i.done()}).next(()=>this.nr(e,a))}nr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(ks(e).get(t).next(e=>{if(null===e)throw j(35274,{batchId:t});O(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(Ta(this.serializer,e))}))}),ze.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return bs(e.ce,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),ze.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ts(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=ut(e[1]);r.push(t)}else n.done()}).next(()=>{O(0===r.length,56720,{ir:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Ss(e,this.userId,t)}sr(e){return Cs(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:tt,lastStreamToken:""})}}function Ss(e,t,n){const r=vt(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return Ts(e).X({range:o,Z:!0},(e,n,r)=>{const[o,s,l]=e;o===t&&s===i&&(a=!0),r.done()}).next(()=>a)}function ks(e){return yn(e,pt)}function Ts(e){return yn(e,xt)}function Cs(e){return yn(e,ft)}class Es{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Es(0)}static ur(){return new Es(-1)}}class Is{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{const n=new Es(t.highestTargetId);return t.highestTargetId=n.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(e=>ke.fromTimestamp(new Se(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.cr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.lr(e,r)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(n=>(n.targetCount+=1,this.Pr(t,n),this.lr(e,n))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ds(e).delete(t.targetId)).next(()=>this.cr(e)).next(t=>(O(t.targetCount>0,8065),t.targetCount-=1,this.lr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Ds(e).X((o,a)=>{const s=Ca(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r++,i.push(this.removeTargetData(e,s)))}).next(()=>ze.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Ds(e).X((e,n)=>{const r=Ca(n);t(r)})}cr(e){return As(e).get(Lt).next(e=>(O(null!==e,2888),e))}lr(e,t){return As(e).put(Lt,t)}hr(e,t){return Ds(e).put(Ea(this.serializer,t))}Pr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.cr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Qr(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Ds(e).X({range:r,index:Pt},(e,n,r)=>{const o=Ca(n);Xr(t,o.target)&&(i=o,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=_s(e);return t.forEach(t=>{const o=at(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))}),ze.waitFor(r)}removeMatchingKeys(e,t,n){const r=_s(e);return ze.forEach(t,t=>{const i=at(t.path);return ze.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=_s(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_s(e);let i=Pi();return r.X({range:n,Z:!0},(e,t,n)=>{const r=ut(e[1]),o=new ue(r);i=i.add(o)}).next(()=>i)}containsKey(e,t){const n=at(t.path),r=IDBKeyRange.bound([n],[re(n)],!1,!0);let i=0;return _s(e).X({index:Nt,Z:!0,range:r},(e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}Et(e,t){return Ds(e).get(t).next(e=>e?Ca(e):null)}}function Ds(e){return yn(e,_t)}function As(e){return yn(e,Ft)}function _s(e){return yn(e,Rt)}const Ps="LruGarbageCollector",js=1048576;function Rs(e,t){let[n,r]=e,[i,o]=t;const a=J(n,i);return 0===a?J(r,o):a}class Os{constructor(e){this.Tr=e,this.buffer=new Cn(Rs),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Rs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ns{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){D(Ps,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$e(e)?D(Ps,"Ignoring IndexedDB error during garbage collection: ",e):await Fe(e)}await this.Rr(3e5)})}}class Ms{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(et.ue);const n=new Os(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(ms)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ms):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),E()<=s.$b.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(l-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-l)+"ms\n"+`Total Duration: ${u-c}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Ls(e,t){return new Ms(e,t)}class Fs{constructor(e,t){this.db=e,this.garbageCollector=Ls(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(e,n)=>t(n))}addReference(e,t,n){return zs(e,n)}removeReference(e,t,n){return zs(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return zs(e,t)}Sr(e,t){return function(e,t){let n=!1;return Cs(e).ee(r=>Ss(e,r,t).next(e=>(e&&(n=!0),ze.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.wr(e,(o,a)=>{if(a<=t){const t=this.Sr(e,o).next(t=>{if(!t)return i++,n.getEntry(e,o).next(()=>(n.removeEntry(o,ke.min()),_s(e).delete(function(e){return[0,at(e.path)]}(o))))});r.push(t)}}).next(()=>ze.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return zs(e,t)}wr(e,t){const n=_s(e);let r,i=et.ue;return n.X({index:Nt},(e,n)=>{let[o,a]=e,{path:s,sequenceNumber:l}=n;0===o?(i!==et.ue&&t(new ue(ut(r)),i),i=l,r=s):i=et.ue}).next(()=>{i!==et.ue&&t(new ue(ut(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zs(e,t){return _s(e).put(function(e,t){return{targetId:0,path:at(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Us{constructor(){this.changes=new wi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ze.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vs{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Hs(e).put(n)}removeEntry(e,t,n){return Hs(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],xa(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.br(e,n)))}getEntry(e,t){let n=kr.newInvalidDocument(t);return Hs(e).X({index:Tt,range:IDBKeyRange.only($s(t))},(e,r)=>{n=this.Dr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:kr.newInvalidDocument(t)};return Hs(e).X({index:Tt,range:IDBKeyRange.only($s(t))},(e,r)=>{n={document:this.Dr(t,r),size:ws(r)}}).next(()=>n)}getEntries(e,t){let n=Si();return this.Cr(e,t,(e,t)=>{const r=this.Dr(e,t);n=n.insert(e,r)}).next(()=>n)}Fr(e,t){let n=Si(),r=new Sn(ue.comparator);return this.Cr(e,t,(e,t)=>{const i=this.Dr(e,t);n=n.insert(e,i),r=r.insert(e,ws(t))}).next(()=>({documents:n,Mr:r}))}Cr(e,t,n){if(t.isEmpty())return ze.resolve();let r=new Cn(Gs);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound($s(r.first()),$s(r.last())),o=r.getIterator();let a=o.getNext();return Hs(e).X({index:Tt,range:i},(e,t,r)=>{const i=ue.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Gs(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.G($s(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),xa(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hs(e).j(IDBKeyRange.bound(a,s,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Si();for(const i of e){const e=this.Dr(ue.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(mi(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=Si();const o=Ks(t,n),a=Ks(t,Oe.max());return Hs(e).X({index:Et,range:IDBKeyRange.bound(o,a,!0)},(e,t,n)=>{const o=this.Dr(ue.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Ws(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return qs(e).get(At).next(e=>(O(!!e,20021),e))}br(e,t){return qs(e).put(At,t)}Dr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=na(e.gt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ue.fromSegments(t.noDocument.path),r=ka(t.noDocument.readTime);n=kr.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return j(56709);{const e=ue.fromSegments(t.unknownDocument.path),r=ka(t.unknownDocument.version);n=kr.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Se(e[0],e[1]);return ke.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ke.min()))return e}return kr.newInvalidDocument(e)}}function Bs(e){return new Vs(e)}class Ws extends Us{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new wi(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Cn((e,t)=>J(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Nr.get(i);if(t.push(this.Or.removeEntry(e,i,a.readTime)),o.isValidDocument()){const s=wa(this.Or.serializer,o);r=r.add(i.path.popLast());const l=ws(s);n+=l-a.size,t.push(this.Or.addEntry(e,i,s))}else if(n-=a.size,this.trackRemovals){const n=wa(this.Or.serializer,o.convertToNoDocument(ke.min()));t.push(this.Or.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Or.updateMetadata(e,n)),ze.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(e=>(this.Nr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(e=>{let{documents:t,Mr:n}=e;return n.forEach((e,n)=>{this.Nr.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function qs(e){return yn(e,Dt)}function Hs(e){return yn(e,St)}function $s(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ks(e,t){const n=t.documentKey.path.toArray();return[e,xa(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Gs(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=J(n[o],r[o]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}class Ys{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qs{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&no(n.mutation,e,Dn.empty(),Se.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Pi()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pi();const r=Ei();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ti();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ei();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Pi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Si();const o=Di(),a=Di();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ao)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),no(a.mutation,t,a.mutation.getFieldMask(),Se.now())):o.set(t.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Ys(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Di();let r=new Sn((e,t)=>e-t),i=Pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||Dn.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||Pi()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=Ii();l.forEach(e=>{if(!i.has(e)){const r=eo(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return ze.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ue.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ai(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ze.resolve(Ei());let a=Te,s=i;return o.next(t=>ze.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ze.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,Pi())).next(e=>({batchId:a,changes:Ci(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(e=>{let t=Ti();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Ti();return this.indexManager.getCollectionParents(e,i).next(a=>ze.forEach(a,a=>{const s=function(e,t){return new ni(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,kr.newInvalidDocument(r)))});let n=Ti();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&no(o.mutation,r,Dn.empty(),Se.now()),mi(t,r)&&(n=n.insert(e,r))}),n})}}class Xs{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ze.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ho(e.createTime)}}(t)),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Ia(e.bundledQuery),readTime:Ho(e.readTime)}}(t)),ze.resolve()}}class Js{constructor(){this.overlays=new Sn(ue.comparator),this.kr=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ei();return ze.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),ze.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),ze.resolve()}getOverlaysForCollection(e,t,n){const r=Ei(),i=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ze.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Sn((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ei(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Ei(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ze.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new go(t,n));let i=this.kr.get(t);void 0===i&&(i=Pi(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class Zs{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return ze.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ze.resolve()}}class el{constructor(){this.qr=new Cn(tl.Qr),this.$r=new Cn(tl.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new tl(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new tl(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new ue(new ae([])),n=new tl(t,e),r=new tl(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ue(new ae([])),n=new tl(t,e),r=new tl(t,e+1);let i=Pi();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new tl(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tl{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ue.comparator(e.key,t.key)||J(e.Hr,t.Hr)}static Ur(e,t){return J(e.Hr,t.Hr)||ue.comparator(e.key,t.key)}}class nl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Cn(tl.Qr)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fo(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Yr=this.Yr.add(new tl(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ze.resolve(o)}lookupMutationBatch(e,t){return ze.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ze.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?tt:this.er-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tl(t,0),r=new tl(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),ze.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cn(J);return t.forEach(e=>{const t=new tl(e,0),r=new tl(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ze.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ue.isDocumentKey(i)||(i=i.child(""));const o=new tl(new ue(i),0);let a=new Cn(J);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},o),ze.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){O(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return ze.forEach(t.mutations,r=>{const i=new tl(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new tl(t,0),r=this.Yr.firstAfterOrEqual(n);return ze.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ze.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rl{constructor(e){this.ni=e,this.docs=new Sn(ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ze.resolve(n?n.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let n=Si();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():kr.newInvalidDocument(e))}),ze.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Si();const o=t.path,a=new ue(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ne(Re(a),n)<=0||(r.has(a.key)||mi(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ze.resolve(i)}getAllFromCollectionGroup(e,t,n,r){j(9500)}ri(e,t){return ze.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new il(this)}getSize(e){return ze.resolve(this.size)}}class il extends Us{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),ze.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class ol{constructor(e){this.persistence=e,this.ii=new wi(e=>Qr(e),Xr),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new el,this.targetCount=0,this._i=Es.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),ze.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Es(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.hr(t),ze.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ze.waitFor(i).next(()=>r)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return ze.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),ze.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ze.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return ze.resolve(n)}containsKey(e,t){return ze.resolve(this.oi.containsKey(t))}}class al{constructor(e,t){this.ai={},this.overlays={},this.ui=new et(0),this.ci=!1,this.ci=!0,this.li=new Zs,this.referenceDelegate=e(this),this.hi=new ol(this),this.indexManager=new as,this.remoteDocumentCache=function(e){return new rl(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new ba(t),this.Ti=new Xs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Js,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new nl(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){D("MemoryPersistence","Starting transaction:",e);const r=new sl(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ze.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class sl extends Le{constructor(e){super(),this.currentSequenceNumber=e}}class ll{constructor(e){this.persistence=e,this.Ai=new el,this.Ri=null}static Vi(e){return new ll(e)}get mi(){if(this.Ri)return this.Ri;throw j(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),ze.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.mi,n=>{const r=ue.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ze.or([()=>ze.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ul{constructor(e,t){this.persistence=e,this.gi=new wi(e=>at(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Ls(this,t)}static Vi(e,t){return new ul(e,t)}Ii(){}di(e){return ze.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return ze.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?ze.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ke.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ze.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),ze.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),ze.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ze.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ar(e.data.value)),t}Sr(e,t,n){return ze.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return ze.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cl{constructor(e){this.serializer=e}q(e,t,n,r){const i=new Ve("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(dt)}(e),function(e){e.createObjectStore(ft,{keyPath:"userId"});e.createObjectStore(pt,{keyPath:gt,autoIncrement:!0}).createIndex(mt,yt,{unique:!0}),e.createObjectStore(xt)}(e),dl(e),function(e){e.createObjectStore(ct)}(e));let o=ze.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Rt),e.deleteObjectStore(_t),e.deleteObjectStore(Ft)}(e),dl(e)),o=o.next(()=>function(e){const t=e.store(Ft),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return t.put(Lt,n)}(i))),n<4&&r>=4&&(0!==n&&(o=o.next(()=>function(e,t){return t.store(pt).j().next(n=>{e.deleteObjectStore(pt),e.createObjectStore(pt,{keyPath:gt,autoIncrement:!0}).createIndex(mt,yt,{unique:!0});const r=t.store(pt),i=n.map(e=>r.put(e));return ze.waitFor(i)})}(e,i))),o=o.next(()=>{!function(e){e.createObjectStore(Vt,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(()=>this.pi(i))),n<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore(Dt)}(e),this.yi(i)))),n<7&&r>=7&&(o=o.next(()=>this.wi(i))),n<8&&r>=8&&(o=o.next(()=>this.Si(e,i))),n<9&&r>=9&&(o=o.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(()=>this.bi(i))),n<11&&r>=11&&(o=o.next(()=>{!function(e){e.createObjectStore(Bt,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Wt,{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(()=>{!function(e){const t=e.createObjectStore(en,{keyPath:tn});t.createIndex(nn,rn,{unique:!1}),t.createIndex(on,an,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(()=>function(e){const t=e.createObjectStore(St,{keyPath:kt});t.createIndex(Tt,Ct),t.createIndex(Et,It)}(e)).next(()=>this.Di(e,i)).next(()=>e.deleteObjectStore(ct))),n<14&&r>=14&&(o=o.next(()=>this.Ci(e,i))),n<15&&r>=15&&(o=o.next(()=>function(e){e.createObjectStore(qt,{keyPath:"indexId",autoIncrement:!0}).createIndex(Ht,"collectionGroup",{unique:!1});e.createObjectStore($t,{keyPath:Kt}).createIndex(Gt,Yt,{unique:!1});e.createObjectStore(Qt,{keyPath:Xt}).createIndex(Jt,Zt,{unique:!1})}(e))),n<16&&r>=16&&(o=o.next(()=>{t.objectStore($t).clear()}).next(()=>{t.objectStore(Qt).clear()})),n<17&&r>=17&&(o=o.next(()=>{!function(e){e.createObjectStore(sn,{keyPath:"name"})}(e)})),n<18&&r>=18&&(0,l.Ov)()&&(o=o.next(()=>{t.objectStore($t).clear()}).next(()=>{t.objectStore(Qt).clear()})),o}yi(e){let t=0;return e.store(ct).X((e,n)=>{t+=ws(n)}).next(()=>{const n={byteSize:t};return e.store(Dt).put(At,n)})}pi(e){const t=e.store(ft),n=e.store(pt);return t.j().next(t=>ze.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,tt],[t.userId,t.lastAcknowledgedBatchId]);return n.j(mt,r).next(n=>ze.forEach(n,n=>{O(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=Ta(this.serializer,n);return bs(e,t.userId,r).next(()=>{})}))}))}wi(e){const t=e.store(Rt),n=e.store(ct);return e.store(Ft).get(Lt).next(e=>{const r=[];return n.X((n,i)=>{const o=new ae(n),a=function(e){return[0,at(e)]}(o);r.push(t.get(a).next(n=>n?ze.resolve():(n=>t.put({targetId:0,path:at(n),sequenceNumber:e.highestListenSequenceNumber}))(o)))}).next(()=>ze.waitFor(r))})}Si(e,t){e.createObjectStore(zt,{keyPath:Ut});const n=t.store(zt),r=new ss,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:at(r)})}};return t.store(ct).X({Z:!0},(e,t)=>{const n=new ae(e);return i(n.popLast())}).next(()=>t.store(xt).X({Z:!0},(e,t)=>{let[n,r,o]=e;const a=ut(r);return i(a.popLast())}))}bi(e){const t=e.store(_t);return t.X((e,n)=>{const r=Ca(n),i=Ea(this.serializer,r);return t.put(i)})}Di(e,t){const n=t.store(ct),r=[];return n.X((e,n)=>{const i=t.store(St),o=function(e){return e.document?new ue(ae.fromString(e.document.name).popFirst(5)):e.noDocument?ue.fromSegments(e.noDocument.path):e.unknownDocument?ue.fromSegments(e.unknownDocument.path):j(36783)}(n).path.toArray(),a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>ze.waitFor(r))}Ci(e,t){const n=t.store(pt),r=Bs(this.serializer),i=new al(ll.Vi,this.serializer.gt);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Pi();Ta(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),ze.forEach(n,(e,n)=>{const o=new k(n),a=Oa.yt(this.serializer,o),s=i.getIndexManager(o),l=xs.yt(o,this.serializer,s,i.referenceDelegate);return new Qs(r,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new mn(t,et.ue),e).next()})})}}function dl(e){e.createObjectStore(Rt,{keyPath:Ot}).createIndex(Nt,Mt,{unique:!0}),e.createObjectStore(_t,{keyPath:"targetId"}).createIndex(Pt,jt,{unique:!0}),e.createObjectStore(Ft)}const hl="IndexedDbPersistence",fl=18e5,pl=5e3,gl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ml="main";class yl{constructor(e,t,n,r,i,o,a,s,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fi=i,this.window=o,this.document=a,this.Mi=l,this.xi=u,this.Oi=c,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=e=>Promise.resolve(),!yl.C())throw new F(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fs(this,r),this.Qi=t+ml,this.serializer=new ba(s),this.$i=new Be(this.Qi,this.Oi,new cl(this.serializer)),this.li=new Ma,this.hi=new Is(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bs(this.serializer),this.Ti=new Pa,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,!1===u&&A(hl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,gl);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new et(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(e=>{e||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if($e(e))return D(hl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D(hl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return vl(e).get(ht).next(e=>ze.resolve(this.Xi(e)))}es(e){return bl(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,fl)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=yn(e,Vt);return t.j().next(e=>{const n=this.rs(e,fl),r=e.filter(e=>-1===n.indexOf(e));return ze.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?ze.resolve(!0):vl(e).get(ht).next(t=>{if(null!==t&&this.ns(t.leaseTimestampMs,pl)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,gl);return!1}}return!(!this.networkEnabled||!this.inForeground)||bl(e).j().next(e=>void 0===this.rs(e,pl).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&D(hl,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[dt,Vt],e=>{const t=new mn(e,et.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()}rs(e,t){return e.filter(e=>this.ns(e.updateTimeMs,t)&&!this._s(e.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>bl(e).j().next(e=>this.rs(e,fl).map(e=>e.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return xs.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cs(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Oa.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,n){D(hl,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?gn:17===e?pn:16===e?fn:15===e?hn:14===e?dn:13===e?cn:12===e?un:11===e?ln:void j(60245)}(this.Oi);let o;return this.$i.runTransaction(e,r,i,r=>(o=new mn(r,this.ui?this.ui.next():et.ue),"readwrite-primary"===t?this.Ji(o).next(e=>!!e||this.Hi(o)).next(t=>{if(!t)throw A(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new F(L.FAILED_PRECONDITION,Me);return n(o)}).next(e=>this.Zi(o).next(()=>e)):this.Ts(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Ts(e){return vl(e).get(ht).next(e=>{if(null!==e&&this.ns(e.leaseTimestampMs,pl)&&!this._s(e.ownerId)&&!this.Xi(e)&&!(this.xi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new F(L.FAILED_PRECONDITION,gl)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vl(e).put(ht,t)}static C(){return Be.C()}Yi(e){const t=vl(e);return t.get(ht).next(e=>this.Xi(e)?(D(hl,"Releasing primary lease."),t.delete(ht)):ze.resolve())}ns(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(A(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Wi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground="visible"===this.document.visibilityState)}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ni=()=>{this.us();const e=/(?:Version|Mobile)\/1[456]/;(0,l.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const n=null!==(null===(t=this.Ui)||void 0===t?void 0:t.getItem(this.ss(e)));return D(hl,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return A(hl,"Failed to get zombied client id.",e),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){A("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vl(e){return yn(e,dt)}function bl(e){return yn(e,Vt)}function wl(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class xl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Pi(),r=Pi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xl(e,t.fromCache,n,r)}}class Sl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kl{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(0,l.nr)()?8:We((0,l.ZQ)())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Sl;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(E()<=s.$b.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",gi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ze.resolve()):(E()<=s.$b.DEBUG&&D("QueryEngine","Query:",gi(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(E()<=s.$b.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",gi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):ze.resolve())}ps(e,t){if(oi(t))return ze.resolve(null);let n=li(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=hi(t,null,"F"),n=li(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Pi(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.bs(t,r);return this.Ds(t,o,i,n.readTime)?this.ps(e,hi(t,null,"F")):this.vs(e,o,t,n)}))})))}ys(e,t,n,r){return oi(t)||r.isEqual(ke.min())?ze.resolve(null):this.gs.getDocuments(e,n).next(i=>{const o=this.bs(t,i);return this.Ds(t,o,n,r)?ze.resolve(null):(E()<=s.$b.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gi(t)),this.vs(e,o,t,je(r,Te)).next(e=>e))})}bs(e,t){let n=new Cn(vi(e));return t.forEach((t,r)=>{mi(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return E()<=s.$b.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",gi(t)),this.gs.getDocumentsMatchingQuery(e,t,Oe.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Tl="LocalStore",Cl=3e8;class El{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Sn(J),this.Ms=new wi(e=>Qr(e),Xr),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qs(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Il(e,t,n,r){return new El(e,t,n,r)}async function Dl(e,t){const n=M(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=Pi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:o}))})})}function Al(e){const t=M(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function _l(e,t,n){let r=Pi(),i=Pi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Si();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ke.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):D(Tl,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{Ls:r,ks:i}})}function Pl(e,t){const n=M(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=tt),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jl(e,t){const n=M(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,ze.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new va(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Rl(e,t,n){const r=M(e),i=r.Fs.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!$e(e))throw e;D(Tl,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Ol(e,t,n){const r=M(e);let i=ke.min(),o=Pi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=M(e),i=r.Ms.get(n);return void 0!==i?ze.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,li(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:ke.min(),n?o:Pi())).next(e=>(Ll(r,yi(t),e),{documents:e,qs:o})))}function Nl(e,t){const n=M(e),r=M(n.hi),i=n.Fs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Ml(e,t){const n=M(e),r=n.xs.get(t)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Os.getAllFromCollectionGroup(e,t,je(r,Te),Number.MAX_SAFE_INTEGER)).then(e=>(Ll(n,t,e),e))}function Ll(e,t,n){let r=e.xs.get(t)||ke.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}async function Fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pi();const r=await jl(e,li(Ia(t.bundledQuery))),i=M(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const o=Ho(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ti.saveNamedQuery(e,t);const a=r.withResumeToken(Pn.EMPTY_BYTE_STRING,o);return i.Fs=i.Fs.insert(a.targetId,a),i.hi.updateTargetData(e,a).next(()=>i.hi.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.hi.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ti.saveNamedQuery(e,t))})}const zl="firestore_clients";function Ul(e,t){return`${zl}_${e}_${t}`}const Vl="firestore_mutations";function Bl(e,t,n){let r=`${Vl}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Wl="firestore_targets";function ql(e,t){return`${Wl}_${e}_${t}`}const Hl="SharedClientState";class $l{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ks(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new F(r.error.code,r.error.message))),o?new $l(e,t,r.state,i):(A(Hl,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ks(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new F(n.error.code,n.error.message))),i?new Kl(e,n.state,r):(A(Hl,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ri();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=it(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Gl(e,i):(A(Hl,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yl{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yl(t.clientId,t.onlineState):(A(Hl,`Failed to parse online state: ${e}`),null)}}class Ql{constructor(){this.activeTargetIds=Ri()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xl{constructor(e,t,n,r,i){this.window=e,this.Fi=t,this.persistenceKey=n,this.js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Sn(J),this.started=!1,this.Zs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=Ul(this.persistenceKey,this.js),this.eo=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Ql),this.no=new RegExp(`^${zl}_${o}_([^_]*)$`),this.ro=new RegExp(`^${Vl}_${o}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${Wl}_${o}_(\\d+)$`),this.so=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.oo=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const n of e){if(n===this.js)continue;const e=this.getItem(Ul(this.persistenceKey,n));if(e){const t=Gl.Ks(n,e);t&&(this.Ys=this.Ys.insert(t.clientId,t))}}this._o();const t=this.storage.getItem(this.so);if(t){const e=this.ao(t);e&&this.uo(e)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,n){this.lo(e,t,n),this.ho(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(ql(this.persistenceKey,e));if(t){const r=Kl.Ks(e,t);r&&(n=r.state)}}return t&&this.Po.Gs(e),this._o(),n}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ql(this.persistenceKey,e))}updateQueryState(e,t,n){this.To(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ho(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return D(Hl,"READ",e,t),t}setItem(e,t){D(Hl,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){D(Hl,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(D(Hl,"EVENT",t.key,t.newValue),t.key===this.Xs)return void A("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.no.test(t.key)){if(null==t.newValue){const e=this.Ao(t.key);return this.Ro(e,null)}{const e=this.Vo(t.key,t.newValue);if(e)return this.Ro(e.clientId,e)}}else if(this.ro.test(t.key)){if(null!==t.newValue){const e=this.mo(t.key,t.newValue);if(e)return this.fo(e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.po(t.key,t.newValue);if(e)return this.yo(e)}}else if(t.key===this.so){if(null!==t.newValue){const e=this.ao(t.newValue);if(e)return this.uo(e)}}else if(t.key===this.eo){const e=function(e){let t=et.ue;if(null!=e)try{const n=JSON.parse(e);O("number"==typeof n,30636,{wo:e}),t=n}catch(e){A(Hl,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==et.ue&&this.sequenceNumberHandler(e)}else if(t.key===this.oo){const e=this.So(t.newValue);await Promise.all(e.map(e=>this.syncEngine.bo(e)))}}else this.Zs.push(t)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,n){const r=new $l(this.currentUser,e,t,n),i=Bl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ws())}ho(e){const t=Bl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,n){const r=ql(this.persistenceKey,e),i=new Kl(e,t,n);this.setItem(r,i.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const n=this.Ao(e);return Gl.Ks(n,t)}mo(e,t){const n=this.ro.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return $l.Ks(new k(i),r,t)}po(e,t){const n=this.io.exec(e),r=Number(n[1]);return Kl.Ks(r,t)}ao(e){return Yl.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);D(Hl,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const n=t?this.Ys.insert(e,t):this.Ys.remove(e),r=this.co(this.Ys),i=this.co(n),o=[],a=[];return i.forEach(e=>{r.has(e)||o.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.Co(o,a).then(()=>{this.Ys=n})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=Ri();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Jl{constructor(){this.Fo=new Ql,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ql,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zl{xo(e){}shutdown(){}}const eu="ConnectivityMonitor";class tu{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){D(eu,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){D(eu,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nu=null;function ru(){return null===nu?nu=268435456+Math.round(2147483648*Math.random()):nu++,"0x"+nu.toString(16)}const iu="RestConnection",ou={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class au{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===qn?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const o=ru(),a=this.Go(e,t.toUriEncodedString());D(iu,`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(s,r,i);const{host:u}=new URL(a),c=(0,l.zJ)(u);return this.jo(e,a,s,n,c).then(t=>(D(iu,`Received RPC '${e}' ${o}: `,t),t),t=>{throw _(iu,`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,i,o){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+T,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=ou[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class su{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const lu="WebChannelConnection";class uu extends au{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const o=ru();return new Promise((i,a)=>{const s=new d;s.setWithCredentials(!0),s.listenOnce(f.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case p.NO_ERROR:const t=s.getResponseJson();D(lu,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(t)),i(t);break;case p.TIMEOUT:D(lu,`RPC '${e}' ${o} timed out`),a(new F(L.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=s.getStatus();if(D(lu,`RPC '${e}' ${o} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(t.status);a(new F(e,t.message))}else a(new F(L.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new F(L.UNAVAILABLE,"Connection failed."));break;default:j(9055,{c_:e,streamId:o,l_:s.getLastErrorCode(),h_:s.getLastError()})}}finally{D(lu,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(r);D(lu,`RPC '${e}' ${o} sending request:`,r),s.send(t,"POST",l,n,15)})}P_(e,t,n){const r=ru(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=v(),a=y(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.zo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");D(lu,`Creating RPC '${e}' stream ${r}: ${u}`,s);const c=o.createWebChannel(u,s);this.T_(c);let d=!1,f=!1;const p=new su({Ho:t=>{f?D(lu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(D(lu,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),D(lu,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Yo:()=>c.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(c,h.EventType.OPEN,()=>{f||(D(lu,`RPC '${e}' stream ${r} transport opened.`),p.s_())}),b(c,h.EventType.CLOSE,()=>{f||(f=!0,D(lu,`RPC '${e}' stream ${r} transport closed`),p.__(),this.I_(c))}),b(c,h.EventType.ERROR,t=>{f||(f=!0,_(lu,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.__(new F(L.UNAVAILABLE,"The operation could not be completed")))}),b(c,h.EventType.MESSAGE,t=>{var n;if(!f){const i=t.data[0];O(!!i,16349);const o=i,a=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){D(lu,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=vo[e];if(void 0!==t)return xo(t)}(t),i=a.message;void 0===n&&(n=L.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),f=!0,p.__(new F(n,i)),c.close()}else D(lu,`RPC '${e}' stream ${r} received:`,i),p.a_(i)}}),b(a,m.STAT_EVENT,t=>{t.stat===g.PROXY?D(lu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===g.NOPROXY&&D(lu,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.o_()},0),p}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function cu(){return"undefined"!=typeof window?window:null}function du(){return"undefined"!=typeof document?document:null}function hu(e){return new Uo(e,!0)}class fu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&D("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const pu="PersistentStream";class gu{constructor(e,t,n,r,i,o,a,s){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fu(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(A(t.toString()),A("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new F(L.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return D(pu,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(D(pu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mu extends gu{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:j(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t,58123),Pn.fromBase64String(t||"")):(O(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Pn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?L.UNKNOWN:xo(e.code);return new F(t,e.message||"")}(a);n=new jo(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qo(e,r.document.name),o=Ho(r.document.updateTime),a=r.document.createTime?Ho(r.document.createTime):ke.min(),s=new xr({mapValue:{fields:r.document.fields}}),l=kr.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new _o(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Qo(e,r.document),o=r.readTime?Ho(r.readTime):ke.min(),a=kr.newNoDocument(i,o),s=r.removedTargetIds||[];n=new _o([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Qo(e,r.document),o=r.removedTargetIds||[];n=new _o([],o,i,null)}else{if(!("filter"in t))return j(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new yo(r,i),a=e.targetId;n=new Po(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ke.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ke.min():t.readTime?Ho(t.readTime):ke.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Zo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Jr(r)?{documents:oa(e,r)}:{query:aa(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Wo(e,t.resumeToken);const r=Vo(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ke.min())>0){n.readTime=Bo(e,t.snapshotVersion.toTimestamp());const r=Vo(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Zo(this.serializer),t.removeTarget=e,this.k_(t)}}class yu extends gu{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return O(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,O(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){O(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(O(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ho(e.updateTime):Ho(t);return n.isEqual(ke.min())&&(n=Ho(t)),new Qi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ho(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Zo(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ra(this.serializer,e))};this.k_(t)}}class vu{}class bu extends vu{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Wo(e,Ko(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(L.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Jo(e,Ko(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(L.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class wu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(A(t),this._a=!1):D("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const xu="RemoteStore";class Su{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{Pu(this)&&(D(xu,"Restarting streams for network reachability change."),await async function(e){const t=M(e);t.Ia.add(4),await Tu(t),t.Aa.set("Unknown"),t.Ia.delete(4),await ku(t)}(this))})}),this.Aa=new wu(n,r)}}async function ku(e){if(Pu(e))for(const t of e.da)await t(!0)}async function Tu(e){for(const t of e.da)await t(!1)}function Cu(e,t){const n=M(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),_u(n)?Au(n):Qu(n).x_()&&Iu(n,t))}function Eu(e,t){const n=M(e),r=Qu(n);n.Ta.delete(t),r.x_()&&Du(n,t),0===n.Ta.size&&(r.x_()?r.B_():Pu(n)&&n.Aa.set("Unknown"))}function Iu(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ke.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Qu(e).H_(t)}function Du(e,t){e.Ra.$e(t),Qu(e).Y_(t)}function Au(e){e.Ra=new Oo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Qu(e).start(),e.Aa.aa()}function _u(e){return Pu(e)&&!Qu(e).M_()&&e.Ta.size>0}function Pu(e){return 0===M(e).Ia.size}function ju(e){e.Ra=void 0}async function Ru(e){e.Aa.set("Online")}async function Ou(e){e.Ta.forEach((t,n)=>{Iu(e,t)})}async function Nu(e,t){ju(e),_u(e)?(e.Aa.la(t),Au(e)):e.Aa.set("Unknown")}async function Mu(e,t,n){if(e.Aa.set("Online"),t instanceof jo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){D(xu,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lu(e,n)}else if(t instanceof _o?e.Ra.Ye(t):t instanceof Po?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ke.min()))try{const t=await Al(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Pn.EMPTY_BYTE_STRING,r.snapshotVersion)),Du(e,t);const i=new va(r.target,t,n,r.sequenceNumber);Iu(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){D(xu,"Failed to raise snapshot:",t),await Lu(e,t)}}async function Lu(e,t,n){if(!$e(t))throw t;e.Ia.add(1),await Tu(e),e.Aa.set("Offline"),n||(n=()=>Al(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{D(xu,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await ku(e)})}function Fu(e,t){return t().catch(n=>Lu(e,n,t))}async function zu(e){const t=M(e),n=Xu(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:tt;for(;Uu(t);)try{const e=await Pl(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,Vu(t,e)}catch(e){await Lu(t,e)}Bu(t)&&Wu(t)}function Uu(e){return Pu(e)&&e.Pa.length<10}function Vu(e,t){e.Pa.push(t);const n=Xu(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Bu(e){return Pu(e)&&!Xu(e).M_()&&e.Pa.length>0}function Wu(e){Xu(e).start()}async function qu(e){Xu(e).na()}async function Hu(e){const t=Xu(e);for(const n of e.Pa)t.X_(n.mutations)}async function $u(e,t,n){const r=e.Pa.shift(),i=po.from(r,t,n);await Fu(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await zu(e)}async function Ku(e,t){t&&Xu(e).Z_&&await async function(e,t){if(function(e){return wo(e)&&e!==L.ABORTED}(t.code)){const n=e.Pa.shift();Xu(e).N_(),await Fu(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await zu(e)}}(e,t),Bu(e)&&Wu(e)}async function Gu(e,t){const n=M(e);n.asyncQueue.verifyOperationInProgress(),D(xu,"RemoteStore received new credentials");const r=Pu(n);n.Ia.add(3),await Tu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await ku(n)}async function Yu(e,t){const n=M(e);t?(n.Ia.delete(2),await ku(n)):t||(n.Ia.add(2),await Tu(n),n.Aa.set("Unknown"))}function Qu(e){return e.Va||(e.Va=function(e,t,n){const r=M(e);return r.ia(),new mu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Ru.bind(null,e),e_:Ou.bind(null,e),n_:Nu.bind(null,e),J_:Mu.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),_u(e)?Au(e):e.Aa.set("Unknown")):(await e.Va.stop(),ju(e))})),e.Va}function Xu(e){return e.ma||(e.ma=function(e,t,n){const r=M(e);return r.ia(),new yu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:qu.bind(null,e),n_:Ku.bind(null,e),ea:Hu.bind(null,e),ta:$u.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await zu(e)):(await e.ma.stop(),e.Pa.length>0&&(D(xu,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}class Ju{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new z,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Ju(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new F(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zu(e,t){if(A("AsyncQueue",`${t}: ${e}`),$e(e))return new F(L.UNAVAILABLE,`${t}: ${e}`);throw e}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ue.comparator(t.key,n.key):(e,t)=>ue.comparator(e.key,t.key),this.keyedMap=Ti(),this.sortedSet=new Sn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tc{constructor(){this.fa=new Sn(ue.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):j(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class nc{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new nc(e,t,ec.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class rc{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class ic{constructor(){this.queries=oc(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=M(e),r=n.queries;n.queries=oc(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new F(L.ABORTED,"Firestore shutting down"))}}function oc(){return new wi(e=>pi(e),fi)}async function ac(e,t){const n=M(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Sa()&&t.ba()&&(r=2):(o=new rc,r=t.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Zu(e,`Initialization of query '${gi(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.wa.push(t),t.va(n.onlineState),o.ya&&t.Ca(o.ya)&&cc(n)}async function sc(e,t){const n=M(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.wa.indexOf(t);e>=0&&(o.wa.splice(e,1),0===o.wa.length?i=t.ba()?0:1:!o.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lc(e,t){const n=M(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&cc(n)}function uc(e,t,n){const r=M(e),i=r.queries.get(t);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(t)}function cc(e){e.Da.forEach(e=>{e.next()})}var dc,hc;(hc=dc||(dc={})).Fa="default",hc.Cache="cache";class fc{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dc.Cache}}class pc{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}class gc{constructor(e){this.serializer=e}Qs(e){return Qo(this.serializer,e)}$s(e){return e.metadata.exists?na(this.serializer,e.document,!1):kr.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ho(e)}}class mc{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=yc(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const n=ae.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,n=new gc(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Qs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Pi()).add(e);t.set(n,r)}}return t}async za(e){const t=await async function(e,t,n,r){const i=M(e);let o=Pi(),a=Si();for(const u of n){const e=t.Qs(u.metadata.name);u.document&&(o=o.add(e));const n=t.$s(u);n.setReadTime(t.Us(u.metadata.readTime)),a=a.insert(e,n)}const s=i.Os.newChangeBuffer({trackRemovals:!0}),l=await jl(i,function(e){return li(ii(ae.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>_l(e,s,a).next(t=>(s.apply(e),t)).next(t=>i.hi.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.hi.addMatchingKeys(e,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.Ls,t.ks)).next(()=>t.Ls)))}(e,new gc(this.serializer),this.Ka,this.$a.id),n=this.Ga(this.documents);for(const r of this.Ua)await Fl(e,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function yc(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class vc{constructor(e){this.key=e}}class bc{constructor(e){this.key=e}}class wc{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pi(),this.mutatedKeys=Pi(),this.Xa=vi(e),this.eu=new ec(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new tc,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=mi(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.iu(u,c)||(n.track({type:2,doc:c}),f=!0,(s&&this.Xa(c,s)>0||l&&this.Xa(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(s||l)&&(a=!0)),f&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:o,ru:n,Ds:a,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],s=0===this.Za.size&&this.current&&!r?1:0,l=s!==this.Ya;return this.Ya=s,0!==o.length||l?{snapshot:new nc(this.query,e.eu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new tc,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pi(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new bc(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new vc(n))}),t}uu(e){this.Ha=e.qs,this.Za=Pi();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return nc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const xc="SyncEngine";class Sc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kc{constructor(e){this.key=e,this.lu=!1}}class Tc{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new wi(e=>pi(e),fi),this.Tu=new Map,this.Iu=new Set,this.du=new Sn(ue.comparator),this.Eu=new Map,this.Au=new el,this.Ru={},this.Vu=new Map,this.mu=Es.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function Cc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ed(e);let i;const o=r.Pu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await Ic(r,t,n,!0),i}async function Ec(e,t){const n=ed(e);await Ic(n,t,!0,!1)}async function Ic(e,t,n,r){const i=await jl(e.localStore,li(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Dc(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Cu(e.remoteStore,i),s}async function Dc(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await Ol(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Uc(e,t.targetId,s._u),s.snapshot}(e,t,n,r);const o=await Ol(e.localStore,t,!0),a=new wc(t,o.qs),s=a.nu(o.documents),l=Ao.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(s,e.isPrimaryClient,l);Uc(e,n,u._u);const c=new Sc(t,n,a);return e.Pu.set(t,c),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),u.snapshot}async function Ac(e,t,n){const r=M(e),i=r.Pu.get(t),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(e=>!fi(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Eu(r.remoteStore,i.targetId),Fc(r,i.targetId)}).catch(Fe)):(Fc(r,i.targetId),await Rl(r.localStore,i.targetId,!0))}async function _c(e,t){const n=M(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Eu(n.remoteStore,r.targetId))}async function Pc(e,t){const n=M(e);try{const e=await function(e,t){const n=M(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.hi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.hi.addMatchingKeys(e,o.addedDocuments,s)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(Pn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Cl||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,o)&&a.push(n.hi.updateTargetData(e,u))});let s=Si(),l=Pi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(_l(e,o,t.documentUpdates).next(e=>{s=e.Ls,l=e.ks})),!r.isEqual(ke.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ze.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Fs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?O(r.lu,14607):e.removedDocuments.size>0&&(O(r.lu,42227),r.lu=!1))}),await Wc(n,e,t)}catch(e){await Fe(e)}}function jc(e,t,n){const r=M(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=M(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&cc(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Rc(e,t,n){const r=M(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),o=i&&i.key;if(o){let e=new Sn(ue.comparator);e=e.insert(o,kr.newNoDocument(o,ke.min()));const n=Pi().add(o),i=new Do(ke.min(),new Map,new Sn(J),e,n);await Pc(r,i),r.du=r.du.remove(o),r.Eu.delete(t),Bc(r)}else await Rl(r.localStore,t,!1).then(()=>Fc(r,t,n)).catch(Fe)}async function Oc(e,t){const n=M(e),r=t.batch.batchId;try{const e=await function(e,t){const n=M(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=ze.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);O(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Pi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Lc(n,r,null),Mc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wc(n,e)}catch(e){await Fe(e)}}async function Nc(e,t,n){const r=M(e);try{const e=await function(e,t){const n=M(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(O(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Lc(r,t,n),Mc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wc(r,e)}catch(n){await Fe(n)}}function Mc(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function Lc(e,t,n){const r=M(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Fc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||zc(e,t)})}function zc(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Eu(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Bc(e))}function Uc(e,t,n){for(const r of n)r instanceof vc?(e.Au.addReference(r.key,t),Vc(e,r)):r instanceof bc?(D(xc,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||zc(e,r.key)):j(19791,{yu:r})}function Vc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(D(xc,"New document in limbo: "+n),e.Iu.add(r),Bc(e))}function Bc(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new ue(ae.fromString(t)),r=e.mu.next();e.Eu.set(r,new kc(n)),e.du=e.du.insert(n,r),Cu(e.remoteStore,new va(li(ii(n.path)),r,"TargetPurposeLimboResolution",et.ue))}}async function Wc(e,t,n){const r=M(e),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,s)=>{a.push(r.gu(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=xl.Es(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.hu.J_(i),await async function(e,t){const n=M(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ze.forEach(t,t=>ze.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ze.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!$e(e))throw e;D(Tl,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,o))}async function qc(e,t){const n=M(e);if(!n.currentUser.isEqual(t)){D(xc,"User change. New user:",t.toKey());const e=await Dl(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new F(L.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wc(n,e.Bs)}}function Hc(e,t){const n=M(e),r=n.Eu.get(t);if(r&&r.lu)return Pi().add(r.key);{let e=Pi();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}async function $c(e,t){const n=M(e),r=await Ol(n.localStore,t.query,!0),i=t.view.uu(r);return n.isPrimaryClient&&Uc(n,t.targetId,i._u),i}async function Kc(e,t){const n=M(e);return Ml(n.localStore,t).then(e=>Wc(n,e))}async function Gc(e,t,n,r){const i=M(e),o=await function(e,t){const n=M(e),r=M(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):ze.resolve(null)))}(i.localStore,t);null!==o?("pending"===n?await zu(i.remoteStore):"acknowledged"===n||"rejected"===n?(Lc(i,t,r||null),Mc(i,t),function(e,t){M(M(e).mutationQueue).rr(t)}(i.localStore,t)):j(6720,"Unknown batchState",{wu:n}),await Wc(i,o)):D(xc,"Cannot apply mutation batch with id: "+t)}async function Yc(e,t,n){const r=M(e),i=[],o=[];for(const a of t){let e;const t=r.Tu.get(a);if(t&&0!==t.length){e=await jl(r.localStore,li(t[0]));for(const e of t){const t=r.Pu.get(e),n=await $c(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Nl(r.localStore,a);e=await jl(r.localStore,t),await Dc(r,Qc(t),a,!1,e.resumeToken)}i.push(e)}return r.hu.J_(o),i}function Qc(e){return ri(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xc(e){return function(e){return M(M(e).persistence).Ps()}(M(e).localStore)}async function Jc(e,t,n,r){const i=M(e);if(i.fu)return void D(xc,"Ignoring unexpected query state notification.");const o=i.Tu.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Ml(i.localStore,yi(o[0])),r=Do.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Pn.EMPTY_BYTE_STRING);await Wc(i,e,r);break}case"rejected":await Rl(i.localStore,t,!0),Fc(i,t,r);break;default:j(64155,n)}}async function Zc(e,t,n){const r=ed(e);if(r.fu){for(const e of t){if(r.Tu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){D(xc,"Adding an already active target "+e);continue}const t=await Nl(r.localStore,e),n=await jl(r.localStore,t);await Dc(r,Qc(t),n.targetId,!1,n.resumeToken),Cu(r.remoteStore,n)}for(const e of n)r.Tu.has(e)&&await Rl(r.localStore,e,!1).then(()=>{Eu(r.remoteStore,e),Fc(r,e)}).catch(Fe)}}function ed(e){const t=M(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rc.bind(null,t),t.hu.J_=lc.bind(null,t.eventManager),t.hu.pu=uc.bind(null,t.eventManager),t}function td(e){const t=M(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Oc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nc.bind(null,t),t}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Il(this.persistence,new kl,e.initialUser,this.serializer)}Du(e){return new al(ll.Vi,this.serializer)}bu(e){return new Jl}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class rd extends nd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){O(this.persistence.referenceDelegate instanceof ul,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ns(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new al(e=>ul.Vi(e,t),this.serializer)}}class id extends nd{constructor(e,t,n){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await td(this.Mu.syncEngine),await zu(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Il(this.persistence,new kl,e.initialUser,this.serializer)}Cu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Ns(n,e.asyncQueue,t)}Fu(e,t){const n=new Ze(t,this.persistence);return new Je(e.asyncQueue,n)}Du(e){const t=wl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new yl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cu(),du(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Jl}}class od extends id{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof Xl&&(this.sharedClientState.syncEngine={Do:Gc.bind(null,t),vo:Jc.bind(null,t),Co:Zc.bind(null,t),Ps:Xc.bind(null,t),bo:Kc.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji(async e=>{await async function(e,t){const n=M(e);if(ed(n),td(n),!0===t&&!0!==n.fu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Yc(n,e.toArray());n.fu=!0,await Yu(n.remoteStore,!0);for(const r of t)Cu(n.remoteStore,r)}else if(!1===t&&!1!==n.fu){const e=[];let t=Promise.resolve();n.Tu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Fc(n,i),Rl(n.localStore,i,!0))),Eu(n.remoteStore,i)}),await t,await Yc(n,e),function(e){const t=M(e);t.Eu.forEach((e,n)=>{Eu(t.remoteStore,n)}),t.Au.jr(),t.Eu=new Map,t.du=new Sn(ue.comparator)}(n),n.fu=!1,await Yu(n.remoteStore,!1)}}(this.Mu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}bu(e){const t=cu();if(!Xl.C(t))throw new F(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=wl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xl(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ad{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qc.bind(null,this.syncEngine),await Yu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ic}createDatastore(e){const t=hu(e.databaseInfo.databaseId),n=function(e){return new uu(e)}(e.databaseInfo);return function(e,t,n,r){return new bu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Su(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>jc(this.syncEngine,e,0),tu.C()?new tu:new Zl)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Tc(e,t,n,r,i,o);return a&&(s.fu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=M(e);D(xu,"RemoteStore shutting down."),t.Ia.add(5),await Tu(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function sd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}ad.provider={build:()=>new ad};class ld{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):A("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ud{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new z,this.buffer=new Uint8Array,this.Bu=new TextDecoder("utf-8"),this.Lu().then(e=>{e&&e.Qa()?this.metadata.resolve(e.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.qa)}`))},e=>this.metadata.reject(e))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(null===e)return null;const t=this.Bu.decode(e),n=Number(t);isNaN(n)&&this.qu(`length string (${t}) is not valid number`);const r=await this.Qu(n);return new pc(JSON.parse(r),e.length+n)}$u(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(0===this.buffer.length)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class cd{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let n=this.Su();if(!n||!n.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is\n         ${JSON.stringify(null==n?void 0:n.qa)}`);this.metadata=n;do{n=this.Su(),null!==n&&this.elements.push(n)}while(null!==n)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),t=this.Qu(e);return new pc(JSON.parse(t),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new F(L.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}class dd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=M(e),r={documents:t.map(e=>Yo(n.serializer,e))},i=await n.Jo("BatchGetDocuments",n.serializer.databaseId,ae.emptyPath(),r,t.length),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){O(!!t.found,43571),t.found.name,t.found.updateTime;const n=Qo(e,t.found.name),r=Ho(t.found.updateTime),i=t.found.createTime?Ho(t.found.createTime):ke.min(),o=new xr({mapValue:{fields:t.found.fields}});return kr.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){O(!!t.missing,3894),O(!!t.readTime,22933);const n=Qo(e,t.missing),r=Ho(t.readTime);return kr.newNoDocument(n,r)}(e,t):j(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());O(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new co(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ue.fromPath(t);this.mutations.push(new ho(n,this.precondition(n)))}),await async function(e,t){const n=M(e),r={writes:t.map(e=>ra(n.serializer,e))};await n.Wo("Commit",n.serializer.databaseId,ae.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j(50498,{Wu:e.constructor.name});t=ke.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new F(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ke.min())?Xi.exists(!1):Xi.updateTime(t):Xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ke.min()))throw new F(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(t)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hd{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Gu=n.maxAttempts,this.F_=new fu(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new dd(this.datastore),t=this.Ju(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Hu(e)}))}).catch(e=>{this.Hu(e)})})}Ju(e){try{const t=this.updateFunction(e);return!nt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wo(t)}return!1}}const fd="FirestoreClient";class pd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=k.UNAUTHENTICATED,this.clientId=X.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{D(fd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(D(fd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new z;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Zu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function gd(e,t){e.asyncQueue.verifyOperationInProgress(),D(fd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Dl(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{_("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{D("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{_("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function md(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yd(e);D(fd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Gu(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Gu(t.remoteStore,n)),e._onlineComponents=t}async function yd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){D(fd,"Using user provided OfflineComponentProvider");try{await gd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_("Error using user provided cache. Falling back to memory cache: "+n),await gd(e,new nd)}}else D(fd,"Using default OfflineComponentProvider"),await gd(e,new rd(void 0));return e._offlineComponents}async function vd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(D(fd,"Using user provided OnlineComponentProvider"),await md(e,e._uninitializedComponentsProvider._online)):(D(fd,"Using default OnlineComponentProvider"),await md(e,new ad))),e._onlineComponents}function bd(e){return yd(e).then(e=>e.persistence)}function wd(e){return yd(e).then(e=>e.localStore)}function xd(e){return vd(e).then(e=>e.remoteStore)}function Sd(e){return vd(e).then(e=>e.syncEngine)}function kd(e){return vd(e).then(e=>e.datastore)}async function Td(e){const t=await vd(e),n=t.eventManager;return n.onListen=Cc.bind(null,t.syncEngine),n.onUnlisten=Ac.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ec.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_c.bind(null,t.syncEngine),n}function Cd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new z;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new ld({next:s=>{o.Ou(),t.enqueueAndForget(()=>sc(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new F(L.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new F(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new fc(ii(n.path),o,{includeMetadataChanges:!0,ka:!0});return ac(e,a)}(await Td(e),e.asyncQueue,t,n,r)),r.promise}function Ed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new z;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new ld({next:n=>{o.Ou(),t.enqueueAndForget(()=>sc(e,a)),n.fromCache&&"server"===r.source?i.reject(new F(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new fc(n,o,{includeMetadataChanges:!0,ka:!0});return ac(e,a)}(await Td(e),e.asyncQueue,t,n,r)),r.promise}function Id(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Q().encode(e):e,function(e,t){return new ud(e,t)}(function(e,t){if(e instanceof Uint8Array)return sd(e,t);if(e instanceof ArrayBuffer)return sd(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,hu(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=M(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=M(e),r=Ho(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ti.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(yc(r));const i=new mc(r,t.serializer);let o=await t.Su();for(;o;){const e=await i.Wa(o);e&&n._updateProgress(e),o=await t.Su()}const a=await i.za(e.localStore);return await Wc(e,a.Ja,void 0),await function(e,t){const n=M(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ti.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.ja)}catch(e){return _(xc,`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await Sd(e),i,r)})}function Dd(e,t){return function(e,t){return new cd(e,t)}(e,t)}function Ad(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _d=new Map,Pd="firestore.googleapis.com",jd=!0;class Rd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new F(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pd,this.ssl=jd}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:jd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ys;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<js)throw new F(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}de("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ad(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new F(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_d.get(e);t&&(D("ComponentProvider","Removing Datastore"),_d.delete(e),t.terminate())}(this),Promise.resolve()}}function Nd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=me(e,Od);const o=(0,l.zJ)(t),a=e._getSettings(),s=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;o&&((0,l.gE)(`https://${u}`),(0,l.P1)("Firestore",!0)),a.host!==Pd&&a.host!==u&&_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:r});if(!(0,l.bD)(c,s)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=k.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new F(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new k(o)}e._authCredentials=new B(new U(t,n))}}class Md{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Md(this.firestore,e,this._query)}}class Ld{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ld(this.firestore,e,this._key)}toJSON(){return{type:Ld._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(be(t,Ld._jsonSchema))return new Ld(e,n||null,new ue(ae.fromString(t.referencePath)))}}Ld._jsonSchemaVersion="firestore/documentReference/1.0",Ld._jsonSchema={type:ve("string",Ld._jsonSchemaVersion),referencePath:ve("string")};class Fd extends Md{constructor(e,t,n){super(e,t,ii(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ld(this.firestore,null,new ue(e))}withConverter(e){return new Fd(this.firestore,e,this._path)}}function zd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),ce("collection","path",t),e instanceof Od){const n=ae.fromString(t,...r);return fe(n),new Fd(e,null,n)}{if(!(e instanceof Ld||e instanceof Fd))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ae.fromString(t,...r));return fe(n),new Fd(e.firestore,null,n)}}function Ud(e,t){if(e=me(e,Od),ce("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Md(e,null,function(e){return new ni(ae.emptyPath(),e)}(t))}function Vd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=X.newId()),ce("doc","path",t),e instanceof Od){const n=ae.fromString(t,...r);return he(n),new Ld(e,null,new ue(n))}{if(!(e instanceof Ld||e instanceof Fd))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ae.fromString(t,...r));return he(n),new Ld(e.firestore,e instanceof Fd?e.converter:null,new ue(n))}}function Bd(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),(e instanceof Ld||e instanceof Fd)&&(t instanceof Ld||t instanceof Fd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Wd(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),e instanceof Md&&t instanceof Md&&e.firestore===t.firestore&&fi(e._query,t._query)&&e.converter===t.converter}const qd="AsyncQueue";class Hd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fu(this,"async_queue_retry"),this.oc=()=>{const e=du();e&&D(qd,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=du();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=du();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new z;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!$e(e))throw e;D(qd,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,A("INTERNAL UNHANDLED ERROR: ",$d(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Ju.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&j(47125,{hc:$d(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function $d(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Kd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Gd{constructor(){this._progressObserver={},this._taskCompletionResolver=new z,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Yd=-1;class Qd extends Od{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Hd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hd(e),this._firestoreClient=void 0,await e}}}function Xd(e,t,n){n||(n=qn);const r=(0,o.j6)(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),i=r.getOptions(n);if((0,l.bD)(i,t))return e;throw new F(L.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new F(L.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<js)throw new F(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&(0,l.zJ)(t.host)&&(0,l.gE)(t.host),r.initialize({options:t,instanceIdentifier:n})}function Jd(e,t){const n="object"==typeof e?e:(0,o.Sx)(),r="string"==typeof e?e:t||qn,i=(0,o.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&Nd(i,...e)}return i}function Zd(e){if(e._terminated)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||eh(e),e._firestoreClient}function eh(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Wn(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ad(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new pd(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function th(e,t){_("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return rh(e,ad.provider,{build:e=>new id(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}async function nh(e){_("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();rh(e,ad.provider,{build:e=>new od(e,t.cacheSizeBytes)})}function rh(e,t,n){if((e=me(e,Qd))._firestoreClient||e._terminated)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new F(L.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},eh(e)}function ih(e){if(e._initialized&&!e._terminated)throw new F(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new z;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!Be.C())return Promise.resolve();const t=e+ml;await Be.delete(t)}(wl(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function oh(e){return function(e){const t=new z;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=M(e);Pu(n.remoteStore)||D(xc,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=M(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===tt)return void t.resolve();const r=n.Vu.get(e)||[];r.push(t),n.Vu.set(e,r)}catch(e){const n=Zu(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Sd(e),t)),t.promise}(Zd(e=me(e,Qd)))}function ah(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await bd(e),n=await xd(e);return t.setNetworkEnabled(!0),function(e){const t=M(e);return t.Ia.delete(0),ku(t)}(n)})}(Zd(e=me(e,Qd)))}function sh(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await bd(e),n=await xd(e);return t.setNetworkEnabled(!1),async function(e){const t=M(e);t.Ia.add(0),await Tu(t),t.Aa.set("Offline")}(n)})}(Zd(e=me(e,Qd)))}function lh(e){return(0,o.Us)(e.app,"firestore",e._databaseId.database),e._delete()}function uh(e,t){const n=Zd(e=me(e,Qd)),r=new Gd;return Id(n,e._databaseId,t,r),r}function ch(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=M(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ti.getNamedQuery(e,t))}(await wd(e),t))}(Zd(e=me(e,Qd)),t).then(t=>t?new Md(e,null,t.query):null)}class dh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class hh{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class fh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fh(Pn.fromBase64String(e))}catch(e){throw new F(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fh(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(be(e,fh._jsonSchema))return fh.fromBase64String(e.bytes)}}fh._jsonSchemaVersion="firestore/bytes/1.0",fh._jsonSchema={type:ve("string",fh._jsonSchemaVersion),bytes:ve("string")};class ph{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new F(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function gh(){return new ph(ie)}class mh{constructor(e){this._methodName=e}}class yh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yh._jsonSchemaVersion}}static fromJSON(e){if(be(e,yh._jsonSchema))return new yh(e.latitude,e.longitude)}}yh._jsonSchemaVersion="firestore/geoPoint/1.0",yh._jsonSchema={type:ve("string",yh._jsonSchemaVersion),latitude:ve("number"),longitude:ve("number")};class vh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(be(e,vh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new vh(e.vectorValues);throw new F(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vh._jsonSchemaVersion="firestore/vectorValue/1.0",vh._jsonSchema={type:ve("string",vh._jsonSchemaVersion),vectorValues:ve("object")};const bh=/^__.*__$/;class wh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new oo(e,this.data,t,this.fieldTransforms)}}class xh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ec:e})}}class kh{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new kh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(Sh(this.Ec)&&bh.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Th{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hu(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kh({Ec:e,methodName:t,bc:n,path:le.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ch(e){const t=e._freezeSettings(),n=hu(e._databaseId);return new Th(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Eh(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(o.merge||o.mergeFields?2:0,t,n,i);zh("Data must be an object, but it was:",a,r);const s=Lh(r,a);let l,u;if(o.merge)l=new Dn(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Uh(t,r,n);if(!a.contains(i))throw new F(L.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);qh(e,i)||e.push(i)}l=new Dn(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new wh(new xr(s),l,u)}class Ih extends mh{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ih}}function Dh(e,t,n){return new kh({Ec:3,bc:t.settings.bc,methodName:e._methodName,mc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ah extends mh{_toFieldTransform(e){return new Yi(e.path,new Vi)}isEqual(e){return e instanceof Ah}}class _h extends mh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Dh(this,e,!0),n=this.vc.map(e=>Mh(e,t)),r=new Bi(n);return new Yi(e.path,r)}isEqual(e){return e instanceof _h&&(0,l.bD)(this.vc,e.vc)}}class Ph extends mh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Dh(this,e,!0),n=this.vc.map(e=>Mh(e,t)),r=new qi(n);return new Yi(e.path,r)}isEqual(e){return e instanceof Ph&&(0,l.bD)(this.vc,e.vc)}}class jh extends mh{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new $i(e.serializer,Mi(e.serializer,this.Cc));return new Yi(e.path,t)}isEqual(e){return e instanceof jh&&this.Cc===e.Cc}}function Rh(e,t,n,r){const i=e.Dc(1,t,n);zh("Data must be an object, but it was:",i,r);const o=[],a=xr.empty();bn(r,(e,r)=>{const s=Bh(t,e,n);r=(0,l.Ku)(r);const u=i.gc(s);if(r instanceof Ih)o.push(s);else{const e=Mh(r,u);null!=e&&(o.push(s),a.set(s,e))}});const s=new Dn(o);return new xh(a,s,i.fieldTransforms)}function Oh(e,t,n,r,i,o){const a=e.Dc(1,t,n),s=[Uh(t,r,n)],u=[i];if(o.length%2!=0)throw new F(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<o.length;l+=2)s.push(Uh(t,o[l])),u.push(o[l+1]);const c=[],d=xr.empty();for(let f=s.length-1;f>=0;--f)if(!qh(c,s[f])){const e=s[f];let t=u[f];t=(0,l.Ku)(t);const n=a.gc(e);if(t instanceof Ih)c.push(e);else{const r=Mh(t,n);null!=r&&(c.push(e),d.set(e,r))}}const h=new Dn(c);return new xh(d,h,a.fieldTransforms)}function Nh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Mh(n,e.Dc(r?4:3,t))}function Mh(e,t){if(Fh(e=(0,l.Ku)(e)))return zh("Unsupported field value:",t,e),Lh(e,t);if(e instanceof mh)return function(e,t){if(!Sh(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Mh(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Mi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Se.fromDate(e);return{timestampValue:Bo(t.serializer,n)}}if(e instanceof Se){const n=new Se(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bo(t.serializer,n)}}if(e instanceof yh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fh)return{bytesValue:Wo(t.serializer,e._byteString)};if(e instanceof Ld){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$o(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof vh)return function(e,t){return{mapValue:{fields:{[$n]:{stringValue:Yn},[Qn]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return Oi(t.serializer,e)})}}}}}}(e,t);throw t.wc(`Unsupported field value: ${ge(e)}`)}(e,t)}function Lh(e,t){const n={};return xn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bn(e,(e,r)=>{const i=Mh(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Fh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Se||e instanceof yh||e instanceof fh||e instanceof Ld||e instanceof mh||e instanceof vh)}function zh(e,t,n){if(!Fh(n)||!pe(n)){const r=ge(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Uh(e,t,n){if((t=(0,l.Ku)(t))instanceof ph)return t._internalPath;if("string"==typeof t)return Bh(e,t);throw Wh("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vh=new RegExp("[~\\*/\\[\\]]");function Bh(e,t,n){if(t.search(Vh)>=0)throw Wh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ph(...t.split("."))._internalPath}catch(r){throw Wh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wh(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(L.INVALID_ARGUMENT,s+e+l)}function qh(e,t){return e.some(e=>e.isEqual(t))}class Hh{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ld(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $h(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $h extends Hh{data(){return super.data()}}function Kh(e,t){return"string"==typeof t?Bh(e,t):t instanceof ph?t._internalPath:t._delegate._internalPath}function Gh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new F(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yh{}class Qh extends Yh{}function Xh(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Yh&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ef).length,n=e.filter(e=>e instanceof Jh).length;if(t>1||t>0&&n>0)throw new F(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Jh extends Qh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Jh(e,t,n)}_apply(e){const t=this._parse(e);return vf(e._query,t),new Md(e.firestore,e.converter,di(e._query,t))}_parse(e){const t=Ch(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new F(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){yf(a,o);const t=[];for(const n of a)t.push(mf(r,e,n));s={arrayValue:{values:t}}}else s=mf(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||yf(a,o),s=Nh(n,t,a,"in"===o||"not-in"===o);return _r.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Zh(e,t,n){const r=t,i=Kh("where",e);return Jh._create(i,r,n)}class ef extends Yh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ef(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)vf(n,i),n=di(n,i)}(e._query,t),new Md(e.firestore,e.converter,di(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function tf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>bf("or",e)),ef._create("or",t)}function nf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>bf("and",e)),ef._create("and",t)}class rf extends Qh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ir(t,n)}(e._query,this._field,this._direction);return new Md(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ni(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function of(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kh("orderBy",e);return rf._create(n,t)}class af extends Qh{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new af(e,t,n)}_apply(e){return new Md(e.firestore,e.converter,hi(e._query,this._limit,this._limitType))}}function sf(e){return ye("limit",e),af._create("limit",e,"F")}function lf(e){return ye("limitToLast",e),af._create("limitToLast",e,"L")}class uf extends Qh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uf(e,t,n)}_apply(e){const t=gf(e,this.type,this._docOrFields,this._inclusive);return new Md(e.firestore,e.converter,function(e,t){return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function cf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uf._create("startAt",t,!0)}function df(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uf._create("startAfter",t,!1)}class hf extends Qh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new hf(e,t,n)}_apply(e){const t=gf(e,this.type,this._docOrFields,this._inclusive);return new Md(e.firestore,e.converter,function(e,t){return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function ff(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hf._create("endBefore",t,!1)}function pf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hf._create("endAt",t,!0)}function gf(e,t,n,r){if(n[0]=(0,l.Ku)(n[0]),n[0]instanceof Hh)return function(e,t,n,r,i){if(!r)throw new F(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const a of si(e))if(a.field.isKeyField())o.push(sr(t,r.key));else{const e=r.data.field(a.field);if(Un(e))throw new F(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new F(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new Tr(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Ch(e.firestore);return function(e,t,n,r,i,o){const a=e.explicitOrderBy;if(i.length>a.length)throw new F(L.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const s=[];for(let l=0;l<i.length;l++){const o=i[l];if(a[l].field.isKeyField()){if("string"!=typeof o)throw new F(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof o}`);if(!ai(e)&&-1!==o.indexOf("/"))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${o}' contains a slash.`);const n=e.path.child(ae.fromString(o));if(!ue.isDocumentKey(n))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ue(n);s.push(sr(t,i))}else{const e=Nh(n,r,o);s.push(e)}}return new Tr(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function mf(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new F(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ai(t)&&-1!==n.indexOf("/"))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ae.fromString(n));if(!ue.isDocumentKey(r))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sr(e,new ue(r))}if(n instanceof Ld)return sr(e,n._key);throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ge(n)}.`)}function yf(e,t){if(!Array.isArray(e)||0===e.length)throw new F(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function bf(e,t){if(!(t instanceof Jh||t instanceof ef))throw new F(L.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class wf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return bn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Qn].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>On(e.doubleValue));return new vh(i)}convertGeoPoint(e){return new yh(On(e.latitude),On(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Bn(e));default:return null}}convertTimestamp(e){const t=Rn(e);return new Se(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ae.fromString(e);O(ya(n),9688,{name:e});const r=new Hn(n.get(1),n.get(3)),i=new ue(n.popFirst(5));return r.isEqual(t)||A(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function xf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Sf extends wf{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ld(this.firestore,null,t)}}function kf(e){return new dh("sum",Uh("sum",e))}function Tf(e){return new dh("avg",Uh("average",e))}function Cf(){return new dh("count")}function Ef(e,t){var n,r;return e instanceof dh&&t instanceof dh&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function If(e,t){return Wd(e.query,t.query)&&(0,l.bD)(e.data(),t.data())}const Df="NOT SUPPORTED";class Af{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _f extends Hh{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_f._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}function Pf(e,t,n){if(be(t,_f._jsonSchema)){if(t.bundle===Df)throw new F(L.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=hu(e._databaseId),i=Dd(t.bundle,r),o=i.Ku(),a=new mc(i.getMetadata(),r);for(const e of o)a.Wa(e);const s=a.documents;if(1!==s.length)throw new F(L.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${s.length} documents.`);const l=na(r,s[0].document),u=new ue(ae.fromString(t.bundleName));return new _f(e,new Sf(e),u,l,new Af(!1,!1),n||null)}}_f._jsonSchemaVersion="firestore/documentSnapshot/1.0",_f._jsonSchema={type:ve("string",_f._jsonSchemaVersion),bundleSource:ve("string","DocumentSnapshot"),bundleName:ve("string"),bundle:ve("string")};class jf extends _f{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Rf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Af(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new jf(this._firestore,this._userDataWriter,n.key,n,new Af(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new F(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new jf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Af(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new jf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Af(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Nf(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=X.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Of(e,t,n){if(be(t,Rf._jsonSchema)){if(t.bundle===Df)throw new F(L.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=hu(e._databaseId),i=Dd(t.bundle,r),o=i.Ku(),a=new mc(i.getMetadata(),r);for(const e of o)a.Wa(e);if(1!==a.queries.length)throw new F(L.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${a.queries.length} queries.`);const s=Ia(a.queries[0].bundledQuery),l=a.documents;let u=new ec;l.map(e=>{const t=na(r,e.document);u=u.add(t)});const c=nc.fromInitialDocuments(s,u,Pi(),!1,!1),d=new Md(e,n||null,s);return new Rf(e,new Sf(e),d,c)}}function Nf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:e})}}function Mf(e,t){return e instanceof _f&&t instanceof _f?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Rf&&t instanceof Rf&&e._firestore===t._firestore&&Wd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Lf(e){e=me(e,Ld);const t=me(e.firestore,Qd);return Cd(Zd(t),e._key).then(n=>Jf(t,e,n))}Rf._jsonSchemaVersion="firestore/querySnapshot/1.0",Rf._jsonSchema={type:ve("string",Rf._jsonSchemaVersion),bundleSource:ve("string","QuerySnapshot"),bundleName:ve("string"),bundle:ve("string")};class Ff extends wf{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ld(this.firestore,null,t)}}function zf(e){e=me(e,Ld);const t=me(e.firestore,Qd),n=Zd(t),r=new Ff(t);return function(e,t){const n=new z;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=M(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new F(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Zu(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await wd(e),t,n)),n.promise}(n,e._key).then(n=>new _f(t,r,e._key,n,new Af(null!==n&&n.hasLocalMutations,!0),e.converter))}function Uf(e){e=me(e,Ld);const t=me(e.firestore,Qd);return Cd(Zd(t),e._key,{source:"server"}).then(n=>Jf(t,e,n))}function Vf(e){e=me(e,Md);const t=me(e.firestore,Qd),n=Zd(t),r=new Ff(t);return Gh(e._query),Ed(n,e._query).then(n=>new Rf(t,r,e,n))}function Bf(e){e=me(e,Md);const t=me(e.firestore,Qd),n=Zd(t),r=new Ff(t);return function(e,t){const n=new z;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Ol(e,t,!0),i=new wc(t,r.qs),o=i.nu(r.documents),a=i.applyChanges(o,!1);n.resolve(a.snapshot)}catch(e){const r=Zu(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await wd(e),t,n)),n.promise}(n,e._query).then(n=>new Rf(t,r,e,n))}function Wf(e){e=me(e,Md);const t=me(e.firestore,Qd),n=Zd(t),r=new Ff(t);return Ed(n,e._query,{source:"server"}).then(n=>new Rf(t,r,e,n))}function qf(e,t,n){e=me(e,Ld);const r=me(e.firestore,Qd),i=xf(e.converter,t,n);return Xf(r,[Eh(Ch(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Xi.none())])}function Hf(e,t,n){e=me(e,Ld);const r=me(e.firestore,Qd),i=Ch(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),u=3;u<a;u++)s[u-3]=arguments[u];return o="string"==typeof(t=(0,l.Ku)(t))||t instanceof ph?Oh(i,"updateDoc",e._key,t,n,s):Rh(i,"updateDoc",e._key,t),Xf(r,[o.toMutation(e._key,Xi.exists(!0))])}function $f(e){return Xf(me(e.firestore,Qd),[new co(e._key,Xi.none())])}function Kf(e,t){const n=me(e.firestore,Qd),r=Vd(e),i=xf(e.converter,t);return Xf(n,[Eh(Ch(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function Gf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=(0,l.Ku)(e);let s={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof n[u]||Kd(n[u])||(s=n[u++]);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kd(n[u])){const e=n[u];n[u]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[u+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[u+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,f;if(e instanceof Ld)h=me(e.firestore,Qd),f=ii(e._key.path),d={next:t=>{n[u]&&n[u](Jf(h,e,t))},error:n[u+1],complete:n[u+2]};else{const t=me(e,Md);h=me(t.firestore,Qd),f=t._query;const r=new Ff(h);d={next:e=>{n[u]&&n[u](new Rf(h,r,t,e))},error:n[u+1],complete:n[u+2]},Gh(e._query)}return function(e,t,n,r){const i=new ld(r),o=new fc(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>ac(await Td(e),o)),()=>{i.Ou(),e.asyncQueue.enqueueAndForget(async()=>sc(await Td(e),o))}}(Zd(h),f,c,d)}function Yf(e,t){const n=(0,l.Ku)(e),r=function(e){const t={bundle:"",bundleName:"",bundleSource:""},n=["bundle","bundleName","bundleSource"];for(const r of n){if(!(r in e)){t.error=`snapshotJson missing required field: ${r}`;break}const n=e[r];if("string"!=typeof n){t.error=`snapshotJson field '${r}' must be a string.`;break}if(0===n.length){t.error=`snapshotJson field '${r}' cannot be an empty string.`;break}"bundle"===r?t.bundle=n:"bundleName"===r?t.bundleName=n:"bundleSource"===r&&(t.bundleSource=n)}return t}(t);if(r.error)throw new F(L.INVALID_ARGUMENT,r.error);let i,o=0;for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];if("object"!=typeof s[o]||Kd(s[o])||(i=s[o++]),"QuerySnapshot"===r.bundleSource){let e=null;if("object"==typeof s[o]&&Kd(s[o])){const t=s[o++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:s[o++],error:s[o++],complete:s[o++]};return function(e,t,n,r,i){let o,a=!1;return uh(e,t.bundle).then(()=>ch(e,t.bundleName)).then(e=>{e&&!a&&(i&&e.withConverter(i),o=Gf(e,n||{},r))}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{a||(a=!0,o&&o())}}(n,r,i,e,s[o])}if("DocumentSnapshot"===r.bundleSource){let e=null;if("object"==typeof s[o]&&Kd(s[o])){const t=s[o++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:s[o++],error:s[o++],complete:s[o++]};return function(e,t,n,r,i){let o,a=!1;return uh(e,t.bundle).then(()=>{if(!a){const a=new Ld(e,i||null,ue.fromPath(t.bundleName));o=Gf(a,n||{},r)}}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{a||(a=!0,o&&o())}}(n,r,i,e,s[o])}throw new F(L.INVALID_ARGUMENT,`unsupported bundle source: ${r.bundleSource}`)}function Qf(e,t){return function(e,t){const n=new ld(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){M(e).Da.add(t),t.next()}(await Td(e),n)),()=>{n.Ou(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){M(e).Da.delete(t)}(await Td(e),n))}}(Zd(e=me(e,Qd)),Kd(t)?t:{next:t})}function Xf(e,t){return function(e,t){const n=new z;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=td(e);try{const e=await function(e,t){const n=M(e),r=Se.now(),i=t.reduce((e,t)=>e.add(t.key),Pi());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Si(),l=Pi();return n.Os.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=ro(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new ao(e.key,t,Sr(t.value.mapValue),Xi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Ci(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new Sn(J)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wc(r,e.changes),await zu(r.remoteStore)}catch(e){const t=Zu(e,"Failed to persist write");n.reject(t)}}(await Sd(e),t,n)),n.promise}(Zd(e),t)}function Jf(e,t,n){const r=n.docs.get(t._key),i=new Ff(e);return new _f(e,i,t._key,r,new Af(n.hasPendingWrites,n.fromCache),t.converter)}function Zf(e){return ep(e,{count:Cf()})}function ep(e,t){const n=me(e.firestore,Qd),r=Zd(n),i=wn(t,(e,t)=>new mo(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new z;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await kd(e);r.resolve(async function(e,t,n){var r;const i=M(e),{request:o,ft:a,parent:s}=sa(i.serializer,ui(t),n);i.connection.Qo||delete o.parent;const l=(await i.Jo("RunAggregationQuery",i.serializer.databaseId,s,o,1)).filter(e=>!!e.result);O(1===l.length,64727);const u=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[a[t]]=u[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,i).then(t=>function(e,t,n){const r=new Ff(e);return new hh(t,r,n)}(n,e,t))}class tp{constructor(e){this.kind="memory",this._onlineComponentProvider=ad.provider,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new rd(void 0)}}toJSON(){return{kind:this.kind}}}class np{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=dp(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class rp{constructor(){this.kind="memoryEager",this._offlineComponentProvider=nd.provider}toJSON(){return{kind:this.kind}}}class ip{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new rd(e)}}toJSON(){return{kind:this.kind}}}function op(){return new rp}function ap(e){return new ip(null==e?void 0:e.cacheSizeBytes)}function sp(e){return new tp(e)}function lp(e){return new np(e)}class up{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ad.provider,this._offlineComponentProvider={build:t=>new id(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class cp{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ad.provider,this._offlineComponentProvider={build:t=>new od(t,null==e?void 0:e.cacheSizeBytes)}}}function dp(e){return new up(null==e?void 0:e.forceOwnership)}function hp(){return new cp}const fp={maxAttempts:5};class pp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ch(e)}set(e,t,n){this._verifyNotCommitted();const r=gp(e,this._firestore),i=xf(r.converter,t,n),o=Eh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xi.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gp(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof ph?Oh(this._dataReader,"WriteBatch.update",r._key,t,n,a):Rh(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gp(e,this._firestore);return this._mutations=this._mutations.concat(new co(t._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gp(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new F(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class mp{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ch(e)}get(e){const t=gp(e,this._firestore),n=new Sf(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return j(24041);const r=e[0];if(r.isFoundDocument())return new Hh(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Hh(this._firestore,n,t._key,null,t.converter);throw j(18433,{doc:r})})}set(e,t,n){const r=gp(e,this._firestore),i=xf(r.converter,t,n),o=Eh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=gp(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof ph?Oh(this._dataReader,"Transaction.update",r._key,t,n,a):Rh(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=gp(e,this._firestore);return this._transaction.delete(t._key),this}}class yp extends mp{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gp(e,this._firestore),n=new Ff(this._firestore);return super.get(e).then(e=>new _f(this._firestore,n,t._key,e._document,new Af(!1,!1),t.converter))}}function vp(e,t,n){e=me(e,Qd);const r=Object.assign(Object.assign({},fp),n);return function(e){if(e.maxAttempts<1)throw new F(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new z;return e.asyncQueue.enqueueAndForget(async()=>{const i=await kd(e);new hd(e.asyncQueue,i,n,t,r).zu()}),r.promise}(Zd(e),n=>t(new yp(e,n)),r)}function bp(){return new Ih("deleteField")}function wp(){return new Ah("serverTimestamp")}function xp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _h("arrayUnion",t)}function Sp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ph("arrayRemove",t)}function kp(e){return new jh("increment",e)}function Tp(e){return new vh(e)}function Cp(e){return Zd(e=me(e,Qd)),new pp(e,t=>Xf(e,t))}function Ep(e,t){const n=Zd(e=me(e,Qd));if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return _("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new F(L.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=Ip(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=Bh("setIndexConfiguration",Ip(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new Ae(e,2)):"ASCENDING"===n.order?t.push(new Ae(e,0)):"DESCENDING"===n.order&&t.push(new Ae(e,1))}n.push(new Ce(Ce.UNKNOWN_ID,e,t,Pe.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=M(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const o=e.length,a=t.length;let s=0,l=0;for(;s<a&&l<o;){const o=n(e[l],t[s]);o<0?i(e[l++]):o>0?r(t[s++]):(s++,l++)}for(;s<a;)r(t[s++]);for(;l<o;)i(e[l++])}(n,t,De,t=>{i.push(r.addFieldIndex(e,t))},t=>{i.push(r.deleteFieldIndex(e,t))})).next(()=>ze.waitFor(i)))}(await wd(e),t))}(n,r)}function Ip(e,t){if("string"!=typeof e[t])throw new F(L.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class Dp{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Ap(e){var t;e=me(e,Qd);const n=Op.get(e);if(n)return n;if("persistent"!==(null===(t=Zd(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new Dp(e);return Op.set(e,r),r}function _p(e){Rp(e,!0)}function Pp(e){Rp(e,!1)}function jp(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=M(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await wd(e)))})(Zd(e._firestore)).then(e=>D("deleting all persistent cache indexes succeeded")).catch(e=>_("deleting all persistent cache indexes failed",e))}function Rp(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){M(e).Cs.Rs=t}(await wd(e),t))})(Zd(e._firestore),t).then(e=>D(`setting persistent cache index auto creation isEnabled=${t} succeeded`)).catch(e=>_(`setting persistent cache index auto creation isEnabled=${t} failed`,e))}const Op=new WeakMap;function Np(e){var t;const n=null===(t=Zd(me(e.firestore,Qd))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:aa(n,li(e._query)).Vt}function Mp(e,t){var n;const r=wn(t,(e,t)=>new mo(t,e.aggregateType,e._internalFieldPath)),i=null===(n=Zd(me(e.firestore,Qd))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===i?null:sa(i,ui(e._query),r,!0).request}class Lp{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Fp.instance.onExistenceFilterMismatch(e)}}class Fp{constructor(){this.Fc=new Map}static get instance(){return zp||(zp=new Fp,function(e){if(So)throw new Error("a TestingHooksSpi instance is already set");So=e}(zp)),zp}ct(e){this.Fc.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Fc;return n.set(t,e),()=>n.delete(t)}}let zp=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){T=e}(o.MF),(0,o.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Qd(new W(e.getProvider("auth-internal")),new K(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new F(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hn(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,o.KO)(x,S,e),(0,o.KO)(x,S,"esm2017")}()},5479:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6260),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e),a=(0,r.A)(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}},5556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>nt});var r=n(2284);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}var a=n(9321),s=n(5161),l=n(6260);function u(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var c=n(8468),d=n(4967),h=n(8982),f=n(8355),p=n(3666);function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function w(e){var t=b();return function(){var n,i=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function T(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(){x(this,e),C(this,"priority",void 0),C(this,"subPriority",0)}return T(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),I=function(e){y(n,e);var t=w(n);function n(e,r,i,o,a){var s;return x(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return T(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(E),D=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",10),C(g(e),"subPriority",-1),e}return T(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(E),A=function(){function e(){x(this,e),C(this,"incompatibleTokens",void 0),C(this,"priority",void 0),C(this,"subPriority",void 0)}return T(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new I(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),_=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",140),C(g(e),"incompatibleTokens",["R","u","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(A),P=(Math.pow(10,8),/^(1[0-2]|0?\d)/),j=/^(3[0-1]|[0-2]?\d)/,R=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,O=/^(5[0-3]|[0-4]?\d)/,N=/^(2[0-3]|[0-1]?\d)/,M=/^(2[0-4]|[0-1]?\d)/,L=/^(1[0-1]|0?\d)/,F=/^(1[0-2]|0?\d)/,z=/^[0-5]?\d/,U=/^[0-5]?\d/,V=/^\d/,B=/^\d{1,2}/,W=/^\d{1,3}/,q=/^\d{1,4}/,H=/^-?\d+/,$=/^-?\d/,K=/^-?\d{1,2}/,G=/^-?\d{1,3}/,Y=/^-?\d{1,4}/,Q=/^([+-])(\d{2})(\d{2})?|Z/,X=/^([+-])(\d{2})(\d{2})|Z/,J=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Z=/^([+-])(\d{2}):(\d{2})|Z/,ee=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function te(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ne(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function re(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function ie(e){return ne(H,e)}function oe(e,t){switch(e){case 1:return ne(V,t);case 2:return ne(B,t);case 3:return ne(W,t);case 4:return ne(q,t);default:return ne(new RegExp("^\\d{1,"+e+"}"),t)}}function ae(e,t){switch(e){case 1:return ne($,t);case 2:return ne(K,t);case 3:return ne(G,t);case 4:return ne(Y,t);default:return ne(new RegExp("^-?\\d{1,"+e+"}"),t)}}function se(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function le(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function ue(e){return e%400===0||e%4===0&&e%100!==0}var ce=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",130),C(g(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return te(oe(4,e),r);case"yo":return te(n.ordinalNumber(e,{unit:"year"}),r);default:return te(oe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=le(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(A),de=n(2217),he=n(9511),fe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",130),C(g(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return te(oe(4,e),r);case"Yo":return te(n.ordinalNumber(e,{unit:"year"}),r);default:return te(oe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=(0,de.A)(e,r);if(n.isTwoDigitYear){var o=le(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}}]),n}(A),pe=n(1740),ge=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",130),C(g(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return ae("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,pe.A)(r)}}]),n}(A),me=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",130),C(g(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return ae("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(A),ye=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",120),C(g(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return oe(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(A),ve=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",120),C(g(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return oe(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(A),be=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),C(g(e),"priority",110),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return te(ne(P,e),r);case"MM":return te(oe(2,e),r);case"Mo":return te(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(A),we=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",110),C(g(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return te(ne(P,e),r);case"LL":return te(oe(2,e),r);case"Lo":return te(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(A),xe=n(4123);var Se=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",100),C(g(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return ne(O,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return(0,he.A)(function(e,t,n){(0,p.A)(2,arguments);var r=(0,l.A)(e),i=(0,f.A)(t),o=(0,xe.A)(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(A),ke=n(1049);var Te=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",100),C(g(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return ne(O,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return(0,pe.A)(function(e,t){(0,p.A)(2,arguments);var n=(0,l.A)(e),r=(0,f.A)(t),i=(0,ke.A)(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(A),Ce=[31,28,31,30,31,30,31,31,30,31,30,31],Ee=[31,29,31,30,31,30,31,31,30,31,30,31],Ie=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"subPriority",1),C(g(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return ne(j,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){var n=ue(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Ee[r]:t>=1&&t<=Ce[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(A),De=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"subpriority",1),C(g(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return ne(R,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return ue(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(A),Ae=n(2239);function _e(e,t,n){var r,i,o,a,s,u,c,d;(0,p.A)(2,arguments);var h=(0,Ae.q)(),g=(0,f.A)(null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==o?o:h.weekStartsOn)&&void 0!==i?i:null===(c=h.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,l.A)(e),y=(0,f.A)(t),v=((y%7+7)%7<g?7:0)+y-m.getUTCDay();return m.setUTCDate(m.getUTCDate()+v),m}var Pe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=_e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(A),je=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return te(oe(t.length,e),i);case"eo":return te(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=_e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(A),Re=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return te(oe(t.length,e),i);case"co":return te(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=_e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(A);var Oe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",90),C(g(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return oe(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return te(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return te(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return te(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return te(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){(0,p.A)(2,arguments);var n=(0,f.A)(t);n%7===0&&(n-=7);var r=(0,l.A)(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(A),Ne=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",80),C(g(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(se(n),0,0,0),e}}]),n}(A),Me=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",80),C(g(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(se(n),0,0,0),e}}]),n}(A),Le=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",80),C(g(e),"incompatibleTokens",["a","b","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(se(n),0,0,0),e}}]),n}(A),Fe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",70),C(g(e),"incompatibleTokens",["H","K","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return ne(F,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(A),ze=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",70),C(g(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return ne(N,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(A),Ue=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",70),C(g(e),"incompatibleTokens",["h","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return ne(L,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(A),Ve=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",70),C(g(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return ne(M,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(A),Be=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",60),C(g(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return ne(z,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(A),We=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",50),C(g(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return ne(U,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return oe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(A),qe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",30),C(g(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return te(oe(t.length,e),function(e){return Math.floor(e*Math.pow(10,3-t.length))})}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(A),He=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",10),C(g(e),"incompatibleTokens",["t","T","x"]),e}return T(n,[{key:"parse",value:function(e,t){switch(t){case"X":return re(Q,e);case"XX":return re(X,e);case"XXXX":return re(J,e);case"XXXXX":return re(ee,e);default:return re(Z,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(A),$e=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",10),C(g(e),"incompatibleTokens",["t","T","X"]),e}return T(n,[{key:"parse",value:function(e,t){switch(t){case"x":return re(Q,e);case"xx":return re(X,e);case"xxxx":return re(J,e);case"xxxxx":return re(ee,e);default:return re(Z,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(A),Ke=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",40),C(g(e),"incompatibleTokens","*"),e}return T(n,[{key:"parse",value:function(e){return ie(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(A),Ge=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(g(e=t.call.apply(t,[this].concat(i))),"priority",20),C(g(e),"incompatibleTokens","*"),e}return T(n,[{key:"parse",value:function(e){return ie(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(A),Ye={G:new _,y:new ce,Y:new fe,R:new ge,u:new me,Q:new ye,q:new ve,M:new be,L:new we,w:new Se,I:new Te,d:new Ie,D:new De,E:new Pe,e:new je,c:new Re,i:new Oe,a:new Ne,b:new Me,B:new Le,h:new Fe,H:new ze,K:new Ue,k:new Ve,m:new Be,s:new We,S:new qe,X:new He,x:new $e,t:new Ke,T:new Ge},Qe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Je=/^'([^]*?)'?$/,Ze=/''/g,et=/\S/,tt=/[a-zA-Z]/;function nt(e,t,n,i){var g,m,y,v,b,w,x,S,k,T,C,E,I,A,_,P,j,R;(0,p.A)(3,arguments);var O=String(e),N=String(t),M=(0,Ae.q)(),L=null!==(g=null!==(m=null===i||void 0===i?void 0:i.locale)&&void 0!==m?m:M.locale)&&void 0!==g?g:a.A;if(!L.match)throw new RangeError("locale must contain match property");var F=(0,f.A)(null!==(y=null!==(v=null!==(b=null!==(w=null===i||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==w?w:null===i||void 0===i||null===(x=i.locale)||void 0===x||null===(S=x.options)||void 0===S?void 0:S.firstWeekContainsDate)&&void 0!==b?b:M.firstWeekContainsDate)&&void 0!==v?v:null===(k=M.locale)||void 0===k||null===(T=k.options)||void 0===T?void 0:T.firstWeekContainsDate)&&void 0!==y?y:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=(0,f.A)(null!==(C=null!==(E=null!==(I=null!==(A=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==A?A:null===i||void 0===i||null===(_=i.locale)||void 0===_||null===(P=_.options)||void 0===P?void 0:P.weekStartsOn)&&void 0!==I?I:M.weekStartsOn)&&void 0!==E?E:null===(j=M.locale)||void 0===j||null===(R=j.options)||void 0===R?void 0:R.weekStartsOn)&&void 0!==C?C:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===N)return""===O?(0,l.A)(n):new Date(NaN);var U,V={firstWeekContainsDate:F,weekStartsOn:z,locale:L},B=[new D],W=N.match(Xe).map(function(e){var t=e[0];return t in c.A?(0,c.A[t])(e,L.formatLong):e}).join("").match(Qe),q=[],H=o(W);try{var $=function(){var t=U.value;null!==i&&void 0!==i&&i.useAdditionalWeekYearTokens||!(0,h.xM)(t)||(0,h.lJ)(t,N,e),null!==i&&void 0!==i&&i.useAdditionalDayOfYearTokens||!(0,h.ef)(t)||(0,h.lJ)(t,N,e);var n=t[0],r=Ye[n];if(r){var o=r.incompatibleTokens;if(Array.isArray(o)){var a=q.find(function(e){return o.includes(e.token)||e.token===n});if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&q.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));q.push({token:n,fullToken:t});var s=r.run(O,t,L.match,V);if(!s)return{v:new Date(NaN)};B.push(s.setter),O=s.rest}else{if(n.match(tt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(Je)[1].replace(Ze,"'")),0!==O.indexOf(t))return{v:new Date(NaN)};O=O.slice(t.length)}};for(H.s();!(U=H.n()).done;){var K=$();if("object"===(0,r.A)(K))return K.v}}catch(ne){H.e(ne)}finally{H.f()}if(O.length>0&&et.test(O))return new Date(NaN);var G=B.map(function(e){return e.priority}).sort(function(e,t){return t-e}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){return B.filter(function(t){return t.priority===e}).sort(function(e,t){return t.subPriority-e.subPriority})}).map(function(e){return e[0]}),Y=(0,l.A)(n);if(isNaN(Y.getTime()))return new Date(NaN);var Q,X=(0,s.A)(Y,(0,d.A)(Y)),J={},Z=o(G);try{for(Z.s();!(Q=Z.n()).done;){var ee=Q.value;if(!ee.validate(X,V))return new Date(NaN);var te=ee.set(X,J,V);Array.isArray(te)?(X=te[0],u(J,te[1])):X=te}}catch(ne){Z.e(ne)}finally{Z.f()}return X}},5766:function(e,t){var n,r,i;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,o={},a=0,s={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(o=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,o)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&x(this._config.beforeFirstChunk)&&void 0!==(o=this._config.beforeFirstChunk(e))&&(e=o),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var o=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=o.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),o&&o.data&&(this._rowCount+=o.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,i)n.postMessage({results:o,workerId:s.WORKER_ID,finished:r});else if(x(this._config.chunk)&&!t){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!r||!x(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):i&&this._config.error&&n.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function c(e){(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,i=(this._config.chunkSize&&(i=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,i)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=w(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(e){var t,n,r,i,o=Math.pow(2,53),a=-o,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,d=0,h=0,f=!1,m=!1,y=[],v={data:[],errors:[],meta:{}};function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function S(){if(v&&r&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter(function(e){return!w(e)})),k()){if(v)if(Array.isArray(v.data[0])){for(var t=0;k()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){x(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function i(t,n){for(var r=e.header?{}:[],i=0;i<t.length;i++){var s=i,c=t[i];c=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),a<e&&e<o))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(s=e.header?i>=y.length?"__parsed_extra":y[i]:s,c=e.transform?e.transform(c,s):c),"__parsed_extra"===s?(r[s]=r[s]||[],r[s].push(c)):r[s]=c}return e.header&&(i>y.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+i,h+n):i<y.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+i,h+n)),r}var c;v&&(e.header||e.dynamicTyping||e.transform)&&(c=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(i),c=v.data.length):v.data=i(v.data,0),e.header&&v.meta&&(v.meta.fields=y),h+=c)}function k(){return e.header&&0===y.length}function T(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),v.errors.push(e)}x(e.step)&&(i=e.step,e.step=function(t){v=t,k()?S():(S(),0!==v.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(v.data=v.data[0],i(v,c))))}),this.parse=function(i,o,a){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(i,l)),r=!1,e.delimiter?x(e.delimiter)&&(e.delimiter=e.delimiter(i),v.meta.delimiter=e.delimiter):((l=((t,n,r,i,o)=>{var a,l,u,c;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var d=0;d<o.length;d++){for(var h,f=o[d],p=0,m=0,y=0,v=(u=void 0,new g({comments:i,delimiter:f,newline:n,preview:10}).parse(t)),b=0;b<v.data.length;b++)r&&w(v.data[b])?y++:(m+=h=v.data[b].length,void 0===u?u=h:0<h&&(p+=Math.abs(h-u),u=h));0<v.data.length&&(m/=v.data.length-y),(void 0===l||p<=l)&&(void 0===c||c<m)&&1.99<m&&(l=p,a=f,c=m)}return{successful:!!(e.delimiter=a),bestDelimiter:a}})(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=s.DefaultDelimiter),v.meta.delimiter=e.delimiter),l=b(e),e.preview&&e.header&&l.preview++,t=i,n=new g(l),v=n.parse(t,o,a),S(),f?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),t=x(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(f=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),v.meta.aborted=!0,x(e.complete)&&e.complete(v),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(p(t)+"([^]*?)"+p(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,i=0;i<n.length;i++)"\n"===n[i][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,a=e.fastMode,l=null,u=!1,c=null==e.quoteChar?'"':e.quoteChar,d=c;if(void 0!==e.escapeChar&&(d=e.escapeChar),("string"!=typeof t||-1<s.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,f=!1;this.parse=function(s,g,m){if("string"!=typeof s)throw new Error("Input must be a string");var y=s.length,v=t.length,b=n.length,w=r.length,S=x(i),k=[],T=[],C=[],E=h=0;if(!s)return F();if(a||!1!==a&&-1===s.indexOf(c)){for(var I=s.split(n),D=0;D<I.length;D++){if(C=I[D],h+=C.length,D!==I.length-1)h+=n.length;else if(m)return F();if(!r||C.substring(0,w)!==r){if(S){if(k=[],O(C.split(t)),z(),f)return F()}else O(C.split(t));if(o&&o<=D)return k=k.slice(0,o),F(!0)}}return F()}for(var A=s.indexOf(t,h),_=s.indexOf(n,h),P=new RegExp(p(d)+p(c),"g"),j=s.indexOf(c,h);;)if(s[h]===c)for(j=h,h++;;){if(-1===(j=s.indexOf(c,j+1)))return m||T.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:h}),M();if(j===y-1)return M(s.substring(h,j).replace(P,c));if(c===d&&s[j+1]===d)j++;else if(c===d||0===j||s[j-1]!==d){-1!==A&&A<j+1&&(A=s.indexOf(t,j+1));var R=N(-1===(_=-1!==_&&_<j+1?s.indexOf(n,j+1):_)?A:Math.min(A,_));if(s.substr(j+1+R,v)===t){C.push(s.substring(h,j).replace(P,c)),s[h=j+1+R+v]!==c&&(j=s.indexOf(c,h)),A=s.indexOf(t,h),_=s.indexOf(n,h);break}if(R=N(_),s.substring(j+1+R,j+1+R+b)===n){if(C.push(s.substring(h,j).replace(P,c)),L(j+1+R+b),A=s.indexOf(t,h),j=s.indexOf(c,h),S&&(z(),f))return F();if(o&&k.length>=o)return F(!0);break}T.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:h}),j++}}else if(r&&0===C.length&&s.substring(h,h+w)===r){if(-1===_)return F();h=_+b,_=s.indexOf(n,h),A=s.indexOf(t,h)}else if(-1!==A&&(A<_||-1===_))C.push(s.substring(h,A)),h=A+v,A=s.indexOf(t,h);else{if(-1===_)break;if(C.push(s.substring(h,_)),L(_+b),S&&(z(),f))return F();if(o&&k.length>=o)return F(!0)}return M();function O(e){k.push(e),E=h}function N(e){var t=0;return-1!==e&&(e=s.substring(j+1,e))&&""===e.trim()?e.length:t}function M(e){return m||(void 0===e&&(e=s.substring(h)),C.push(e),h=y,O(C),S&&z()),F()}function L(e){h=e,O(C),C=[],_=s.indexOf(n,h)}function F(r){if(e.header&&!g&&k.length&&!u){var i=k[0],o=Object.create(null),a=new Set(i);let t=!1;for(let n=0;n<i.length;n++){let r=i[n];if(o[r=x(e.transformHeader)?e.transformHeader(r,n):r]){let e,s=o[r];for(;e=r+"_"+s,s++,a.has(e););a.add(e),i[n]=e,o[r]++,t=!0,(l=null===l?{}:l)[e]=r}else o[r]=1,i[n]=r;a.add(r)}t&&console.warn("Duplicate headers found and renamed."),u=!0}return{data:k,errors:T,meta:{delimiter:t,linebreak:n,aborted:f,truncated:!!r,cursor:E+(g||0),renamedHeaders:l}}}function z(){i(F()),k=[],T=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return h}}function m(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!r);a++);delete t.results}else x(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=o[e];x(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function v(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function w(e,t){return function(){e.apply(t,arguments)}}function x(e){return"function"==typeof e}return s.parse=function(t,r){var i=(r=r||{}).dynamicTyping||!1;if(x(i)&&(r.dynamicTypingFunction=i,i={}),r.dynamicTyping=i,r.transform=!!x(r.transform)&&r.transform,!r.worker||!s.WORKERS_SUPPORTED)return i=null,s.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),i=new(r.download?u:d)(r)):!0===t.readable&&x(t.read)&&x(t.on)?i=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(i=new c(r)),i.stream(t);(i=(()=>{var t;return!!s.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return s.BLOB_URL||(s.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=m,t.id=a++,o[t.id]=t)})()).userStep=r.step,i.userChunk=r.chunk,i.userComplete=r.complete,i.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,i.postMessage({input:t,config:r,workerId:i.id})},s.unparse=function(e,t){var n=!1,r=!0,i=",",o="\r\n",a='"',l=a+a,u=!1,c=null,d=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(i=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(a),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,u);if("object"==typeof e[0])return f(c||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var a="",s=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(s&&r){for(var u=0;u<e.length;u++)0<u&&(a+=i),a+=g(e[u],u);0<t.length&&(a+=o)}for(var c=0;c<t.length;c++){var d=(s?e:t[c]).length,h=!1,f=s?0===Object.keys(t[c]).length:0===t[c].length;if(n&&!s&&(h="greedy"===n?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===n&&s){for(var p=[],m=0;m<d;m++){var y=l?e[m]:m;p.push(t[c][y])}h=""===p.join("").trim()}if(!h){for(var v=0;v<d;v++){0<v&&!f&&(a+=i);var b=s&&l?e[v]:v;a+=g(t[c][b],v)}c<t.length-1&&(!n||0<d&&!f)&&(a+=o)}}return a}function g(e,t){var r,o;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(o=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,o=!0),r=e.toString().replace(h,l),(o=o||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,s.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?a+r+a:r)}},s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!r&&!!n.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=f,s.NetworkStreamer=u,s.FileStreamer=c,s.StringStreamer=d,s.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},i=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)i.push({file:this.files[o],inputElem:this,instanceConfig:t.extend({},r)})}),o(),this;function o(){if(0===i.length)x(e.complete)&&e.complete();else{var n,r,o,l,u=i[0];if(x(e.before)){var c=e.before(u.file,u.inputElem);if("object"==typeof c){if("abort"===c.action)return n="AbortError",r=u.file,o=u.inputElem,l=c.reason,void(x(e.error)&&e.error({name:n},r,o,l));if("skip"===c.action)return void a();"object"==typeof c.config&&(u.instanceConfig=t.extend(u.instanceConfig,c.config))}else if("skip"===c)return void a()}var d=u.instanceConfig.complete;u.instanceConfig.complete=function(e){x(d)&&d(e,u.file,u.inputElem),a()},s.parse(u.file,u.instanceConfig)}}function a(){i.splice(0,1),o()}}),i&&(n.onmessage=function(e){e=e.data,void 0===s.WORKER_ID&&e&&(s.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:s.WORKER_ID,results:s.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=s.parse(e.input,e.config))&&n.postMessage({workerId:s.WORKER_ID,results:e,finished:!0})}),(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,s},void 0===(i="function"===typeof n?n.apply(t,r):n)||(e.exports=i)},5780:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e);return t.setHours(0,0,0,0),t}},5813:(e,t,n)=>{var r;!function(){"use strict";var t="input is invalid type",i="object"===typeof window,o=i?window:{};o.JS_SHA256_NO_WINDOW&&(i=!1);var a=!i&&"object"===typeof self,s=!o.JS_SHA256_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node&&"renderer"!=process.type;s?o=n.g:a&&(o=self);var l=!o.JS_SHA256_NO_COMMON_JS&&e.exports,u=n.amdO,c=!o.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,d="0123456789abcdef".split(""),h=[-2147483648,8388608,32768,128],f=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=["hex","array","digest","arrayBuffer"],m=[];!o.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!c||!o.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var y=function(e,t){return function(n){return new S(t,!0).update(n)[e]()}},v=function(e){var t=y("hex",e);s&&(t=b(t,e)),t.create=function(){return new S(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<g.length;++n){var r=g[n];t[r]=y(r,e)}return t},b=function(e,r){var i,a=n(4394),s=n(1903).Buffer,l=r?"sha224":"sha256";i=s.from&&!o.JS_SHA256_NO_BUFFER_FROM?s.from:function(e){return new s(e)};return function(n){if("string"===typeof n)return a.createHash(l).update(n,"utf8").digest("hex");if(null===n||void 0===n)throw new Error(t);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===s?a.createHash(l).update(i(n)).digest("hex"):e(n)}},w=function(e,t){return function(n,r){return new k(n,t,!0).update(r)[e]()}},x=function(e){var t=w("hex",e);t.create=function(t){return new k(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<g.length;++n){var r=g[n];t[r]=w(r,e)}return t};function S(e,t){t?(m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function k(e,n,r){var i,o=typeof e;if("string"===o){var a,s=[],l=e.length,u=0;for(i=0;i<l;++i)(a=e.charCodeAt(i))<128?s[u++]=a:a<2048?(s[u++]=192|a>>>6,s[u++]=128|63&a):a<55296||a>=57344?(s[u++]=224|a>>>12,s[u++]=128|a>>>6&63,s[u++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++i)),s[u++]=240|a>>>18,s[u++]=128|a>>>12&63,s[u++]=128|a>>>6&63,s[u++]=128|63&a);e=s}else{if("object"!==o)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!c||!ArrayBuffer.isView(e)))throw new Error(t)}e.length>64&&(e=new S(n,!0).update(e).array());var d=[],h=[];for(i=0;i<64;++i){var f=e[i]||0;d[i]=92^f,h[i]=54^f}S.call(this,n,r),this.update(h),this.oKeyPad=d,this.inner=!0,this.sharedMemory=r}S.prototype.update=function(e){if(!this.finalized){var n,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!c||!ArrayBuffer.isView(e)))throw new Error(t);n=!0}for(var i,o,a=0,s=e.length,l=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),n)for(o=this.start;a<s&&o<64;++a)l[o>>>2]|=e[a]<<f[3&o++];else for(o=this.start;a<s&&o<64;++a)(i=e.charCodeAt(a))<128?l[o>>>2]|=i<<f[3&o++]:i<2048?(l[o>>>2]|=(192|i>>>6)<<f[3&o++],l[o>>>2]|=(128|63&i)<<f[3&o++]):i<55296||i>=57344?(l[o>>>2]|=(224|i>>>12)<<f[3&o++],l[o>>>2]|=(128|i>>>6&63)<<f[3&o++],l[o>>>2]|=(128|63&i)<<f[3&o++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++a)),l[o>>>2]|=(240|i>>>18)<<f[3&o++],l[o>>>2]|=(128|i>>>12&63)<<f[3&o++],l[o>>>2]|=(128|i>>>6&63)<<f[3&o++],l[o>>>2]|=(128|63&i)<<f[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=l[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=h[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},S.prototype.hash=function(){var e,t,n,r,i,o,a,s,l,u=this.h0,c=this.h1,d=this.h2,h=this.h3,f=this.h4,g=this.h5,m=this.h6,y=this.h7,v=this.blocks;for(e=16;e<64;++e)t=((i=v[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,n=((i=v[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,v[e]=v[e-16]+t+v[e-7]+n|0;for(l=c&d,e=0;e<64;e+=4)this.first?(this.is224?(o=300032,y=(i=v[0]-1413257819)-150054599|0,h=i+24177077|0):(o=704751109,y=(i=v[0]-210244248)-1521486534|0,h=i+143694565|0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(o=u&c)^u&d^l,y=h+(i=y+(n=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&g^~f&m)+p[e]+v[e])|0,h=i+(t+r)|0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(a=h&u)^h&c^o,m=d+(i=m+(n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&f^~y&g)+p[e+1]+v[e+1])|0,t=((d=i+(t+r)|0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(s=d&h)^d&u^a,g=c+(i=g+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&y^~m&f)+p[e+2]+v[e+2])|0,t=((c=i+(t+r)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(l=c&d)^c&h^s,f=u+(i=f+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&y)+p[e+3]+v[e+3])|0,u=i+(t+r)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+u|0,this.h1=this.h1+c|0,this.h2=this.h2+d|0,this.h3=this.h3+h|0,this.h4=this.h4+f|0,this.h5=this.h5+g|0,this.h6=this.h6+m|0,this.h7=this.h7+y|0},S.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,l=d[e>>>28&15]+d[e>>>24&15]+d[e>>>20&15]+d[e>>>16&15]+d[e>>>12&15]+d[e>>>8&15]+d[e>>>4&15]+d[15&e]+d[t>>>28&15]+d[t>>>24&15]+d[t>>>20&15]+d[t>>>16&15]+d[t>>>12&15]+d[t>>>8&15]+d[t>>>4&15]+d[15&t]+d[n>>>28&15]+d[n>>>24&15]+d[n>>>20&15]+d[n>>>16&15]+d[n>>>12&15]+d[n>>>8&15]+d[n>>>4&15]+d[15&n]+d[r>>>28&15]+d[r>>>24&15]+d[r>>>20&15]+d[r>>>16&15]+d[r>>>12&15]+d[r>>>8&15]+d[r>>>4&15]+d[15&r]+d[i>>>28&15]+d[i>>>24&15]+d[i>>>20&15]+d[i>>>16&15]+d[i>>>12&15]+d[i>>>8&15]+d[i>>>4&15]+d[15&i]+d[o>>>28&15]+d[o>>>24&15]+d[o>>>20&15]+d[o>>>16&15]+d[o>>>12&15]+d[o>>>8&15]+d[o>>>4&15]+d[15&o]+d[a>>>28&15]+d[a>>>24&15]+d[a>>>20&15]+d[a>>>16&15]+d[a>>>12&15]+d[a>>>8&15]+d[a>>>4&15]+d[15&a];return this.is224||(l+=d[s>>>28&15]+d[s>>>24&15]+d[s>>>20&15]+d[s>>>16&15]+d[s>>>12&15]+d[s>>>8&15]+d[s>>>4&15]+d[15&s]),l},S.prototype.toString=S.prototype.hex,S.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a];return this.is224||l.push(s>>>24&255,s>>>16&255,s>>>8&255,255&s),l},S.prototype.array=S.prototype.digest,S.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},k.prototype=new S,k.prototype.finalize=function(){if(S.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();S.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),S.prototype.finalize.call(this)}};var T=v();T.sha256=T,T.sha224=v(!0),T.sha256.hmac=x(),T.sha224.hmac=x(!0),l?e.exports=T:(o.sha256=T.sha256,o.sha224=T.sha224,u&&(void 0===(r=function(){return T}.call(T,n,T,e))||(e.exports=r)))}()},5837:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),i=n(3666);var o=n(6260);function a(e){if((0,i.A)(1,arguments),!function(e){return(0,i.A)(1,arguments),e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=(0,o.A)(e);return!isNaN(Number(t))}},5889:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.rangeShape=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=f(n(5173)),a=f(n(8139)),s=f(n(6087)),l=f(n(7278)),u=f(n(8349)),c=f(n(407)),d=f(n(9993)),h=f(n(5780));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return k(e)}(this,n)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(f,e);var t,n,r,o=S(f);function f(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),C(k(n=o.call(this,e,t)),"handleKeyEvent",function(e){var t=n.props,r=t.day,i=t.onMouseDown,o=t.onMouseUp;[13,32].includes(e.keyCode)&&("keydown"===e.type?i(r):o(r))}),C(k(n),"handleMouseEvent",function(e){var t=n.props,r=t.day,i=t.disabled,o=t.onPreviewChange,a=t.onMouseEnter,s=t.onMouseDown,l=t.onMouseUp,u={};if(i)o();else{switch(e.type){case"mouseenter":a(r),o(r),u.hover=!0;break;case"blur":case"mouseleave":u.hover=!1;break;case"mousedown":u.active=!0,s(r);break;case"mouseup":e.stopPropagation(),u.active=!1,l(r);break;case"focus":o(r)}Object.keys(u).length&&n.setState(u)}}),C(k(n),"getClassNames",function(){var e,t=n.props,r=t.isPassive,i=t.isToday,o=t.isWeekend,s=t.isStartOfWeek,l=t.isEndOfWeek,u=t.isStartOfMonth,c=t.isEndOfMonth,d=t.disabled,h=t.styles;return(0,a.default)(h.day,(C(e={},h.dayPassive,r),C(e,h.dayDisabled,d),C(e,h.dayToday,i),C(e,h.dayWeekend,o),C(e,h.dayStartOfWeek,s),C(e,h.dayEndOfWeek,l),C(e,h.dayStartOfMonth,u),C(e,h.dayEndOfMonth,c),C(e,h.dayHovered,n.state.hover),C(e,h.dayActive,n.state.active),e))}),C(k(n),"renderPreviewPlaceholder",function(){var e,t=n.props,r=t.preview,o=t.day,d=t.styles;if(!r)return null;var f=r.startDate?(0,s.default)(r.startDate):null,p=r.endDate?(0,h.default)(r.endDate):null,g=(!f||(0,u.default)(o,f))&&(!p||(0,l.default)(o,p)),m=!g&&(0,c.default)(o,f),y=!g&&(0,c.default)(o,p);return i.default.createElement("span",{className:(0,a.default)((e={},C(e,d.dayStartPreview,m),C(e,d.dayInPreview,g),C(e,d.dayEndPreview,y),e)),style:{color:r.color}})}),C(k(n),"renderSelectionPlaceholders",function(){var e=n.props,t=e.styles,r=e.ranges,o=e.day;return"date"===n.props.displayMode?(0,c.default)(n.props.day,n.props.date)?i.default.createElement("span",{className:t.selected,style:{color:n.props.color}}):null:r.reduce(function(e,t){var n=t.startDate,r=t.endDate;if(n&&r&&(0,l.default)(r,n)){var i=[r,n];n=i[0],r=i[1]}n=n?(0,s.default)(n):null,r=r?(0,h.default)(r):null;var a=(!n||(0,u.default)(o,n))&&(!r||(0,l.default)(o,r)),d=!a&&(0,c.default)(o,n),f=!a&&(0,c.default)(o,r);return a||d||f?[].concat(v(e),[y({isStartEdge:d,isEndEdge:f,isInRange:a},t)]):e},[]).map(function(e,r){var o;return i.default.createElement("span",{key:r,className:(0,a.default)((o={},C(o,t.startEdge,e.isStartEdge),C(o,t.endEdge,e.isEndEdge),C(o,t.inRange,e.isInRange),o)),style:{color:e.color||n.props.color}})})}),n.state={hover:!1,active:!1},n}return t=f,(n=[{key:"render",value:function(){var e=this.props.dayContentRenderer;return i.default.createElement("button",g({type:"button",onMouseEnter:this.handleMouseEvent,onMouseLeave:this.handleMouseEvent,onFocus:this.handleMouseEvent,onMouseDown:this.handleMouseEvent,onMouseUp:this.handleMouseEvent,onBlur:this.handleMouseEvent,onPauseCapture:this.handleMouseEvent,onKeyDown:this.handleKeyEvent,onKeyUp:this.handleKeyEvent,className:this.getClassNames(this.props.styles)},this.props.disabled||this.props.isPassive?{tabIndex:-1}:{},{style:{color:this.props.color}}),this.renderSelectionPlaceholders(),this.renderPreviewPlaceholder(),i.default.createElement("span",{className:this.props.styles.dayNumber},(null===e||void 0===e?void 0:e(this.props.day))||i.default.createElement("span",null,(0,d.default)(this.props.day,this.props.dayDisplayFormat))))}}])&&w(t.prototype,n),r&&w(t,r),f}(i.Component);E.defaultProps={};var I=o.default.shape({startDate:o.default.object,endDate:o.default.object,color:o.default.string,key:o.default.string,autoFocus:o.default.bool,disabled:o.default.bool,showDateDisplay:o.default.bool});t.rangeShape=I,E.propTypes={day:o.default.object.isRequired,dayDisplayFormat:o.default.string,date:o.default.object,ranges:o.default.arrayOf(I),preview:o.default.shape({startDate:o.default.object,endDate:o.default.object,color:o.default.string}),onPreviewChange:o.default.func,previewColor:o.default.string,disabled:o.default.bool,isPassive:o.default.bool,isToday:o.default.bool,isWeekend:o.default.bool,isStartOfWeek:o.default.bool,isEndOfWeek:o.default.bool,isStartOfMonth:o.default.bool,isEndOfMonth:o.default.bool,color:o.default.string,displayMode:o.default.oneOf(["dateRange","date"]),styles:o.default.object,onMouseDown:o.default.func,onMouseUp:o.default.func,onMouseEnter:o.default.func,dayContentRenderer:o.default.func};var D=E;t.default=D},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(m=!1,x(e),!g)if(null!==r(u))g=!0,T||(T=!0,k());else{var t=r(c);null!==t&&j(S,t.startTime-e)}}var k,T=!1,C=-1,E=5,I=-1;function D(){return!!y||!(t.unstable_now()-I<E)}function A(){if(y=!1,T){var e=t.unstable_now();I=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(C),C=-1),p=!0;var o=f;try{t:{for(x(e),h=r(u);null!==h&&!(h.expirationTime>e&&D());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,x(e),n=!0;break t}h===r(u)&&i(u),x(e)}else i(u);h=r(u)}if(null!==h)n=!0;else{var l=r(c);null!==l&&j(S,l.startTime-e),n=!1}}break e}finally{h=null,f=o,p=!1}n=void 0}}finally{n?k():T=!1}}}if("function"===typeof w)k=function(){w(A)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,P=_.port2;_.port1.onmessage=A,k=function(){P.postMessage(null)}}else k=function(){v(A,0)};function j(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(b(C),C=-1):m=!0,j(S,o-a))):(e.sortIndex=s,n(u,e),g||p||(g=!0,T||(T=!0,k()))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},6087:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e);return t.setHours(23,59,59,999),t}},6105:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=x(n(5043)),o=b(n(5173)),a=x(n(5889)),s=b(n(1010)),l=b(n(9519)),u=b(n(1786)),c=b(n(8349)),d=b(n(407)),h=b(n(7278)),f=b(n(1555)),p=b(n(238)),g=b(n(6087)),m=b(n(5780)),y=b(n(9993)),v=n(3974);function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(b,e);var t,n,r,o=D(b);function b(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),o.apply(this,arguments)}return t=b,(n=[{key:"render",value:function(){var e=this,t=new Date,n=this.props,r=n.displayMode,o=n.focusedRange,b=n.drag,w=n.styles,x=n.disabledDates,k=n.disabledDay,C=this.props.minDate&&(0,m.default)(this.props.minDate),E=this.props.maxDate&&(0,g.default)(this.props.maxDate),I=(0,v.getMonthDisplayRange)(this.props.month,this.props.dateOptions,this.props.fixedHeight),D=this.props.ranges;if("dateRange"===r&&b.status){var A=b.range,_=A.startDate,P=A.endDate;D=D.map(function(e,t){return t!==o[0]?e:T(T({},e),{},{startDate:_,endDate:P})})}var j=this.props.showPreview&&!b.disablePreview;return i.default.createElement("div",{className:w.month,style:this.props.style},this.props.showMonthName?i.default.createElement("div",{className:w.monthName},(0,y.default)(this.props.month,this.props.monthDisplayFormat,this.props.dateOptions)):null,this.props.showWeekDays&&function(e,t,n){var r=new Date;return i.default.createElement("div",{className:e.weekDays},(0,s.default)({start:(0,p.default)(r,t),end:(0,f.default)(r,t)}).map(function(r,o){return i.default.createElement("span",{className:e.weekDay,key:o},(0,y.default)(r,n,t))}))}(w,this.props.dateOptions,this.props.weekdayDisplayFormat),i.default.createElement("div",{className:w.days,onMouseLeave:this.props.onMouseLeave},(0,s.default)({start:I.start,end:I.end}).map(function(n,r){var o=(0,d.default)(n,I.startDateOfMonth),s=(0,d.default)(n,I.endDateOfMonth),g=C&&(0,h.default)(n,C)||E&&(0,c.default)(n,E),m=x.some(function(e){return(0,d.default)(e,n)}),y=k(n);return i.default.createElement(a.default,S({},e.props,{ranges:D,day:n,preview:j?e.props.preview:null,isWeekend:(0,u.default)(n,e.props.dateOptions),isToday:(0,d.default)(n,t),isStartOfWeek:(0,d.default)(n,(0,p.default)(n,e.props.dateOptions)),isEndOfWeek:(0,d.default)(n,(0,f.default)(n,e.props.dateOptions)),isStartOfMonth:o,isEndOfMonth:s,key:r,disabled:g||m||y,isPassive:!(0,l.default)(n,{start:I.startDateOfMonth,end:I.endDateOfMonth}),styles:w,onMouseDown:e.props.onDragSelectionStart,onMouseUp:e.props.onDragSelectionEnd,onMouseEnter:e.props.onDragSelectionMove,dragRange:b.range,drag:b.status}))})))}}])&&E(t.prototype,n),r&&E(t,r),b}(i.PureComponent);_.defaultProps={},_.propTypes={style:o.default.object,styles:o.default.object,month:o.default.object,drag:o.default.object,dateOptions:o.default.object,disabledDates:o.default.array,disabledDay:o.default.func,preview:o.default.shape({startDate:o.default.object,endDate:o.default.object}),showPreview:o.default.bool,displayMode:o.default.oneOf(["dateRange","date"]),minDate:o.default.object,maxDate:o.default.object,ranges:o.default.arrayOf(a.rangeShape),focusedRange:o.default.arrayOf(o.default.number),onDragSelectionStart:o.default.func,onDragSelectionEnd:o.default.func,onDragSelectionMove:o.default.func,onMouseLeave:o.default.func,monthDisplayFormat:o.default.string,weekdayDisplayFormat:o.default.string,dayDisplayFormat:o.default.string,showWeekDays:o.default.bool,showMonthName:o.default.bool,fixedHeight:o.default.bool};var P=_;t.default=P},6255:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},6260:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2284),i=n(3666);function o(e){(0,i.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},6347:(e,t,n)=>{"use strict";Object.defineProperty(t,"ad",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Vv",{enumerable:!0,get:function(){return i.default}});var r=l(n(3902)),i=l(n(1783)),o=l(n(4016)),a=l(n(1751)),s=n(7384);function l(e){return e&&e.__esModule?e:{default:e}}},6672:(e,t,n)=>{"use strict";var r=n(5043);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},6740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4967),i=n(5780),o=n(3666),a=864e5;function s(e,t){(0,o.A)(2,arguments);var n=(0,i.default)(e),s=(0,i.default)(t),l=n.getTime()-(0,r.A)(n),u=s.getTime()-(0,r.A)(s);return Math.round((l-u)/a)}},6819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8355),i=n(6260),o=n(3666);function a(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e),a=(0,r.A)(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var s=n.getDate(),l=new Date(n.getTime());return l.setMonth(n.getMonth()+a+1,0),s>=l.getDate()?l:(n.setFullYear(l.getFullYear(),l.getMonth(),s),n)}},7004:(e,t,n)=>{"use strict";var r=n(8853),i=n(5043),o=n(7950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var D=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case T:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}var R=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},L=[],F=-1;function z(e){return{current:e}}function U(e){0>F||(e.current=L[F],L[F]=null,F--)}function V(e,t){F++,L[F]=e.current,e.current=t}var B=z(null),W=z(null),q=z(null),H=z(null);function $(e,t){switch(V(q,t),V(W,e),V(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(B),V(B,e)}function K(){U(B),U(W),U(q)}function G(e){null!==e.memoizedState&&V(H,e);var t=B.current,n=od(t,e.type);t!==n&&(V(W,e),V(B,n))}function Y(e){W.current===e&&(U(B),U(W)),H.current===e&&(U(H),Gd._currentValue=M)}var Q=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Te(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function _e(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Pe=Math.random().toString(36).slice(2),je="__reactFiber$"+Pe,Re="__reactProps$"+Pe,Oe="__reactContainer$"+Pe,Ne="__reactEvents$"+Pe,Me="__reactListeners$"+Pe,Le="__reactHandles$"+Pe,Fe="__reactResources$"+Pe,ze="__reactMarker$"+Pe;function Ue(e){delete e[je],delete e[Re],delete e[Ne],delete e[Me],delete e[Le]}function Ve(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[je]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[je])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[je]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function qe(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[ze]=!0}var $e=new Set,Ke={};function Ge(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)$e.add(t[e])}var Qe,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Q.call(et,i)||!Q.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Xe}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ut(t)):null!=n?vt(e,a,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ut(s):e.removeAttribute("name")}function yt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Tt(e,o,t[o])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Dt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _t=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Rt=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Re]||null;if(!i)throw Error(a(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Nt=!1;function Mt(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==jt||null!==Rt)&&(Vu(),jt&&(t=jt,e=Rt,Rt=jt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Rh){zt=!1}var Vt=null,Bt=null,Wt=null;function qt(){if(Wt)return Wt;var e,t,n=Bt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Wt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function $t(){return!0}function Kt(){return!1}function Gt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?$t:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$t)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$t)},persist:function(){},isPersistent:$t}),t}var Yt,Qt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Yt=e.screenX-Xt.screenX,Qt=e.screenY-Xt.screenY):Qt=Yt=0,Xt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Gt(nn),on=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Gt(h({},Jt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=Gt(h({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Gt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Gt(h({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var Tn=Ft&&"TextEvent"in window&&!kn,Cn=Ft&&(!Sn||kn&&8<kn&&11>=kn),En=String.fromCharCode(32),In=!1;function Dn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var _n=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Rn(e,t,n,r){jt?Rt?Rt.push(r):Rt=[r]:jt=r,0<(t=qc(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Nn=null;function Mn(e){Mc(e,0)}function Ln(e){if(ht(We(e)))return e}function Fn(e,t){if("change"===e)return t}var zn=!1;if(Ft){var Un;if(Ft){var Vn="oninput"in document;if(!Vn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Vn="function"===typeof Bn.oninput}Un=Vn}else Un=!1;zn=Un&&(!document.documentMode||9<document.documentMode)}function Wn(){On&&(On.detachEvent("onpropertychange",qn),Nn=On=null)}function qn(e){if("value"===e.propertyName&&Ln(Nn)){var t=[];Rn(t,Nn,e,Pt(e)),Mt(Mn,t)}}function Hn(e,t,n){"focusin"===e?(Wn(),Nn=n,(On=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Wn()}function $n(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Nn)}function Kn(e,t){if("click"===e)return Ln(t)}function Gn(e,t){if("input"===e||"change"===e)return Ln(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Q.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Qn(or,r)||(or=r,0<(r=qc(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function hr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){wr.set(e,t),Ge(t,[e])}xr.push("scrollEnd");var kr=new WeakMap;function Tr(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Er=0,Ir=0;function Dr(){for(var e=Er,t=Ir=Er=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var o=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&jr(n,i,o)}}function Ar(e,t,n,r){Cr[Er++]=e,Cr[Er++]=t,Cr[Er++]=n,Cr[Er++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function _r(e,t,n,r){return Ar(e,t,n,r),Rr(e)}function Pr(e,t){return Ar(e,null,null,t),Rr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Rr(e){if(50<ju)throw ju=0,Ru=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Nr(e,t,n,r)}function Lr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,i,o){var s=0;if(r=e,"function"===typeof e)Lr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Mr(31,n,t,i)).elementType=I,e.lanes=o,e;case m:return Vr(n.children,i,o,t);case y:s=8,i|=24;break;case v:return(e=Mr(12,n,t,2|i)).elementType=v,e.lanes=o,e;case k:return(e=Mr(13,n,t,i)).elementType=k,e.lanes=o,e;case T:return(e=Mr(19,n,t,i)).elementType=T,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:s=10;break e;case w:s=9;break e;case S:s=11;break e;case C:s=14;break e;case E:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Hr=0,$r=null,Kr=0,Gr=[],Yr=0,Qr=null,Xr=1,Jr="";function Zr(e,t){qr[Hr++]=Kr,qr[Hr++]=$r,$r=e,Kr=t}function ei(e,t,n){Gr[Yr++]=Xr,Gr[Yr++]=Jr,Gr[Yr++]=Qr,Qr=e;var r=Xr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var o=32-fe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xr=1<<32-fe(t)+i|n<<i|r,Jr=o+e}else Xr=1<<o|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===$r;)$r=qr[--Hr],qr[Hr]=null,Kr=qr[--Hr],qr[Hr]=null;for(;e===Qr;)Qr=Gr[--Yr],Gr[Yr]=null,Jr=Gr[--Yr],Gr[Yr]=null,Xr=Gr[--Yr],Gr[Yr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,li=Error(a(519));function ui(e){throw gi(Tr(Error(a(418,"")),e)),li}function ci(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[je]=e,t[Re]=r,n){case"dialog":Lc("cancel",t),Lc("close",t);break;case"iframe":case"object":case"embed":Lc("load",t);break;case"video":case"audio":for(n=0;n<Oc.length;n++)Lc(Oc[n],t);break;case"source":Lc("error",t);break;case"img":case"image":case"link":Lc("error",t),Lc("load",t);break;case"details":Lc("toggle",t);break;case"input":Lc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Lc("invalid",t);break;case"textarea":Lc("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qc(t.textContent,n)?(null!=r.popover&&(Lc("beforetoggle",t),Lc("toggle",t)),null!=r.onScroll&&Lc("scroll",t),null!=r.onScrollEnd&&Lc("scrollend",t),null!=r.onClick&&(t.onclick=Xc),t=!0):t=!1,t||ui(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,oi=!1}function pi(){var e=ai;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),ai=null),e}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=z(null),yi=null,vi=null;function bi(e,t,n){V(mi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=mi.current,U(mi)}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xi(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),xi(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function ki(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===H.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&Si(t,e,n,r),t.flags|=262144}function Ti(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ei(e){return Di(yi,e)}function Ii(e,t){return null===yi&&Ci(e),Di(e,t)}function Di(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},_i=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,ji={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ri(){return{controller:new Ai,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&_i(Pi,function(){e.controller.abort()})}var Ni=null,Mi=0,Li=0,Fi=null;function zi(){if(0===--Mi&&null!==Ni){null!==Fi&&(Fi.status="fulfilled");var e=Ni;Ni=null,Li=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ui=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ni){var n=Ni=[];Mi=0,Li=Ac(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(zi,zi)}(0,t),null!==Ui&&Ui(e,t)};var Vi=z(null);function Bi(){var e=Vi.current;return null!==e?e:ru.pooledCache}function Wi(e,t){V(Vi,null===t?Vi.current:t.pool)}function qi(){var e=Bi();return null===e?null:{parent:ji._currentValue,pool:e}}var Hi=Error(a(460)),$i=Error(a(474)),Ki=Error(a(542)),Gi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qi(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qi,Qi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qi,Qi);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ji=t,Hi}}var Ji=null;function Zi(){if(null===Ji)throw Error(a(459));var e=Ji;return Ji=null,e}function eo(e){if(e===Hi||e===Ki)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),jr(e,null,n),t}return Ar(e,r,t,n),Rr(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function uo(){if(lo){if(null!==Fi)throw Fi}}function co(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=-536870913&s.lane,p=f!==s.lane;if(p?(ou&f)===f:(r&f)===f){0!==f&&f===Li&&(lo=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:to=!0}}null!==(f=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===o&&(i.shared.lanes=0),fu|=a,e.lanes=a,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var po=z(null),go=z(0);function mo(e,t){V(go,e=du),V(po,t),du=e|t.baseLanes}function yo(){V(go,du),V(po,po.current)}function vo(){du=go.current,U(po),U(go)}var bo=0,wo=null,xo=null,So=null,ko=!1,To=!1,Co=!1,Eo=0,Io=0,Do=null,Ao=0;function _o(){throw Error(a(321))}function Po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function jo(e,t,n,r,i,o){return bo=o,wo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?$a:Ka,Co=!1,o=n(r,i),Co=!1,To&&(o=Oo(t,n,r,i)),Ro(e),o}function Ro(e){O.H=Ha;var t=null!==xo&&null!==xo.next;if(bo=0,So=xo=wo=null,ko=!1,Io=0,Do=null,t)throw Error(a(300));null===e||Is||null!==(e=e.dependencies)&&Ti(e)&&(Is=!0)}function Oo(e,t,n,r){wo=e;var i=0;do{if(To&&(Do=null),Io=0,To=!1,25<=i)throw Error(a(301));if(i+=1,So=xo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}O.H=Ga,o=t(n,r)}while(To);return o}function No(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Vo(t):t,e=e.useState()[0],(null!==xo?xo.memoizedState:null)!==e&&(wo.flags|=1024),t}function Mo(){var e=0!==Eo;return Eo=0,e}function Lo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fo(e){if(ko){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ko=!1}bo=0,So=xo=wo=null,To=!1,Io=Eo=0,Do=null}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?wo.memoizedState=So=e:So=So.next=e,So}function Uo(){if(null===xo){var e=wo.alternate;e=null!==e?e.memoizedState:null}else e=xo.next;var t=null===So?wo.memoizedState:So.next;if(null!==t)So=t,xo=e;else{if(null===e){if(null===wo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(xo=e).memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},null===So?wo.memoizedState=So=e:So=So.next=e}return So}function Vo(e){var t=Io;return Io+=1,null===Do&&(Do=[]),e=Xi(Do,e,t),t=wo,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?$a:Ka),e}function Bo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vo(e);if(e.$$typeof===x)return Ei(e)}throw Error(a(438,String(e)))}function Wo(e){var t=null,n=wo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=D;return t.index++,n}function qo(e,t){return"function"===typeof t?t(e):t}function Ho(e){return $o(Uo(),xo,e)}function $o(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=s=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(ou&h)===h:(bo&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Li&&(d=!0);else{if((bo&f)===f){c=c.next,f===Li&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=o):u=u.next=h,wo.lanes|=f,fu|=f}h=c.action,Co&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=o):u=u.next=f,wo.lanes|=h,fu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?s=o:u.next=l,!Yn(o,e.memoizedState)&&(Is=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=u,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ko(e){var t=Uo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Yn(o,t.memoizedState)||(Is=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Go(e,t,n){var r=wo,i=Uo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Yn((xo||i).memoizedState,n);if(s&&(i.memoizedState=n,Is=!0),i=i.queue,ya(2048,8,Xo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==So&&1&So.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,i,n,t),null),null===ru)throw Error(a(349));o||0!==(124&bo)||Yo(r,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,Jo(t)&&Zo(e)}function Xo(e,t,n){return n(function(){Jo(t)&&Zo(e)})}function Jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zo(e){var t=Pr(e,2);null!==t&&Mu(t,e,2)}function ea(e){var t=zo();if("function"===typeof e){var n=e;if(e=n(),Co){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,$o(e,xo,"function"===typeof r?r:qo)}function na(e,t,n,r,i){if(Ba(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==O.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=O.T,a={};O.T=a;try{var s=n(i,r),l=O.S;null!==l&&l(a,s),ia(e,t,s)}catch(u){aa(e,t,u)}finally{O.T=o}}else try{ia(e,t,o=n(i,r))}catch(c){aa(e,t,c)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oa(e,t,n)},function(n){return aa(e,t,n)}):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ua(e,t){if(oi){var n=ru.formState;if(null!==n){e:{var r=wo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=zo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=za.bind(null,wo,r),r.dispatch=n,r=ea(!1),o=Va.bind(null,wo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=zo()).queue=i,n=na.bind(null,wo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return da(Uo(),xo,e)}function da(e,t,n){if(t=$o(e,t,la)[0],e=Ho(qo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vo(t)}catch(a){if(a===Hi)throw Ki;throw a}else r=t;var i=(t=Uo()).queue,o=i.dispatch;return n!==t.memoizedState&&(wo.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,o,e]}function ha(e,t){e.action=t}function fa(e){var t=Uo(),n=xo;if(null!==n)return da(t,n,e);Uo(),t=t.memoizedState;var r=(n=Uo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(){return Uo().memoizedState}function ma(e,t,n,r){var i=zo();r=void 0===r?null:r,wo.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var i=Uo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==xo&&null!==r&&Po(r,xo.memoizedState.deps)?i.memoizedState=pa(t,o,n,r):(wo.flags|=e,i.memoizedState=pa(1|t,o,n,r))}function va(e,t){ma(8390656,8,e,t)}function ba(e,t){ya(2048,8,e,t)}function wa(e,t){return ya(4,2,e,t)}function xa(e,t){return ya(4,4,e,t)}function Sa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ka(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,Sa.bind(null,t,e),n)}function Ta(){}function Ca(e,t){var n=Uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ea(e,t){var n=Uo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Po(t,r[1]))return r[0];if(r=e(),Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ia(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=Nu(),wo.lanes|=e,fu|=e,n)}function Da(e,t,n,r){return Yn(n,t)?n:null!==po.current?(e=Ia(e,n,r),Yn(e,t)||(Is=!0),e):0===(42&bo)?(Is=!0,e.memoizedState=n):(e=Nu(),wo.lanes|=e,fu|=e,t)}function Aa(e,t,n,r,i){var o=N.p;N.p=0!==o&&8>o?o:8;var a=O.T,s={};O.T=s,Va(e,!1,t,n);try{var l=i(),u=O.S;if(null!==u&&u(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ua(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Ou());else Ua(e,t,r,Ou())}catch(c){Ua(e,t,{then:function(){},status:"rejected",reason:c},Ou())}finally{N.p=o,O.T=a}}function _a(){}function Pa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=ja(e).queue;Aa(e,i,t,M,null===n?_a:function(){return Ra(e),n(r)})}function ja(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ra(e){Ua(e,ja(e).next.queue,{},Ou())}function Oa(){return Ei(Gd)}function Na(){return Uo().memoizedState}function Ma(){return Uo().memoizedState}function La(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ou(),r=oo(t,e=io(n),n);return null!==r&&(Mu(r,t,n),ao(r,t,n)),t={cache:Ri()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Ou();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ba(e)?Wa(t,n):null!==(n=_r(e,t,n,r))&&(Mu(n,e,r),qa(n,t,r))}function za(e,t,n){Ua(e,t,n,Ou())}function Ua(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ba(e))Wa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Yn(s,a))return Ar(e,t,i,0),null===ru&&Dr(),!1}catch(l){}if(null!==(n=_r(e,t,i,r)))return Mu(n,e,r),qa(n,t,r),!0}return!1}function Va(e,t,n,r){if(r={lane:2,revertLane:Ac(),action:r,hasEagerState:!1,eagerState:null,next:null},Ba(e)){if(t)throw Error(a(479))}else null!==(t=_r(e,n,r,2))&&Mu(t,e,2)}function Ba(e){var t=e.alternate;return e===wo||null!==t&&t===wo}function Wa(e,t){To=ko=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}var Ha={readContext:Ei,use:Bo,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useLayoutEffect:_o,useInsertionEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useSyncExternalStore:_o,useId:_o,useHostTransitionStatus:_o,useFormState:_o,useActionState:_o,useOptimistic:_o,useMemoCache:_o,useCacheRefresh:_o},$a={readContext:Ei,use:Bo,useCallback:function(e,t){return zo().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=zo();t=void 0===t?null:t;var r=e();if(Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zo();if(void 0!==n){var i=n(t);if(Co){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Fa.bind(null,wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=za.bind(null,wo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ta,useDeferredValue:function(e,t){return Ia(zo(),e,t)},useTransition:function(){var e=ea(!1);return e=Aa.bind(null,wo,e.queue,!0,!1),zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wo,i=zo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ru)throw Error(a(349));0!==(124&ou)||Yo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Xo.bind(null,r,o,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,o,n,t),null),n},useId:function(){var e=zo(),t=ru.identifierPrefix;if(oi){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-fe(Xr)-1)).toString(32)+n),0<(n=Eo++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ao++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oa,useFormState:ua,useActionState:ua,useOptimistic:function(e){var t=zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Va.bind(null,wo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Wo,useCacheRefresh:function(){return zo().memoizedState=La.bind(null,wo)}},Ka={readContext:Ei,use:Bo,useCallback:Ca,useContext:Ei,useEffect:ba,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:xa,useMemo:Ea,useReducer:Ho,useRef:ga,useState:function(){return Ho(qo)},useDebugValue:Ta,useDeferredValue:function(e,t){return Da(Uo(),xo.memoizedState,e,t)},useTransition:function(){var e=Ho(qo)[0],t=Uo().memoizedState;return["boolean"===typeof e?e:Vo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:Oa,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ta(Uo(),0,e,t)},useMemoCache:Wo,useCacheRefresh:Ma},Ga={readContext:Ei,use:Bo,useCallback:Ca,useContext:Ei,useEffect:ba,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:xa,useMemo:Ea,useReducer:Ko,useRef:ga,useState:function(){return Ko(qo)},useDebugValue:Ta,useDeferredValue:function(e,t){var n=Uo();return null===xo?Ia(n,e,t):Da(n,xo.memoizedState,e,t)},useTransition:function(){var e=Ko(qo)[0],t=Uo().memoizedState;return["boolean"===typeof e?e:Vo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:Oa,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Uo();return null!==xo?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Wo,useCacheRefresh:Ma},Ya=null,Qa=0;function Xa(e){var t=Qa;return Qa+=1,null===Ya&&(Ya=[]),Xi(Ya,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===E&&es(o)===t.type)?(Ja(t=i(t,n.props),n),t.return=e,t):(Ja(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Ja(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Wr(t,e.mode,n)).return=e,t;case E:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||_(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xa(t),n);if(t.$$typeof===x)return h(e,Ii(e,t),n);Za(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case E:return f(e,t,n=(i=n._init)(n._payload),r)}if(R(n)||_(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xa(n),r);if(n.$$typeof===x)return f(e,t,Ii(e,n),r);Za(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(R(r)||_(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Xa(r),i);if(r.$$typeof===x)return y(e,t,n,Ii(t,r),i);Za(t,r)}return null}function v(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===m){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&es(b)===u.type){n(l,u.sibling),Ja(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===m?((d=Vr(c.props.children,l.mode,d,c.key)).return=l,l=d):(Ja(d=Ur(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case g:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=Wr(c,l.mode,d)).return=l,l=d}return s(l);case E:return v(l,u,c=(b=c._init)(c._payload),d)}if(R(c))return function(i,a,s,l){for(var u=null,c=null,d=a,p=a=0,g=null;null!==d&&p<s.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(i,d,s[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),a=o(m,a,p),null===c?u=m:c.sibling=m,c=m,d=g}if(p===s.length)return n(i,d),oi&&Zr(i,p),u;if(null===d){for(;p<s.length;p++)null!==(d=h(i,s[p],l))&&(a=o(d,a,p),null===c?u=d:c.sibling=d,c=d);return oi&&Zr(i,p),u}for(d=r(d);p<s.length;p++)null!==(g=y(d,i,p,s[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),a=o(g,a,p),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),oi&&Zr(i,p),u}(l,u,c,d);if(_(c)){if("function"!==typeof(b=_(c)))throw Error(a(150));return function(i,s,l,u){if(null==l)throw Error(a(151));for(var c=null,d=null,p=s,g=s=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(i,p,v.value,u);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,p=m}if(v.done)return n(i,p),oi&&Zr(i,g),c;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return oi&&Zr(i,g),c}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),oi&&Zr(i,g),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return v(l,u,Xa(c),d);if(c.$$typeof===x)return v(l,u,Ii(l,c),d);Za(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Br(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{Qa=0;var i=v(e,t,n,r);return Ya=null,i}catch(a){if(a===Hi||a===Ki)throw a;var o=Mr(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=z(null),os=null;function as(e){var t=e.alternate;V(cs,1&cs.current),V(is,e),null===os&&(null===t||null!==po.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(V(cs,cs.current),V(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){V(cs,cs.current),V(is,is.current)}function us(e){U(is),os===e&&(os=null),U(cs)}var cs=z(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Mu(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Mu(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ou(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Mu(t,e,n),ao(t,e,n))}};function ps(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,o))}function gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fs.enqueueReplaceState(t,t.state,null)}function ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function bs(e){console.error(e)}function ws(e){ys(e)}function xs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ss(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ks(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){xs(e,t)},n}function Ts(e){return(e=io(e)).tag=3,e}function Cs(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Ss(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Ss(t,n,r),"function"!==typeof i&&(null===Tu?Tu=new Set([this]):Tu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Es=Error(a(461)),Is=!1;function Ds(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function As(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ci(t),r=jo(e,t,n,a,o,i),s=Mo(),null===e||Is?(oi&&s&&ti(t),t.flags|=1,Ds(e,t,r,i),t.child):(Lo(e,t,i),Ys(e,t,i))}function _s(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ps(e,t,o,r,i))}if(o=e.child,!Qs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(a,r)&&e.ref===t.ref)return Ys(e,t,i)}return t.flags|=1,(e=Fr(o,r)).ref=t.ref,e.return=t,t.child=e}function Ps(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Qn(o,r)&&e.ref===t.ref){if(Is=!1,t.pendingProps=r=o,!Qs(e,i))return t.lanes=e.lanes,Ys(e,t,i);0!==(131072&e.flags)&&(Is=!0)}}return Ns(e,t,n,r,i)}function js(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Rs(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Rs(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wi(0,null!==o?o.cachePool:null),null!==o?mo(t,o):yo(),ss(t)}else null!==o?(Wi(0,o.cachePool),mo(t,o),ls(),t.memoizedState=null):(null!==e&&Wi(0,null),yo(),ls());return Ds(e,t,i,n),t.child}function Rs(e,t,n,r){var i=Bi();return i=null===i?null:{parent:ji._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Wi(0,null),yo(),ss(t),null!==e&&ki(e,t,r,!0),null}function Os(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ns(e,t,n,r,i){return Ci(t),n=jo(e,t,n,r,void 0,i),r=Mo(),null===e||Is?(oi&&r&&ti(t),t.flags|=1,Ds(e,t,n,i),t.child):(Lo(e,t,i),Ys(e,t,i))}function Ms(e,t,n,r,i,o){return Ci(t),t.updateQueue=null,n=Oo(t,r,n,i),Ro(e),r=Mo(),null===e||Is?(oi&&r&&ti(t),t.flags|=1,Ds(e,t,n,o),t.child):(Lo(e,t,o),Ys(e,t,o))}function Ls(e,t,n,r,i){if(Ci(t),null===t.stateNode){var o=Or,a=n.contextType;"object"===typeof a&&null!==a&&(o=Ei(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=fs,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"===typeof a&&null!==a?Ei(a):Or,o.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&fs.enqueueReplaceState(o,o.state,null),co(t,r,o,i),uo(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=ms(n,s);o.props=l;var u=o.context,c=n.contextType;a=Or,"object"===typeof c&&null!==c&&(a=Ei(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||u!==a)&&gs(t,o,r,a),to=!1;var h=t.memoizedState;o.state=h,co(t,r,o,i),uo(),u=t.memoizedState,s||h!==u||to?("function"===typeof d&&(hs(t,n,d,r),u=t.memoizedState),(l=to||ps(t,n,l,r,h,u,a))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),c=ms(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,h=o.context,u=n.contextType,l=Or,"object"===typeof u&&null!==u&&(l=Ei(u)),(u="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&gs(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,co(t,r,o,i),uo();var f=t.memoizedState;a!==d||h!==f||to||null!==e&&null!==e.dependencies&&Ti(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),f=t.memoizedState),(c=to||ps(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&Ti(e.dependencies))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Os(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):Ds(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ys(e,t,i),e}function Fs(e,t,n,r){return fi(),t.flags|=256,Ds(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Us(e){return{baseLanes:e,cachePool:qi()}}function Vs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mu),e}function Bs(e,t,n){var r,i=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&cs.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):ls(),oi){var l,u=ii;if(l=u){e:{for(l=u,u=si;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=yd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Qr?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return md(u)?t.lanes=32:t.lanes=536870912,null;us(t)}return u=i.children,i=i.fallback,o?(ls(),u=qs({mode:"hidden",children:u},o=t.mode),i=Vr(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(o=t.child).memoizedState=Us(n),o.childLanes=Vs(e,r,n),t.memoizedState=zs,i):(as(t),Ws(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Hs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=i.fallback,u=t.mode,i=qs({mode:"visible",children:i.children},u),(o=Vr(o,u,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=Us(n),i.childLanes=Vs(e,r,n),t.memoizedState=zs,t=o);else if(as(t),md(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(a(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Hs(e,t,n)}else if(Is||ki(e,t,n,!1),r=0!==(n&e.childLanes),Is||r){if(null!==(r=ru)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:De(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Mu(r,e,i),Es;"$?"===u.data||Ku(),t=Hs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(u.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(Gr[Yr++]=Xr,Gr[Yr++]=Jr,Gr[Yr++]=Qr,Xr=e.id,Jr=e.overflow,Qr=t),(t=Ws(t,i.children)).flags|=4096);return t}return o?(ls(),o=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?o=Fr(c,o):(o=Vr(o,u,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(u=e.child.memoizedState)?u=Us(n):(null!==(l=u.cachePool)?(c=ji._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=qi(),u={baseLanes:u.baseLanes|n,cachePool:l}),o.memoizedState=u,o.childLanes=Vs(e,r,n),t.memoizedState=zs,i):(as(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ws(e,t){return(t=qs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qs(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hs(e,t,n){return ns(t,e.child,null,n),(e=Ws(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $s(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Ks(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ds(e,t,r.children,n),0!==(2&(r=cs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,n,t);else if(19===e.tag)$s(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(cs,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ks(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ks(t,!0,n,null,o);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ki(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ti(e))}function Xs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!Qs(e,n)&&0===(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),bi(0,ji,e.memoizedState.cache),fi();break;case 27:case 5:G(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(as(t),null!==(e=Ys(e,t,n))?e.sibling:null);as(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ki(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,js(e,t,n);case 24:bi(0,ji,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);Is=0!==(131072&e.flags)}else Is=!1,oi&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=As(null,t,r,e,n);break e}if(i===C){t.tag=14,t=_s(null,t,r,e,n);break e}}throw t=j(r)||r,Error(a(306,t,""))}Lr(r)?(e=ms(r,e),t.tag=1,t=Ls(null,t,r,e,n)):(t.tag=0,t=Ns(null,t,r,e,n))}return t;case 0:return Ns(e,t,t.type,t.pendingProps,n);case 1:return Ls(e,t,r=t.type,i=ms(r,t.pendingProps),n);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),co(t,r,null,n);var s=t.memoizedState;if(r=s.cache,bi(0,ji,r),r!==o.cache&&Si(t,[ji],n,!0),uo(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Fs(e,t,r,n);break e}if(r!==i){gi(i=Tr(Error(a(424)),t)),t=Fs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ys(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 26:return Os(e,t),null===e?(n=Dd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(q.current).createElement(n))[je]=t,r[Re]=e,ed(r,n,e),He(r),t.stateNode=r):t.memoizedState=Dd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oi&&(r=t.stateNode=wd(t.type,t.pendingProps,q.current),ri=t,si=!0,i=ii,fd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),Ds(e,t,t.pendingProps.children,n),Os(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),si=!1,i=!0):i=!1),i||ui(t)),G(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==s&&ad(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=jo(e,t,No,null,null,n),Gd._currentValue=i),Os(e,t),Ds(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Bs(e,t,n);case 4:return $(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return As(e,t,t.type,t.pendingProps,n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Ds(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ei(i)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return _s(e,t,t.type,t.pendingProps,n);case 15:return Ps(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=qs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return js(e,t,n);case 24:return Ci(t),r=Ei(ji),null===e?(null===(i=Bi())&&(i=ru,o=Ri(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,ji,i)):(0!==(e.lanes&n)&&(ro(e,t),co(t,null,null,n),uo()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,ji,r)):(r=o.cache,bi(0,ji,r),r!==i.cache&&Si(t,[ji],n,!0))),Ds(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Js(e){e.flags|=4}function Zs(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=is.current)&&((4194048&ou)===ou?null!==os:(62914560&ou)!==ou&&0===(536870912&ou)||t!==os))throw Ji=Gi,$i;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,yu|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(ji),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Js(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Js(t),null!==n?(nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Js(t),nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Js(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=B.current,hi(t)?ci(t):(e=wd(i,r,n),t.stateNode=e,Js(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=B.current,hi(t))ci(t);else{switch(i=rd(q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[je]=t,e[Re]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Js(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=q.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[je]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qc(e.nodeValue,n)))||ui(t)}else(e=rd(e).createTextNode(r))[je]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[je]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(us(t),t):(us(t),null)}if(us(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Uc(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(U(cs),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==hu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return V(cs,1&cs.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Su&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=cs.current,V(cs,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return us(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(ji),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(ji),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(us(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(cs),null;case 4:return K(),null;case 10:return wi(t.type),null;case 22:case 23:return us(t),vo(),null!==e&&U(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(ji),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:wi(ji),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:us(t);break;case 19:U(cs);break;case 10:wi(t.type);break;case 22:case 23:us(t),vo(),null!==e&&U(Vi);break;case 24:wi(ji)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){cc(t,t.return,s)}}function sl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(c){cc(i,l,c)}}}r=r.next}while(r!==o)}}catch(c){cc(t,t.return,c)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fo(t,n)}catch(r){cc(e,e.return,r)}}}function ul(e,t,n){n.props=ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){cc(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){cc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){cc(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){cc(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,l=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||Jc(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":o=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Jc(e,t,f,p,r,h)}}return void mt(e,s,l,u,c,d,o,i);case"select":for(o in p=s=l=f=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(o)||Jc(e,t,o,null,r,u)}for(i in r)if(o=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=o||null!=u))switch(i){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==u&&Jc(e,t,i,o,r,u)}return t=l,n=s,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&Jc(e,t,s,i,r,o)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jc(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Jc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Jc(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Jc(e,t,c,f,r,p)}return;default:if(Et(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zc(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zc(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Jc(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Jc(e,t,h,f,r,p)}(r,e.type,n,t),r[Re]=t}catch(i){cc(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xc));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[je]=e,t[Re]=n}catch(o){cc(e,e.return,o)}}var bl=!1,wl=!1,xl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(e,n),4&r&&al(5,n);break;case 1:if(Ll(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){cc(n,n.return,a)}else{var i=ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){cc(n,n.return,s)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Ll(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fo(e,t)}catch(a){cc(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ll(e,n),null===t&&4&r&&hl(n),512&r&&cl(n,n.return);break;case 12:Ll(e,n);break;case 13:Ll(e,n),4&r&&_l(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,i=bl;var o=wl;bl=r,(wl=t)&&!o?zl(e,n,0!==(8772&n.subtreeFlags)):Ll(e,n),bl=i,wl=o}break;case 30:break;default:Ll(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Il=!1;function Dl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(o){}switch(n.tag){case 26:wl||dl(n,t),Dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=El,i=Il;fd(n.type)&&(El=n.stateNode,Il=!1),Dl(e,t,n),xd(n.stateNode),El=r,Il=i;break;case 5:wl||dl(n,t);case 6:if(r=El,i=Il,El=null,Dl(e,t,n),Il=i,null!==(El=r))if(Il)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(n.stateNode)}catch(a){cc(n,t,a)}else try{El.removeChild(n.stateNode)}catch(a){cc(n,t,a)}break;case 18:null!==El&&(Il?(pd(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ih(e)):pd(El,n.stateNode));break;case 4:r=El,i=Il,El=n.stateNode.containerInfo,Il=!0,Dl(e,t,n),El=r,Il=i;break;case 0:case 11:case 14:case 15:wl||sl(2,n,t),wl||sl(4,n,t),Dl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Dl(e,t,n);break;case 21:Dl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Dl(e,t,n),wl=r;break;default:Dl(e,t,n)}}function _l(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ih(e)}catch(n){cc(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function jl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){El=l.stateNode,Il=!1;break e}break;case 5:El=l.stateNode,Il=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Il=!0;break e}l=l.return}if(null===El)throw Error(a(160));Al(o,s,i),El=null,Il=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Rl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jl(t,e),Nl(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:jl(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Rl;if(jl(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[ze]||o[je]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[je]=e,He(o),r=o;break e;case"link":var s=zd("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=zd("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[je]=e,He(o),r=o}e.stateNode=r}else Ud(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Ud(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:jl(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jl(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){cc(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(xl=!0);break;case 6:if(jl(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){cc(e,e.return,p)}}break;case 3:if(Fd=null,i=Rl,Rl=Td(t.containerInfo),jl(t,e),Rl=i,Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ih(t.containerInfo)}catch(p){cc(e,e.return,p)}xl&&(xl=!1,Ml(e));break;case 4:r=Rl,Rl=Td(e.stateNode.containerInfo),jl(t,e),Nl(e),Rl=r;break;case 12:default:jl(t,e),Nl(e);break;case 13:jl(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bl,d=wl;if(bl=c||i,wl=d||u,jl(t,e),wl=d,bl=c,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||bl||wl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,i)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){cc(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(p){cc(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:jl(t,e),Nl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(St(o,""),n.flags&=-33),yl(e,gl(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;ml(e,gl(e),s);break;default:throw Error(a(161))}}catch(l){cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Fl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:zl(i,o,n),al(4,o);break;case 1:if(zl(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){cc(r,r.return,u)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],s)}catch(u){cc(r,r.return,u)}}n&&64&a&&ll(o),cl(o,o.return);break;case 27:vl(o);case 26:case 5:zl(i,o,n),n&&null===r&&4&a&&hl(o),cl(o,o.return);break;case 12:zl(i,o,n);break;case 13:zl(i,o,n),n&&4&a&&_l(i,o);break;case 22:null===o.memoizedState&&zl(i,o,n),cl(o,o.return);break;case 30:break;default:zl(i,o,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function Vl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){Bl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){cc(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Bl(e,t,n,r):Hl(e,t):2&o._visibility?Bl(e,t,n,r):(o._visibility|=2,ql(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Ul(a,t);break;case 24:Bl(e,t,n,r),2048&i&&Vl(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:ql(o,a,s,l,i),al(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?ql(o,a,s,l,i):Hl(o,a):(c._visibility|=2,ql(o,a,s,l,i)),i&&2048&u&&Ul(a.alternate,a);break;case 24:ql(o,a,s,l,i),i&&2048&u&&Vl(a.alternate,a);break;default:ql(o,a,s,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&Ul(r.alternate,r);break;case 24:Hl(n,r),2048&i&&Vl(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var $l=8192;function Kl(e){if(e.subtreeFlags&$l)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Kl(e),e.flags&$l&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),o=e.querySelector(_d(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void He(o);o=e.ownerDocument||e,n=Pd(n),(i=Sd.get(i))&&Md(n,i),He(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Rl;Rl=Td(e.stateNode.containerInfo),Kl(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=$l,$l=16777216,Kl(e),$l=t):Kl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Ql(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var i=(r=kl).sibling,o=r.return;if(Cl(r),r===n){kl=null;break e}if(null!==i){i.return=o,kl=i;break e}kl=o}}}var eu={getCacheForType:function(e){var t=Ei(ji),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"===typeof WeakMap?WeakMap:Map,nu=0,ru=null,iu=null,ou=0,au=0,su=null,lu=!1,uu=!1,cu=!1,du=0,hu=0,fu=0,pu=0,gu=0,mu=0,yu=0,vu=null,bu=null,wu=!1,xu=0,Su=1/0,ku=null,Tu=null,Cu=0,Eu=null,Iu=null,Du=0,Au=0,_u=null,Pu=null,ju=0,Ru=null;function Ou(){if(0!==(2&nu)&&0!==ou)return ou&-ou;if(null!==O.T){return 0!==Li?Li:Ac()}return _e()}function Nu(){0===mu&&(mu=0===(536870912&ou)||oi?Se():536870912);var e=is.current;return null!==e&&(e.flags|=32),mu}function Mu(e,t,n){(e!==ru||2!==au&&9!==au)&&null===e.cancelPendingCommit||(Wu(e,0),Uu(e,ou,mu,!1)),Ce(e,n),0!==(2&nu)&&e===ru||(e===ru&&(0===(2&nu)&&(pu|=n),4===hu&&Uu(e,ou,mu,!1)),Sc(e))}function Lu(e,t,n){if(0!==(6&nu))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nu;nu|=2;var r=Hu(),i=$u();ru!==e||ou!==t?(ku=null,Su=te()+500,Wu(e,t)):uu=we(e,t);e:for(;;)try{if(0!==au&&null!==iu){t=iu;var o=su;t:switch(au){case 1:au=0,su=null,Zu(e,t,o,1);break;case 2:case 9:if(Yi(o)){au=0,su=null,Ju(t);break}t=function(){2!==au&&9!==au||ru!==e||(au=7),Sc(e)},o.then(t,t);break e;case 3:au=7;break e;case 4:au=5;break e;case 7:Yi(o)?(au=0,su=null,Ju(t)):(au=0,su=null,Zu(e,t,o,7));break;case 5:var s=null;switch(iu.tag){case 26:s=iu.memoizedState;case 5:case 27:var l=iu;if(!s||Vd(s)){au=0,su=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}au=0,su=null,Zu(e,t,o,5);break;case 6:au=0,su=null,Zu(e,t,o,6);break;case 8:Bu(),hu=6;break e;default:throw Error(a(462))}}Qu();break}catch(d){qu(e,d)}return vi=yi=null,O.H=r,O.A=i,nu=n,null!==iu?0:(ru=null,ou=0,Dr(),hu)}(e,t):Gu(e,t,!0),o=r;;){if(0===i){uu&&!r&&Uu(e,t,0,!1);break}if(n=e.current.alternate,!o||zu(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=vu;var u=l.current.memoizedState.isDehydrated;if(u&&(Wu(l,s).flags|=256),2!==(s=Gu(l,s,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=o,pu|=o,i=4;break e}o=bu,bu=i,null!==o&&(null===bu?bu=o:bu.push.apply(bu,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){Wu(e,0),Uu(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Uu(r,t,mu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=xu+300-te())){if(Uu(r,t,mu,!lu),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Fu.bind(null,r,n,bu,ku,wu,t,mu,pu,yu,lu,o,2,-0,0),i)}else Fu(r,n,bu,ku,wu,t,mu,pu,yu,lu,o,0,-0,0)}break}i=Gu(e,t,!1),o=!1}Sc(e)}function Fu(e,t,n,r,i,o,s,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:Wd},Gl(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&$d(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&$d(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nc.bind(null,e,t,o,n,r,i,s,l,u,d,1,f,p)),void Uu(e,o,s,!c);nc(e,t,o,n,r,i,s,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uu(e,t,n,r){t&=~gu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-fe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Ee(e,n,t)}function Vu(){return 0!==(6&nu)||(kc(0,!1),!1)}function Bu(){if(null!==iu){if(0===au)var e=iu.return;else vi=yi=null,Fo(e=iu),Ya=null,Qa=0,e=iu;for(;null!==e;)ol(e.alternate,e),e=e.return;iu=null}}function Wu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bu(),ru=e,iu=n=Fr(e.current,null),ou=t,au=0,su=null,lu=!1,uu=we(e,t),cu=!1,yu=mu=gu=pu=fu=hu=0,bu=vu=null,wu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),o=1<<i;t|=e[i],r&=~o}return du=t,Dr(),n}function qu(e,t){wo=null,O.H=Ha,t===Hi||t===Ki?(t=Zi(),au=3):t===$i?(t=Zi(),au=4):au=t===Es?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,su=t,null===iu&&(hu=1,xs(e,Tr(t,e.current)))}function Hu(){var e=O.H;return O.H=Ha,null===e?Ha:e}function $u(){var e=O.A;return O.A=eu,e}function Ku(){hu=4,lu||(4194048&ou)!==ou&&null!==is.current||(uu=!0),0===(134217727&fu)&&0===(134217727&pu)||null===ru||Uu(ru,ou,mu,!1)}function Gu(e,t,n){var r=nu;nu|=2;var i=Hu(),o=$u();ru===e&&ou===t||(ku=null,Wu(e,t)),t=!1;var a=hu;e:for(;;)try{if(0!==au&&null!==iu){var s=iu,l=su;switch(au){case 8:Bu(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var u=au;if(au=0,su=null,Zu(e,s,l,u),n&&uu){a=0;break e}break;default:u=au,au=0,su=null,Zu(e,s,l,u)}}Yu(),a=hu;break}catch(c){qu(e,c)}return t&&e.shellSuspendCounter++,vi=yi=null,nu=r,O.H=i,O.A=o,null===iu&&(ru=null,ou=0,Dr()),a}function Yu(){for(;null!==iu;)Xu(iu)}function Qu(){for(;null!==iu&&!Z();)Xu(iu)}function Xu(e){var t=Xs(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ms(n,t,t.pendingProps,t.type,void 0,ou);break;case 11:t=Ms(n,t,t.pendingProps,t.type.render,t.ref,ou);break;case 5:Fo(t);default:ol(n,t),t=Xs(n,t=iu=zr(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Zu(e,t,n,r){vi=yi=null,Fo(t),Ya=null,Qa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ki(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Ku():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,i)),!1}throw Error(a(435,n.tag))}return dc(e,r,i),Ku(),!1}if(oi)return null!==(t=is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(Tr(e=Error(a(422),{cause:r}),n))):(r!==li&&gi(Tr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Tr(r,n),so(e,i=ks(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var o=Error(a(520),{cause:r});if(o=Tr(o,n),null===vu?vu=[o]:vu.push(o),4!==hu&&(hu=2),null===t)return!0;r=Tr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=ks(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Tu||!Tu.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Cs(i=Ts(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ou))return hu=1,xs(e,Tr(n,e.current)),void(iu=null)}catch(o){if(null!==i)throw iu=i,o;return hu=1,xs(e,Tr(n,e.current)),void(iu=null)}32768&t.flags?(oi||1===r?e=!0:uu||0!==(536870912&ou)?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(iu=n);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===hu&&(hu=5)}function tc(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(iu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=n}while(null!==e);hu=6,iu=null}function nc(e,t,n,r,i,o,s,l,u){e.cancelPendingCommit=null;do{sc()}while(0!==Cu);if(0!==(6&nu))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-fe(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ee(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=Ir,s,l,u),e===ru&&(iu=ru=null,ou=0),Iu=t,Eu=e,Du=n,Au=o,_u=i,Pu=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(oe,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=N.p,N.p=2,s=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(m){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(o=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var g=ms(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){cc(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nu=s,N.p=i,O.T=r}}Cu=1,rc(),ic(),oc()}}function rc(){if(1===Cu){Cu=0;var e=Eu,t=Iu,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=N.p;N.p=2;var i=nu;nu|=4;try{Ol(t,e);var o=nd,a=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Zn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=s.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var y=Jn(s,g),v=Jn(s,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nu=i,N.p=r,O.T=n}}e.current=t,Cu=2}}function ic(){if(2===Cu){Cu=0;var e=Eu,t=Iu,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=N.p;N.p=2;var i=nu;nu|=4;try{Tl(e,t.alternate,t)}finally{nu=i,N.p=r,O.T=n}}Cu=3}}function oc(){if(4===Cu||3===Cu){Cu=0,ee();var e=Eu,t=Iu,n=Du,r=Pu;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cu=5:(Cu=0,Iu=Eu=null,ac(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Tu=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=N.p,N.p=2,O.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{O.T=t,N.p=i}}0!==(3&Du)&&sc(),Sc(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Ru?ju++:(ju=0,Ru=e):ju=0,kc(0,!1)}}function ac(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function sc(e){return rc(),ic(),oc(),lc()}function lc(){if(5!==Cu)return!1;var e=Eu,t=Au;Au=0;var n=Ae(Du),r=O.T,i=N.p;try{N.p=32>n?32:n,O.T=null,n=_u,_u=null;var o=Eu,s=Du;if(Cu=0,Iu=Eu=null,Du=0,0!==(6&nu))throw Error(a(331));var l=nu;if(nu|=4,Xl(o.current),Wl(o,o.current,s,n),nu=l,kc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,o)}catch(u){}return!0}finally{N.p=i,O.T=r,ac(e,t)}}function uc(e,t,n){t=Tr(n,t),null!==(e=oo(e,t=ks(e.stateNode,t,2),2))&&(Ce(e,2),Sc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Tu||!Tu.has(r))){e=Tr(n,e),null!==(r=oo(t,n=Ts(2),2))&&(Cs(n,r,t,e),Ce(r,2),Sc(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(cu=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(ou&n)===n&&(4===hu||3===hu&&(62914560&ou)===ou&&300>te()-xu?0===(2&nu)&&Wu(e,0):gu|=n,yu===ou&&(yu=0)),Sc(e)}function fc(e,t){0===t&&(t=ke()),null!==(e=Pr(e,t))&&(Ce(e,t),Sc(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fc(e,n)}var mc=null,yc=null,vc=!1,bc=!1,wc=!1,xc=0;function Sc(e){e!==yc&&null===e.next&&(null===yc?mc=yc=e:yc=yc.next=e),bc=!0,vc||(vc=!0,dd(function(){0!==(6&nu)?X(re,Tc):Cc()}))}function kc(e,t){if(!wc&&bc){wc=!0;do{for(var n=!1,r=mc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-fe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Dc(r,o))}else o=ou,0===(3&(o=be(r,r===ru?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,o)||(n=!0,Dc(r,o));r=r.next}}while(n);wc=!1}}function Tc(){Cc()}function Cc(){bc=vc=!1;var e=0;0!==xc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=xc),xc=0);for(var t=te(),n=null,r=mc;null!==r;){var i=r.next,o=Ec(r,t);0===o?(r.next=null,null===n?mc=i:n.next=i,null===i&&(yc=n)):(n=r,(0!==e||0!==(3&o))&&(bc=!0)),r=i}kc(e,!1)}function Ec(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-fe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=xe(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=ou,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===au||9===au)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ae(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Ic.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Ic(e,t){if(0!==Cu&&5!==Cu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var r=ou;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lu(e,r,t),Ec(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ic.bind(null,e):null)}function Dc(e,t){if(sc())return null;Lu(e,t,!0)}function Ac(){return 0===xc&&(xc=Se()),xc}function _c(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Pc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var jc=0;jc<xr.length;jc++){var Rc=xr[jc];Sr(Rc.toLowerCase(),"on"+(Rc[0].toUpperCase()+Rc.slice(1)))}Sr(fr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(gr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(mr,"onTransitionRun"),Sr(yr,"onTransitionStart"),Sr(vr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Mc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ys(c)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ys(c)}i.currentTarget=null,o=l}}}}function Lc(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||(Vc(t,e,2,!1),n.add(r))}function Fc(e,t,n){var r=0;t&&(r|=4),Vc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[zc]){e[zc]=!0,$e.forEach(function(t){"selectionchange"!==t&&(Nc.has(t)||Fc(t,!1,e),Fc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Fc("selectionchange",!1,t))}}function Vc(e,t,n,r){switch(uh(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bc(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Ve(s)))return;if(5===(u=a.tag)||6===u||26===u||27===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Mt(function(){var r=o,i=Pt(n),a=[];e:{var s=wr.get(e);if(void 0!==s){var u=Zt,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":u=gn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=yn;break;case fr:case pr:case gr:u=sn;break;case br:u=vn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mn;break;case"toggle":case"beforetoggle":u=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Lt(g,f))&&d.push(Wc(g,m,p)),h)break;g=g.return}0<d.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_t||!(c=n.relatedTarget||n.fromElement)||!Ve(c)&&!c[Oe])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ve(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?s:We(u),p=null==c?s:We(c),(s=new d(m,g+"leave",u,n,i)).target=h,s.relatedTarget=p,m=null,Ve(i)===r&&((d=new d(f,g+"enter",c,n,i)).target=p,d.relatedTarget=h,m=d),h=m,u&&c)e:{for(f=c,g=0,p=d=u;p;p=Hc(p))g++;for(p=0,m=f;m;m=Hc(m))p++;for(;0<g-p;)d=Hc(d),g--;for(;0<p-g;)f=Hc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Hc(d),f=Hc(f)}d=null}else d=null;null!==u&&$c(a,s,u,d,!1),null!==c&&null!==h&&$c(a,h,c,d,!0)}if("select"===(u=(s=r?We(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Fn;else if(jn(s))if(zn)y=Gn;else{y=$n;var v=Hn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Et(r.elementType)&&(y=Fn):y=Kn;switch(y&&(y=y(e,r))?Rn(a,y,n,i):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?We(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var b;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else _n?Dn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(_n||"onCompositionStart"!==w?"onCompositionEnd"===w&&_n&&(b=qt()):(Bt="value"in(Vt=i)?Vt.value:Vt.textContent,_n=!0)),0<(v=qc(r,w)).length&&(w=new un(w,e,null,n,i),a.push({event:w,listeners:v}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(In=!0,En);case"textInput":return(e=t.data)===En&&In?null:e;default:return null}}(e,n):function(e,t){if(_n)return"compositionend"===e||!Sn&&Dn(e,t)?(e=qt(),Wt=Bt=Vt=null,_n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qc(r,"onBeforeInput")).length&&(v=new un("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=_c((i[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?_c(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Zt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xc){var e=a?Pc(i,a):new FormData(i);Pa(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?Pc(i,a):new FormData(i),Pa(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}Mc(a,t)})}function Wc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Lt(e,n))&&r.unshift(Wc(e,i,o)),null!=(i=Lt(e,t))&&r.push(Wc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Hc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function $c(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Lt(n,o))&&a.unshift(Wc(n,u,l)):i||null!=(u=Lt(n,o))&&a.push(Wc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Yc(e){return("string"===typeof e?e:""+e).replace(Kc,"\n").replace(Gc,"")}function Qc(e,t){return t=Yc(t),Yc(e)===t}function Xc(){}function Jc(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Jc(e,t,"name",i.name,i,null),Jc(e,t,"formEncType",i.formEncType,i,null),Jc(e,t,"formMethod",i.formMethod,i,null),Jc(e,t,"formTarget",i.formTarget,i,null)):(Jc(e,t,"encType",i.encType,i,null),Jc(e,t,"method",i.method,i,null),Jc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"onScroll":null!=r&&Lc("scroll",e);break;case"onScrollEnd":null!=r&&Lc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Lc("beforetoggle",e),Lc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=It.get(n)||n,r)}}function Zc(e,t,n,r,i,o){switch(n){case"style":Ct(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Lc("scroll",e);break;case"onScrollEnd":null!=r&&Lc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Re]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lc("error",e),Lc("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jc(e,t,r,s,n,null)}}return o&&Jc(e,t,"srcSet",n.srcSet,n,null),void(i&&Jc(e,t,"src",n.src,n,null));case"input":Lc("invalid",e);var l=r=s=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Jc(e,t,i,d,n,null)}}return yt(e,r,l,u,c,s,o,!1),void dt(e);case"select":for(o in Lc("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:Jc(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in Lc("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Jc(e,t,s,l,n,null)}return xt(e,i,o,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Jc(e,t,u,i,n,null);return;case"dialog":Lc("beforetoggle",e),Lc("toggle",e),Lc("cancel",e),Lc("close",e);break;case"iframe":case"object":Lc("load",e);break;case"video":case"audio":for(i=0;i<Oc.length;i++)Lc(Oc[i],e);break;case"image":Lc("error",e),Lc("load",e);break;case"details":Lc("toggle",e);break;case"embed":case"source":case"link":Lc("error",e),Lc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jc(e,t,c,i,n,null)}return;default:if(Et(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zc(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Jc(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,cd="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&xd(a.documentElement),2&n&&xd(a.body),4&n)for(xd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Ih(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Ih(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Sd=new Map,kd=new Set;function Td(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=N.d;N.d={f:function(){var e=Cd.f(),t=Vu();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Ra(t):Cd.r(e)},D:function(e){Cd.D(e),Id("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Id("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Ed;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var o=i;switch(t){case"style":o=Ad(e);break;case"script":o=jd(e)}Sd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(_d(o))||"script"===t&&r.querySelector(Rd(o))||(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Ed;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=jd(e)}if(!Sd.has(o)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(o)))return}ed(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Ed;if(n&&e){var r=qe(n).hoistableScripts,i=jd(e),o=r.get(i);o||((o=n.querySelector(Rd(i)))||(e=h({src:e,async:!0},t),(t=Sd.get(i))&&Ld(e,t),He(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Cd.S(e,t,n);var r=Ed;if(r&&e){var i=qe(r).hoistableStyles,o=Ad(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(_d(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(o))&&Md(e,n);var l=a=r.createElement("link");He(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Nd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Cd.M(e,t);var n=Ed;if(n&&e){var r=qe(n).hoistableScripts,i=jd(e),o=r.get(i);o||((o=n.querySelector(Rd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(i))&&Ld(e,t),He(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Ed="undefined"===typeof document?null:document;function Id(e,t,n){var r=Ed;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),kd.has(i)||(kd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function Dd(e,t,n,r){var i,o,s,l,u=(u=q.current)?Td(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=qe(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(_d(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),c||(i=u,o=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),He(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=jd(n),(r=(n=qe(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+gt(e)+'"'}function _d(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function jd(e){return'[src="'+gt(e)+'"]'}function Rd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,He(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Nd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var o=e.querySelector(_d(i));if(o)return t.state.loading|=4,t.instance=o,He(o),o;r=Pd(n),(i=Sd.get(i))&&Md(r,i),He(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Nd(o,n.precedence,e),t.instance=o;case"script":return o=jd(n.src),(i=e.querySelector(Rd(o)))?(t.instance=i,He(i),i):(r=n,(i=Sd.get(o))&&Ld(r=h({},n),i),He(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,n.precedence,e));return t.instance}function Nd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function zd(e,t,n){if(null===Fd){var r=new Map,i=Fd=new Map;i.set(n,r)}else(r=(i=Fd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[ze]||o[je]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function Wd(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)$d(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function $d(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Kd,e),Hd=null,qd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:x,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Yd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Qd(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Yd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=Mr(3,null,null,t),e.current=o,o.stateNode=e,(t=Ri()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Xd(e){return e?e=Or:Or}function Jd(e,t,n,r,i,o){i=Xd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Mu(n,0,t),ao(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Mu(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=O.T;O.T=null;var o=N.p;try{N.p=2,oh(e,t,n,r)}finally{N.p=o,O.T=i}}function ih(e,t,n,r){var i=O.T;O.T=null;var o=N.p;try{N.p=8,oh(e,t,n,r)}finally{N.p=o,O.T=i}}function oh(e,t,n,r){if(nh){var i=ah(r);if(null===i)Bc(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return fh=bh(fh,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ph.set(o,bh(ph.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,gh.set(o,bh(gh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=Be(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-fe(a);s.entanglements[1]|=l,a&=~l}Sc(o),0===(6&nu)&&(Su=te()+500,kc(0,!1))}}break;case 13:null!==(s=Pr(o,2))&&Mu(s,0,2),Vu(),eh(o,2)}if(null===(o=ah(r))&&Bc(e,t,r,sh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Bc(e,t,r,null,n)}}function ah(e){return lh(e=Pt(e))}var sh=null;function lh(e){if(sh=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}(e.priority,function(){if(13===n.tag){var e=Ou();e=De(e);var t=Pr(n,e);null!==t&&Mu(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,t.shift()}return!0}function Sh(e,t,n){xh(e)&&n.delete(t)}function kh(){ch=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==fh&&xh(fh)&&(fh=null),ph.forEach(Sh),gh.forEach(Sh)}function Th(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Ch=null;function Eh(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=Be(n);null!==o&&(e.splice(t,3),t-=3,Pa(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ih(e){function t(t){return Th(t,e)}null!==dh&&Th(dh,e),null!==hh&&Th(hh,e),null!==fh&&Th(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)wh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Re]||null;if("function"===typeof o)a||Eh(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Re]||null)s=a.formAction;else if(null!==lh(i))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Eh(n)}}}function Dh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Dh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,Ou(),e,t,null,null)},Ah.prototype.unmount=Dh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Vu(),t[Oe]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=_e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&wh(e)}};var _h=i.version;if("19.1.0"!==_h)throw Error(a(527,_h,"19.1.0"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return c(i),e;if(o===r)return c(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{ce=jh.inject(Ph),de=jh}catch(Oh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=vs,o=bs,l=ws;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Oe]=t.current,Uc(e),new Dh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=vs,l=bs,u=ws,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Qd(e,1,!0,t,0,r,i,o,l,u,0,c)).context=Xd(null),n=t.current,(i=io(r=De(r=Ou()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Ce(t,n),Sc(t),e[Oe]=t.current,Uc(e),new Ah(t)},t.version="19.1.0"},7278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t);return n.getTime()<o.getTime()}},7384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStaticRanges=b,t.defaultInputRanges=t.defaultStaticRanges=void 0;var r=f(n(6740)),i=f(n(407)),o=f(n(1555)),a=f(n(238)),s=f(n(6819)),l=f(n(6255)),u=f(n(2128)),c=f(n(5780)),d=f(n(6087)),h=f(n(5479));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={startOfWeek:(0,a.default)(new Date),endOfWeek:(0,o.default)(new Date),startOfLastWeek:(0,a.default)((0,h.default)(new Date,-7)),endOfLastWeek:(0,o.default)((0,h.default)(new Date,-7)),startOfToday:(0,c.default)(new Date),endOfToday:(0,d.default)(new Date),startOfYesterday:(0,c.default)((0,h.default)(new Date,-1)),endOfYesterday:(0,d.default)((0,h.default)(new Date,-1)),startOfMonth:(0,u.default)(new Date),endOfMonth:(0,l.default)(new Date),startOfLastMonth:(0,u.default)((0,s.default)(new Date,-1)),endOfLastMonth:(0,l.default)((0,s.default)(new Date,-1))},v={range:{},isSelected:function(e){var t=this.range();return(0,i.default)(e.startDate,t.startDate)&&(0,i.default)(e.endDate,t.endDate)}};function b(e){return e.map(function(e){return g(g({},v),e)})}var w=b([{label:"Today",range:function(){return{startDate:y.startOfToday,endDate:y.endOfToday}}},{label:"Yesterday",range:function(){return{startDate:y.startOfYesterday,endDate:y.endOfYesterday}}},{label:"This Week",range:function(){return{startDate:y.startOfWeek,endDate:y.endOfWeek}}},{label:"Last Week",range:function(){return{startDate:y.startOfLastWeek,endDate:y.endOfLastWeek}}},{label:"This Month",range:function(){return{startDate:y.startOfMonth,endDate:y.endOfMonth}}},{label:"Last Month",range:function(){return{startDate:y.startOfLastMonth,endDate:y.endOfLastMonth}}}]);t.defaultStaticRanges=w;var x=[{label:"days up to today",range:function(e){return{startDate:(0,h.default)(y.startOfToday,-1*(Math.max(Number(e),1)-1)),endDate:y.endOfToday}},getCurrentValue:function(e){return(0,i.default)(e.endDate,y.endOfToday)?e.startDate?(0,r.default)(y.endOfToday,e.startDate)+1:"\u221e":"-"}},{label:"days starting today",range:function(e){var t=new Date;return{startDate:t,endDate:(0,h.default)(t,Math.max(Number(e),1)-1)}},getCurrentValue:function(e){return(0,i.default)(e.startDate,y.startOfToday)?e.endDate?(0,r.default)(e.endDate,y.startOfToday)+1:"\u221e":"-"}}];t.defaultInputRanges=x},7583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t);return n.getTime()===o.getTime()}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8001:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const i=function(e,t,n){var i,o=r[e];return i="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function o(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var a={date:o({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:o({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:o({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function l(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function u(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,function(e){return e.test(s)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,function(e){return e.test(s)});return a=e.valueCallback?e.valueCallback(u):u,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}var c;const d={code:"en-US",formatDistance:i,formatLong:a,formatRelative:function(e,t,n,r){return s[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:l({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:l({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:l({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:l({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:l({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(c.matchPattern);if(!n)return null;var r=n[0],i=e.match(c.parsePattern);if(!i)return null;var o=c.valueCallback?c.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:u({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:u({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:u({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:u({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:u({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},8082:function(e,t,n){var r,i,o;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,i=[t,n(5043),n(579)],r=function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t=d(t),l(e,c()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=v(e,"string");return"symbol"==r(t)?t:t+""}function v(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var b={x:"clientWidth",y:"clientHeight"},w={x:"clientTop",y:"clientLeft"},x={x:"innerWidth",y:"innerHeight"},S={x:"offsetWidth",y:"offsetHeight"},k={x:"offsetLeft",y:"offsetTop"},T={x:"overflowX",y:"overflowY"},C={x:"scrollWidth",y:"scrollHeight"},E={x:"scrollLeft",y:"scrollTop"},I={x:"width",y:"height"},D=function(){},A=!!function(){if("undefined"===typeof window)return!1;var e=!1;try{document.createElement("div").addEventListener("test",D,{get passive(){return e=!0,!1}})}catch(t){}return e}()&&{passive:!0},_="ReactList failed to reach a stable state.",P=40,j=function(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0},R=function(e){for(var t=e.props.axis,n=e.getEl(),r=T[t];n=n.parentElement;)switch(window.getComputedStyle(n)[r]){case"auto":case"scroll":case"overlay":return n}return window},O=function(e){var t=e.props.axis,n=e.scrollParent;return n===window?window[x[t]]:n[b[t]]},N=function(e,t){var n=e.length,r=e.minSize,i=e.type,o=t.from,a=t.size,s=t.itemsPerRow,l=(a=Math.max(a,r))%s;return l&&(a+=s-l),a>n&&(a=n),(l=(o="simple"!==i&&o?Math.max(Math.min(o,n-a),0):0)%s)&&(o-=l,a+=l),o===t.from&&a===t.size?t:g(g({},t),{},{from:o,size:a})},M=e.default=function(e){function t(e){var n;return i(this,t),(n=s(this,t,[e])).state=N(e,{itemsPerRow:1,from:e.initialIndex,size:0}),n.cache={},n.cachedScrollPosition=null,n.prevPrevState={},n.unstable=!1,n.updateCounter=0,n}return h(t,e),a(t,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.axis!==e.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>P)return this.unstable=!0,console.error(_);this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout(function(){t.updateCounter=0,delete t.updateCounterTimeoutId},0)),this.updateFrame()}}},{key:"maybeSetState",value:function(e,t){if(j(this.state,e))return t();this.setState(e,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,A),this.scrollParent.removeEventListener("mousewheel",D,A)}},{key:"getOffset",value:function(e){var t=this.props.axis,n=e[w[t]]||0,r=k[t];do{n+=e[r]||0}while(e=e.offsetParent);return n}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if("number"===typeof this.cachedScrollPosition)return this.cachedScrollPosition;var e=this.scrollParent,t=this.props.axis,n=E[t],r=e===window?document.body[n]||document.documentElement[n]:e[n],i=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),o=Math.max(0,Math.min(r,i)),a=this.getEl();return this.cachedScrollPosition=this.getOffset(e)+o-this.getOffset(a),this.cachedScrollPosition}},{key:"setScroll",value:function(e){var t=this.scrollParent,n=this.props.axis;if(e+=this.getOffset(this.getEl()),t===window)return window.scrollTo(0,e);e-=this.getOffset(this.scrollParent),t[E[n]]=e}},{key:"getScrollSize",value:function(){var e=this.scrollParent,t=document,n=t.body,r=t.documentElement,i=C[this.props.axis];return e===window?Math.max(n[i],r[i]):e[i]}},{key:"hasDeterminateSize",value:function(){var e=this.props,t=e.itemSizeGetter;return"uniform"===e.type||t}},{key:"getStartAndEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,t=this.getScrollPosition(),n=Math.max(0,t-e),r=t+this.props.scrollParentViewportSizeGetter(this)+e;return this.hasDeterminateSize()&&(r=Math.min(r,this.getSpaceBefore(this.props.length))),{start:n,end:r}}},{key:"getItemSizeAndItemsPerRow",value:function(){var e=this.props,t=e.axis,n=e.useStaticSize,r=this.state,i=r.itemSize,o=r.itemsPerRow;if(n&&i&&o)return{itemSize:i,itemsPerRow:o};var a=this.items.children;if(!a.length)return{};var s=a[0],l=s[S[t]],u=Math.abs(l-i);if((isNaN(u)||u>=1)&&(i=l),!i)return{};for(var c=k[t],d=s[c],h=a[o=1];h&&h[c]===d;h=a[o])++o;return{itemSize:i,itemsPerRow:o}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(e){return this.clearSizeCache(),this.updateFrame(e)}},{key:"updateFrame",value:function(e){switch(this.updateScrollParent(),"function"!==typeof e&&(e=D),this.props.type){case"simple":return this.updateSimpleFrame(e);case"variable":return this.updateVariableFrame(e);case"uniform":return this.updateUniformFrame(e)}}},{key:"updateScrollParent",value:function(){var e=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),e!==this.scrollParent&&(e&&(e.removeEventListener("scroll",this.updateFrameAndClearCache),e.removeEventListener("mousewheel",D)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,A),this.scrollParent.addEventListener("mousewheel",D,A))}},{key:"updateSimpleFrame",value:function(e){var t=this.getStartAndEnd().end,n=this.items.children,r=0;if(n.length){var i=this.props.axis,o=n[0],a=n[n.length-1];r=this.getOffset(a)+a[S[i]]-this.getOffset(o)}if(r>t)return e();var s=this.props,l=s.pageSize,u=s.length,c=Math.min(this.state.size+l,u);this.maybeSetState({size:c},e)}},{key:"updateVariableFrame",value:function(e){this.props.itemSizeGetter||this.cacheSizes();for(var t=this.getStartAndEnd(),n=t.start,r=t.end,i=this.props,o=i.length,a=i.pageSize,s=0,l=0,u=0,c=o-1;l<c;){var d=this.getSizeOfItem(l);if(null==d||s+d>n)break;s+=d,++l}for(var h=o-l;u<h&&s<r;){var f=this.getSizeOfItem(l+u);if(null==f){u=Math.min(u+a,h);break}s+=f,++u}this.maybeSetState(N(this.props,{from:l,itemsPerRow:1,size:u}),e)}},{key:"updateUniformFrame",value:function(e){var t=this.getItemSizeAndItemsPerRow(),n=t.itemSize,r=t.itemsPerRow;if(!n||!r)return e();var i=this.getStartAndEnd(),o=i.start,a=i.end,s=N(this.props,{from:Math.floor(o/n)*r,size:(Math.ceil((a-o)/n)+1)*r,itemsPerRow:r}),l=s.from,u=s.size;return this.maybeSetState({itemsPerRow:r,from:l,itemSize:n,size:u},e)}},{key:"getSpaceBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t[e])return t[e];var n=this.state,r=n.itemSize,i=n.itemsPerRow;if(r)return t[e]=Math.floor(e/i)*r;for(var o=e;o>0&&null==t[--o];);for(var a=t[o]||0,s=o;s<e;++s){t[s]=a;var l=this.getSizeOfItem(s);if(null==l)break;a+=l}return t[e]=a}},{key:"cacheSizes",value:function(){for(var e=this.cache,t=this.state.from,n=this.items.children,r=S[this.props.axis],i=0,o=n.length;i<o;++i)e[t+i]=n[i][r]}},{key:"getSizeOfItem",value:function(e){var t=this.cache,n=this.items,r=this.props,i=r.axis,o=r.itemSizeGetter,a=r.itemSizeEstimator,s=r.type,l=this.state,u=l.from,c=l.itemSize,d=l.size;if(c)return c;if(o)return o(e);if(e in t)return t[e];if("simple"===s&&e>=u&&e<u+d&&n){var h=n.children[e-u];if(h)return h[S[i]]}return a?a(e,t):void 0}},{key:"scrollTo",value:function(e){null!=e&&this.setScroll(this.getSpaceBefore(e))}},{key:"scrollAround",value:function(e){var t=this.getScrollPosition(),n=this.getSpaceBefore(e),r=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(e),i=Math.min(r,n),o=Math.max(r,n);return t<=i?this.setScroll(i):t>o?this.setScroll(o):void 0}},{key:"getVisibleRange",value:function(){for(var e,t,n=this.state,r=n.from,i=n.size,o=this.getStartAndEnd(0),a=o.start,s=o.end,l={},u=r;u<r+i;++u){var c=this.getSpaceBefore(u,l),d=c+this.getSizeOfItem(u);null==e&&d>a&&(e=u),null!=e&&c<s&&(t=u)}return[e,t]}},{key:"renderItems",value:function(){for(var e=this,t=this.props,n=t.itemRenderer,r=t.itemsRenderer,i=this.state,o=i.from,a=i.size,s=[],l=0;l<a;++l)s.push(n(o+l,l));return r(s,function(t){return e.items=t})}},{key:"render",value:function(){var e=this,t=this.props,r=t.axis,i=t.length,o=t.type,a=t.useTranslate3d,s=this.state,l=s.from,u=s.itemsPerRow,c=this.renderItems();if("simple"===o)return c;var d={position:"relative"},h={},f=Math.ceil(i/u)*u,p=this.getSpaceBefore(f,h);p&&(d[I[r]]=p,"x"===r&&(d.overflowX="hidden"));var g=this.getSpaceBefore(l,h),m="x"===r?g:0,y="y"===r?g:0,v=a?"translate3d(".concat(m,"px, ").concat(y,"px, 0)"):"translate(".concat(m,"px, ").concat(y,"px)"),b={msTransform:v,WebkitTransform:v,transform:v};return(0,n.jsx)("div",{style:d,ref:function(t){return e.el=t},children:(0,n.jsx)("div",{style:b,children:c})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=N(e,t);return n===t?null:n}}])}(t.Component);m(M,"displayName","ReactList"),m(M,"defaultProps",{axis:"y",itemRenderer:function(e,t){return(0,n.jsx)("div",{children:e},t)},itemsRenderer:function(e,t){return(0,n.jsx)("div",{ref:t,children:e})},length:0,minSize:1,pageSize:10,scrollParentGetter:R,scrollParentViewportSizeGetter:O,threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1})},void 0===(o="function"===typeof r?r.apply(t,i):r)||(e.exports=o)},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8199:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(5043)),o=d(n(5173)),a=d(n(8139)),s=d(n(7583)),l=d(n(5837)),u=d(n(5556)),c=d(n(9993));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,o=g(d);function d(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),v(m(n=o.call(this,e,t)),"onKeyDown",function(e){var t=n.state.value;"Enter"===e.key&&n.update(t)}),v(m(n),"onChange",function(e){n.setState({value:e.target.value,changed:!0,invalid:!1})}),v(m(n),"onBlur",function(){var e=n.state.value;n.update(e)}),n.state={invalid:!1,changed:!1,value:n.formatDate(e)},n}return t=d,(n=[{key:"componentDidUpdate",value:function(e){var t=e.value;(0,s.default)(t,this.props.value)||this.setState({value:this.formatDate(this.props)})}},{key:"formatDate",value:function(e){var t=e.value,n=e.dateDisplayFormat,r=e.dateOptions;return t&&(0,l.default)(t)?(0,c.default)(t,n,r):""}},{key:"update",value:function(e){var t=this.state,n=t.invalid,r=t.changed;if(!n&&r&&e){var i=this.props,o=i.onChange,a=i.dateDisplayFormat,s=i.dateOptions,c=(0,u.default)(e,a,new Date,s);(0,l.default)(c)?this.setState({changed:!1},function(){return o(c)}):this.setState({invalid:!0})}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.readOnly,r=e.placeholder,o=e.ariaLabel,s=e.disabled,l=e.onFocus,u=this.state,c=u.value,d=u.invalid;return i.default.createElement("span",{className:(0,a.default)("rdrDateInput",t)},i.default.createElement("input",{readOnly:n,disabled:s,value:c,placeholder:r,"aria-label":o,onKeyDown:this.onKeyDown,onChange:this.onChange,onBlur:this.onBlur,onFocus:l}),d&&i.default.createElement("span",{className:"rdrWarning"},"\u26a0"))}}])&&f(t.prototype,n),r&&f(t,r),d}(i.PureComponent);b.propTypes={value:o.default.object,placeholder:o.default.string,disabled:o.default.bool,readOnly:o.default.bool,dateOptions:o.default.object,dateDisplayFormat:o.default.string,ariaLabel:o.default.string,className:o.default.string,onFocus:o.default.func.isRequired,onChange:o.default.func.isRequired},b.defaultProps={readOnly:!0,disabled:!1,dateDisplayFormat:"MMM D, YYYY"};var w=b;t.default=w},8349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t);return n.getTime()>o.getTime()}},8355:(e,t,n)=>{"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>r})},8468:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},i=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const o={p:i,P:function(e,t){var n,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return r(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(a,t)).replace("{{time}}",i(s,t))}}},8812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>s,uA:()=>i});var r=n(1529);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},8982:(e,t,n)=>{"use strict";n.d(t,{ef:()=>o,lJ:()=>s,xM:()=>a});var r=["D","DD"],i=["YY","YYYY"];function o(e){return-1!==r.indexOf(e)}function a(e){return-1!==i.indexOf(e)}function s(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},9321:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(8001).default},9511:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6260),i=n(3666),o=n(8355),a=n(2239);function s(e,t){var n,s,l,u,c,d,h,f;(0,i.A)(1,arguments);var p=(0,a.q)(),g=(0,o.A)(null!==(n=null!==(s=null!==(l=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:p.weekStartsOn)&&void 0!==s?s:null===(h=p.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.A)(e),y=m.getUTCDay(),v=(y<g?7:0)+y-g;return m.setUTCDate(m.getUTCDate()-v),m.setUTCHours(0,0,0,0),m}},9519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e).getTime(),o=(0,r.A)(t.start).getTime(),a=(0,r.A)(t.end).getTime();if(!(o<=a))throw new RangeError("Invalid interval");return n>=o&&n<=a}},9627:(e,t,n)=>{"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function i(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:()=>i,shallowEqualObjects:()=>r})},9993:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var r=n(5837),i=n(5161),o=n(6260),a=n(3666);var s=n(1049),l=n(1104),u=n(4123),c=n(2217);function d(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const h={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return d("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):d(n+1,2)},d:function(e,t){return d(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return d(e.getUTCHours()%12||12,t.length)},H:function(e,t){return d(e.getUTCHours(),t.length)},m:function(e,t){return d(e.getUTCMinutes(),t.length)},s:function(e,t){return d(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return d(Math.floor(r*Math.pow(10,n-3)),t.length)}};var f="midnight",p="noon",g="morning",m="afternoon",y="evening",v="night";function b(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+d(o,2)}function w(e,t){return e%60===0?(e>0?"-":"+")+d(Math.abs(e)/60,2):x(e,t)}function x(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+d(Math.floor(i/60),2)+n+d(i%60,2)}const S={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return h.y(e,t)},Y:function(e,t,n,r){var i=(0,c.A)(e,r),o=i>0?i:1-i;return"YY"===t?d(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):d(o,t.length)},R:function(e,t){return d((0,l.A)(e),t.length)},u:function(e,t){return d(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return d(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return d(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return h.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return d(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,u.A)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):d(i,t.length)},I:function(e,t,n){var r=(0,s.A)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):d(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):h.d(e,t)},D:function(e,t,n){var r=function(e){(0,a.A)(1,arguments);var t=(0,o.A)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):d(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return d(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return d(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return d(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?p:0===i?f:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?y:i>=12?m:i>=4?g:v,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return h.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):h.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):h.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):h.s(e,t)},S:function(e,t){return h.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return w(i);case"XXXX":case"XX":return x(i);default:return x(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return w(i);case"xxxx":case"xx":return x(i);default:return x(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+b(i,":");default:return"GMT"+x(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+b(i,":");default:return"GMT"+x(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return d(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return d((r._originalDate||e).getTime(),t.length)}};var k=n(8468),T=n(4967),C=n(8982),E=n(8355),I=n(2239),D=n(9321),A=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P=/^'([^]*?)'?$/,j=/''/g,R=/[a-zA-Z]/;function O(e,t,n){var s,l,u,c,d,h,f,p,g,m,y,v,b,w,x,O,N,M;(0,a.A)(2,arguments);var L=String(t),F=(0,I.q)(),z=null!==(s=null!==(l=null===n||void 0===n?void 0:n.locale)&&void 0!==l?l:F.locale)&&void 0!==s?s:D.A,U=(0,E.A)(null!==(u=null!==(c=null!==(d=null!==(h=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==h?h:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==d?d:F.firstWeekContainsDate)&&void 0!==c?c:null===(g=F.locale)||void 0===g||null===(m=g.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==u?u:1);if(!(U>=1&&U<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=(0,E.A)(null!==(y=null!==(v=null!==(b=null!==(w=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==w?w:null===n||void 0===n||null===(x=n.locale)||void 0===x||null===(O=x.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==b?b:F.weekStartsOn)&&void 0!==v?v:null===(N=F.locale)||void 0===N||null===(M=N.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==y?y:0);if(!(V>=0&&V<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!z.localize)throw new RangeError("locale must contain localize property");if(!z.formatLong)throw new RangeError("locale must contain formatLong property");var B=(0,o.A)(e);if(!(0,r.default)(B))throw new RangeError("Invalid time value");var W=(0,T.A)(B),q=(0,i.A)(B,W),H={firstWeekContainsDate:U,weekStartsOn:V,locale:z,_originalDate:B};return L.match(_).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,k.A[t])(e,z.formatLong):e}).join("").match(A).map(function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(P);if(!t)return e;return t[1].replace(j,"'")}(r);var o=S[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,C.xM)(r)||(0,C.lJ)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,C.ef)(r)||(0,C.lJ)(r,t,String(e)),o(q,r,z.localize,H);if(i.match(R))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r}).join("")}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".80f373c6.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="photo-tracker:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkphoto_tracker=self.webpackChunkphoto_tracker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(5043),r=n.t(t,2),i=n(4391),o=n(7950),a=n.t(o,2);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,c=o.history,p=e.Pop,g=null,m=y();function y(){return(c.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:w.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,c.replaceState(s({},c.state,{idx:m}),""));let w={get action(){return p},get location(){return t(o,c)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(l,v),g=e,()=>{o.removeEventListener(l,v),g=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=h(w.location,t,n);r&&r(i,t),m=y()+1;let s=d(i,m),l=w.createHref(i);try{c.pushState(s,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(l)}a&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=h(w.location,t,n);r&&r(i,t),m=y();let o=d(i,m),s=w.createHref(i);c.replaceState(o,"",s),a&&g&&g({action:p,location:w.location,delta:0})},go:e=>c.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=j(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let o=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=P(i);a=A(o[s],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=L([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),b(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:D(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=w(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,S=3,k=2,T=1,C=10,E=-2,I=e=>"*"===e;function D(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=E),t&&(r+=k),n.filter(e=>!I(e)).reduce((e,t)=>e+(x.test(t)?S:""===t?T:C),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,u="/"===o?t:t.slice(o.length)||"/",c=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:L([o,c.pathname]),pathnameBase:F(L([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=L([o,c.pathnameBase]))}return a}function _(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function N(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=s({},e),u(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let o,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)o=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:z(r),hash:U(i)}}(i,o),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],W=(new Set(B),["get",...B]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const H=t.createContext(null);const $=t.createContext(null);const K=t.createContext(null);const G=t.createContext(null);const Y=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function X(){return null!=t.useContext(G)}function J(){return X()||u(!1),t.useContext(G).location}function Z(e){t.useContext(K).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Y);return e?function(){let{router:e}=ce(le.UseNavigateStable),n=he(ue.UseNavigateStable),r=t.useRef(!1);Z(()=>{r.current=!0});let i=t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:n},i)))},[e,n]);return i}():function(){X()||u(!1);let e=t.useContext(H),{basename:n,future:r,navigator:i}=t.useContext(K),{matches:o}=t.useContext(Y),{pathname:a}=J(),s=JSON.stringify(N(o,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=M(t,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:L([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)},[n,i,s,a,e])}()}function te(){let{matches:e}=t.useContext(Y),n=e[e.length-1];return n?n.params:{}}function ne(n,r,i,o){X()||u(!1);let{navigator:a}=t.useContext(K),{matches:s}=t.useContext(Y),l=s[s.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(r){var g;let e="string"===typeof r?p(r):r;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||u(!1),h=e}else h=f;let m=h.pathname||"/",v=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(n,{pathname:v});let w=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:L([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,i,o);return r&&w?t.createElement(G.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},w):w}function re(){let e=function(){var e;let n=t.useContext(Q),r=de(ue.UseRouteError),i=he(ue.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ie=t.createElement(re,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Y.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(H);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Y.Provider,{value:n},i)}function se(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){c=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight((e,i,o)=>{let a,u=!1,h=null,f=null;var p;r&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||ie,c&&(d<0&&0===o?(p="route-fallback",!1||fe[p]||(fe[p]=!0),u=!0,f=null):d===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,o+1)),m=()=>{let n;return n=a?h:u?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ae,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function ce(e){let n=t.useContext(H);return n||u(!1),n}function de(e){let n=t.useContext($);return n||u(!1),n}function he(e){let n=function(){let e=t.useContext(Y);return e||u(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||u(!1),r.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:n,replace:r,state:i,relative:o}=e;X()||u(!1);let{future:a,static:s}=t.useContext(K),{matches:l}=t.useContext(Y),{pathname:c}=J(),d=ee(),h=M(n,N(l,a.v7_relativeSplatPath),c,"path"===o),f=JSON.stringify(h);return t.useEffect(()=>d(JSON.parse(f),{replace:r,state:i,relative:o}),[d,f,o,r,i]),null}function me(e){u(!1)}function ye(n){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:s,static:l=!1,future:c}=n;X()&&u(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:s,static:l,future:q({v7_relativeSplatPath:!1},c)}),[d,c,s,l]);"string"===typeof o&&(o=p(o));let{pathname:f="/",search:g="",hash:m="",state:y=null,key:v="default"}=o,b=t.useMemo(()=>{let e=j(f,d);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:v},navigationType:a}},[d,f,g,m,y,v,a]);return null==b?null:t.createElement(K.Provider,{value:h},t.createElement(G.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});t.Component;function be(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,be(e.props.children,o));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,o)),r.push(a)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Jm){}new Map;const we=r.startTransition;a.flushSync,r.useId;function xe(e){let{basename:n,children:r,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),g(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,s)));let l=a.current,[u,c]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},p=t.useCallback(e=>{d&&we?we(()=>c(e)):c(e)},[c,d]);return t.useLayoutEffect(()=>l.listen(p),[l,p]),t.useEffect(()=>pe(i),[i]),t.createElement(ye,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Se,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Se||(Se={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));var Te=n(52);(0,Te.KO)("firebase","11.10.0","app");var Ce=n(443),Ee=n(1529),Ie=n(8812),De=n(2799);const Ae="@firebase/installations",_e="0.6.18",Pe=1e4,je=`w:${_e}`,Re="FIS_v2",Oe=36e5,Ne={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Me=new Ee.FA("installations","Installations",Ne);function Le(e){return e instanceof Ee.g&&e.code.includes("request-failed")}function Fe(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function ze(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ue(e,t){const n=(await t.json()).error;return Me.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ve(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Be(e,t){let{refreshToken:n}=t;const r=Ve(e);return r.append("Authorization",function(e){return`${Re} ${e}`}(n)),r}async function We(e){const t=await e();return t.status>=500&&t.status<600?e():t}function qe(e){return new Promise(t=>{setTimeout(t,e)})}const He=/^[cdef][\w-]{21}$/;function $e(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return He.test(t)?t:""}catch(e){return""}}function Ke(e){return`${e.appName}!${e.appId}`}const Ge=new Map;function Ye(e,t){const n=Ke(e);Qe(n,t),function(e,t){const n=Je();n&&n.postMessage({key:e,fid:t});Ze()}(n,t)}function Qe(e,t){const n=Ge.get(e);if(n)for(const r of n)r(t)}let Xe=null;function Je(){return!Xe&&"BroadcastChannel"in self&&(Xe=new BroadcastChannel("[Firebase] FID Change"),Xe.onmessage=e=>{Qe(e.data.key,e.data.fid)}),Xe}function Ze(){0===Ge.size&&Xe&&(Xe.close(),Xe=null)}const et="firebase-installations-store";let tt=null;function nt(){return tt||(tt=(0,De.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(et)}})),tt}async function rt(e,t){const n=Ke(e),r=(await nt()).transaction(et,"readwrite"),i=r.objectStore(et),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||Ye(e,t.fid),t}async function it(e){const t=Ke(e),n=(await nt()).transaction(et,"readwrite");await n.objectStore(et).delete(t),await n.done}async function ot(e,t){const n=Ke(e),r=(await nt()).transaction(et,"readwrite"),i=r.objectStore(et),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||Ye(e,a.fid),a}async function at(e){let t;const n=await ot(e.appConfig,n=>{const r=function(e){const t=e||{fid:$e(),registrationStatus:0};return ut(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Me.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=Fe(n),a=Ve(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Re,appId:n.appId,sdkVersion:je},u={method:"POST",headers:a,body:JSON.stringify(l)},c=await We(()=>fetch(o,u));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:ze(e.authToken)}}throw await Ue("Create Installation",c)}(e,t);return rt(e.appConfig,n)}catch(Jm){throw Le(Jm)&&409===Jm.customData.serverCode?await it(e.appConfig):await rt(e.appConfig,{fid:t.fid,registrationStatus:0}),Jm}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:st(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function st(e){let t=await lt(e.appConfig);for(;1===t.registrationStatus;)await qe(100),t=await lt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await at(e);return n||t}return t}function lt(e){return ot(e,e=>{if(!e)throw Me.create("installation-not-found");return ut(e)})}function ut(e){return 1===(t=e).registrationStatus&&t.registrationTime+Pe<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ct(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Fe(e)}/${n}/authTokens:generate`}(n,t),o=Be(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:je,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},u=await We(()=>fetch(i,l));if(u.ok){return ze(await u.json())}throw await Ue("Generate Auth Token",u)}async function dt(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await ot(e.appConfig,r=>{if(!ft(r))throw Me.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Oe}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ht(e.appConfig);for(;1===n.authToken.requestStatus;)await qe(100),n=await ht(e.appConfig);const r=n.authToken;return 0===r.requestStatus?dt(e,t):r}(e,n),r;{if(!navigator.onLine)throw Me.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await ct(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await rt(e.appConfig,r),n}catch(Jm){if(!Le(Jm)||401!==Jm.customData.serverCode&&404!==Jm.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await rt(e.appConfig,n)}else await it(e.appConfig);throw Jm}}(e,n),n}});return t?await t:r.authToken}function ht(e){return ot(e,e=>{if(!ft(e))throw Me.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Pe<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function ft(e){return void 0!==e&&2===e.registrationStatus}async function pt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await at(e);t&&await t}(n);return(await dt(n,t)).token}function gt(e){return Me.create("missing-app-config-values",{valueName:e})}const mt="installations",yt=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw gt("App Configuration");if(!e.name)throw gt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw gt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,Te.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},vt=e=>{const t=e.getProvider("app").getImmediate(),n=(0,Te.j6)(t,mt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await at(t);return r?r.catch(console.error):dt(t).catch(console.error),n.fid}(n),getToken:e=>pt(n,e)}};(0,Te.om)(new Ie.uA(mt,yt,"PUBLIC")),(0,Te.om)(new Ie.uA("installations-internal",vt,"PRIVATE")),(0,Te.KO)(Ae,_e),(0,Te.KO)(Ae,_e,"esm2017");const bt="analytics",wt="https://www.googletagmanager.com/gtag/js",xt=new Ce.Vy("@firebase/analytics"),St={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kt=new Ee.FA("analytics","Analytics",St);function Tt(e){if(!e.startsWith(wt)){const t=kt.create("invalid-gtag-resource",{gtagURL:e});return xt.warn(t.message),""}return e}function Ct(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Et(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Tt}),r=document.createElement("script"),i=`${wt}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function It(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Ct(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(Jm){xt.error(Jm)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await Ct(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(Jm){xt.error(Jm)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(Jm){xt.error(Jm)}}}const Dt=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function At(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function _t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw kt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw kt.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new jt;return setTimeout(async()=>{s.abort()},void 0!==n?n:6e4),Pt({appId:r,apiKey:i,measurementId:o},a,s,t)}async function Pt(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dt;var a;const{appId:s,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(kt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(Jm){if(l)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===Jm||void 0===Jm?void 0:Jm.message}]`),{appId:s,measurementId:l};throw Jm}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:At(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(s){}throw kt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return o.deleteThrottleMetadata(s),t}catch(Jm){const r=Jm;if(!function(e){if(!(e instanceof Ee.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(o.deleteThrottleMetadata(s),l)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:s,measurementId:l};throw Jm}const u=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?(0,Ee.p9)(i,o.intervalMillis,30):(0,Ee.p9)(i,o.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:i+1};return o.setThrottleMetadata(s,c),xt.debug(`Calling attemptFetch again in ${u} millis`),Pt(e,c,n,o)}}class jt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Rt,Ot;function Nt(e){Ot=e}function Mt(e){Rt=e}async function Lt(e,t,n,r,i,o,a){var s;const l=_t(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>xt.error(e)),t.push(l);const u=async function(){if(!(0,Ee.zW)())return xt.warn(kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,Ee.eX)()}catch(Jm){return xt.warn(kt.create("indexeddb-unavailable",{errorInfo:null===Jm||void 0===Jm?void 0:Jm.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[c,d]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(wt)&&n.src.includes(e))return n;return null})(o)||Et(o,c.measurementId),Ot&&(i("consent","default",Ot),Nt(void 0)),i("js",new Date);const h=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",c.measurementId,h),Rt&&(i("set",Rt),Mt(void 0)),c.measurementId}class Ft{constructor(e){this.app=e}_delete(){return delete zt[this.app.options.appId],Promise.resolve()}}let zt={},Ut=[];const Vt={};let Bt,Wt,qt="dataLayer",Ht="gtag",$t=!1;function Kt(e,t,n){!function(){const e=[];if((0,Ee.sr)()&&e.push("This is a browser extension environment."),(0,Ee.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=kt.create("invalid-analytics-context",{errorInfo:t});xt.warn(n.message)}}();const r=e.options.appId;if(!r)throw kt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw kt.create("no-api-key");xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zt[r])throw kt.create("already-exists",{id:r});if(!$t){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(qt);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=It(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(zt,Ut,Vt,qt,Ht);Wt=e,Bt=t,$t=!0}zt[r]=Lt(e,Ut,Vt,t,Bt,qt,n);return new Ft(e)}function Gt(e,t,n,r){e=(0,Ee.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Wt,zt[e.app.options.appId],t,n,r).catch(e=>xt.error(e))}const Yt="@firebase/analytics",Qt="0.10.17";(0,Te.om)(new Ie.uA(bt,(e,t)=>{let{options:n}=t;return Kt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,Te.om)(new Ie.uA("analytics-internal",function(e){try{const t=e.getProvider(bt).getImmediate();return{logEvent:(e,n,r)=>Gt(t,e,n,r)}}catch(Jm){throw kt.create("interop-component-reg-failed",{reason:Jm})}},"PRIVATE")),(0,Te.KO)(Yt,Qt),(0,Te.KO)(Yt,Qt,"esm2017");function Xt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Jt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zt=Jt,en=new Ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tn=new Ce.Vy("@firebase/auth");function nn(e){if(tn.logLevel<=Ce.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tn.error(`Auth (${Te.MF}): ${e}`,...n)}}function rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw un(e,...n)}function on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return un(e,...n)}function an(e,t,n){const r=Object.assign(Object.assign({},Zt()),{[t]:n});return new Ee.FA("auth","Firebase",r).create(t,{appName:e.name})}function sn(e){return an(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ln(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&rn(e,"argument-error"),an(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function un(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return en.create(e,...n)}function cn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw un(t,...r)}}function dn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw nn(t),new Error(t)}function hn(e,t){e||dn(t)}function fn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pn(){return"http:"===gn()||"https:"===gn()}function gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class mn{constructor(e,t){this.shortDelay=e,this.longDelay=t,hn(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,Ee.jZ)()||(0,Ee.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pn()||(0,Ee.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function yn(e,t){hn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class vn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xn=new mn(3e4,6e4);function Sn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kn(e,t,n,r){return Tn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,Ee.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return(0,Ee.c1)()||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,Ee.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),vn.fetch()(await En(e,e.config.apiHost,n,a),l)})}async function Tn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},bn),t);try{const t=new Dn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw An(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw An(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw An(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw An(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw an(e,s,a);rn(e,s)}}catch(Jm){if(Jm instanceof Ee.g)throw Jm;rn(e,"network-request-failed",{message:String(Jm)})}}async function Cn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await kn(e,t,n,r,i);return"mfaPendingCredential"in o&&rn(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function En(e,t,n,r){const i=`${t}${n}?${r}`,o=e,a=o.config.emulator?yn(e.config,i):`${e.config.apiScheme}://${i}`;if(wn.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function In(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(on(this.auth,"network-request-failed")),xn.get())})}}function An(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=on(e,t,r);return i.customData._tokenResponse=n,i}function _n(e){return void 0!==e&&void 0!==e.enterprise}class Pn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return In(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jn(e,t){return kn(e,"GET","/v2/recaptchaConfig",Sn(e,t))}async function Rn(e,t){return kn(e,"POST","/v1/accounts:lookup",t)}function On(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Jm){}}function Nn(e){return 1e3*Number(e)}function Mn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return nn("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,Ee.u)(n);return e?JSON.parse(e):(nn("Failed to decode base64 JWT payload"),null)}catch(Jm){return nn("Caught error parsing JWT payload as JSON",null===Jm||void 0===Jm?void 0:Jm.toString()),null}}function Ln(e){const t=Mn(e);return cn(t,"internal-error"),cn("undefined"!==typeof t.exp,"internal-error"),cn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Fn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Jm){throw Jm instanceof Ee.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Jm)&&e.auth.currentUser===e&&await e.auth.signOut(),Jm}}class zn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Jm){return void("auth/network-request-failed"===(null===Jm||void 0===Jm?void 0:Jm.code)&&this.schedule(!0))}this.schedule()}}class Un{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=On(this.lastLoginAt),this.creationTime=On(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Fn(e,Rn(n,{idToken:r}));cn(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Bn(o.providerUserInfo):[],s=(l=e.providerData,u=a,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Un(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Bn(e){return e.map(e=>{var{providerId:t}=e,n=Xt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Wn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){cn(e.idToken,"internal-error"),cn("undefined"!==typeof e.idToken,"internal-error"),cn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ln(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){cn(0!==e.length,"internal-error");const t=Ln(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(cn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Tn(e,{},async()=>{const n=(0,Ee.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await En(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,Ee.zJ)(e.emulatorConfig.host)&&(s.credentials="include"),vn.fetch()(o,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Wn;return n&&(cn("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(cn("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(cn("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wn,this.toJSON())}_performRefresh(){return dn("not implemented")}}function qn(e,t){cn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Hn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Xt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Un(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Fn(this,this.stsTokenManager.getToken(this.auth,e));return cn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,Ee.Ku)(e),r=await n.getIdToken(t),i=Mn(r);cn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:On(Nn(i.auth_time)),issuedAtTime:On(Nn(i.iat)),expirationTime:On(Nn(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,Ee.Ku)(e);await Vn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,Te.xZ)(this.auth.app))return Promise.reject(sn(this.auth));const e=await this.getIdToken();return await Fn(this,async function(e,t){return kn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:S}=t;cn(v&&S,e,"internal-error");const k=Wn.fromJSON(this.name,S);cn("string"===typeof v,e,"internal-error"),qn(c,e.name),qn(d,e.name),cn("boolean"===typeof b,e,"internal-error"),cn("boolean"===typeof w,e,"internal-error"),qn(h,e.name),qn(f,e.name),qn(p,e.name),qn(g,e.name),qn(m,e.name),qn(y,e.name);const T=new Hn({uid:v,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(T.providerData=x.map(e=>Object.assign({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Wn;r.updateFromServerResponse(t);const i=new Hn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Vn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];cn(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Bn(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Wn;a.updateFromIdToken(n);const s=new Hn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Un(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const $n=new Map;function Kn(e){hn(e instanceof Function,"Expected a class definition");let t=$n.get(e);return t?(hn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$n.set(e,t),t)}class Gn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gn.type="NONE";const Yn=Gn;function Qn(e,t,n){return`firebase:${e}:${t}:${n}`}class Xn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Qn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Qn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Rn(this.auth,{idToken:e}).catch(()=>{});return t?Hn._fromGetAccountInfoResponse(this.auth,t,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Xn(Kn(Yn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Kn(Yn);const o=Qn(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(o);if(t){let n;if("string"===typeof t){const r=await Rn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Hn._fromGetAccountInfoResponse(e,r,t)}else n=Hn._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new Xn(i,e,n)):new Xn(i,e,n)}}function Jn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ir(t))return"Blackberry";if(or(t))return"Webos";if(er(t))return"Safari";if((t.includes("chrome/")||tr(t))&&!t.includes("edge/"))return"Chrome";if(rr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/firefox\//i.test(e)}function er(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/crios\//i.test(e)}function nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/iemobile/i.test(e)}function rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/android/i.test(e)}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/blackberry/i.test(e)}function or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/webos/i.test(e)}function ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)();return ar(e)||rr(e)||or(e)||ir(e)||/windows phone/i.test(e)||nr(e)}function lr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jn((0,Ee.ZQ)());break;case"Worker":t=`${Jn((0,Ee.ZQ)())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Te.MF}/${r}`}class ur{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Jm){r(Jm)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Jm){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Jm||void 0===Jm?void 0:Jm.message})}}}class cr{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class dr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fr(this),this.idTokenSubscription=new fr(this),this.beforeStateQueue=new ur(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=en,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Xn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Jm){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Rn(this,{idToken:e}),n=await Hn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,Te.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Jm){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Jm))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return cn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Jm){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vn(e)}catch(Jm){if("auth/network-request-failed"!==(null===Jm||void 0===Jm?void 0:Jm.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,Te.xZ)(this.app))return Promise.reject(sn(this));const t=e?(0,Ee.Ku)(e):null;return t&&cn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&cn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,Te.xZ)(this.app)?Promise.reject(sn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,Te.xZ)(this.app)?Promise.reject(sn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return kn(e,"GET","/v2/passwordPolicy",Sn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new cr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ee.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return kn(e,"POST","/v2/accounts:revokeToken",Sn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kn(e)||this._popupRedirectResolver;cn(t,this,"argument-error"),this.redirectPersistenceManager=await Xn.create(this,[Kn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(cn(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,Te.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(tn.logLevel<=Ce.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tn.warn(`Auth (${Te.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function hr(e){return(0,Ee.Ku)(e)}class fr{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,Ee.tD)(e=>this.observer=e)}get next(){return cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gr(e){return pr.loadJS(e)}function mr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class yr{constructor(){this.enterprise=new vr}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vr{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const br="NO_RECAPTCHA";class wr{constructor(e){this.type="recaptcha-enterprise",this.auth=hr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;_n(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(br)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new yr).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{jn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Pn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&_n(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=pr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),gr(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function xr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new wr(e);let a;if(i)a=br;else try{a=await o.verify(n)}catch(l){a=await o.verify(n,!0)}const s=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Sr(e,t,n,r,i){var o,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await xr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await xr(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await xr(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await xr(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function kr(e){const t=hr(e),n=await jn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Pn(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new wr(t).verify()}}function Tr(e,t,n){const r=hr(e);cn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Cr(t),{host:a,port:s}=function(e){const t=Cr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Er(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Er(t)}}}(t),l=null===s?"":`:${s}`,u={url:`${o}//${a}${l}/`},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return cn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void cn((0,Ee.bD)(u,r.config.emulator)&&(0,Ee.bD)(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,(0,Ee.zJ)(a)?((0,Ee.gE)(`${o}//${a}${l}`),(0,Ee.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Cr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Er(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ir{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,t){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function Dr(e,t){return kn(e,"POST","/v1/accounts:signUp",t)}async function Ar(e,t){return Cn(e,"POST","/v1/accounts:signInWithPassword",Sn(e,t))}class _r extends Ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _r(e,t,"password")}static _fromEmailAndCode(e,t){return new _r(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Sr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ar,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Cn(e,"POST","/v1/accounts:signInWithEmailLink",Sn(e,t))}(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Sr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Cn(e,"POST","/v1/accounts:signInWithEmailLink",Sn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pr(e,t){return Cn(e,"POST","/v1/accounts:signInWithIdp",Sn(e,t))}class jr extends Ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Xt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new jr(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Pr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Pr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,Ee.Am)(t)}return e}}async function Rr(e,t){return kn(e,"POST","/v1/accounts:sendVerificationCode",Sn(e,t))}const Or={USER_NOT_FOUND:"user-not-found"};class Nr extends Ir{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Nr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Nr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Cn(e,"POST","/v1/accounts:signInWithPhoneNumber",Sn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Cn(e,"POST","/v1/accounts:signInWithPhoneNumber",Sn(e,t));if(n.temporaryProof)throw An(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Cn(e,"POST","/v1/accounts:signInWithPhoneNumber",Sn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Or)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Nr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Mr{constructor(e){var t,n,r,i,o,a;const s=(0,Ee.I9)((0,Ee.hp)(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);cn(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,Ee.I9)((0,Ee.hp)(e)).link,n=t?(0,Ee.I9)((0,Ee.hp)(t)).deep_link_id:null,r=(0,Ee.I9)((0,Ee.hp)(e)).deep_link_id;return(r?(0,Ee.I9)((0,Ee.hp)(r)).link:null)||r||n||t||e}(e);try{return new Mr(t)}catch(n){return null}}}class Lr{constructor(){this.providerId=Lr.PROVIDER_ID}static credential(e,t){return _r._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Mr.parseLink(t);return cn(n,"argument-error"),_r._fromEmailAndCode(e,n.code,n.tenantId)}}Lr.PROVIDER_ID="password",Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zr extends Fr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ur extends zr{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch(n){return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ur.PROVIDER_ID="facebook.com";class Vr extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Vr.credential(n,r)}catch(i){return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com",Vr.PROVIDER_ID="google.com";class Br extends zr{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch(n){return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com",Br.PROVIDER_ID="github.com";class Wr extends zr{constructor(){super("twitter.com")}static credential(e,t){return jr._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Wr.credential(n,r)}catch(i){return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com",Wr.PROVIDER_ID="twitter.com";class qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Hn._fromIdTokenResponse(e,n,r),o=Hr(n);return new qr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Hr(n);return new qr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Hr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class $r extends Ee.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,$r.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new $r(e,t,n,r)}}function Kr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw $r._fromErrorAndOperation(e,n,t,r);throw n})}async function Gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Fn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qr._forOperation(e,"link",r)}async function Yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,Te.xZ)(r.app))return Promise.reject(sn(r));const i="reauthenticate";try{const o=await Fn(e,Kr(r,i,t,e),n);cn(o.idToken,r,"internal-error");const a=Mn(o.idToken);cn(a,r,"internal-error");const{sub:s}=a;return cn(e.uid===s,r,"user-mismatch"),qr._forOperation(e,i,o)}catch(Jm){throw"auth/user-not-found"===(null===Jm||void 0===Jm?void 0:Jm.code)&&rn(r,"user-mismatch"),Jm}}async function Qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Te.xZ)(e.app))return Promise.reject(sn(e));const r="signIn",i=await Kr(e,r,t),o=await qr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function Xr(e,t,n,r){return(0,Ee.Ku)(e).onAuthStateChanged(t,n,r)}function Jr(e){return(0,Ee.Ku)(e).signOut()}function Zr(e,t){return kn(e,"POST","/v2/accounts/mfaEnrollment:start",Sn(e,t))}new WeakMap;const ei="__sak";class ti{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ei,"1"),this.storage.removeItem(ei),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ni extends ti{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,Ee.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ni.type="LOCAL";const ri=ni;function ii(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function oi(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class ai{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=oi(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ii(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=oi(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=oi(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ii(n);const i=setInterval(()=>{const e=ii(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ai.type="COOKIE";class si extends ti{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}si.type="SESSION";const li=si;class ui{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ui(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ui.receivers=[];class di{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=ci("",20);r.port1.start();const u=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function hi(){return window}function fi(){return"undefined"!==typeof hi().WorkerGlobalScope&&"function"===typeof hi().importScripts}const pi="firebaseLocalStorageDb",gi="firebaseLocalStorage",mi="fbase_key";class yi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vi(e,t){return e.transaction([gi],t?"readwrite":"readonly").objectStore(gi)}function bi(){const e=indexedDB.open(pi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(gi,{keyPath:mi})}catch(Jm){n(Jm)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(gi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(pi);return new yi(e).toPromise()}(),t(await bi()))})})}async function wi(e,t,n){const r=vi(e,!0).put({[mi]:t,value:n});return new yi(r).toPromise()}function xi(e,t){const n=vi(e,!0).delete(t);return new yi(n).toPromise()}class Si{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await bi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Jm){if(t++>3)throw Jm;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ui._getInstance(fi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new di(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bi();return await wi(e,ei,"1"),await xi(e,ei),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vi(e,!1).get(t),r=await new yi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vi(e,!1).getAll();return new yi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Si.type="LOCAL";const ki=Si;function Ti(e,t){return kn(e,"POST","/v2/accounts/mfaSignIn:start",Sn(e,t))}mr("rcb"),new mn(3e4,6e4);const Ci="recaptcha";async function Ei(e,t,n){var r;if(!e._getRecaptchaConfig())try{await kr(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){cn("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Sr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===br){cn((null===n||void 0===n?void 0:n.type)===Ci,e,"argument-error");return Zr(e,await Ii(e,t,n))}return Zr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{cn("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;cn(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=Sr(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===br){cn((null===n||void 0===n?void 0:n.type)===Ci,e,"argument-error");return Ti(e,await Ii(e,t,n))}return Ti(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Sr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===br){cn((null===n||void 0===n?void 0:n.type)===Ci,e,"argument-error");return Rr(e,await Ii(e,t,n))}return Rr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ii(e,t,n){cn(n.type===Ci,e,"argument-error");const r=await n.verify();cn("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Di{constructor(e){this.providerId=Di.PROVIDER_ID,this.auth=hr(e)}verifyPhoneNumber(e,t){return Ei(this.auth,e,(0,Ee.Ku)(t))}static credential(e,t){return Nr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Di.credentialFromTaggedObject(t)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Nr._fromTokenResponse(n,r):null}}function Ai(e,t){return t?Kn(t):(cn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Di.PROVIDER_ID="phone",Di.PHONE_SIGN_IN_METHOD="phone";class _i extends Ir{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pi(e){return Qr(e.auth,new _i(e),e.bypassAuthState)}function ji(e){const{auth:t,user:n}=e;return cn(n,t,"internal-error"),Yr(n,new _i(e),e.bypassAuthState)}async function Ri(e){const{auth:t,user:n}=e;return cn(n,t,"internal-error"),Gr(n,new _i(e),e.bypassAuthState)}class Oi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Jm){this.reject(Jm)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(Jm){this.reject(Jm)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pi;case"linkViaPopup":case"linkViaRedirect":return Ri;case"reauthViaPopup":case"reauthViaRedirect":return ji;default:rn(this.auth,"internal-error")}}resolve(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ni=new mn(2e3,1e4);class Mi extends Oi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return cn(e,this.auth,"internal-error"),e}async onExecution(){hn(1===this.filter.length,"Popup operations only handle one event");const e=ci();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ni.get())};e()}}Mi.currentPopupAction=null;const Li=new Map;class Fi extends Oi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Li.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Vi(t),r=Ui(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Jm){e=()=>Promise.reject(Jm)}Li.set(this.auth._key(),e)}return this.bypassAuthState||Li.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zi(e,t){Li.set(e._key(),t)}function Ui(e){return Kn(e._redirectPersistence)}function Vi(e){return Qn("pendingRedirect",e.config.apiKey,e.name)}async function Bi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Te.xZ)(e.app))return Promise.reject(sn(e));const r=hr(e),i=Ai(r,t),o=new Fi(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Wi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Hi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(on(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qi(e))}saveEventToCache(e){this.cachedEventUids.add(qi(e)),this.lastProcessedEventTime=Date.now()}}function qi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Hi(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const $i=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ki=/^https?/;async function Gi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return kn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Yi(r))return}catch(n){}rn(e,"unauthorized-domain")}function Yi(e){const t=fn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ki.test(n))return!1;if($i.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Qi=new mn(3e4,6e4);function Xi(){const e=hi().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ji(e){return new Promise((t,n)=>{var r,i,o;function a(){Xi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xi(),n(on(e,"network-request-failed"))},timeout:Qi.get()})}if(null===(i=null===(r=hi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=hi().gapi)||void 0===o?void 0:o.load)){const t=mr("iframefcb");return hi()[t]=()=>{gapi.load?a():n(on(e,"network-request-failed"))},gr(`${pr.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw Zi=null,e})}let Zi=null;const eo=new mn(5e3,15e3),to={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},no=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ro(e){const t=e.config;cn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?yn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Te.MF},i=no.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${(0,Ee.Am)(r).slice(1)}`}async function io(e){const t=await function(e){return Zi=Zi||Ji(e),Zi}(e),n=hi().gapi;return cn(n,e,"internal-error"),t.open({where:document.body,url:ro(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:to,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=on(e,"network-request-failed"),o=hi().setTimeout(()=>{r(i)},eo.get());function a(){hi().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const oo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ao{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Jm){}}}function so(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},oo),{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,Ee.ZQ)().toLowerCase();n&&(s=tr(u)?"_blank":n),Zn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return ar(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new ao(null);const d=window.open(t||"",s,c);cn(d,e,"popup-blocked");try{d.focus()}catch(Jm){}return new ao(d)}const lo="__/auth/handler",uo="emulator/auth/handler",co=encodeURIComponent("fac");async function ho(e,t,n,r,i,o){cn(e.config.authDomain,e,"auth-domain-config-required"),cn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Te.MF,eventId:i};if(t instanceof Fr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,Ee.Im)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof zr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const c of Object.keys(s))void 0===s[c]&&delete s[c];const l=await e._getAppCheckToken(),u=l?`#${co}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${lo}`;return yn(t,uo)}(e)}?${(0,Ee.Am)(s).slice(1)}${u}`}const fo="webStorageSupport";const po=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=li,this._completeRedirectFn=Bi,this._overrideRedirectResult=zi}async _openPopup(e,t,n,r){var i;hn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return so(e,await ho(e,t,n,fn(),r),ci())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hi().location.href=e}(await ho(e,t,n,fn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(hn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await io(e),n=new Wi(e);return t.register("authEvent",t=>{cn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fo,{type:fo},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[fo];void 0!==i&&t(!!i),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sr()||er()||ar()}};var go="@firebase/auth",mo="1.10.8";class yo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vo=(0,Ee.XA)("authIdTokenMaxAge")||300;let bo=null;var wo;pr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=on("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},wo="Browser",(0,Te.om)(new Ie.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;cn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:wo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lr(wo)},u=new dr(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,Te.om)(new Ie.uA("auth-internal",e=>(e=>new yo(e))(hr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.KO)(go,mo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wo)),(0,Te.KO)(go,mo,"esm2017");const xo=(0,Te.Wp)({apiKey:"AIzaSyBA_d8vVWemyDGMeLqIG7JeTJuuWJIDO78",authDomain:"photo-tracker-59878.firebaseapp.com",projectId:"photo-tracker-59878",storageBucket:"photo-tracker-59878.firebasestorage.app",messagingSenderId:"808162922549",appId:"1:808162922549:web:1d1c0accc9ad51aee2217c",measurementId:"G-V8GWGN8JZH"}),So=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Te.Sx)();const t=(0,Te.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,Te.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,Ee.bD)(r,null!==t&&void 0!==t?t:{}))return e;rn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:po,persistence:[ki,ri,li]}),r=(0,Ee.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>vo)return;const r=null===t||void 0===t?void 0:t.token;bo!==r&&(bo=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){(0,Ee.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,Ee.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=(0,Ee.Tj)("auth");return o&&Tr(n,`http://${o}`),n}(xo),ko=new Vr,To=xo;var Co=n(5472),Eo=n(579);const Io=(0,t.createContext)(),Do=()=>(0,t.useContext)(Io),Ao=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=Xr(So,async e=>{if(i(e),a(!1),e){c(!0);try{const n=(0,Co.getFirestore)();try{await(0,Co.getDoc)((0,Co.doc)(n,"__connection_test","test"))}catch(t){console.error("[Firestore] Connection test failed:",t)}const r=(0,Co.doc)(n,"users",e.uid),i=await(0,Co.getDoc)(r);if(i.exists())l(i.data().role||null),h(!!i.data().user_manager),p({id:i.id,...i.data()});else{h(!1);let t="pending";(e.email||"").endsWith("@oceanreefresorts.com")&&(t="standard"),await(0,Co.setDoc)(r,{displayName:e.displayName||"",email:e.email||"",role:t,createdAt:(new Date).toISOString()}),l(t),p({id:r.id,displayName:e.displayName||"",email:e.email||"",role:t,createdAt:(new Date).toISOString()})}}catch(n){l(null),h(!1)}c(!1)}else l(null)});return()=>e()},[]);return(0,Eo.jsx)(Io.Provider,{value:{user:r,loading:o,role:s,roleLoading:u,userManager:d,userData:f,refreshUserData:async()=>{if(r){const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"users",r.uid),n=await(0,Co.getDoc)(t);n.exists()&&p({id:n.id,...n.data()})}}},children:n})},_o=()=>{const[e,r]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(""),[l,u]=(0,t.useState)(!1),{role:c,roleLoading:d}=Do();(0,t.useEffect)(()=>{const e=Xr(So,e=>{r(e),o(!1)});return()=>e()},[]);const h=async()=>{s("");try{await async function(e,t,n){if((0,Te.xZ)(e.app))return Promise.reject(on(e,"operation-not-supported-in-this-environment"));const r=hr(e);ln(e,t,Fr);const i=Ai(r,n);return new Mi(r,"signInViaPopup",t,i).executeNotNull()}(So,ko)}catch(a){s(a.message)}},f=async()=>{s("");try{await Jr(So)}catch(a){s(a.message)}};if(i)return(0,Eo.jsx)("div",{style:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%)"},children:(0,Eo.jsx)("div",{className:"spinner","aria-label":"Loading...",style:{fontSize:32},children:(0,Eo.jsx)("span",{role:"img","aria-label":"hourglass",children:"\u23f3"})})});if(!e){const e=(0,Eo.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 48 48",style:{verticalAlign:"middle",marginRight:10},children:(0,Eo.jsx)("g",{children:(0,Eo.jsx)("path",{fill:"#888",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.6 4.3-5.7 7.5-11.3 7.5-6.6 0-12-5.4-12-12s5.4-12 12-12c2.8 0 5.4 1 7.5 2.7l6.1-6.1C34.1 5.1 29.3 3 24 3 12.9 3 4 11.9 4 23s8.9 20 20 20c11 0 19.8-8 19.8-20 0-1.3-.1-2.5-.2-3.5z"})})});return(0,Eo.jsxs)("div",{style:{minHeight:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#49668a",fontFamily:"Inter, system-ui, sans-serif",padding:0},children:[(0,Eo.jsx)("img",{src:n(1074),alt:"Media Tracker Logo",style:{marginBottom:15,width:"min(420px, 80vw)",maxWidth:540,display:"block",borderRadius:18,marginTop:32}}),(0,Eo.jsx)("h1",{style:{color:"#1a2440",fontWeight:800,letterSpacing:.5,fontSize:38,marginBottom:8,textAlign:"center",textShadow:"0 2px 12px rgba(80,120,200,0.10)"},children:"Media Tracker"}),(0,Eo.jsx)("div",{style:{color:"#fff",fontSize:20,marginBottom:40,textAlign:"center",fontWeight:500},children:"Sign in to access your workflow dashboard"}),(0,Eo.jsxs)("button",{onClick:h,style:{padding:"18px 0",width:"min(340px, 90vw)",fontSize:"1.18rem",background:l?"#243b57":"#a8c7ed",color:l?"#fff":"#1a2440",border:"2.5px solid #243b57",borderRadius:12,cursor:"pointer",fontWeight:700,fontFamily:"Inter, system-ui, sans-serif",boxShadow:l?"0 4px 24px rgba(80,120,200,0.10)":"0 2px 8px rgba(80,120,200,0.06)",transition:"background 0.18s, color 0.18s, box-shadow 0.18s",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",outline:l?"2px solid #b5c7e6":"none",marginBottom:12},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),tabIndex:0,"aria-label":"Sign in with Google",children:[e,(0,Eo.jsx)("span",{style:{fontWeight:500,fontSize:19},children:"Sign in with Google"})]}),a&&(0,Eo.jsx)("div",{style:{color:"#d32f2f",marginTop:18,fontWeight:600,fontSize:16,textAlign:"center",maxWidth:360},children:a})]})}return"pending"!==c||d?(0,Eo.jsx)("div",{style:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-main)"},children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",color:"var(--text-main)",padding:48,borderRadius:18,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",minWidth:340,maxWidth:360},children:[(0,Eo.jsx)("img",{src:e.photoURL,alt:"profile",style:{borderRadius:"50%",width:68,height:68,marginBottom:18,border:"2.5px solid var(--bg-card)"}}),(0,Eo.jsx)("h2",{style:{margin:"0 0 8px 0",color:"var(--text-main)",fontWeight:600},children:e.displayName}),(0,Eo.jsx)("div",{style:{color:"#888",fontSize:15,marginBottom:18},children:e.email}),(0,Eo.jsx)("button",{onClick:f,style:{padding:"10px 20px",fontSize:"1rem",background:"var(--bg-card)",color:"var(--text-main)",border:"none",borderRadius:6,cursor:"pointer"},children:"Sign Out"}),a&&(0,Eo.jsx)("div",{style:{color:"#d32f2f",marginTop:18,fontWeight:500},children:a})]})}):(0,Eo.jsx)("div",{style:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%)"},children:(0,Eo.jsxs)("div",{style:{background:"#fff",padding:48,borderRadius:18,boxShadow:"0 8px 40px rgba(80,120,200,0.15)",textAlign:"center",minWidth:340,maxWidth:360},children:[(0,Eo.jsx)("img",{src:e.photoURL,alt:"profile",style:{borderRadius:"50%",width:68,height:68,marginBottom:18,border:"2.5px solid #eee"}}),(0,Eo.jsx)("h2",{style:{margin:"0 0 8px 0",color:"#333",fontWeight:600},children:e.displayName}),(0,Eo.jsx)("div",{style:{color:"#888",fontSize:15,marginBottom:18},children:e.email}),(0,Eo.jsxs)("div",{style:{color:"#f39c12",background:"#fff8e1",borderRadius:6,padding:"14px 8px",fontWeight:500,fontSize:16,marginBottom:18},children:["Your account is pending approval.",(0,Eo.jsx)("br",{}),"Please contact your administrator."]}),(0,Eo.jsx)("button",{onClick:f,style:{padding:"10px 20px",fontSize:"1rem",background:"#e0e0e0",color:"#333",border:"none",borderRadius:6,cursor:"pointer"},children:"Sign Out"})]})})};var Po={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jo=t.createContext&&t.createContext(Po),Ro=["attr","size","title"];function Oo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(this,arguments)}function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach(function(t){Fo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zo(e){return e&&e.map((e,n)=>t.createElement(e.tag,Lo({key:n},e.attr),zo(e.child)))}function Uo(e){return n=>t.createElement(Vo,No({attr:Lo({},e.attr)},n),zo(e.child))}function Vo(e){var n=n=>{var r,{attr:i,size:o,title:a}=e,s=Oo(e,Ro),l=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",No({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:Lo(Lo({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==jo?t.createElement(jo.Consumer,null,e=>n(e)):n(Po)}function Bo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Wo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function qo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Ho(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function $o(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function Ko(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Go(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(e)}function Yo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(e)}function Qo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function Xo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(e)}function Jo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Zo(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function ea(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function ta(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}function na(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function ra(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function ia(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function oa(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function aa(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function sa(e){return Uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}function la(e){let{message:n,visible:r,type:i="success",process:o,onClose:a,autoHideDuration:s=4e3,fade:l=!0}=e;const[u,c]=(0,t.useState)(r),[d,h]=(0,t.useState)(r?1:0),f=(0,t.useRef)(),p=(0,t.useRef)();if((0,t.useEffect)(()=>(r?(c(!0),h(1),s>0&&(f.current=setTimeout(()=>{l?(h(0),p.current=setTimeout(()=>{c(!1),a&&a()},400)):(c(!1),a&&a())},s))):(h(0),setTimeout(()=>c(!1),400)),()=>{clearTimeout(f.current),clearTimeout(p.current)}),[r,s,l,a]),!u)return null;const g={success:{background:"#4a944e",border:"2px solid #0e300f",color:"#0e2e10"},error:{background:"#ffeaea",border:"2px solid #ef4444",color:"#991b1b"},info:{background:"#e0f2fe",border:"2px solid #38bdf8",color:"#0369a1"}},m={position:"fixed",top:24,left:"50%",transform:"translateX(-50%)",zIndex:99999999,display:"flex",alignItems:"center",gap:12,minWidth:320,maxWidth:480,padding:"14px 32px 14px 24px",borderRadius:10,boxShadow:"0 4px 24px rgba(34,197,94,0.10)",fontWeight:600,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",gap:16,opacity:d,transition:l?"opacity 0.4s":void 0,pointerEvents:0===d?"none":void 0,...g[i]};return(0,Eo.jsxs)("div",{style:m,children:["success"===i&&(0,Eo.jsx)(qo,{size:24,color:g.success.color,style:{flexShrink:0}}),(0,Eo.jsx)("span",{children:o?`${o} was successful!`:n}),a&&(0,Eo.jsx)("button",{onClick:()=>{h(0),setTimeout(()=>{c(!1),a&&a()},400)},style:{marginLeft:12,background:"none",border:"none",color:g[i].color,fontSize:20,cursor:"pointer"},title:"Dismiss",children:"\xd7"})]})}const ua=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ca=(()=>new Set(ua))(),da=e=>180*e/Math.PI,ha=e=>{const t=da(Math.atan2(e[1],e[0]));return pa(t)},fa={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ha,rotateZ:ha,skewX:e=>da(Math.atan(e[1])),skewY:e=>da(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},pa=e=>((e%=360)<0&&(e+=360),e),ga=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ma=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ya={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ga,scaleY:ma,scale:e=>(ga(e)+ma(e))/2,rotateX:e=>pa(da(Math.atan2(e[6],e[5]))),rotateY:e=>pa(da(Math.atan2(-e[2],e[0]))),rotateZ:ha,rotate:ha,skewX:e=>da(Math.atan(e[4])),skewY:e=>da(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function va(e){return e.includes("scale")?1:0}function ba(e,t){if(!e||"none"===e)return va(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=ya,i=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fa,i=t}if(!i)return va(t);const o=r[t],a=i[1].split(",").map(wa);return"function"===typeof o?o(a):a[o]}function wa(e){return parseFloat(e.trim())}const xa=e=>t=>"string"===typeof t&&t.startsWith(e),Sa=xa("--"),ka=xa("var(--"),Ta=e=>!!ka(e)&&Ca.test(e.split("/*")[0].trim()),Ca=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ea(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}const Ia=(e,t,n)=>e+(t-e)*n;function Da(e){return void 0===e||1===e}function Aa(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Da(t)||!Da(n)||!Da(r)}function _a(e){return Aa(e)||Pa(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Pa(e){return ja(e.x)||ja(e.y)}function ja(e){return e&&"0%"!==e}function Ra(e,t,n){return n+t*(e-n)}function Oa(e,t,n,r,i){return void 0!==i&&(e=Ra(e,i,r)),Ra(e,n,r)+t}function Na(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=Oa(e.min,t,n,r,i),e.max=Oa(e.max,t,n,r,i)}function Ma(e,t){let{x:n,y:r}=t;Na(e.x,n.translate,n.scale,n.originPoint),Na(e.y,r.translate,r.scale,r.originPoint)}const La=.999999999999,Fa=1.0000000000001;function za(e,t){e.min=e.min+t,e.max=e.max+t}function Ua(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Na(e,t,n,Ia(e.min,e.max,i),r)}function Va(e,t){Ua(e.x,t.x,t.scaleX,t.scale,t.originX),Ua(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ba(e,t){return Ea(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Wa=new Set(["width","height","top","left","right","bottom",...ua]),qa=(e,t,n)=>n>t?t:n<e?e:n,Ha={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},$a={...Ha,transform:e=>qa(0,1,e)},Ka={...Ha,default:1},Ga=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ya=Ga("deg"),Qa=Ga("%"),Xa=Ga("px"),Ja=Ga("vh"),Za=Ga("vw"),es=(()=>({...Qa,parse:e=>Qa.parse(e)/100,transform:e=>Qa.transform(100*e)}))(),ts=e=>t=>t.test(e),ns=[Ha,Xa,Qa,Ya,Za,Ja,{test:e=>"auto"===e,parse:e=>e}],rs=e=>ns.find(ts(e));const is=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),os=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function as(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[r,i]=function(e){const t=os.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return is(e)?parseFloat(e):e}return Ta(i)?as(i,t,n+1):i}const ss=e=>e===Ha||e===Xa,ls=new Set(["x","y","z"]),us=ua.filter(e=>!ls.has(e));const cs={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return ba(n,"x")},y:(e,t)=>{let{transform:n}=t;return ba(n,"y")}};cs.translateX=cs.x,cs.translateY=cs.y;const ds=e=>e,hs={},fs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ps={value:null,addProjectionMetrics:null};function gs(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=fs.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(s)}const c={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{s=e,i?o=!0:(i=!0,[n,r]=[r,n],n.forEach(u),t&&ps.value&&ps.value.frameloop[t].push(l),l=0,n.clear(),i=!1,o&&(o=!1,c.process(e)))}};return c}(o,t?n:void 0),e),{}),{setup:s,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:f,postRender:p}=a,g=()=>{const o=hs.useManualTiming?i.timestamp:performance.now();n=!1,hs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1)),i.timestamp=o,i.isProcessing=!0,s.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(g))},m=fs.reduce((t,o)=>{const s=a[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(g)),s.schedule(t,o,a)},t},{});return{schedule:m,cancel:e=>{for(let t=0;t<fs.length;t++)a[fs[t]].cancel(e)},state:i,steps:a}}const{schedule:ms,cancel:ys,state:vs,steps:bs}=gs("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:ds,!0),ws=new Set;let xs=!1,Ss=!1,ks=!1;function Ts(){if(Ss){const e=Array.from(ws).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return us.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{let[n,r]=t;e.getValue(n)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Ss=!1,xs=!1,ws.forEach(e=>e.complete(ks)),ws.clear()}function Cs(){ws.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ss=!0)})}class Es{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ws.add(this),xs||(xs=!0,ms.read(Cs),ms.resolveKeyframes(Ts))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=r?.get(),o=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,o);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=o),r&&void 0===i&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ws.delete(this)}cancel(){"scheduled"===this.state&&(ws.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Is=e=>/^0[^.\s]+$/u.test(e);function Ds(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Is(e))}const As=e=>Math.round(1e5*e)/1e5,_s=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ps=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,js=(e,t)=>n=>Boolean("string"===typeof n&&Ps.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Rs=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,o,a,s]=r.match(_s);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},Os={...Ha,transform:e=>Math.round((e=>qa(0,255,e))(e))},Ns={test:js("rgb","red"),parse:Rs("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+Os.transform(t)+", "+Os.transform(n)+", "+Os.transform(r)+", "+As($a.transform(i))+")"}};const Ms={test:js("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Ns.transform},Ls={test:js("hsl","hue"),parse:Rs("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+Qa.transform(As(n))+", "+Qa.transform(As(r))+", "+As($a.transform(i))+")"}},Fs={test:e=>Ns.test(e)||Ms.test(e)||Ls.test(e),parse:e=>Ns.test(e)?Ns.parse(e):Ls.test(e)?Ls.parse(e):Ms.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Ns.transform(e):Ls.transform(e),getAnimatableNone:e=>{const t=Fs.parse(e);return t.alpha=0,Fs.transform(t)}},zs=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Us="number",Vs="color",Bs=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ws(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=t.replace(Bs,e=>(Fs.test(e)?(r.color.push(o),i.push(Vs),n.push(Fs.parse(e))):e.startsWith("var(")?(r.var.push(o),i.push("var"),n.push(e)):(r.number.push(o),i.push(Us),n.push(parseFloat(e))),++o,"${}")).split("${}");return{values:n,split:a,indexes:r,types:i}}function qs(e){return Ws(e).values}function Hs(e){const{split:t,types:n}=Ws(e),r=t.length;return e=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],void 0!==e[o]){const t=n[o];i+=t===Us?As(e[o]):t===Vs?Fs.transform(e[o]):e[o]}return i}}const $s=e=>"number"===typeof e?0:Fs.test(e)?Fs.getAnimatableNone(e):e;const Ks={test:function(e){return isNaN(e)&&"string"===typeof e&&(e.match(_s)?.length||0)+(e.match(zs)?.length||0)>0},parse:qs,createTransformer:Hs,getAnimatableNone:function(e){const t=qs(e);return Hs(e)(t.map($s))}},Gs=new Set(["brightness","contrast","saturate","opacity"]);function Ys(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(_s)||[];if(!r)return e;const i=n.replace(r,"");let o=Gs.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Qs=/\b([a-z-]*)\(.*?\)/gu,Xs={...Ks,getAnimatableNone:e=>{const t=e.match(Qs);return t?t.map(Ys).join(" "):e}},Js={...Ha,transform:Math.round},Zs={borderWidth:Xa,borderTopWidth:Xa,borderRightWidth:Xa,borderBottomWidth:Xa,borderLeftWidth:Xa,borderRadius:Xa,radius:Xa,borderTopLeftRadius:Xa,borderTopRightRadius:Xa,borderBottomRightRadius:Xa,borderBottomLeftRadius:Xa,width:Xa,maxWidth:Xa,height:Xa,maxHeight:Xa,top:Xa,right:Xa,bottom:Xa,left:Xa,padding:Xa,paddingTop:Xa,paddingRight:Xa,paddingBottom:Xa,paddingLeft:Xa,margin:Xa,marginTop:Xa,marginRight:Xa,marginBottom:Xa,marginLeft:Xa,backgroundPositionX:Xa,backgroundPositionY:Xa,...{rotate:Ya,rotateX:Ya,rotateY:Ya,rotateZ:Ya,scale:Ka,scaleX:Ka,scaleY:Ka,scaleZ:Ka,skew:Ya,skewX:Ya,skewY:Ya,distance:Xa,translateX:Xa,translateY:Xa,translateZ:Xa,x:Xa,y:Xa,z:Xa,perspective:Xa,transformPerspective:Xa,opacity:$a,originX:es,originY:es,originZ:Xa},zIndex:Js,fillOpacity:$a,strokeOpacity:$a,numOctaves:Js},el={...Zs,color:Fs,backgroundColor:Fs,outlineColor:Fs,fill:Fs,stroke:Fs,borderColor:Fs,borderTopColor:Fs,borderRightColor:Fs,borderBottomColor:Fs,borderLeftColor:Fs,filter:Xs,WebkitFilter:Xs},tl=e=>el[e];function nl(e,t){let n=tl(e);return n!==Xs&&(n=Ks),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const rl=new Set(["auto","none","0"]);class il extends Es{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let n=e[s];if("string"===typeof n&&(n=n.trim(),Ta(n))){const r=as(n,t.current);void 0!==r&&(e[s]=r),s===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Wa.has(n)||2!==e.length)return;const[r,i]=e,o=rs(r),a=rs(i);if(o!==a)if(ss(o)&&ss(a))for(let s=0;s<e.length;s++){const t=e[s];"string"===typeof t&&(e[s]=parseFloat(t))}else cs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||Ds(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!rl.has(t)&&Ws(t).values.length&&(r=e[i]),i++}if(r&&n)for(const o of t)e[o]=nl(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=cs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const ol=e=>Boolean(e&&e.getVelocity);let al;function sl(){al=void 0}const ll={now:()=>(void 0===al&&ll.set(vs.isProcessing||hs.useManualTiming?vs.timestamp:performance.now()),al),set:e=>{al=e,queueMicrotask(sl)}};function ul(e,t){-1===e.indexOf(t)&&e.push(t)}function cl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class dl{constructor(){this.subscriptions=[]}add(e){return ul(this.subscriptions,e),()=>cl(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function hl(e,t){return t?e*(1e3/t):0}const fl={current:void 0};class pl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=ll.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ll.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new dl);const n=this.events[e].add(t);return"change"===e?()=>{n(),ms.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return fl.current&&fl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ll.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return hl(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gl(e,t){return new pl(e,t)}const ml=[...ns,Fs,Ks],{schedule:yl,cancel:vl}=gs(queueMicrotask,!1),bl={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wl={};for(const n in bl)wl[n]={isEnabled:e=>bl[n].some(t=>!!e[t])};const xl=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Sl="undefined"!==typeof window,kl={current:null},Tl={current:!1};const Cl=new WeakMap;function El(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Il(e){return"string"===typeof e||Array.isArray(e)}const Dl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Al=["initial",...Dl];function _l(e){return El(e.animate)||Al.some(t=>Il(e[t]))}function Pl(e){return Boolean(_l(e)||e.variants)}function jl(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Rl(e,t,n,r){if("function"===typeof t){const[i,o]=jl(r);t=t(void 0!==n?n:e.custom,i,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,o]=jl(r);t=t(void 0!==n?n:e.custom,i,o)}return t}const Ol=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Nl{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Es,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=ll.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ms.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=_l(n),this.isVariantNode=Pl(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const e=d[h];void 0!==l[h]&&ol(e)&&e.set(l[h])}}mount(e){this.current=e,Cl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Tl.current||function(){if(Tl.current=!0,Sl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>kl.current=e.matches;e.addEventListener("change",t),t()}else kl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||kl.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ys(this.notifyUpdate),ys(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ca.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ms.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in wl){const t=wl[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Ol.length;n++){const t=Ol[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],o=n[r];if(ol(i))e.addValue(r,i);else if(ol(o))e.addValue(r,gl(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,gl(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=gl(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return void 0!==n&&null!==n&&("string"===typeof n&&(is(n)||Is(n))?n=parseFloat(n):(r=n,!ml.find(ts(r))&&Ks.test(t)&&(n=nl(e,t))),this.setBaseTarget(e,ol(n)?n.get():n)),ol(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){const r=Rl(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||ol(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new dl),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){yl.render(this.render)}}class Ml extends Nl{constructor(){super(...arguments),this.KeyframeResolver=il}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ol(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}const Ll=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Fl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zl=ua.length;function Ul(e,t,n){const{style:r,vars:i,transformOrigin:o}=e;let a=!1,s=!1;for(const l in t){const e=t[l];if(ca.has(l))a=!0;else if(Sa(l))i[l]=e;else{const t=Ll(e,Zs[l]);l.startsWith("origin")?(s=!0,o[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",i=!0;for(let o=0;o<zl;o++){const a=ua[o],s=e[a];if(void 0===s)continue;let l=!0;if(l="number"===typeof s?s===(a.startsWith("scale")?1:0):0===parseFloat(s),!l||n){const e=Ll(s,Zs[a]);l||(i=!1,r+=`${Fl[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin=`${e} ${t} ${n}`}}function Vl(e,t,n,r){let{style:i,vars:o}=t;const a=e.style;let s;for(s in i)a[s]=i[s];for(s in r?.applyProjectionStyles(a,n),o)a.setProperty(s,o[s])}const Bl={};function Wl(e,t){let{layout:n,layoutId:r}=t;return ca.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Bl[e]||"opacity"===e)}function ql(e,t,n){const{style:r}=e,i={};for(const o in r)(ol(r[o])||t.style&&ol(t.style[o])||Wl(o,e)||void 0!==n?.getValue(o)?.liveStyle)&&(i[o]=r[o]);return i}class Hl extends Ml{constructor(){super(...arguments),this.type="html",this.renderInstance=Vl}readValueFromInstance(e,t){if(ca.has(t))return this.projection?.isProjecting?va(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ba(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),i=(Sa(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Ba(e,n)}build(e,t,n){Ul(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return ql(e,t,n)}}const $l=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kl={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gl={offset:"strokeDashoffset",array:"strokeDasharray"};function Yl(e,t,n,r,i){let{attrX:o,attrY:a,attrScale:s,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...d}=t;if(Ul(e,d,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=i?.transformBox??"fill-box",delete h.transformBox),void 0!==o&&(h.x=o),void 0!==a&&(h.y=a),void 0!==s&&(h.scale=s),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=i?Kl:Gl;e[o.offset]=Xa.transform(-r);const a=Xa.transform(t),s=Xa.transform(n);e[o.array]=`${a} ${s}`}(h,l,u,c,!1)}const Ql=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Xl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Jl(e,t,n){const r=ql(e,t,n);for(const i in e)if(ol(e[i])||ol(t[i])){r[-1!==ua.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}class Zl extends Ml{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xl}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ca.has(t)){const e=tl(t);return e&&e.default||0}return t=Ql.has(t)?t:$l(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Jl(e,t,n)}build(e,t,n){Yl(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Vl(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Ql.has(i)?i:$l(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=Xl(e.tagName),super.mount(e)}}const eu=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tu(e){return"string"===typeof e&&!e.includes("-")&&!!(eu.indexOf(e)>-1||/[A-Z]/u.test(e))}const nu=(e,n)=>tu(e)?new Zl(n):new Hl(n,{allowProjection:e!==t.Fragment}),ru=(0,t.createContext)({}),iu=(0,t.createContext)({strict:!1}),ou=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),au=(0,t.createContext)({});function su(e){const{initial:n,animate:r}=function(e,t){if(_l(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Il(t)?t:void 0,animate:Il(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(au));return(0,t.useMemo)(()=>({initial:n,animate:r}),[lu(n),lu(r)])}function lu(e){return Array.isArray(e)?e.join(" "):e}const uu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cu(e,t,n){for(const r in t)ol(t[r])||Wl(r,n)||(e[r]=t[r])}function du(e,n){const r={};return cu(r,e.style||{},e),Object.assign(r,function(e,n){let{transformTemplate:r}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Ul(e,n,r),Object.assign({},e.vars,e.style)},[n])}(e,n)),r}function hu(e,t){const n={},r=du(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const fu=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}});function pu(e,n,r,i){const o=(0,t.useMemo)(()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Yl(t,n,Xl(i),e.transformTemplate,e.style),{...t.attrs,style:{...t.style}}},[n]);if(e.style){const t={};cu(t,e.style,e),o.style={...t,...o.style}}return o}const gu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mu(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||gu.has(e)}let yu=e=>!mu(e);try{"function"===typeof(vu=require("@emotion/is-prop-valid").default)&&(yu=e=>e.startsWith("on")?!mu(e):vu(e))}catch{}var vu;function bu(e,n,r,i,o){let{latestValues:a}=i,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(tu(e)?pu:hu)(n,a,o,e),u=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(yu(i)||!0===n&&mu(i)||!t&&!mu(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof e,s),c=e!==t.Fragment?{...u,...l,ref:r}:{},{children:d}=n,h=(0,t.useMemo)(()=>ol(d)?d.get():d,[d]);return(0,t.createElement)(e,{...c,children:h})}const wu=(0,t.createContext)(null);function xu(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function Su(e){return ol(e)?e.get():e}function ku(e,t,n,r){const i={},o=r(e,{});for(const h in o)i[h]=Su(o[h]);let{initial:a,animate:s}=e;const l=_l(e),u=Pl(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let c=!!n&&!1===n.initial;c=c||!1===a;const d=c?s:a;if(d&&"boolean"!==typeof d&&!El(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=Rl(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const Tu=e=>(n,r)=>{const i=(0,t.useContext)(au),o=(0,t.useContext)(wu),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o}=e;return{latestValues:ku(t,n,r,i),renderState:o()}}(e,n,i,o);return r?a():xu(a)},Cu=Tu({scrapeMotionValuesFromProps:ql,createRenderState:uu}),Eu=Tu({scrapeMotionValuesFromProps:Jl,createRenderState:fu});const Iu=Symbol.for("motionComponentSymbol");function Du(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Au(e,n,r){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Du(r)&&(r.current=t))},[n])}const _u="data-"+$l("framerAppearId"),Pu=(0,t.createContext)({}),ju=Sl?t.useLayoutEffect:t.useEffect;function Ru(e,n,r,i,o){const{visualElement:a}=(0,t.useContext)(au),s=(0,t.useContext)(iu),l=(0,t.useContext)(wu),u=(0,t.useContext)(ou).reducedMotion,c=(0,t.useRef)(null);i=i||s.renderer,!c.current&&i&&(c.current=i(e,{visualState:n,parent:a,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u}));const d=c.current,h=(0,t.useContext)(Pu);!d||d.projection||!o||"html"!==d.type&&"svg"!==d.type||function(e,t,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ou(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(a)||s&&Du(s),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}(c.current,r,o,h);const f=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{d&&f.current&&d.update(r,l)});const p=r[_u],g=(0,t.useRef)(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return ju(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),(0,t.useEffect)(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),g.current=!1),d.enteringChildren=void 0)}),d}function Ou(e){if(e)return!1!==e.options.allowProjection?e.projection:Ou(e.parent)}function Nu(e){let{forwardMotionProps:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;r&&function(e){for(const t in e)wl[t]={...wl[t],...e[t]}}(r);const o=tu(e)?Eu:Cu;function a(r,a){let s;const l={...(0,t.useContext)(ou),...r,layoutId:Mu(r)},{isStatic:u}=l,c=su(r),d=o(r,u);if(!u&&Sl){!function(){(0,t.useContext)(iu).strict;0}();const n=function(e){const{drag:t,layout:n}=wl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);s=n.MeasureLayout,c.visualElement=Ru(e,d,l,i,n.ProjectionNode)}return(0,Eo.jsxs)(au.Provider,{value:c,children:[s&&c.visualElement?(0,Eo.jsx)(s,{visualElement:c.visualElement,...l}):null,bu(e,r,Au(d,c.visualElement,a),d,u,n)]})}a.displayName=`motion.${"string"===typeof e?e:`create(${e.displayName??e.name??""})`}`;const s=(0,t.forwardRef)(a);return s[Iu]=e,s}function Mu(e){let{layoutId:n}=e;const r=(0,t.useContext)(ru).id;return r&&void 0!==n?r+"-"+n:n}function Lu(e,t){if("undefined"===typeof Proxy)return Nu;const n=new Map,r=(n,r)=>Nu(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,o)=>"create"===o?r:(n.has(o)||n.set(o,Nu(o,void 0,e,t)),n.get(o))})}function Fu(e,t,n){const r=e.getProps();return Rl(r,t,void 0!==n?n:r.custom,e)}function zu(e,t){return e?.[t]??e?.default??e}const Uu=e=>Array.isArray(e);function Vu(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,gl(n))}function Bu(e){return Uu(e)?e[e.length-1]||0:e}function Wu(e,t){const n=e.getValue("willChange");if(r=n,Boolean(ol(r)&&r.add))return n.add(t);if(!n&&hs.WillChange){const n=new hs.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function qu(e){return e.props[_u]}function Hu(e){e.duration=0,e.type}const $u=(e,t)=>n=>t(e(n)),Ku=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce($u)},Gu=e=>1e3*e,Yu=e=>e/1e3,Qu={layout:0,mainThread:0,waapi:0};function Xu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ju(e,t){return n=>n>0?t:e}const Zu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},ec=[Ms,Ns,Ls];function tc(e){const t=(n=e,ec.find(e=>e.test(n)));var n;if(Boolean(t),!Boolean(t))return!1;let r=t.parse(e);return t===Ls&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,a=0,s=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=Xu(i,e,t+1/3),a=Xu(i,e,t),s=Xu(i,e,t-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}(r)),r}const nc=(e,t)=>{const n=tc(e),r=tc(t);if(!n||!r)return Ju(e,t);const i={...n};return e=>(i.red=Zu(n.red,r.red,e),i.green=Zu(n.green,r.green,e),i.blue=Zu(n.blue,r.blue,e),i.alpha=Ia(n.alpha,r.alpha,e),Ns.transform(i))},rc=new Set(["none","hidden"]);function ic(e,t){return n=>Ia(e,t,n)}function oc(e){return"number"===typeof e?ic:"string"===typeof e?Ta(e)?Ju:Fs.test(e)?nc:lc:Array.isArray(e)?ac:"object"===typeof e?Fs.test(e)?nc:sc:Ju}function ac(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>oc(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function sc(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=oc(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const lc=(e,t)=>{const n=Ks.createTransformer(t),r=Ws(e),i=Ws(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?rc.has(e)&&!i.values.length||rc.has(t)&&!r.values.length?function(e,t){return rc.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Ku(ac(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][r[o]],s=e.values[a]??0;n[i]=s,r[o]++}return n}(r,i),i.values),n):Ju(e,t)};function uc(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Ia(e,t,n);return oc(e)(e,t)}const cc=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ms.update(t,e)},stop:()=>ys(t),now:()=>vs.isProcessing?vs.timestamp:ll.now()}},dc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)r+=Math.round(1e4*e(o/(i-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},hc=2e4;function fc(e){let t=0;let n=e.next(t);for(;!n.done&&t<hc;)t+=50,n=e.next(t);return t>=hc?1/0:t}function pc(e,t,n){const r=Math.max(t-5,0);return hl(n-e(r),t-r)}const gc={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mc=.001;function yc(e){let t,n,{duration:r=gc.duration,bounce:i=gc.bounce,velocity:o=gc.velocity,mass:a=gc.mass}=e;Gu(gc.maxDuration);let s=1-i;s=qa(gc.minDamping,gc.maxDamping,s),r=qa(gc.minDuration,gc.maxDuration,Yu(r)),s<1?(t=e=>{const t=e*s,n=t*r,i=t-o,a=bc(e,s),l=Math.exp(-n);return mc-i/a*l},n=e=>{const n=e*s*r,i=n*o+o,a=Math.pow(s,2)*Math.pow(e,2)*r,l=Math.exp(-n),u=bc(Math.pow(e,2),s);return(-t(e)+mc>0?-1:1)*((i-a)*l)/u}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<vc;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Gu(r),isNaN(l))return{stiffness:gc.stiffness,damping:gc.damping,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*s*Math.sqrt(a*e),duration:r}}}const vc=12;function bc(e,t){return e*Math.sqrt(1-t*t)}const wc=["duration","bounce"],xc=["stiffness","damping","mass"];function Sc(e,t){return t.some(t=>void 0!==e[t])}function kc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gc.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gc.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:gc.velocity,stiffness:gc.stiffness,damping:gc.damping,mass:gc.mass,isResolvedFromDuration:!1,...e};if(!Sc(e,xc)&&Sc(e,wc))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,o=2*qa(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:gc.mass,stiffness:i,damping:o}}else{const n=yc(e);t={...t,...n,mass:gc.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-Yu(n.velocity||0)}),p=h||0,g=u/(2*Math.sqrt(l*c)),m=a-o,y=Yu(Math.sqrt(l/c)),v=Math.abs(m)<5;let b;if(r||(r=v?gc.restSpeed.granular:gc.restSpeed.default),i||(i=v?gc.restDelta.granular:gc.restDelta.default),g<1){const e=bc(y,g);b=t=>{const n=Math.exp(-g*y*t);return a-n*((p+g*y*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}}else if(1===g)b=e=>a-Math.exp(-y*e)*(m+(p+y*m)*e);else{const e=y*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*y*t),r=Math.min(e*t,300);return a-n*((p+g*y*m)*Math.sinh(r)+e*m*Math.cosh(r))/e}}const w={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)s.done=e>=d;else{let n=0===e?p:0;g<1&&(n=0===e?Gu(p):pc(b,e,t));const o=Math.abs(n)<=r,l=Math.abs(a-t)<=i;s.done=o&&l}return s.value=s.done?a:t,s},toString:()=>{const e=Math.min(fc(w),hc),t=dc(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function Tc(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:s,min:l,max:u,restDelta:c=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===l?u:void 0===u||Math.abs(l-e)<Math.abs(u-e)?l:u;let g=r*n;const m=h+g,y=void 0===s?m:s(m);y!==m&&(g=y-h);const v=e=>-g*Math.exp(-e/i),b=e=>y+v(e),w=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=c,f.value=f.done?y:n};let x,S;const k=e=>{var t;(t=f.value,void 0!==l&&t<l||void 0!==u&&t>u)&&(x=e,S=kc({keyframes:[f.value,p(f.value)],velocity:pc(b,e,f.value),damping:o,stiffness:a,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==x||(t=!0,w(e),k(e)),void 0!==x&&e>=x?S.next(e-x):(!t&&w(e),f)}}}kc.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...e,keyframes:[0,t]}),r=Math.min(fc(n),hc);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:Yu(r)}}(e,100,kc);return e.ease=t.ease,e.duration=Gu(t.duration),e.type="keyframes",e};const Cc=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Ec(e,t,n,r){if(e===t&&n===r)return ds;const i=t=>function(e,t,n,r,i){let o,a,s=0;do{a=t+(n-t)/2,o=Cc(a,r,i)-e,o>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:Cc(i(e),t,r)}const Ic=Ec(.42,0,1,1),Dc=Ec(0,0,.58,1),Ac=Ec(.42,0,.58,1),_c=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Pc=e=>t=>1-e(1-t),jc=Ec(.33,1.53,.69,.99),Rc=Pc(jc),Oc=_c(Rc),Nc=e=>(e*=2)<1?.5*Rc(e):.5*(2-Math.pow(2,-10*(e-1))),Mc=e=>1-Math.sin(Math.acos(e)),Lc=Pc(Mc),Fc=_c(Mc),zc=e=>Array.isArray(e)&&"number"===typeof e[0],Uc={linear:ds,easeIn:Ic,easeInOut:Ac,easeOut:Dc,circIn:Mc,circInOut:Fc,circOut:Lc,backIn:Rc,backInOut:Oc,backOut:jc,anticipate:Nc},Vc=e=>{if(zc(e)){e.length;const[t,n,r,i]=e;return Ec(t,n,r,i)}return"string"===typeof e?Uc[e]:e},Bc=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function Wc(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(t.length,1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const r=[],i=n||hs.mix||uc,o=e.length-1;for(let a=0;a<o;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||ds:t;n=Ku(e,n)}r.push(n)}return r}(t,r,i),l=s.length,u=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=Bc(e[r],e[r+1],n);return s[r](i)};return n?t=>u(qa(e[0],e[o-1],t)):u}function qc(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Bc(0,t,r);e.push(Ia(n,1,i))}}(t,e.length-1),t}function Hc(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(Vc):Vc(i),a={done:!1,value:n[0]},s=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:qc(n),t),l=Wc(s,n,{ease:Array.isArray(o)?o:(u=n,c=o,u.map(()=>c||Ac).splice(0,u.length-1))});var u,c;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const $c=e=>null!==e;function Kc(e,t,n){let{repeat:r,repeatType:i="loop"}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=e.filter($c),s=o<0||r&&"loop"!==i&&r%2===1?0:a.length-1;return s&&void 0!==n?n:a[s]}const Gc={decay:Tc,inertia:Tc,tween:Hc,keyframes:Hc,spring:kc};function Yc(e){"string"===typeof e.type&&(e.type=Gc[e.type])}class Qc{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Xc=e=>e/100;class Jc extends Qc{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==ll.now()&&this.tick(ll.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},Qu.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Yc(e);const{type:t=Hc,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const s=t||Hc;s!==Hc&&"number"!==typeof a[0]&&(this.mixKeyframes=Ku(Xc,uc(a[0],a[1])),a=[0,100]);const l=s({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=s({...e,keyframes:[...a].reverse(),velocity:-o})),null===l.calculatedDuration&&(l.calculatedDuration=fc(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const m=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?m<0:m>r;this.currentTime=Math.max(m,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(c){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(b=o)),v=qa(0,1,n)*a}const w=y?{done:!1,value:u[0]}:b.next(v);i&&(w.value=i(w.value));let{done:x}=w;y||null===s||(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return S&&f!==Tc&&(w.value=Kc(u,this.options,g,this.speed)),p&&p(w.value),S&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return Yu(this.calculatedDuration)}get time(){return Yu(this.currentTime)}set time(e){e=Gu(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ll.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Yu(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=cc,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ll.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Qu.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Zc(e){let t;return()=>(void 0===t&&(t=e()),t)}const ed=Zc(()=>void 0!==window.ScrollTimeline),td={};function nd(e,t){const n=Zc(e);return()=>td[t]??n()}const rd=nd(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Jm){return!1}return!0},"linearEasing"),id=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},od={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function ad(e,t){return e?"function"===typeof e?rd()?dc(e,t):"ease-out":zc(e)?id(e):Array.isArray(e)?e.map(e=>ad(e,t)||od.easeOut):od[e]:void 0}function sd(e,t,n){let{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const c={[t]:n};l&&(c.offset=l);const d=ad(s,i);Array.isArray(d)&&(c.easing=d),ps.value&&Qu.waapi++;const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"};u&&(h.pseudoElement=u);const f=e.animate(c,h);return ps.value&&f.finished.finally(()=>{Qu.waapi--}),f}function ld(e){return"function"===typeof e&&"applyToOptions"in e}class ud extends Qc{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:s}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=o,this.options=e,e.type;const l=function(e){let{type:t,...n}=e;return ld(t)&&rd()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}(e);this.animation=sd(t,n,r,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=Kc(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}s?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(Jm){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Yu(Number(e))}get time(){return Yu(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gu(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ed()?(this.animation.timeline=t,ds):n(this)}}const cd={anticipate:Nc,backInOut:Oc,circInOut:Fc};function dd(e){"string"===typeof e.ease&&e.ease in cd&&(e.ease=cd[e.ease])}class hd extends ud{constructor(e){dd(e),Yc(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...o}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new Jc({...o,autoplay:!1}),s=Gu(this.finishedTime??this.time);t.setWithVelocity(a.sample(s-10).value,a.sample(s).value,10),a.stop()}}const fd=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Ks.test(e)&&"0"!==e||e.startsWith("url(")));const pd=new Set(["opacity","clipPath","filter","transform"]),gd=Zc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class md extends Qc{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:s,name:l,motionValue:u,element:c,...d}=e;super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ll.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:l,motionValue:u,element:c,...d},f=c?.KeyframeResolver||Es;this.keyframeResolver=new f(s,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),l,u,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:s,isHandoff:l,onUpdate:u}=n;this.resolvedAt=ll.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],a=fd(i,t),s=fd(o,t);return!(!a||!s)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||ld(n))&&r)}(e,i,o,a)||(!hs.instantAnimations&&s||u?.(Kc(e,n,t)),e[0]=e[e.length-1],Hu(n),n.repeat=0);const c={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=e,s=t?.owner?.current;if(!(s instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return gd()&&n&&pd.has(n)&&("transform"!==n||!u)&&!l&&!r&&"mirror"!==i&&0!==o&&"inertia"!==a}(c)?new hd({...c,element:c.motionValue.owner.current}):new Jc(c);d.finished.then(()=>this.notifyFinished()).catch(ds),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ks=!0,Cs(),Ts(),ks=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const yd=e=>null!==e;const vd={type:"spring",stiffness:500,damping:25,restSpeed:10},bd={type:"keyframes",duration:.8},wd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xd=(e,t)=>{let{keyframes:n}=t;return n.length>2?bd:ca.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:vd:wd};const Sd=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return a=>{const s=zu(r,e)||{},l=s.delay||r.delay||0;let{elapsed:u=0}=r;u-=Gu(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:i};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:l,from:u,elapsed:c,...d}=e;return!!Object.keys(d).length})(s)||Object.assign(c,xd(e,c)),c.duration&&(c.duration=Gu(c.duration)),c.repeatDelay&&(c.repeatDelay=Gu(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(Hu(c),0===c.delay&&(d=!0)),(hs.instantAnimations||hs.skipAnimations)&&(d=!0,Hu(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,d&&!o&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const o=e.filter(yd),a=r&&"loop"!==i&&r%2===1?0:o.length-1;return a&&void 0!==n?n:o[a]}(c.keyframes,s);if(void 0!==e)return void ms.update(()=>{c.onUpdate(e),c.onComplete()})}return s.isSync?new Jc(c):new md(c)}};function kd(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function Td(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;r&&(o=r);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const c in s){const t=e.getValue(c,e.latestValues[c]??null),r=s[c];if(void 0===r||u&&kd(u,c))continue;const i={delay:n,...zu(o||{},c)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!i.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=qu(e);if(t){const e=window.MotionHandoffAnimation(t,c,ms);null!==e&&(i.startTime=e,d=!0)}}Wu(e,c),t.start(Sd(c,t,r,e.shouldReduceMotion&&Wa.has(c)?{type:!1}:i,e,d));const h=t.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{ms.update(()=>{a&&function(e,t){const n=Fu(e,t);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o)Vu(e,a,Bu(o[a]))}(e,a)})}),l}function Cd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const o=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,s=(a-1)*r;return"function"===typeof n?n(o,a):1===i?o*r:s-o*r}function Ed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Fu(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Td(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:a,staggerDirection:s}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(Ed(l,t,{...a,delay:n+("function"===typeof r?0:r)+Cd(e.variantChildren,l,r,i,o)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}(e,t,r,o,a,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[e,t]="beforeChildren"===s?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(n.delay)])}function Id(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Dd=Al.length;function Ad(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Ad(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Dd;n++){const r=Al[n],i=e.props[r];(Il(i)||!1===i)&&(t[r]=i)}return t}const _d=[...Dl].reverse(),Pd=Dl.length;function jd(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>Ed(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=Ed(e,t,r);else{const i="function"===typeof t?Fu(e,t,r.custom):t;n=Promise.all(Td(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function Rd(e){let t=jd(e),n=Md(),r=!0;const i=t=>(n,r)=>{const i=Fu(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(i){const{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function o(o){const{props:a}=e,s=Ad(e.parent)||{},l=[],u=new Set;let c={},d=1/0;for(let t=0;t<Pd;t++){const h=_d[t],f=n[h],p=void 0!==a[h]?a[h]:s[h],g=Il(p),m=h===o?f.isActive:null;!1===m&&(d=t);let y=p===s[h]&&p!==a[h]&&g;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...c},!f.isActive&&null===m||!p&&!f.prevProp||El(p)||"boolean"===typeof p)continue;const v=Od(f.prevProp,p);let b=v||h===o&&f.isActive&&!y&&g||t>d&&g,w=!1;const x=Array.isArray(p)?p:[p];let S=x.reduce(i(h),{});!1===m&&(S={});const{prevResolvedValues:k={}}=f,T={...k,...S},C=t=>{b=!0,u.has(t)&&(w=!0,u.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in T){const t=S[e],n=k[e];if(c.hasOwnProperty(e))continue;let r=!1;r=Uu(t)&&Uu(n)?!Id(t,n):t!==n,r?void 0!==t&&null!==t?C(e):u.add(e):void 0!==t&&u.has(e)?C(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=S,f.isActive&&(c={...c,...S}),r&&e.blockInitialAnimation&&(b=!1);const E=y&&v;b&&(!E||w)&&l.push(...x.map(t=>{const n={type:h};if("string"===typeof t&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=Fu(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=Cd(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(u.size){const t={};if("boolean"!==typeof a.initial){const n=Fu(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;const i=o(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Md(),r=!0}}}function Od(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Id(t,e)}function Nd(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Md(){return{animate:Nd(!0),whileInView:Nd(),whileHover:Nd(),whileTap:Nd(),whileDrag:Nd(),whileFocus:Nd(),exit:Nd()}}class Ld{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Fd=0;const zd={animation:{Feature:class extends Ld{constructor(e){super(e),e.animationState||(e.animationState=Rd(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();El(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Ld{constructor(){super(...arguments),this.id=Fd++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},Ud={x:!1,y:!1};function Vd(){return Ud.x||Ud.y}function Bd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Wd=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function qd(e){return{point:{x:e.pageX,y:e.pageY}}}function Hd(e,t,n,r){return Bd(e,t,(e=>t=>Wd(t)&&e(t,qd(t)))(n),r)}function $d(e){return e.max-e.min}function Kd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Ia(t.min,t.max,e.origin),e.scale=$d(n)/$d(t),e.translate=Ia(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Gd(e,t,n,r){Kd(e.x,t.x,n.x,r?r.originX:void 0),Kd(e.y,t.y,n.y,r?r.originY:void 0)}function Yd(e,t,n){e.min=n.min+t.min,e.max=e.min+$d(t)}function Qd(e,t,n){e.min=t.min-n.min,e.max=e.min+$d(t)}function Xd(e,t,n){Qd(e.x,t.x,n.x),Qd(e.y,t.y,n.y)}function Jd(e){return[e("x"),e("y")]}const Zd=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},eh=(e,t)=>Math.abs(e-t);class th{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=ih(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=eh(e.x,t.x),r=eh(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=vs;this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=nh(t,this.transformPagePoint),ms.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=ih("pointercancel"===e.type?this.lastMoveEventInfo:nh(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!Wd(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const a=nh(qd(e),this.transformPagePoint),{point:s}=a,{timestamp:l}=vs;this.history=[{...s,timestamp:l}];const{onSessionStart:u}=t;u&&u(e,ih(a,this.history)),this.removeListeners=Ku(Hd(this.contextWindow,"pointermove",this.handlePointerMove),Hd(this.contextWindow,"pointerup",this.handlePointerUp),Hd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ys(this.updatePoint)}}function nh(e,t){return t?{point:t(e.point)}:e}function rh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ih(e,t){let{point:n}=e;return{point:n,delta:rh(n,ah(t)),offset:rh(n,oh(t)),velocity:sh(t,.1)}}function oh(e){return e[0]}function ah(e){return e[e.length-1]}function sh(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=ah(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Gu(t)));)n--;if(!r)return{x:0,y:0};const o=Yu(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function lh(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function uh(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const ch=.35;function dh(e,t,n){return{min:hh(e,t),max:hh(e,n)}}function hh(e,t){return"number"===typeof e?e:e[t]||0}const fh=new WeakMap;class ph{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new th(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(qd(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?Ud[o]?null:(Ud[o]=!0,()=>{Ud[o]=!1}):Ud.x||Ud.y?null:(Ud.x=Ud.y=!0,()=>{Ud.x=Ud.y=!1}),!this.openDragLock))return;var o;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jd(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Qa.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=$d(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&ms.postRender(()=>i(e,t)),Wu(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Jd(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:Zd(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ms.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!gh(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?Ia(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Ia(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Du(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:r,bottom:i,right:o}=t;return{x:lh(e.x,r,o),y:lh(e.y,n,i)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ch;return!1===e?e=0:!0===e&&(e=ch),{x:dh(e,"left","right"),y:dh(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Jd(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Du(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Ba(e,n),{scroll:i}=t;return i&&(za(r.x,i.offset.x),za(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:uh(e.x,t.x),y:uh(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=Ea(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=Jd(a=>{if(!gh(a,t,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});const u=r?200:1e6,c=r?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Wu(this.visualElement,e),n.start(Sd(e,n,0,t,this.visualElement,!1))}stopAnimation(){Jd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Jd(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Jd(t=>{const{drag:n}=this.getProps();if(!gh(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];i.set(e[t]-Ia(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Du(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Jd(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=$d(e),i=$d(t);return i>r?n=Bc(t.min,t.max-r,e.min):r>i&&(n=Bc(e.min,e.max-i,t.min)),qa(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Jd(t=>{if(!gh(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];n.set(Ia(i,o,r[t]))})}addListeners(){if(!this.visualElement.current)return;fh.set(this.visualElement,this);const e=Hd(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Du(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ms.read(t);const i=Bd(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Jd(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=ch,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function gh(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const mh=e=>(t,n)=>{e&&ms.postRender(()=>e(t,n))};function yh(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(wu);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:i,register:o}=n,a=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return o(a)},[e]);const s=(0,t.useCallback)(()=>e&&i&&i(a),[a,i,e]);return!r&&i?[!1,s]:[!0]}const vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bh(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const wh={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Xa.test(e))return e;e=parseFloat(e)}return`${bh(e,t.target.x)}% ${bh(e,t.target.y)}%`}},xh={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,o=Ks.parse(e);if(o.length>5)return i;const a=Ks.createTransformer(e),s="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,u=r.y.scale*n.y;o[0+s]/=l,o[1+s]/=u;const c=Ia(l,u,.5);return"number"===typeof o[2+s]&&(o[2+s]/=c),"number"===typeof o[3+s]&&(o[3+s]/=c),a(o)}};let Sh=!1;class kh extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Bl[t]=e[t],Sa(t)&&(Bl[t].isCSSVariable=!0)}(Ch),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),Sh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:o}=n;return o?(o.isPresent=i,Sh=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ms.postRender(()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yl.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Sh=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Th(e){const[n,r]=yh(),i=(0,t.useContext)(ru);return(0,Eo.jsx)(kh,{...e,layoutGroup:i,switchLayoutGroup:(0,t.useContext)(Pu),isPresent:n,safeToRemove:r})}const Ch={borderRadius:{...wh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wh,borderTopRightRadius:wh,borderBottomLeftRadius:wh,borderBottomRightRadius:wh,boxShadow:xh};function Eh(e){return"object"===typeof e&&null!==e}function Ih(e){return Eh(e)&&"ownerSVGElement"in e}const Dh=(e,t)=>e.depth-t.depth;class Ah{constructor(){this.children=[],this.isDirty=!1}add(e){ul(this.children,e),this.isDirty=!0}remove(e){cl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Dh),this.isDirty=!1,this.children.forEach(e)}}function _h(e,t){const n=ll.now(),r=i=>{let{timestamp:o}=i;const a=o-n;a>=t&&(ys(r),e(a-t))};return ms.setup(r,!0),()=>ys(r)}const Ph=["TopLeft","TopRight","BottomLeft","BottomRight"],jh=Ph.length,Rh=e=>"string"===typeof e?parseFloat(e):e,Oh=e=>"number"===typeof e||Xa.test(e);function Nh(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Mh=Fh(0,.5,Lc),Lh=Fh(.5,.95,ds);function Fh(e,t,n){return r=>r<e?0:r>t?1:n(Bc(e,t,r))}function zh(e,t){e.min=t.min,e.max=t.max}function Uh(e,t){zh(e.x,t.x),zh(e.y,t.y)}function Vh(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Bh(e,t,n,r,i){return e=Ra(e-=t,1/n,r),void 0!==i&&(e=Ra(e,1/i,r)),e}function Wh(e,t,n,r,i){let[o,a,s]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Qa.test(t)&&(t=parseFloat(t),t=Ia(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let s=Ia(o.min,o.max,r);e===o&&(s-=t),e.min=Bh(e.min,t,n,s,i),e.max=Bh(e.max,t,n,s,i)}(e,t[o],t[a],t[s],t.scale,r,i)}const qh=["x","scaleX","originX"],Hh=["y","scaleY","originY"];function $h(e,t,n,r){Wh(e.x,t,qh,n?n.x:void 0,r?r.x:void 0),Wh(e.y,t,Hh,n?n.y:void 0,r?r.y:void 0)}function Kh(e){return 0===e.translate&&1===e.scale}function Gh(e){return Kh(e.x)&&Kh(e.y)}function Yh(e,t){return e.min===t.min&&e.max===t.max}function Qh(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Xh(e,t){return Qh(e.x,t.x)&&Qh(e.y,t.y)}function Jh(e){return $d(e.x)/$d(e.y)}function Zh(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ef{constructor(){this.members=[]}add(e){ul(this.members,e),e.scheduleRender()}remove(e){if(cl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const tf={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},nf=["","X","Y","Z"];let rf=0;function of(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function af(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=qu(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ms,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&af(r)}function sf(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=rf++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ps.value&&(tf.nodes=tf.calculatedTargetDeltas=tf.calculatedProjections=0),this.nodes.forEach(cf),this.nodes.forEach(yf),this.nodes.forEach(vf),this.nodes.forEach(df),ps.addProjectionMetrics&&ps.addProjectionMetrics(tf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ah)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new dl),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=Ih(e)&&!(Ih(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;ms.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=_h(i,250),vh.hasAnimatedSinceResize&&(vh.hasAnimatedSinceResize=!1,this.nodes.forEach(mf)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||o.getDefaultTransition()||Tf,{onLayoutAnimationStart:s,onLayoutAnimationComplete:l}=o.getProps(),u=!this.targetLayout||!Xh(this.targetLayout,i),c=!n&&r;if(this.options.layoutRoot||this.resumeFrom||c||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e={...zu(a,"layout"),onPlay:s,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,c)}else n||mf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bf),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&af(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ff);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(pf);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gf),this.nodes.forEach(lf),this.nodes.forEach(uf)):this.nodes.forEach(pf),this.clearAllSnapshots();const e=ll.now();vs.delta=qa(0,1e3/60,e-vs.timestamp),vs.timestamp=e,vs.isProcessing=!0,bs.update.process(vs),bs.preRender.process(vs),bs.render.process(vs),vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yl.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hf),this.sharedNodes.forEach(wf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ms.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ms.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||$d(this.snapshot.measuredBox.x)||$d(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Gh(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||_a(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),If((r=n).x),If(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Af))){const{scroll:e}=this.root;e&&(za(t.x,e.offset.x),za(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(Uh(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;r!==this.root&&i&&o.layoutScroll&&(i.wasRoot&&Uh(t,e),za(t.x,i.offset.x),za(t.y,i.offset.y))}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Uh(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Va(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),_a(e.latestValues)&&Va(n,e.latestValues)}return _a(this.latestValues)&&Va(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Uh(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!_a(e.latestValues))continue;Aa(e.latestValues)&&e.updateSnapshot();const r=xl();Uh(r,e.measurePageBox()),$h(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return _a(this.latestValues)&&$h(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=vs.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Xd(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Uh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,s;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,s=this.relativeParent.target,Yd(o.x,a.x,s.x),Yd(o.y,a.y,s.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Uh(this.target,this.layout.layoutBox),Ma(this.target,this.targetDelta)):Uh(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Xd(this.relativeTargetOrigin,this.target,e.target),Uh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ps.value&&tf.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Aa(this.parent.latestValues)&&!Pa(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===vs.timestamp&&(n=!1),n)return;const{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!i)return;Uh(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,a;t.x=t.y=1;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Va(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Ma(e,a)),r&&_a(o.latestValues)&&Va(e,o.latestValues))}t.x<Fa&&t.x>La&&(t.x=1),t.y<Fa&&t.y>La&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:s}=e;s?(this.projectionDelta&&this.prevProjectionDelta?(Vh(this.prevProjectionDelta.x,this.projectionDelta.x),Vh(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Gd(this.projectionDelta,this.layoutCorrected,s,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&Zh(this.projectionDelta.x,this.prevProjectionDelta.x)&&Zh(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",s)),ps.value&&tf.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(s&&!u&&!0===this.options.crossfade&&!this.path.some(kf));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h;xf(o.x,e.x,n),xf(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xd(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){Sf(e.x,t.x,n.x,r),Sf(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&(l=this.relativeTarget,h=d,Yh(l.x,h.x)&&Yh(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Uh(d,this.relativeTarget)),s&&(this.animationValues=i,function(e,t,n,r,i,o){i?(e.opacity=Ia(0,n.opacity??1,Mh(r)),e.opacityExit=Ia(t.opacity??1,0,Lh(r))):o&&(e.opacity=Ia(t.opacity??1,n.opacity??1,r));for(let a=0;a<jh;a++){const i=`border${Ph[a]}Radius`;let o=Nh(t,i),s=Nh(n,i);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||Oh(o)===Oh(s)?(e[i]=Math.max(Ia(Rh(o),Rh(s),r),0),(Qa.test(s)||Qa.test(o))&&(e[i]+="%")):e[i]=s)}(t.rotate||n.rotate)&&(e.rotate=Ia(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ms.update(()=>{vh.hasAnimatedSinceResize=!0,Qu.layout++,this.motionValue||(this.motionValue=gl(0)),this.currentAnimation=function(e,t,n){const r=ol(e)?e:gl(e);return r.start(Sd("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Qu.layout--},onComplete:()=>{Qu.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Df(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=$d(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=$d(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Uh(t,n),Va(t,i),Gd(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ef);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&of("z",e,r,this.animationValues);for(let i=0;i<nf.length;i++)of(`rotate${nf[i]}`,e,r,this.animationValues),of(`skew${nf[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Su(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Su(t?.pointerEvents)||""),void(this.hasProjected&&!_a(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let o=function(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y,a=n?.z||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:o,skewX:a,skewY:s}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),o&&(r+=`rotateY(${o}deg) `),a&&(r+=`skewX(${a}deg) `),s&&(r+=`skewY(${s}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return 1===s&&1===l||(r+=`scale(${s}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(o=n(i,o)),e.transform=o;const{x:a,y:s}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*s.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const l in Bl){if(void 0===i[l])continue;const{correct:t,applyTo:n,isCSSVariable:a}=Bl[l],s="none"===o?i[l]:t(i[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=s}else a?this.options.visualElement.renderState.vars[l]=s:e[l]=s}this.options.layoutId&&(e.pointerEvents=r===this?Su(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(ff),this.root.sharedNodes.clear()}}}function lf(e){e.updateLayout()}function uf(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;"size"===i?Jd(e=>{const r=o?t.measuredBox[e]:t.layoutBox[e],i=$d(r);r.min=n[e].min,r.max=r.min+i}):Df(i,t.layoutBox,n)&&Jd(r=>{const i=o?t.measuredBox[r]:t.layoutBox[r],a=$d(n[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Gd(a,n,t.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?Gd(s,e.applyTransform(r,!0),t.measuredBox):Gd(s,n,t.layoutBox);const l=!Gh(a);let u=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const a={x:{min:0,max:0},y:{min:0,max:0}};Xd(a,t.layoutBox,i.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};Xd(s,n,o.layoutBox),Xh(a,s)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function cf(e){ps.value&&tf.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function df(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function hf(e){e.clearSnapshot()}function ff(e){e.clearMeasurements()}function pf(e){e.isLayoutDirty=!1}function gf(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function mf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yf(e){e.resolveTargetDelta()}function vf(e){e.calcProjection()}function bf(e){e.resetSkewAndRotation()}function wf(e){e.removeLeadSnapshot()}function xf(e,t,n){e.translate=Ia(t.translate,0,n),e.scale=Ia(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Sf(e,t,n,r){e.min=Ia(t.min,n.min,r),e.max=Ia(t.max,n.max,r)}function kf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Tf={duration:.45,ease:[.4,0,.1,1]},Cf=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ef=Cf("applewebkit/")&&!Cf("chrome/")?Math.round:ds;function If(e){e.min=Ef(e.min),e.max=Ef(e.max)}function Df(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Jh(t),i=Jh(n),o=.2,!(Math.abs(r-i)<=o));var r,i,o}function Af(e){return e!==e.root&&e.scroll?.wasRoot}const _f=sf({attachResizeListener:(e,t)=>Bd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pf={current:void 0},jf=sf({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Pf.current){const e=new _f({});e.mount(window),e.setOptions({layoutScroll:!0}),Pf.current=e}return Pf.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Rf={pan:{Feature:class extends Ld{constructor(){super(...arguments),this.removePointerDownListener=ds}onPointerDown(e){this.session=new th(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zd(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:mh(e),onStart:mh(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&ms.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=Hd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Ld{constructor(e){super(e),this.removeGroupControls=ds,this.removeListeners=ds,this.controls=new ph(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ds}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:jf,MeasureLayout:Th}};function Of(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function Nf(e){return!("touch"===e.pointerType||Vd())}function Mf(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&ms.postRender(()=>i(t,qd(t)))}function Lf(e){return Eh(e)&&"offsetHeight"in e}const Ff=(e,t)=>!!t&&(e===t||Ff(e,t.parentElement)),zf=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Uf=new WeakSet;function Vf(e){return t=>{"Enter"===t.key&&e(t)}}function Bf(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Wf(e){return Wd(e)&&!Vd()}function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,o]=Of(e,n),a=e=>{const r=e.currentTarget;if(!Wf(e))return;Uf.add(r);const o=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),Uf.has(r)&&Uf.delete(r),Wf(e)&&"function"===typeof o&&o(e,{success:t})},s=e=>{a(e,r===window||r===document||n.useGlobalTarget||Ff(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",s,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),Lf(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Vf(()=>{if(Uf.has(n))return;Bf(n,"down");const e=Vf(()=>{Bf(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Bf(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),t=e,zf.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),o}function Hf(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&ms.postRender(()=>i(t,qd(t)))}const $f=new WeakMap,Kf=new WeakMap,Gf=e=>{const t=$f.get(e.target);t&&t(e)},Yf=e=>{e.forEach(Gf)};function Qf(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;Kf.has(r)||Kf.set(r,{});const i=Kf.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(Yf,{root:t,...n})),i[o]}(t);return $f.set(e,n),r.observe(e),()=>{$f.delete(e),r.unobserve(e)}}const Xf={some:0,all:1};const Jf={inView:{Feature:class extends Ld{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Xf[r]};return Qf(this.node.current,o,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Ld{mount(){const{current:e}=this.node;e&&(this.unmount=qf(e,(e,t)=>(Hf(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return Hf(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Ld{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Jm){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ku(Bd(this.node.current,"focus",()=>this.onFocus()),Bd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Ld{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,o]=Of(e,n),a=e=>{if(!Nf(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const o=e=>{Nf(e)&&(r(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,i)};return r.forEach(e=>{e.addEventListener("pointerenter",a,i)}),o}(e,(e,t)=>(Mf(this.node,t,"Start"),e=>Mf(this.node,e,"End"))))}unmount(){}}}},Zf=Lu({...zd,...Jf,...Rf,...{layout:{ProjectionNode:jf,MeasureLayout:Th}}},nu);class ep extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Lf(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tp(e){let{children:n,isPresent:r,anchorX:i,root:o}=e;const a=(0,t.useId)(),s=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,t.useContext)(ou);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:c,right:d}=l.current;if(r||!s.current||!e||!t)return;const h="left"===i?`left: ${c}`:`right: ${d}`;s.current.dataset.motionPopId=a;const f=document.createElement("style");u&&(f.nonce=u);const p=o??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${h}px !important;\n            top: ${n}px !important;\n          }\n        `),()=>{p.contains(f)&&p.removeChild(f)}},[r]),(0,Eo.jsx)(ep,{isPresent:r,childRef:s,sizeRef:l,children:t.cloneElement(n,{ref:s})})}const np=e=>{let{children:n,initial:r,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l,anchorX:u,root:c}=e;const d=xu(rp),h=(0,t.useId)();let f=!0,p=(0,t.useMemo)(()=>(f=!1,{id:h,initial:r,isPresent:i,custom:a,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;o&&o()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[i,d,o]);return s&&f&&(p={...p}),(0,t.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[i]),t.useEffect(()=>{!i&&!d.size&&o&&o()},[i]),"popLayout"===l&&(n=(0,Eo.jsx)(tp,{isPresent:i,anchorX:u,root:c,children:n})),(0,Eo.jsx)(wu.Provider,{value:p,children:n})};function rp(){return new Map}const ip=e=>e.key||"";function op(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const ap=e=>{let{children:n,custom:r,initial:i=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:s="sync",propagate:l=!1,anchorX:u="left",root:c}=e;const[d,h]=yh(l),f=(0,t.useMemo)(()=>op(n),[n]),p=l&&!d?[]:f.map(ip),g=(0,t.useRef)(!0),m=(0,t.useRef)(f),y=xu(()=>new Map),[v,b]=(0,t.useState)(f),[w,x]=(0,t.useState)(f);ju(()=>{g.current=!1,m.current=f;for(let e=0;e<w.length;e++){const t=ip(w[e]);p.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}},[w,p.length,p.join("-")]);const S=[];if(f!==v){let e=[...f];for(let t=0;t<w.length;t++){const n=w[t],r=ip(n);p.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===s&&S.length&&(e=S),x(op(e)),b(f),null}const{forceRender:k}=(0,t.useContext)(ru);return(0,Eo.jsx)(Eo.Fragment,{children:w.map(e=>{const t=ip(e),n=!(l&&!d)&&(f===w||p.includes(t));return(0,Eo.jsx)(np,{isPresent:n,initial:!(g.current&&!i)&&void 0,custom:r,presenceAffectsLayout:a,mode:s,root:c,onExitComplete:n?void 0:()=>{if(!y.has(t))return;y.set(t,!0);let e=!0;y.forEach(t=>{t||(e=!1)}),e&&(k?.(),x(m.current),l&&h?.(),o&&o())},anchorX:u,children:e},t)})})},sp=[{key:"photos",label:"Photos",color:"#3b82f6"},{key:"3d_tours",label:"3D Tour",color:"#10b981"}];function lp(e){const t=sp.find(t=>t.key===e);return t?t.color:"#888"}function up(e){const t=sp.find(t=>t.key===e);return t?t.label:e}function cp(e){var r,i,o,a,s,l,u;let{onCancel:c,onSubmit:d,users:h=[]}=e;const[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)(""),[y,v]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[x,S]=(0,t.useState)(-1),[k,T]=(0,t.useState)({}),[C,E]=(0,t.useState)({}),[I,D]=(0,t.useState)(""),[A,_]=(0,t.useState)(!1),[P,j]=(0,t.useState)(0),[R,O]=(0,t.useState)({mediaType:"",propertyType:"",isNewProperty:null,propertyName:"",updateType:"",notes:"",assignees:{photographer:"",editor:""},priorityRequest:!1,expectedCompletion:"",fileLinks:[]});(0,t.useEffect)(()=>{!async function(){try{const e=(await Promise.resolve().then(n.bind(n,5472))).getFirestore(),t=(await Promise.resolve().then(n.bind(n,5472))).doc(e,"autocomplete","propertyNames"),r=await(await Promise.resolve().then(n.bind(n,5472))).getDoc(t);if(r.exists()&&Array.isArray(r.data().names)){const e=r.data().names;p(e),window.propertyList=e;const t={},n={};e.forEach(e=>{let{name:r,unitCode:i,ical:o}=e;i&&(n[i.toLowerCase()]={name:r,unitCode:i,ical:o},t[i.toLowerCase()]=i),r&&(t[r.toLowerCase()]=i)}),T(t),E(n)}else p([]),T({}),E({}),window.propertyList=[]}catch(e){p([]),window.propertyList=[]}}()},[]),(0,t.useEffect)(()=>{2===P&&_(!1)},[P,R.propertyType,R.isNewProperty]),(0,t.useEffect)(()=>{if(g.length>=2){const e=g.toLowerCase(),t=f.filter(t=>t.name.toLowerCase().includes(e)||t.unitCode.toLowerCase().includes(e));v(t.map(e=>e.unitCode)),w(t.length>0),S(-1)}else v([]),w(!1),S(-1)},[g,f]);const N=e=>{var t;O(t=>({...t,propertyName:e}));const n=(null===(t=C[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===t?void 0:t.name)||e;m(n),w(!1),D(""),_(!0)},M=()=>{O({mediaType:"",propertyType:"",isNewProperty:null,propertyName:"",updateType:"",notes:"",assignees:{photographer:"",editor:""},priorityRequest:!1,expectedCompletion:"",fileLinks:[]}),j(0),m(""),v([]),w(!1),S(-1),D(""),_(!1)};return(0,Eo.jsxs)("div",{style:{width:"100%",minHeight:420,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",background:"var(--bg-card)",boxShadow:"0 2px 16px rgba(80,120,200,0.07)",borderRadius:16,marginTop:40,padding:40},children:[(0,Eo.jsxs)(ap,{mode:"wait",children:[0===P&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.28},style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:24,marginBottom:32},children:"Select Media Type"}),(0,Eo.jsx)("div",{style:{display:"flex",gap:32,marginBottom:24},children:sp.map(e=>(0,Eo.jsx)("button",{onClick:()=>O(t=>({...t,mediaType:e.key})),style:{minWidth:140,minHeight:80,background:R.mediaType===e.key?lp(e.key):"#f4f6fa",color:R.mediaType===e.key?"#fff":lp(e.key),border:R.mediaType===e.key?`2.5px solid ${lp(e.key)}`:"2px solid #e0e6f0",borderRadius:16,fontWeight:700,fontSize:22,boxShadow:R.mediaType===e.key?"0 2px 12px rgba(80,120,200,0.08)":"none",cursor:"pointer",transition:"all 0.17s cubic-bezier(.4,0,.2,1)",outline:"none"},children:up(e.key)},e.key))}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,marginTop:24},children:[(0,Eo.jsx)("button",{onClick:M,style:{background:"none",color:"#888",border:"none",fontSize:16,cursor:"pointer",textDecoration:"underline"},children:"Clear"}),(0,Eo.jsx)("button",{onClick:()=>j(1),disabled:!R.mediaType,style:{background:R.mediaType?lp(R.mediaType):"#e0e6f0",color:R.mediaType?"#fff":"#bbb",border:"none",borderRadius:9,fontWeight:600,fontSize:18,minWidth:120,minHeight:44,marginLeft:12,cursor:R.mediaType?"pointer":"not-allowed",opacity:R.mediaType?1:.7,boxShadow:R.mediaType?"0 2px 8px rgba(80,120,200,0.10)":"none",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:"Next \u2192"})]})]},"media-type"),1===P&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.28},style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:24,marginBottom:32},children:"Select Property Type"}),(0,Eo.jsx)("div",{style:{display:"flex",gap:24,marginBottom:24},children:["Home/Condo","Complex","Neighborhood","Community","Real Estate"].map(e=>(0,Eo.jsx)("button",{onClick:()=>{O(t=>({...t,propertyType:e,isNewProperty:"Home/Condo"===e?null:t.isNewProperty}))},style:{minWidth:120,minHeight:60,background:R.propertyType===e?"#4078ff":"#f4f6fa",color:R.propertyType===e?"#fff":"#4078ff",border:R.propertyType===e?"2.5px solid #4078ff":"2px solid #e0e6f0",borderRadius:14,fontWeight:600,fontSize:19,boxShadow:R.propertyType===e?"0 2px 12px rgba(80,120,200,0.08)":"none",cursor:"pointer",transition:"all 0.17s cubic-bezier(.4,0,.2,1)",outline:"none"},children:e},e))}),"Home/Condo"===R.propertyType&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:-16},transition:{duration:.23},style:{marginBottom:24,display:"flex",gap:18},children:[(0,Eo.jsx)("button",{onClick:()=>O(e=>({...e,isNewProperty:!1})),style:{minWidth:110,minHeight:44,background:!1===R.isNewProperty?"#4078ff":"#f4f6fa",color:!1===R.isNewProperty?"#fff":"#4078ff",border:!1===R.isNewProperty?"2.5px solid #4078ff":"2px solid #e0e6f0",borderRadius:10,fontWeight:600,fontSize:17,cursor:"pointer",outline:"none"},children:"Existing Property"}),(0,Eo.jsx)("button",{onClick:()=>O(e=>({...e,isNewProperty:!0})),style:{minWidth:110,minHeight:44,background:!0===R.isNewProperty?"#4078ff":"#f4f6fa",color:!0===R.isNewProperty?"#fff":"#4078ff",border:!0===R.isNewProperty?"2.5px solid #4078ff":"2px solid #e0e6f0",borderRadius:10,fontWeight:600,fontSize:17,cursor:"pointer",outline:"none"},children:"New Property"})]}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,marginTop:24},children:[(0,Eo.jsx)("button",{onClick:()=>j(0),style:{background:"none",color:"#888",border:"none",fontSize:16,cursor:"pointer",textDecoration:"underline"},children:"\u2190 Back"}),(0,Eo.jsx)("button",{onClick:()=>j(2),disabled:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty,style:{background:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty?"#e0e6f0":"#4078ff",color:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty?"#bbb":"#fff",border:"none",borderRadius:9,fontWeight:600,fontSize:18,minWidth:120,minHeight:44,marginLeft:12,cursor:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty?"not-allowed":"pointer",opacity:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty?.7:1,boxShadow:!R.propertyType||"Home/Condo"===R.propertyType&&null===R.isNewProperty?"none":"0 2px 8px rgba(80,120,200,0.10)",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:"Next \u2192"})]})]},"property-type"),2===P&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.28},style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:24,marginBottom:32},children:"Property Name"}),"Home/Condo"===R.propertyType&&!1===R.isNewProperty?(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsxs)("div",{style:{position:"relative",width:320},children:[(0,Eo.jsx)("input",{type:"text",value:g,onChange:e=>{m(e.target.value),D(""),_(!1)},onFocus:()=>g.length>=2&&y.length>0&&w(!0),onBlur:()=>setTimeout(()=>w(!1),120),onKeyDown:e=>{b&&("ArrowDown"===e.key?S(e=>Math.min(e+1,y.length-1)):"ArrowUp"===e.key?S(e=>Math.max(e-1,0)):"Enter"===e.key&&x>=0&&y[x]&&(N(y[x]),e.preventDefault()))},placeholder:"Start typing to search...",style:{width:320,padding:"12px 16px",fontSize:18,borderRadius:8,border:"2px solid #e0e6f0",marginBottom:12},autoComplete:"off"}),I&&(0,Eo.jsx)("div",{style:{color:"#c00",marginTop:4,marginBottom:2,fontWeight:500},children:I}),b&&(0,Eo.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#222",color:"#fff",border:"1px solid #333",borderRadius:8,zIndex:20,maxHeight:220,overflowY:"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.13)",marginTop:2},children:y.map((e,t)=>{var n,r,i,o,a;return(0,Eo.jsxs)("div",{onMouseDown:()=>N(e),style:{padding:"8px 14px",background:t===x?"#3b82f6":"inherit",color:t===x?"#fff":"inherit",cursor:"pointer"},children:[(0,Eo.jsx)("span",{style:{fontWeight:600},children:(null===(n=C[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===n?void 0:n.name)||e}),(0,Eo.jsx)("span",{style:{color:"#aaa",marginLeft:8,fontSize:13},children:null!==(r=C[null===e||void 0===e?void 0:e.toLowerCase()])&&void 0!==r&&r.unitCode&&(null===(i=C[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===i?void 0:i.unitCode)!==(null===(o=C[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===o?void 0:o.name)?`(${null===(a=C[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===a?void 0:a.unitCode})`:null})]},e)})})]}),(0,Eo.jsx)("div",{style:{color:"#888",fontSize:14,marginBottom:12},children:"Select from existing properties"})]}):(0,Eo.jsx)("input",{type:"text",value:R.propertyName,onChange:e=>O(t=>({...t,propertyName:e.target.value})),placeholder:"Enter property name",style:{width:320,padding:"12px 16px",fontSize:18,borderRadius:8,border:"2px solid #e0e6f0",marginBottom:12},autoComplete:"off"}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,marginTop:24},children:[(0,Eo.jsx)("button",{onClick:()=>j(1),style:{background:"none",color:"#888",border:"none",fontSize:16,cursor:"pointer",textDecoration:"underline"},children:"\u2190 Back"}),(0,Eo.jsx)("button",{onClick:()=>j(3),disabled:"Home/Condo"===R.propertyType&&!1===R.isNewProperty?!R.propertyName||!C[null===(r=R.propertyName)||void 0===r?void 0:r.toLowerCase()]||!A:("Home/Condo"===R.propertyType&&R.isNewProperty,!R.propertyName),style:{background:("Home/Condo"===R.propertyType&&!1===R.isNewProperty?R.propertyName&&C[null===(i=R.propertyName)||void 0===i?void 0:i.toLowerCase()]&&g===(null===(o=C[null===(a=R.propertyName)||void 0===a?void 0:a.toLowerCase()])||void 0===o?void 0:o.name):("Home/Condo"===R.propertyType&&R.isNewProperty,R.propertyName))?"#4078ff":"#e0e6f0",color:R.propertyName&&("Home/Condo"!==R.propertyType||!1!==R.isNewProperty||Array.isArray(window.propertyList)&&window.propertyList.some(e=>e.name===R.propertyName))?"#fff":"#bbb",border:"none",borderRadius:9,fontWeight:600,fontSize:18,minWidth:120,minHeight:44,marginLeft:12,cursor:("Home/Condo"===R.propertyType&&!1===R.isNewProperty?R.propertyName&&C[null===(s=R.propertyName)||void 0===s?void 0:s.toLowerCase()]&&A:("Home/Condo"===R.propertyType&&R.isNewProperty,R.propertyName))?"pointer":"not-allowed",opacity:("Home/Condo"===R.propertyType&&!1===R.isNewProperty?R.propertyName&&C[null===(l=R.propertyName)||void 0===l?void 0:l.toLowerCase()]&&A:("Home/Condo"===R.propertyType&&R.isNewProperty,R.propertyName))?1:.7,boxShadow:("Home/Condo"===R.propertyType&&!1===R.isNewProperty?R.propertyName&&C[null===(u=R.propertyName)||void 0===u?void 0:u.toLowerCase()]&&A:("Home/Condo"===R.propertyType&&R.isNewProperty,R.propertyName))?"0 2px 8px rgba(80,120,200,0.10)":"none",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:"Next \u2192"})]})]},"property-name")]}),3===P&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.28},style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:24,marginBottom:32},children:"Update Type & Notes"}),(0,Eo.jsx)("div",{style:{display:"flex",gap:18,marginBottom:24,flexWrap:"wrap",justifyContent:"center"},children:["New Property","Full Reshoot","Interior/Exterior Update","Construction Update","Specific Owner Request","Other"].map(e=>(0,Eo.jsx)("button",{onClick:()=>O(t=>({...t,updateType:e})),style:{minWidth:140,minHeight:44,background:R.updateType===e?"#4078ff":"#f4f6fa",color:R.updateType===e?"#fff":"#4078ff",border:R.updateType===e?"2.5px solid #4078ff":"2px solid #e0e6f0",borderRadius:10,fontWeight:600,fontSize:17,marginBottom:8,boxShadow:R.updateType===e?"0 2px 12px rgba(80,120,200,0.08)":"none",cursor:"pointer",outline:"none",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:e},e))}),(0,Eo.jsx)("textarea",{value:R.notes,onChange:e=>O(t=>({...t,notes:e.target.value})),placeholder:"Add notes for this task (optional)",style:{width:"60%",color:"var(--text-main)",minHeight:80,padding:"12px 16px",fontSize:16,borderRadius:8,background:"var(--bg-main)",border:"2px solid var(--input-border)",marginBottom:22,resize:"vertical"}}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,marginTop:16},children:[(0,Eo.jsx)("button",{onClick:()=>j(2),style:{background:"none",color:"#888",border:"none",fontSize:16,cursor:"pointer",textDecoration:"underline"},children:"\u2190 Back"}),(0,Eo.jsx)("button",{onClick:()=>j(4),disabled:!R.updateType,style:{background:R.updateType?"#4078ff":"#e0e6f0",color:R.updateType?"#fff":"#bbb",border:"none",borderRadius:9,fontWeight:600,fontSize:18,minWidth:120,minHeight:44,marginLeft:12,cursor:R.updateType?"pointer":"not-allowed",opacity:R.updateType?1:.7,boxShadow:R.updateType?"0 2px 8px rgba(80,120,200,0.10)":"none",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:"Next \u2192"})]})]},"update-type-notes"),4===P&&(0,Eo.jsxs)(Zf.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.28},style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:24,marginBottom:28},children:"Assignment & Details"}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:32,marginBottom:18,flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[(0,Eo.jsxs)("div",{style:{minWidth:220},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:"Photographer"}),(0,Eo.jsxs)("select",{value:R.assignees.photographer,onChange:e=>O(t=>({...t,assignees:{...t.assignees,photographer:e.target.value}})),style:{width:"100%",padding:"10px 12px",fontSize:16,borderRadius:7,border:"2px solid var(--input-border)",background:"var(--bg-main)",marginBottom:6,color:"var(--text-main)"},children:[(0,Eo.jsx)("option",{value:"",children:"Unassigned"}),h.filter(e=>"photographer"===e.role).map(e=>(0,Eo.jsx)("option",{value:e.uid,children:e.displayName||e.email},e.uid))]})]}),(0,Eo.jsxs)("div",{style:{minWidth:220},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:"Editor"}),(0,Eo.jsxs)("select",{value:R.assignees.editor,onChange:e=>O(t=>({...t,assignees:{...t.assignees,editor:e.target.value}})),style:{width:"100%",padding:"10px 12px",fontSize:16,borderRadius:7,border:"2px solid var(--input-border)",background:"var(--bg-main)",marginBottom:6,color:"var(--text-main)"},children:[(0,Eo.jsx)("option",{value:"",children:"Unassigned"}),h.filter(e=>"editor"===e.role).map(e=>(0,Eo.jsx)("option",{value:e.uid,children:e.displayName||e.email},e.uid))]})]})]}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:32,marginBottom:18,flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[(0,Eo.jsxs)("label",{style:{fontWeight:600,alignSelf:"center"},children:[(0,Eo.jsx)("input",{type:"checkbox",checked:R.priorityRequest,onChange:e=>O(t=>({...t,priorityRequest:e.target.checked})),style:{marginRight:8}}),"Priority Request"]}),(0,Eo.jsxs)("div",{style:{minWidth:220},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:"Expected Completion"}),(0,Eo.jsx)("input",{type:"date",value:R.expectedCompletion,onChange:e=>O(t=>({...t,expectedCompletion:e.target.value})),min:(new Date).toISOString().split("T")[0],style:{width:"100%",padding:"10px 12px",fontSize:16,borderRadius:7,border:"2px solid var(--input-border)",background:"var(--bg-main)",color:"var(--text-main)"}})]})]}),(0,Eo.jsxs)("div",{style:{width:"60%",marginBottom:18},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:"File Links (optional, comma-separated URLs)"}),(0,Eo.jsx)("input",{type:"text",value:R.fileLinks.join(", "),onChange:e=>{const t=e.target.value;O(e=>({...e,fileLinks:t.split(",").map(e=>e.trim()).filter(Boolean)}))},placeholder:"Paste URLs, separated by commas",style:{width:"100%",padding:"10px 12px",fontSize:16,borderRadius:7,border:"2px solid var(--input-border)",background:"var(--bg-main)",color:"var(--text-main)"}})]}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,marginTop:18},children:[(0,Eo.jsx)("button",{onClick:()=>j(3),style:{background:"none",color:"#888",border:"none",fontSize:16,cursor:"pointer",textDecoration:"underline"},children:"\u2190 Back"}),(0,Eo.jsx)("button",{onClick:async()=>{!1!==await d(R)&&M()},style:{background:"#4078ff",color:"#fff",border:"none",borderRadius:9,fontWeight:600,fontSize:18,minWidth:140,minHeight:44,marginLeft:12,cursor:"pointer",opacity:1,boxShadow:"0 2px 8px rgba(80,120,200,0.10)",transition:"all 0.17s cubic-bezier(.4,0,.2,1)"},children:"Create Task"})]})]},"assignment-priority"),(0,Eo.jsx)("button",{onClick:()=>{M(),c()},style:{position:"absolute",top:18,right:18,background:"none",border:"none",color:"#888",fontSize:26,cursor:"pointer"},title:"Close",children:"\xd7"})]})}const dp="StageProgressBar_wrapper__SESn1",hp="StageProgressBar_bar__AyXWh",fp="StageProgressBar_segment__8Tz5O",pp="StageProgressBar_completed__+DgHO",gp="StageProgressBar_filled__jw+FZ",mp="StageProgressBar_active__ycMeo",yp="StageProgressBar_activeStalled__IRi-s",vp="StageProgressBar_empty__F6drk",bp="StageProgressBar_currentStage__lr59W",wp="StageProgressBar_visuallyHidden__OQ2Fc",xp="StageProgressBar_tooltip__hs0Zk",Sp="StageProgressBar_tooltipPortal__ppyf+";function kp(e){let{assignments:t,users:n,style:r={}}=e;return(0,Eo.jsx)("div",{className:xp,style:r,children:t.map((e,t)=>{const r=n.find(t=>(t.uid||t.id)===e.editorId),i=r?r.displayName||r.email||r.uid||r.id:e.editorId,o="Custom"===e.label?e.customLabel:e.label;return(0,Eo.jsxs)("div",{style:{marginBottom:4,fontWeight:500},children:[i," ",(0,Eo.jsxs)("span",{style:{color:"#bbb",fontSize:13},children:["(",o,")"]})]},e.editorId+"-"+(e.label||""))})})}function Tp(e){let{assignments:n,users:r}=e;const[i,o]=(0,t.useState)(!1),a=(0,t.useRef)(),[s,l]=(0,t.useState)({});return(0,Eo.jsxs)("span",{ref:a,style:{position:"relative",fontWeight:600,cursor:"pointer"},onMouseEnter:function(){if(a.current){const e=a.current.getBoundingClientRect();l({left:e.left+e.width/2+window.scrollX,top:e.top+window.scrollY-12,width:e.width})}o(!0)},onMouseLeave:function(){o(!1)},tabIndex:0,"aria-label":"Show assigned editors",children:[n.length," Assigned",i&&(0,Eo.jsx)("div",{style:{position:"fixed",left:s.left,top:s.top,zIndex:99999,pointerEvents:"none"},children:(0,Eo.jsx)(kp,{assignments:n,users:r})})]})}const Cp={photos:{NAMES:["Created","Scheduling","Shooting","1st Round Edits","In House Edits","Publishing","Completed"],DESCRIPTIONS:{Created:"Task has been created.",Scheduling:"Awaiting available shooting date.",Shooting:"Shooting is scheduled and pending.","1st Round Edits":"Outsourced editing in progress.","In House Edits":"OR editing in progress.",Publishing:"Media is ready to publish.",Completed:"Task is fully completed."}},"3d_tours":{NAMES:["Created","Scheduling","Shooting","Editing","Publishing","Completed"],DESCRIPTIONS:{Created:"Task has been created.",Scheduling:"Awaiting available shooting date.",Shooting:"Shooting is scheduled and pending.",Editing:"Editing in progress.",Publishing:"Media is ready to publish.",Completed:"Task is fully completed."}},default:{NAMES:["Created","Scheduling","Shooting","Editing","Publishing","Completed"],DESCRIPTIONS:{Created:"Task has been created.",Scheduling:"Awaiting available shooting date.",Shooting:"Shooting is scheduled and pending.",Editing:"Editing in progress.",Publishing:"Media is ready to publish.",Completed:"Task is fully completed."}}};function Ep(e){return Cp[e]||Cp.default}function Ip(e){let{stage:n,mediaType:r,editable:i=!1,onStageChange:a,isStalled:s=!1,hideStageLabel:l=!1,showLockIcon:u=!1}=e;const{NAMES:c,DESCRIPTIONS:d}=Ep(r);let h=c.indexOf(n),f=n;-1===h&&("Completed"===n?(h=c.length-1,f="Completed"):(h=0,f=c[0]));const[p,g]=(0,t.useState)(null),[m,y]=(0,t.useState)({left:0,top:0,width:0}),v=(0,t.useRef)([]),b=(0,t.useRef)(null);return(0,t.useLayoutEffect)(()=>{if(null!==p&&v.current[p]){const e=v.current[p].getBoundingClientRect();let t=40;b.current&&(t=b.current.offsetHeight);let n=e.top+window.scrollY-t-8;n<window.scrollY+8&&(n=e.bottom+window.scrollY+8),y({left:e.left+e.width/2,top:n,width:e.width})}},[p]),(0,Eo.jsxs)("div",{className:dp,style:{display:"flex",alignItems:"center",gap:8},children:[(0,Eo.jsxs)("div",{className:hp,onMouseLeave:()=>g(null),children:[c.map((e,t)=>{let r=vp;return"Completed"===n?r=pp:t<h?r=gp:t===h&&(r=s?yp:mp),(0,Eo.jsx)("div",{className:`${fp} ${r}`,"aria-label":e,tabIndex:i?0:-1,ref:e=>v.current[t]=e,style:i?{cursor:"pointer"}:void 0,onClick:i&&a?()=>a(e):void 0,onKeyDown:i&&a?t=>{"Enter"!==t.key&&" "!==t.key||a(e)}:void 0,onMouseEnter:()=>g(t),onFocus:()=>g(t),onBlur:()=>g(null),children:(0,Eo.jsx)("span",{className:wp,children:e})},e)}),null!==p&&o.createPortal((0,Eo.jsxs)("div",{className:`${xp} ${Sp}`,role:"tooltip",ref:b,style:{position:"fixed",left:m.left,top:m.top,transform:"translate(-50%, 0)",pointerEvents:"none",zIndex:99999,opacity:1},children:[(0,Eo.jsx)("strong",{children:c[p]}),(0,Eo.jsx)("div",{children:d[c[p]]})]}),document.body)]}),!l&&(0,Eo.jsx)("span",{className:bp,children:n}),u&&(i?(0,Eo.jsx)(ta,{title:"Progress editing unlocked",style:{marginLeft:8}}):(0,Eo.jsx)(Ko,{title:"Progress editing locked",style:{marginLeft:8}}))]})}if("undefined"!==typeof document&&!document.getElementById("pulse-orange-style")){const e=document.createElement("style");e.id="pulse-orange-style",e.innerHTML="@keyframes pulseOrange {\n  0% { background-color: rgba(255, 184, 117, 0.18); }\n  50% { background-color: rgba(255, 184, 117, 0.38); }\n  100% { background-color: rgba(255, 184, 117, 0.18); }\n}\n@keyframes pulseRed {\n  0% { background-color: rgba(255, 99, 71, 0.13); }\n  50% { background-color: rgba(255, 99, 71, 0.28); }\n  100% { background-color: rgba(255, 99, 71, 0.13); }\n}",document.head.appendChild(e)}const Dp={animation:"pulseOrange 1.8s infinite",backgroundColor:"rgba(255, 184, 117, 0.18)"},Ap={animation:"pulseRed 1.8s infinite",backgroundColor:"rgba(255, 99, 71, 0.13)"};function _p(e){const{NAMES:t}=Ep(null===e||void 0===e?void 0:e.mediaType);return e&&"string"===typeof e.stage&&t.includes(e.stage)?e.stage.replace("Ready to Publish","Publishing"):t[0]}function Pp(e){const t=new Date,n=e.stageUpdated||e.lastProgressUpdate||e.createdAt;if(!n)return!1;return t-new Date(n)>12096e5}const jp=e=>{var t,n,r,i,o,a,s,l,u,c,d,h,f,p,g,m,y,v,b;let{tasks:w=[],onRowClick:x,sortColumn:S,sortDirection:k,onSort:T,users:C=[],visibleColumns:E,customHeaders:I={},customCellRenderers:D={},columnWidths:A={},rowProps:_,enableRowProps:P=!1}=e;const j=e=>{if(!e)return"Unassigned";const t=C.find(t=>t.uid===e||t.id===e);return t?t.displayName||t.email||t.uid||t.id:e};let R=[...w];return"progressState"===S?R.sort((e,t)=>{const{NAMES:n}=Ep(null===e||void 0===e?void 0:e.mediaType),{NAMES:r}=Ep(null===t||void 0===t?void 0:t.mediaType),i=n.indexOf(_p(e)),o=r.indexOf(_p(t));return"asc"===k?i-o:o-i}):S&&R.sort((e,t)=>{const n=e[S],r=t[S];return void 0===n||null===n?1:void 0===r||null===r?-1:"string"===typeof n&&"string"===typeof r?"asc"===k?n.localeCompare(r):r.localeCompare(n):"asc"===k?n-r:r-n}),(0,Eo.jsxs)("div",{style:{width:"100%",boxShadow:"0 2px 16px rgba(80,120,200,0.07)",background:"var(--bg-card)",overflow:"hidden"},children:[(0,Eo.jsx)("style",{children:"\n        .task-table-scroll::-webkit-scrollbar {\n          width: 10px;\n        }\n        .task-table-scroll::-webkit-scrollbar-thumb {\n          background: var(--scrollbar-thumb, #c1c8d1);\n          border-radius: 8px;\n        }\n        .task-table-scroll::-webkit-scrollbar-track {\n          background: var(--scrollbar-track, transparent);\n        }\n        .task-table-scroll {\n          scrollbar-width: thin;\n          scrollbar-color: var(--scrollbar-thumb, #c1c8d1) var(--scrollbar-track, transparent);\n        }\n      "}),(0,Eo.jsx)("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",background:"var(--bg-card)"},children:(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{children:[(!E||E.includes("mediaType"))&&(0,Eo.jsxs)("th",{style:{width:(null===(t=A.mediaType)||void 0===t?void 0:t.width)||"5%",maxWidth:(null===(n=A.mediaType)||void 0===n?void 0:n.maxWidth)||160,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle"},onClick:()=>T&&T("mediaType"),children:[" ","mediaType"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("propertyName"))&&(0,Eo.jsxs)("th",{style:{width:(null===(r=A.propertyName)||void 0===r?void 0:r.width)||"18%",maxWidth:(null===(i=A.propertyName)||void 0===i?void 0:i.maxWidth)||180,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",whiteSpace:"normal",wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle"},onClick:()=>T&&T("propertyName"),children:["Property Name ","propertyName"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("progressState"))&&(0,Eo.jsxs)("th",{style:{width:(null===(o=A.progressState)||void 0===o?void 0:o.width)||"16%",minWidth:(null===(a=A.progressState)||void 0===a?void 0:a.minWidth)||120,maxWidth:(null===(s=A.progressState)||void 0===s?void 0:s.maxWidth)||160,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle"},onClick:()=>T&&T("progressState"),children:["Progress ","progressState"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("updateType"))&&(0,Eo.jsxs)("th",{style:{width:(null===(l=A.updateType)||void 0===l?void 0:l.width)||"25%",maxWidth:(null===(u=A.updateType)||void 0===u?void 0:u.maxWidth)||120,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",whiteSpace:"normal",wordBreak:"break-word",verticalAlign:"middle"},onClick:()=>T&&T("updateType"),children:["Update Type ","updateType"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("assignedEditorDisplayName"))&&(0,Eo.jsxs)("th",{style:{width:(null===(c=A.assignedEditorDisplayName)||void 0===c?void 0:c.width)||"15%",maxWidth:null===(d=A.assignedEditorDisplayName)||void 0===d?void 0:d.maxWidth,textAlign:"center",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle",whiteSpace:"normal",wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>T&&T("assignedEditorDisplayName"),children:["Assigned Editor ","assignedEditorDisplayName"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("expectedCompletion"))&&(0,Eo.jsxs)("th",{style:{width:(null===(h=A.expectedCompletion)||void 0===h?void 0:h.width)||"8%",maxWidth:null===(f=A.expectedCompletion)||void 0===f?void 0:f.maxWidth,textAlign:"center",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle",whiteSpace:"normal",wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>T&&T("expectedCompletion"),children:["Expected Completion ","expectedCompletion"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("emergency"))&&(0,Eo.jsxs)("th",{style:{width:(null===(p=A.emergency)||void 0===p?void 0:p.width)||"8%",maxWidth:null===(g=A.emergency)||void 0===g?void 0:g.maxWidth,textAlign:"center",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle"},onClick:()=>T&&T("emergency"),children:["Priority Request ","emergency"===S&&("asc"===k?"\u25b2":"\u25bc")]}),(!E||E.includes("completedDate"))&&(0,Eo.jsx)("th",{style:{width:(null===(m=A.completedDate)||void 0===m?void 0:m.width)||"16%",maxWidth:null===(y=A.completedDate)||void 0===y?void 0:y.maxWidth,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,userSelect:"none",verticalAlign:"middle"},children:I&&I.completedDate?I.completedDate:"Completed Date"}),(!E||E.includes("createdAt"))&&(0,Eo.jsxs)("th",{style:{width:(null===(v=A.createdAt)||void 0===v?void 0:v.width)||"10%",maxWidth:null===(b=A.createdAt)||void 0===b?void 0:b.maxWidth,textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15,cursor:"pointer",userSelect:"none",verticalAlign:"middle"},onClick:()=>T&&T("createdAt"),children:["Created Date ","createdAt"===S&&("asc"===k?"\u25b2":"\u25bc")]})]})})}),(0,Eo.jsx)("div",{className:"task-table-scroll",style:{maxHeight:"80vh",overflowY:"auto",width:"100%",background:"inherit"},children:(0,Eo.jsx)("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",background:"var(--bg-card)"},children:(0,Eo.jsx)("tbody",{children:0===R.length?(0,Eo.jsx)("tr",{children:(0,Eo.jsx)("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-main)",padding:32},children:"No tasks to display."})}):R.map((e,t)=>{var n,r,i,o,a,s,l,u,c,d,h,f,p,g,m,y,v,b,w;const S=0===t?void 0:"1px solid #e7eaf1",k=6===e.progressState||"Completed"===e.stage,T=(()=>{if(!e.expectedCompletion||k)return!1;const t=(new Date(e.expectedCompletion)-new Date)/864e5;return t>=0&&t<=3})(),I=(()=>{if(!e.expectedCompletion)return!1;return new Date(e.expectedCompletion)<new Date})();return(0,Eo.jsxs)("tr",{...P&&"function"===typeof _?_(e,t):{},onClick:()=>x&&x(e),style:{cursor:x?"pointer":void 0,transition:"background 0.15s",color:"var(--text-main)",...I&&!k?Ap:{},...I||!T||k?{}:Dp},onMouseEnter:e=>{if(x){var t,n;const r="undefined"!==typeof window&&"dark"===(null===(t=window.document)||void 0===t||null===(n=t.documentElement)||void 0===n?void 0:n.getAttribute("data-theme"));e.currentTarget.style.background=r?"rgba(255,255,255,0.06)":"#f7faff",e.currentTarget.style.color="var(--text-main)"}},onMouseLeave:e=>{x&&(e.currentTarget.style.background=T&&!k?"rgba(255,184,117,0.18)":"",e.currentTarget.style.color="var(--text-main)")},children:[(!E||E.includes("mediaType"))&&(0,Eo.jsx)("td",{style:{width:(null===(n=A.mediaType)||void 0===n?void 0:n.width)||"5%",maxWidth:(null===(r=A.mediaType)||void 0===r?void 0:r.maxWidth)||160,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,background:"transparent",overflow:"hidden",verticalAlign:"middle"},children:(0,Eo.jsx)("span",{style:{display:"inline-block",background:lp(e.mediaType),color:"#fff",borderRadius:12,padding:"3px 12px",fontSize:13,fontWeight:600,marginRight:8,verticalAlign:"middle",minWidth:0,maxWidth:120,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:up(e.mediaType)})}),(!E||E.includes("propertyName"))&&(0,Eo.jsx)("td",{style:{width:(null===(i=A.propertyName)||void 0===i?void 0:i.width)||"18%",maxWidth:(null===(o=A.propertyName)||void 0===o?void 0:o.maxWidth)||180,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,whiteSpace:"normal",wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle"},title:e.propertyName,children:e.propertyName}),(!E||E.includes("progressState"))&&(0,Eo.jsx)("td",{style:{width:(null===(a=A.progressState)||void 0===a?void 0:a.width)||"16%",minWidth:(null===(s=A.progressState)||void 0===s?void 0:s.minWidth)||120,maxWidth:(null===(l=A.progressState)||void 0===l?void 0:l.maxWidth)||160,padding:"14px 12px 14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,background:"transparent",overflow:"hidden",verticalAlign:"middle"},children:(0,Eo.jsx)(Ip,{stage:_p(e),mediaType:e.mediaType,isStalled:Pp(e)})}),(!E||E.includes("updateType"))&&(0,Eo.jsx)("td",{className:"update-type-cell",style:{width:(null===(u=A.updateType)||void 0===u?void 0:u.width)||"25%",maxWidth:(null===(c=A.updateType)||void 0===c?void 0:c.maxWidth)||120,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,whiteSpace:"normal",wordBreak:"break-word"},children:e.updateType}),(!E||E.includes("assignedEditorDisplayName"))&&(0,Eo.jsx)("td",{style:{width:(null===(d=A.assignedEditorDisplayName)||void 0===d?void 0:d.width)||"15%",maxWidth:null===(h=A.assignedEditorDisplayName)||void 0===h?void 0:h.maxWidth,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis"},children:Array.isArray(e.assignedEditors)?0===e.assignedEditors.length?(0,Eo.jsx)("span",{style:{color:"#888"},children:"Unassigned"}):1===e.assignedEditors.length?(()=>{const t=e.assignedEditors[0],n=C.find(e=>(e.uid||e.id)===t.editorId),r=n?n.displayName||n.email||n.uid||n.id:t.editorId,i="Custom"===t.label?t.customLabel:t.label;return(0,Eo.jsxs)("span",{children:[r," ",(0,Eo.jsxs)("span",{style:{color:"#888",fontSize:13},children:["(",i,")"]})]})})():(0,Eo.jsx)(Tp,{assignments:e.assignedEditors,users:C}):j(e.assignedEditor)||(0,Eo.jsx)("span",{style:{color:"#888"},children:"Unassigned"})}),(!E||E.includes("expectedCompletion"))&&(0,Eo.jsx)("td",{style:{width:(null===(f=A.expectedCompletion)||void 0===f?void 0:f.width)||"8%",maxWidth:null===(p=A.expectedCompletion)||void 0===p?void 0:p.maxWidth,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S,textAlign:"center"},children:e.expectedCompletion?new Date(e.expectedCompletion).toLocaleDateString():"-"}),(!E||E.includes("emergency"))&&(0,Eo.jsx)("td",{style:{width:(null===(g=A.emergency)||void 0===g?void 0:g.width)||"8%",maxWidth:null===(m=A.emergency)||void 0===m?void 0:m.maxWidth,padding:"14px 12px",fontSize:15,color:"var(--text-main)",fontWeight:600,borderTop:S,textAlign:"center"},children:e.emergency&&(0,Eo.jsx)("span",{style:{display:"inline-block",width:18,height:18,borderRadius:"50%",background:"#d32f2f",opacity:.7,animation:"pulse-dot 1.2s infinite",verticalAlign:"middle",boxShadow:"0 0 0 0 #d32f2f44"}})}),(!E||E.includes("completedDate"))&&(0,Eo.jsx)("td",{style:{width:(null===(y=A.completedDate)||void 0===y?void 0:y.width)||"16%",maxWidth:null===(v=A.completedDate)||void 0===v?void 0:v.maxWidth,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S},children:D&&D.completedDate?D.completedDate(e):e.completedDate?isNaN(new Date(e.completedDate))?"-":new Date(e.completedDate).toLocaleString():"-"}),(!E||E.includes("createdAt"))&&(0,Eo.jsx)("td",{style:{width:(null===(b=A.createdAt)||void 0===b?void 0:b.width)||"10%",maxWidth:null===(w=A.createdAt)||void 0===w?void 0:w.maxWidth,padding:"14px 12px",fontSize:15,color:"var(--text-main)",borderTop:S},children:(()=>{if(!e.createdAt)return"-";if("function"===typeof e.createdAt.toDate){const t=e.createdAt.toDate();return isNaN(t)?"-":t.toLocaleDateString()}const t=new Date(e.createdAt);return isNaN(t)?"-":t.toLocaleDateString()})()})]},e.id||t)})})})})]})};function Rp(e){if(!e)return"";if("string"===typeof e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find(t=>t.id===e||t.uid===e);return t?t.displayName||t.email||t.id||t.uid:e}return"object"===typeof e?e.displayName||e.email||e.uid||JSON.stringify(e):String(e)}const Op="PropertyFilterToggle_toggleSliderContainer__TYrB-",Np="PropertyFilterToggle_toggleSlider__rVKKI",Mp="PropertyFilterToggle_toggleBtn__M17+D",Lp="PropertyFilterToggle_toggleBtnActive__DzIdb",Fp=[{key:"new",label:"New"},{key:"existing",label:"Existing"},{key:"both",label:"All"}];function zp(e){let{value:n="both",onChange:r}=e;const i=t.useRef([]),[o,a]=t.useState({left:0,width:0}),s=Fp.findIndex(e=>e.key===n);return t.useEffect(()=>{if(i.current[s]){const e=i.current[s],t=e.parentElement;e.getBoundingClientRect(),t.getBoundingClientRect();a({left:e.offsetLeft,width:e.offsetWidth})}},[n]),(0,Eo.jsxs)("div",{className:Op,children:[(0,Eo.jsx)("div",{className:Np,style:o,"aria-hidden":"true"}),Fp.map((e,t)=>(0,Eo.jsx)("button",{ref:e=>i.current[t]=e,className:n===e.key?`${Mp} ${Lp}`:Mp,onClick:()=>r(e.key),type:"button","aria-pressed":n===e.key,children:e.label},e.key))]})}function Up(e){let{enabledMediaTypes:n,selectedMediaTypes:r,onChange:i,persistKey:o="mediaTypeToggle"}=e;const{user:a,userData:s,refreshUserData:l}=Do(),[u,c]=(0,t.useState)(!1),d=e=>{let t=[];const u=new Set(r).has(e),d=r.length,h=n;t=u?1===d?h.filter(t=>t!==e):2===d?[e]:r.filter(t=>t!==e):[...r,e],0===t.length&&(t=[...h]),i(t),(async e=>{if(a&&null!==s&&void 0!==s&&s.id){c(!0);try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"users",a.uid);await(0,Co.setDoc)(n,{[o]:e},{merge:!0}),l&&l()}catch(t){}c(!1)}})(t)};return(0,Eo.jsx)("div",{style:{display:"flex",gap:12,alignItems:"center",margin:"12px 0 12px 0"},children:sp.filter(e=>n.includes(e.key)).map(e=>(0,Eo.jsx)("button",{onClick:()=>d(e.key),disabled:u,style:{background:r.includes(e.key)?e.color:"#e5e7eb",color:r.includes(e.key)?"#fff":"#222",border:"none",borderRadius:18,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer",opacity:u?.7:1,boxShadow:r.includes(e.key)?"0 2px 8px rgba(0,0,0,0.10)":"none",transition:"background 0.18s, color 0.18s, box-shadow 0.18s"},"aria-pressed":r.includes(e.key),children:up(e.key)},e.key))})}const Vp=(0,t.createContext)();function Bp(e){let{children:n}=e;const[r,i]=(0,t.useState)([]),o=(0,t.useRef)({}),a=r.length>0?r[r.length-1]:null;return(0,Eo.jsxs)(Vp.Provider,{value:{addUndoAction:e=>{if(!e||"function"!==typeof e.onFinalize)return;const t=Date.now()+Math.random();i(n=>[...n,{...e,id:t}]),o.current[t]=setTimeout(()=>{i(e=>{const n=e.find(e=>e.id===t);return n&&"function"===typeof n.onFinalize&&n.onFinalize(),e.filter(e=>e.id!==t)}),delete o.current[t]},e.duration||1e4)}},children:[n,a&&(0,Eo.jsxs)("div",{style:{position:"fixed",bottom:30,left:"50%",transform:"translateX(-50%)",background:"var(--bg-card, #fff)",color:"var(--text-main, #223)",border:"1.5px solid #ccc",borderRadius:9,boxShadow:"0 2px 12px rgba(0,0,0,0.13)",padding:"14px 20px 14px 20px",zIndex:99999999,display:"flex",alignItems:"center",gap:18,fontSize:16,fontWeight:500,minWidth:220,maxWidth:"90vw"},children:[(0,Eo.jsx)("span",{children:a.description||"Action undone."}),(0,Eo.jsx)("button",{style:{marginLeft:10,background:"#3b82f6",color:"#fff",border:"none",borderRadius:6,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer",boxShadow:"0 1px 4px rgba(60,120,200,0.10)",transition:"background 0.18s"},onClick:()=>(e=>{i(t=>{const n=t.find(t=>t.id===e);return n&&"function"===typeof n.onUndo&&n.onUndo(),o.current[e]&&clearTimeout(o.current[e]),delete o.current[e],t.filter(t=>t.id!==e)})})(a.id),children:"Undo"})]})]})}function Wp(e){let{open:n,onClose:r,onConfirm:i,submitting:o}=e;const[a,s]=(0,t.useState)("");return n?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:12e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>!o&&r(),children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:32,minWidth:340,maxWidth:420,boxShadow:"0 4px 24px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",gap:18,alignItems:"stretch",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:20,marginBottom:6,color:"var(--text-main)"},children:"Mark Task as Complete"}),(0,Eo.jsx)("div",{style:{color:"var(--text-main)",fontSize:15,marginBottom:10},children:"Are you sure you want to mark this task as complete? You may leave an optional note below."}),(0,Eo.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),placeholder:"Completion notes (optional)",style:{minHeight:80,borderRadius:8,border:"1.5px solid var(--input-border, #b8c6e6)",padding:10,fontSize:15,background:"var(--bg-main)",color:"var(--text-main)",marginBottom:10},disabled:o,maxLength:600}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,marginTop:10,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{style:{background:"var(--sidebar-bg)",color:"var(--text-main)",border:"1.5px solid var(--sidebar-border)",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:o?"not-allowed":"pointer",opacity:o?.7:1},onClick:()=>!o&&r(),disabled:o,children:"Cancel"}),(0,Eo.jsx)("button",{style:{background:"#3b82f6",color:"#fff",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:o?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.18)",opacity:o?.7:1},onClick:()=>!o&&i(a),disabled:o,children:o?"Completing...":"Confirm Complete"})]})]})}):null}const qp=(0,t.createContext)();function Hp(e){let{children:n}=e;const[r,i]=(0,t.useState)({visible:!1,message:"",type:"success"}),o=(0,t.useCallback)(function(e){i({visible:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},[]),a=(0,t.useCallback)(()=>{i(e=>({...e,visible:!1}))},[]);return(0,Eo.jsx)(qp.Provider,{value:{banner:r,showBanner:o,hideBanner:a},children:n})}function $p(){return(0,t.useContext)(qp)}var Kp=n(6347),Gp=n(8001),Yp=n(2882);const Qp={},Xp=3e5;function Jp(e){let{open:n,onClose:r,onSave:i,onClear:o,value:a,firestoreValue:s,loading:l,error:u,success:c,onChange:d,rangeEnabled:h=!1,title:f,unitCode:p}=e;const[g,m]=(0,t.useState)([]),y=((0,t.useRef)({}),new Date("2025-07-19T00:00:00-05:00")),v=new Date("2026-07-19T00:00:00-05:00"),[b,w]=t.useState(a&&a.date?a.date:"");t.useEffect(()=>{n&&w(a&&a.date?a.date:"")},[n,a]),(0,t.useEffect)(()=>{let e=!1;return n&&p&&async function(){if(!n||!p)return;const t=p,r=Date.now();if(Qp[t]&&Qp[t].expires>r)m(Qp[t].dates);else try{const n=(0,Co.getFirestore)(),i=(0,Co.doc)(n,"autocomplete","propertyNames"),o=await(0,Co.getDoc)(i);let a=null;if(o.exists()){const e=(o.data().names||[]).find(e=>e.unitCode===p||e.name===p);e&&e.ical&&(a=e.ical)}if(!a)return void m([]);const s=await fetch(a),l=await s.text(),u=(0,Yp.parseICalEvents)(l),c=[];for(const e of u){let t=new Date(e.start);for(;t<e.end;)c.push(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`),t.setDate(t.getDate()+1)}Qp[t]={dates:c,expires:r+Xp},e||m(c)}catch(Jm){m([])}}(),()=>{e=!0}},[n,p]);const x=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return g.includes(`${t}-${n}-${r}`)};function S(e){if(!x(e))return(0,Eo.jsx)("span",{children:e.getDate()});const t=new Date(e);t.setDate(e.getDate()-1);const n=new Date(e);n.setDate(e.getDate()+1);const r=x(t),i=x(n);let o="0";r||i?r?i||(o="0 8px 8px 0"):o="8px 0 0 8px":o="8px";const a=r?"-4px":"0",s=i?"-4px":"0";return(0,Eo.jsx)("div",{style:{background:"#b0b0b0",color:"#fff",borderRadius:o,width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"pointer",marginLeft:a,marginRight:s,boxSizing:"border-box",zIndex:2},title:"Reserved",children:(0,Eo.jsx)("span",{children:e.getDate()})})}return(0,t.useEffect)(()=>{let e=!1;return n&&p&&async function(){if(!n||!p)return;const t=p,r=Date.now();if(Qp[t]&&Qp[t].expires>r)m(Qp[t].dates);else try{const n=(0,Co.getFirestore)(),i=(0,Co.doc)(n,"autocomplete","propertyNames"),o=await(0,Co.getDoc)(i);let a=null;if(o.exists()){const e=(o.data().names||[]).find(e=>e.unitCode===p||e.name===p);e&&e.ical&&(a=e.ical)}if(!a)return void m([]);const s=await fetch(a),l=await s.text(),u=(0,Yp.parseICalEvents)(l),c=[];for(const e of u){let t=new Date(e.start);for(;t<e.end;)c.push(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`),t.setDate(t.getDate()+1)}Qp[t]={dates:c,expires:r+Xp},e||m(c)}catch(Jm){m([])}}(),()=>{e=!0}},[n,p]),n?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.target===e.currentTarget&&r()},"aria-modal":"true",role:"dialog",children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card, #181e29)",borderRadius:18,boxShadow:"0 4px 32px rgba(60,80,130,0.13)",padding:32,minWidth:340,maxWidth:"90vw",minHeight:0,display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("div",{style:{marginBottom:18,position:"relative",width:"100%",minHeight:32},children:(0,Eo.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,textAlign:"center",fontWeight:600,fontSize:18,color:"var(--text-main)",pointerEvents:"none"},children:f||(h?"Select Date Range":"Select Date")})}),h?(0,Eo.jsx)(Kp.ad,{months:1,direction:"horizontal",locale:Gp.default,editableDateInputs:!0,onChange:e=>{if(d){const t=e.selection.startDate,n=e.selection.endDate,r=e=>e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:"";d({start:r(t),end:r(n)})}},moveRangeOnFirstSelection:!1,ranges:[a&&a.start&&a.end?{startDate:(()=>{if(!a.start||!/^\d{4}-\d{2}-\d{2}$/.test(a.start))return new Date;const[e,t,n]=a.start.split("-");return new Date(Number(e),Number(t)-1,Number(n))})(),endDate:(()=>{if(!a.end||!/^\d{4}-\d{2}-\d{2}$/.test(a.end))return new Date;const[e,t,n]=a.end.split("-");return new Date(Number(e),Number(t)-1,Number(n))})(),key:"selection"}:{startDate:new Date,endDate:new Date,key:"selection"}],minDate:y,maxDate:v,showDateDisplay:!1,dayContentRenderer:S,style:{borderRadius:14,boxShadow:"0 2px 16px rgba(60,80,130,0.08)",background:"var(--bg-card, #fff)",color:"var(--text-main)",fontSize:16}}):(0,Eo.jsx)(Kp.Vv,{date:b?(()=>{const[e,t,n]=b.split("-");return new Date(Number(e),Number(t)-1,Number(n))})():new Date,onChange:e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");w(`${t}-${n}-${r}`)},locale:Gp.default,dayContentRenderer:S,minDate:y,maxDate:v,style:{borderRadius:14,boxShadow:"0 2px 16px rgba(60,80,130,0.08)",background:"var(--bg-card, #fff)",fontSize:16}}),(0,Eo.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginTop:18},children:[(0,Eo.jsx)("div",{children:(()=>{if(h&&s&&("string"===typeof s.start&&s.start.length>=10&&!s.start.startsWith("Invalid")&&"string"===typeof s.end&&s.end.length>=10&&!s.end.startsWith("Invalid")||"object"===typeof s.start&&s.start&&s.start.seconds&&"object"===typeof s.end&&s.end&&s.end.seconds))return(0,Eo.jsx)("button",{type:"button",onClick:()=>{o&&o(),r&&r()},"aria-label":"Clear date",style:{background:"#3b82f6",padding:"7px 18px",border:"none",color:"#fff",borderRadius:7,marginRight:12,fontWeight:600,fontSize:15,cursor:"pointer"},children:"Remove Dates"});if(!h&&s){if("string"===typeof s&&s.length>=10&&/^\d{4}-\d{2}-\d{2}/.test(s))return(0,Eo.jsx)("button",{type:"button",onClick:()=>{o&&o(),r&&r()},"aria-label":"Clear date",style:{background:"#3b82f6",padding:"7px 18px",border:"none",color:"#fff",borderRadius:7,marginRight:12,fontWeight:600,fontSize:15,cursor:"pointer"},children:"Remove Date"});if("object"===typeof s){if(s.seconds)return(0,Eo.jsx)("button",{type:"button",onClick:()=>{o&&o(),r&&r()},"aria-label":"Clear date",style:{background:"#3b82f6",padding:"7px 18px",border:"none",color:"#fff",borderRadius:7,marginRight:12,fontWeight:600,fontSize:15,cursor:"pointer"},children:"Remove Date"});if("string"===typeof s.date&&10===s.date.length)return(0,Eo.jsx)("button",{type:"button",onClick:()=>{o&&o(),r&&r()},"aria-label":"Clear date",style:{background:"#3b82f6",padding:"7px 18px",border:"none",color:"#fff",borderRadius:7,marginRight:12,fontWeight:600,fontSize:15,cursor:"pointer"},children:"Remove Date"})}}return null})()}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Eo.jsx)("button",{style:{padding:"7px 18px",borderRadius:7,background:"#3b82f6",color:"#fff",border:"none",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:()=>{if(h)if(a&&a.start&&a.end){const e=new Date(a.start),t=new Date(a.end);isNaN(e)||isNaN(t)?i&&i(""):i&&i({start:e.toISOString(),end:t.toISOString()})}else i&&i("");else b&&i&&i(b)},disabled:l,children:l?"Saving...":"Save"}),(0,Eo.jsx)("button",{style:{padding:"7px 18px",borderRadius:7,background:"var(--sidebar-bg)",color:"var(--text-main)",border:"none",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:r,disabled:l,children:"Cancel"})]})]}),c&&(0,Eo.jsx)("div",{style:{color:"#22c55e",fontWeight:500,fontSize:15,marginTop:10},children:c}),u&&(0,Eo.jsx)("div",{style:{color:"#e74c3c",fontWeight:500,fontSize:15,marginTop:10},children:u})]})}):null}var Zp=n(2608);function eg(e){let{open:t,onConfirm:n,onCancel:r,submitting:i}=e;return t?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:12e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>!i&&r(),children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:32,width:"22%",boxShadow:"0 4px 24px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",alignItems:"center"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("div",{style:{fontSize:22,fontWeight:600,marginBottom:18,color:"var(--text-main)"},children:"Archive Task?"}),(0,Eo.jsx)("div",{style:{fontSize:16,color:"var(--text-main)",marginBottom:28,textAlign:"center"},children:"Are you sure you want to archive this task? It will be hidden from all lists until restored."}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18},children:[(0,Eo.jsx)("button",{style:{background:"#e0e7ef",color:"#223",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:i?"not-allowed":"pointer",opacity:i?.7:1},onClick:r,disabled:i,children:"Cancel"}),(0,Eo.jsx)("button",{style:{background:"#b82e2e",color:"#fff",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:i?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.18)",opacity:i?.7:1},onClick:n,disabled:i,children:i?"Archiving...":"Confirm Archive"})]})]})}):null}function tg(e){let{open:n,onClose:r,multiEditorAssignments:i=[],users:o=[],handleEditorChange:a,handleLabelChange:s,handleCustomLabelChange:l,addEditorAssignment:u,removeEditorAssignment:c,assignmentModalError:d,originalAssignments:h,iconBtn:f,handleMultiEditorAssign:p,photographer:g,setPhotographer:m,originalPhotographer:y}=e;const v=t.useMemo(()=>JSON.stringify(i)===h&&g===y,[i,h,g,y]);return n&&i&&0!==i.length?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:r,children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",color:"var(--text-main)",border:"1.5px solid var(--button-border)",borderRadius:10,padding:24,maxWidth:480,width:"94vw",boxShadow:"0 4px 24px rgba(80,120,200,0.12)",zIndex:1100,position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsxs)("div",{style:{marginBottom:15},children:[(0,Eo.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:20},children:"Assign Photographer"}),(0,Eo.jsxs)("select",{value:g||"",onChange:e=>m(e.target.value),style:{width:"100%",minWidth:120,padding:"8px 8px",borderRadius:6,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:15,marginBottom:15},children:[(0,Eo.jsx)("option",{value:"",children:"Unassigned"}),o.filter(e=>e.displayName||e.email||e.uid||e.id).map(e=>(0,Eo.jsx)("option",{value:e.uid||e.id,children:e.displayName||e.email||e.uid||e.id},e.uid||e.id))]})]}),(0,Eo.jsx)("div",{style:{marginBottom:20,fontWeight:600,fontSize:17},children:"Assign Editors"}),i.map((e,t)=>{const n=i.map((e,n)=>n!==t?e.editorId:null).filter(Boolean),r=o.filter(e=>"editor"===e.role&&(e.displayName||e.email||e.uid||e.id)&&!n.includes(e.uid||e.id));i[0]&&i[0].editorId;return(0,Eo.jsxs)("div",{style:{width:"100%",marginBottom:30},children:[(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,Eo.jsxs)("select",{value:e.editorId,onChange:e=>{a(t,e.target.value),""===e.target.value&&s(t,"")},style:{width:1===i.length&&0===t&&""===e.editorId?"100%":"55%",minWidth:120,padding:"8px 8px",borderRadius:6,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:15,flexShrink:0},children:[1===i.length&&0===t&&(0,Eo.jsx)("option",{value:"",children:"Unassigned"}),r.map(e=>(0,Eo.jsx)("option",{value:e.uid||e.id,children:e.displayName||e.email||e.uid||e.id},e.uid||e.id))]}),(i.length>1||0!==t||""!==e.editorId)&&(0,Eo.jsxs)("select",{value:e.label,onChange:e=>s(t,e.target.value),style:{width:"30%",padding:"8px 8px",borderRadius:6,border:"1.5px solid var(--sidebar-border)",color:"var(--text-main)",background:"var(--bg-main)",fontSize:15,flexShrink:0},children:[(0,Eo.jsx)("option",{value:"All",children:"All"}),(0,Eo.jsx)("option",{value:"Interior",children:"Interior"}),(0,Eo.jsx)("option",{value:"Exterior",children:"Exterior"}),(0,Eo.jsx)("option",{value:"Custom",children:"Custom"})]}),(0,Eo.jsx)("div",{style:{flex:1}}),(i.length>1||0!==t||""!==e.editorId)&&(0,Eo.jsxs)("div",{style:{width:"15%",display:"flex",gap:2,marginLeft:12},children:[i.length>1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>c(t),style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:18,width:22,height:22,display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Remove",children:"\u2715"}),t===i.length-1&&(0,Eo.jsx)("button",{type:"button",onClick:u,style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:18,width:22,height:22,display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Add Editor",children:"\uff0b"})]})]}),"Custom"===e.label&&(0,Eo.jsx)("input",{type:"text",value:e.customLabel||"",onChange:e=>l(t,e.target.value),placeholder:"Enter label",style:{marginTop:5,width:"85%",padding:"8px 8px",borderRadius:6,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,boxSizing:"border-box",flexShrink:0},required:!0})]},t)}),v&&(0,Eo.jsx)("div",{style:{color:"#e38e4d",background:"rgba(255,184,117,0.14)",borderRadius:6,padding:"6px 12px",marginBottom:8,fontSize:14,textAlign:"center"},children:"No change to assignment."}),d&&(0,Eo.jsx)("div",{style:{color:"#e74c3c",marginBottom:8},children:d}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:25},children:[(0,Eo.jsx)("button",{style:{...f,background:"var(--sidebar-bg)",color:"var(--text-main)",fontWeight:600,padding:"7px 18px",border:"1.5px solid var(--sidebar-border)"},onClick:r,children:"Cancel"}),(0,Eo.jsx)("button",{style:{...f,background:"#3b82f6",color:"#fff",fontWeight:600,padding:"7px 18px"},onClick:p,disabled:v,children:"Confirm"})]})]})}):null}function ng(e){let{open:t,onClose:n,reportIssueText:r,setReportIssueText:i,onSubmit:o,submitting:a,errorBanner:s}=e;return t?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:n,children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",color:"var(--text-main)",border:"1.5px solid var(--button-border)",borderRadius:10,padding:24,maxWidth:420,width:"94vw",boxShadow:"0 4px 24px rgba(80,120,200,0.12)",zIndex:1100,position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("button",{onClick:n,style:{position:"absolute",top:12,right:12,background:"none",border:"none",color:"#888",fontSize:22,cursor:"pointer"},title:"Close",children:(0,Eo.jsx)(sa,{})}),(0,Eo.jsx)("div",{style:{marginBottom:16,fontWeight:600,fontSize:17},children:"Report Issue"}),(0,Eo.jsx)("textarea",{value:r,onChange:e=>i(e.target.value),rows:5,placeholder:"Describe the issue...",style:{width:"100%",padding:12,borderRadius:8,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,marginBottom:12,background:"var(--bg-main)",color:"var(--text-main)",boxSizing:"border-box",resize:"vertical"},disabled:a}),s&&(0,Eo.jsx)("div",{style:{color:"#e74c3c",marginBottom:10},children:s}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{style:{padding:"7px 18px",borderRadius:6,border:"1.5px solid var(--sidebar-border)",background:"var(--sidebar-bg)",color:"var(--text-main)",fontWeight:600},onClick:n,disabled:a,children:"Cancel"}),(0,Eo.jsx)("button",{style:{padding:"7px 18px",borderRadius:6,background:"#e74c3c",color:"#fff",fontWeight:600,border:"none",opacity:a||!r.trim()?.7:1},onClick:o,disabled:a||!r.trim(),children:a?"Submitting...":"Submit"})]})]})}):null}function rg(e){if(!e)return"-";if("object"===typeof e&&e.seconds){const t=new Date(1e3*e.seconds);return t.toLocaleDateString()+" "+t.toLocaleTimeString()}if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,n,r]=e.split("-");return`${Number(n)}/${Number(r)}/${t}`}return"string"!==typeof e||isNaN(Date.parse(e))?e.toString():new Date(e).toLocaleString()}function ig(e){if(!e)return"-";if("object"===typeof e&&e.seconds){return new Date(1e3*e.seconds).toLocaleDateString()}if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,n,r]=e.split("-");return`${Number(n)}/${Number(r)}/${t}`}return"string"!==typeof e||isNaN(Date.parse(e))?e.toString():new Date(e).toLocaleDateString()}function og(e){const{NAMES:t}=Ep(null===e||void 0===e?void 0:e.mediaType);return e&&"string"===typeof e.stage&&t.includes(e.stage)?e.stage:t[0]}const ag=e=>({background:"var(--bg-card)",color:"var(--text-main)",borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:32,margin:e?0:"32px 20px 40px",maxWidth:e?"none":1200,display:"flex",flexDirection:"column",gap:20}),sg={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},lg={background:"var(--button-bg)",border:"1.5px solid var(--button-border)",color:"var(--button-text)",borderRadius:8,padding:"7px 14px",fontWeight:600,fontSize:15,display:"flex",alignItems:"center",gap:8,cursor:"pointer",transition:"background 0.15s, border 0.15s, color 0.15s"},ug={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0 48px",margin:"18px 0 32px 0",width:"100%",minWidth:0,alignItems:"flex-start",...window.innerWidth<650?{gridTemplateColumns:"1fr",gap:"0 0"}:{}},cg={display:"flex",alignItems:"center",gap:14,marginBottom:4,fontSize:16,fontWeight:400,color:"var(--text-main)"},dg={color:"#6b7a90",fontWeight:500},hg=e=>{const[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1);const[a,s]=(0,t.useState)(!1),[l,u]=(0,t.useState)(null),{addUndoAction:c}=(0,t.useContext)(Vp)||{},{showBanner:d}=$p(),h=ee(),{task:f,taskId:p,role:g,currentUser:m,usePublicId:y=!1,users:v=[]}=e,[b,w]=(0,t.useState)(f||null);(0,t.useEffect)(()=>{if(!f&&p){const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"tasks",p);(0,Co.getDoc)(t).then(e=>{e.exists()&&w({id:e.id,...e.data()})})}},[f,p]);const{publicId:x}=te(),S=Do(),[k,T]=(0,t.useState)([]),[C,E]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!p)return void T([]);E(!0);const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"tasks",p,"files"),n=(0,Co.query)(t,(0,Co.orderBy)("createdAt","desc"));(0,Co.getDocs)(n).then(e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));T(t)}).catch(e=>{T([]),console.error("Failed to fetch files for task",p,e)}).finally(()=>E(!1))},[p]);const I=Array.isArray(k)&&k.length>0?k.filter(e=>!0!==e.deleted):Array.isArray(e.fileLinks)&&e.fileLinks.length>0?e.fileLinks.filter(e=>!0!==e.deleted):Array.isArray(null===b||void 0===b?void 0:b.fileLinks)?b.fileLinks.filter(e=>!0!==e.deleted):[],[D,A]=(0,t.useState)(null),[_,P]=(0,t.useState)(!1),[j,R]=(0,t.useState)([{url:"",label:""}]),[O,N]=(0,t.useState)(null),[M,L]=(0,t.useState)(!1),F="manager"===g,[z,U]=(0,t.useState)(null),[V,B]=(0,t.useState)(!1),W=function(e){B(e)};(0,t.useEffect)(()=>{W(!1,"task?.id useEffect")},[null===b||void 0===b?void 0:b.id]),(0,t.useEffect)(()=>()=>{B(!1)},[]),(0,t.useEffect)(()=>{var e,t;V?b&&b.scheduledShootDate&&"object"===typeof b.scheduledShootDate?U({start:(null===(e=b.scheduledShootDate.start)||void 0===e?void 0:e.slice(0,10))||"",end:(null===(t=b.scheduledShootDate.end)||void 0===t?void 0:t.slice(0,10))||""}):U(null):U(null)},[V,b]);const[q,H]=(0,t.useState)(!1),[$,K]=(0,t.useState)(""),[G,Y]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(!1),[J,Z]=(0,t.useState)([""]),[ne,re]=(0,t.useState)(!1),[ie]=(0,t.useState)(!1),[oe]=(0,t.useState)(!1),[ae,se]=(0,t.useState)(""),[le,ue]=(0,t.useState)(!1),[ce,de]=(0,t.useState)("");(0,t.useEffect)(()=>{if(le)if(b&&b.expectedCompletion){const e=new Date(b.expectedCompletion),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");de(`${t}-${n}-${r}`)}else de("")},[le,b]);const[he,fe]=(0,t.useState)(!1),[pe]=(0,t.useState)(!1),[ge,me]=(0,t.useState)(""),[ye,ve]=(0,t.useState)(""),[be,we]=(0,t.useState)(!1);(0,t.useEffect)(()=>{a&&R([{url:"",label:""}])},[a]);const[xe,Se]=(0,t.useState)(!0),[ke,Te]=(b&&"number"===typeof b.progressState&&b.progressState,(0,t.useState)("")),[Ce,Ee]=(0,t.useState)(!1),[Ie,De]=(0,t.useState)([]),[Ae,_e]=(0,t.useState)(0),[Pe,je]=(0,t.useState)(new Set),Re=(0,t.useRef)(),[Oe,Ne]=(0,t.useState)(null),[Me,Le]=(0,t.useState)([]),[Fe,ze]=(0,t.useState)(""),[Ue,Ve]=(0,t.useState)(""),[Be,We]=(0,t.useState)(!1),[qe,He]=(0,t.useState)(""),[$e,Ke]=(0,t.useState)("");(0,t.useEffect)(()=>{Be&&Array.isArray(Me)&&0===Me.length&&Le([{editorId:"",label:"Exterior",customLabel:""}])},[Be,Me]);const Ge=e=>{if(!Ie[e]||!Oe)return;const t=Ie[e],n=ke.slice(0,Oe.start),r=ke.slice(Oe.end),i=(t.displayName||t.name||t.email||"").split(" ")[0],o=`@${i}`;Te(n+o+" "+r),Ee(!1),De([]),Ne(null),je(e=>{const n=new Map(e instanceof Map?Array.from(e.entries()):[]);return n.set(i,t.id||t.uid||t.email),n}),setTimeout(()=>{if(Re.current){Re.current.focus();const e=(n+o+" ").length;Re.current.setSelectionRange(e,e)}},0)};(0,t.useEffect)(()=>{const e=(0,Co.getFirestore)();let t;if(Se(!0),y&&x){const n=(0,Co.collection)(e,"tasks"),r=(0,Co.query)(n,(0,Co.where)("publicId","==",Number(x)));t=(0,Co.onSnapshot)(r,e=>{if(e.empty)w(null);else{const t=e.docs[0];w({id:t.id,...t.data()})}Se(!1)})}else if(p){const n=(0,Co.doc)(e,"tasks",p);t=(0,Co.onSnapshot)(n,e=>{w(e.exists()?{id:e.id,...e.data()}:null),Se(!1)})}else w(null),Se(!1);return()=>t&&t()},[y,x,p]);const[Ye,Qe]=(0,t.useState)("files"),[Xe,Je]=(0,t.useState)([]),[Ze,et]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!b||!b.id)return;const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"tasks",b.id,"comments"),n=(0,Co.query)(t,(0,Co.orderBy)("createdAt","asc")),r=(0,Co.onSnapshot)(n,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));Je(t)});return()=>r()},[b]),(0,t.useEffect)(()=>{if(!b||!b.id)return;const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"tasks",b.id,"files"),n=(0,Co.onSnapshot)(t,e=>{T(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>n()},[b]);const[tt,nt]=(0,t.useState)(!1),[rt,it]=(0,t.useState)(!1),[ot,at]=(0,t.useState)({}),[st,lt]=(0,t.useState)(""),[ut,ct]=(0,t.useState)(""),[dt]=(0,t.useState)(!1),[ht]=(0,t.useState)(""),[ft]=(0,t.useState)(""),[pt]=(0,t.useState)(!1),[gt,mt]=(0,t.useState)("");(0,t.useEffect)(()=>{if(b)if(nt(!!b.priorityRequest),console.log("Loaded task.priorityRequest:",b.priorityRequest),b.scheduledShootDate&&"object"===typeof b.scheduledShootDate&&b.scheduledShootDate.start&&b.scheduledShootDate.end)U({start:new Date(b.scheduledShootDate.start).toISOString(),end:new Date(b.scheduledShootDate.end).toISOString()});else if("string"!==typeof b.scheduledShootDate||isNaN(Date.parse(b.scheduledShootDate)))U(null);else{const e=new Date(b.scheduledShootDate).toISOString();U({start:e,end:e})}},[b]),(0,t.useEffect)(()=>{if(!b)return;const e=(0,Co.getFirestore)(),t=new Set;Array.isArray(Xe)&&Xe.forEach(e=>e.user&&"string"===typeof e.user&&t.add(e.user)),Array.isArray(b.log)&&b.log.forEach(e=>e.user&&"string"===typeof e.user&&t.add(e.user));const n=Array.from(t).filter(e=>!ot[e]);if(0===n.length)return;let r=!1;return Promise.all(n.map(async t=>{try{const n=(0,Co.doc)(e,"users",t),r=await(0,Co.getDoc)(n);if(r.exists()){const e=r.data();return[t,e.firstName||(e.displayName?e.displayName.split(" ")[0]:null)||e.email||t]}}catch(Jm){}return[t,t]})).then(e=>{r||at(t=>({...t,...Object.fromEntries(e)}))}),()=>{r=!0}},[Xe,b]),(0,t.useEffect)(()=>{if(!b)return;let e=!1;return async function(){if(b.assignedEditor)try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"users",b.assignedEditor),r=await(0,Co.getDoc)(n);e||(r.exists()?lt(r.data().displayName||r.data().email||b.assignedEditor):lt(b.assignedEditor))}catch(Jm){e||lt(b.assignedEditor)}else lt("");if(b.assignedPhotographer)try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"users",b.assignedPhotographer),r=await(0,Co.getDoc)(n);e||(r.exists()?ct(r.data().displayName||r.data().email||b.assignedPhotographer):ct(b.assignedPhotographer))}catch(Jm){e||ct(b.assignedPhotographer)}else ct("");let t=null;if(b.log&&Array.isArray(b.log)){const e=b.log.find(e=>"created"===e.type&&e.user);e&&(t=e.user)}if(t)try{const n=(0,Co.getFirestore)(),r=(0,Co.doc)(n,"users",t),i=await(0,Co.getDoc)(r);e||(i.exists(),mt(Rp(t,v)))}catch(Jm){e||mt(Rp(t,v))}else mt("")}(),()=>{e=!0}},[b,v]),(0,t.useEffect)(()=>{if(!b)return;let e=!1;return async function(){try{const t=(0,Co.getFirestore)(),n=v.map(e=>{const n=e.uid||e.id;return(0,Co.getDoc)((0,Co.doc)(t,"users",n)).then(e=>{const t=e.data();let r=t.firstName||(t.displayName?t.displayName.split(" ")[0]:null)||t.email||n;return[n,r]})}),r=await Promise.all(n);e||at(e=>({...e,...Object.fromEntries(r)}))}catch(Jm){}}(),()=>{e=!0}},[v,b]);const[yt,vt]=(0,t.useState)([]);(0,t.useEffect)(()=>{if(!b||!b.id)return;const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"tasks",b.id,"issues"),n=(0,Co.query)(t,(0,Co.orderBy)("createdAt","asc")),r=(0,Co.onSnapshot)(n,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));vt(t)});return()=>r()},[b]),(0,t.useEffect)(()=>{if(!b)return;let e=[];Array.isArray(b.log)&&(e=b.log.filter(e=>"issue_reported"===e.type||"issue_resolved"===e.type).map(e=>({...e,id:e.id||e.timestamp||Math.random().toString(36).slice(2),createdAt:e.timestamp||e.createdAt,user:e.user||"",type:e.type})));const t=e.map(e=>{let t="";if(yt.length&&e.createdAt){const n=new Date(e.createdAt).getTime();for(const r of yt){let i=null;if("issue_reported"===e.type&&r.createdAt){if(i=new Date(r.createdAt).getTime(),Math.abs(i-n)<=1e4){t=r.description;break}}else if("issue_resolved"===e.type&&r.resolvedAt&&(i=new Date(r.resolvedAt).getTime(),Math.abs(i-n)<=1e4)){t=r.resolveNotes||"[No description]";break}}}return{...e,description:t||e.description||""}}),n={};[...Xe,...t].forEach(e=>{const t=`${e.createdAt||""}_${e.user||""}_${e.type||""}`;n[t]||(n[t]=e)});const r=Object.values(n).sort((e,t)=>{const n=e.createdAt||e.timestamp,r=t.createdAt||t.timestamp;return new Date(n)-new Date(r)});wt(r)},[b,Xe,yt]);const[bt,wt]=(0,t.useState)([]);function xt(e){B(!1),d(e,"success")}const St=e=>({background:e?"var(--button-bg-hover)":"var(--button-bg)",border:"none",borderBottom:e?"2.5px solid #3b82f6":"2.5px solid transparent",color:e?"var(--button-text-hover)":"var(--button-text)",fontWeight:600,fontSize:15,padding:"10px 24px",borderRadius:"12px 12px 0 0",cursor:"pointer",outline:"none",transition:"background 0.15s, color 0.15s, border 0.15s"}),kt="manager"===g||"photographer"===g;async function Tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.trim()){et(!0);try{var n,r,i,o,a;const s=(0,Co.getFirestore)(),l=(0,Co.collection)(s,"tasks",b.id,"comments");await(0,Co.addDoc)(l,{user:{uid:(null===(n=S.userData)||void 0===n?void 0:n.id)||(null===(r=S.userData)||void 0===r?void 0:r.uid)||"unknown",displayName:(null===(i=S.userData)||void 0===i?void 0:i.displayName)||(null===(o=S.userData)||void 0===o?void 0:o.email)||(null===(a=S.userData)||void 0===a?void 0:a.id)||"Unknown User"},text:e.trim(),taggedUsers:Array.isArray(t)?t:[],createdAt:(0,Co.serverTimestamp)(),timestamp:(new Date).toISOString()}),Te("")}catch(Jm){A("Failed to post comment: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3)}et(!1)}}const Ct=["manager","photographer","editor"].includes(g),Et=(["manager","photographer"].includes(g),["manager","photographer"].includes(g)),It="editor"===g,Dt=["manager","photographer","editor"].includes(g);return xe?(0,Eo.jsx)("div",{style:{padding:32,textAlign:"center",color:"var(--text-main)"},children:"Loading task..."}):b?Dt?(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(Wp,{open:a,onClose:()=>{s(!1)},onConfirm:async e=>{s(!1),P(!1);try{var t,n,r,i,o;const a=(0,Co.getFirestore)(),s=(0,Co.doc)(a,"tasks",b.id),l=(new Date).toISOString(),u=S.userData||{};await(0,Co.updateDoc)(s,{stage:"Completed",lastProgressUpdate:l,completionNotes:e||"",completedBy:u.id||u.uid||"unknown",completedByDisplayName:u.displayName||u.email||u.id||"Unknown User",completedDate:l}),await(0,Zp.addTaskLog)(b.id,{type:"progress_update",user:{uid:(null===(t=S.userData)||void 0===t?void 0:t.id)||(null===(n=S.userData)||void 0===n?void 0:n.uid)||"unknown",displayName:(null===(r=S.userData)||void 0===r?void 0:r.displayName)||(null===(i=S.userData)||void 0===i?void 0:i.email)||(null===(o=S.userData)||void 0===o?void 0:o.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Progress updated to Completed"+(e?` (Notes: ${e})`:"")}),L(!0),setTimeout(()=>L(!1),1500)}catch(Jm){A("Failed to complete task: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3)}N(null)},submitting:!1}),(0,Eo.jsx)(la,{visible:M,process:"Progress update",type:"success",onClose:()=>L(!1)}),(0,Eo.jsx)(la,{visible:rt,process:"Priority update",type:"success",onClose:()=>it(!1)}),(0,Eo.jsxs)("div",{style:ag(e.noMargin),children:[(0,Eo.jsxs)("div",{style:{...sg,display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,flexWrap:"nowrap"},children:[(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",minWidth:0,flex:"1 1 0%",justifyContent:"space-between"},children:[(0,Eo.jsxs)("h2",{style:{fontSize:28,fontWeight:700,margin:"10px 0",maxWidth:"auto",minWidth:0,overflowWrap:"anywhere",wordBreak:"break-word",whiteSpace:"normal",flex:"1 1 0%",lineHeight:1.18,display:"block"},children:[b.propertyName,(0,Eo.jsx)("span",{style:{display:"inline-block",background:lp(b.mediaType),color:"#fff",borderRadius:12,padding:"3px 12px",fontSize:13,fontWeight:600,marginRight:8,verticalAlign:"middle",minWidth:0,maxWidth:120,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",marginLeft:"16px"},children:up(b.mediaType)})]}),(0,Eo.jsxs)("div",{style:{marginLeft:24,display:"flex",alignItems:"center",minWidth:180,flexShrink:0},children:[(0,Eo.jsx)(Ip,{stage:_&&null!==O?O:og(b),mediaType:b.mediaType,editable:_&&F,onStageChange:e=>{if(!_||!F)return;const{NAMES:t}=Ep(null===b||void 0===b?void 0:b.mediaType);t.includes(e)&&N(e)}}),F&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:4,color:_?"#3b82f6":"#888",fontSize:22,display:"flex",alignItems:"center"},title:_?"Lock progress bar (save)":"Unlock to edit progress",onClick:async()=>{if(_){if("Completed"===O&&O!==og(b))return void s(!0);if(P(!1),null!==O&&O!==og(b))try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);await(0,Co.updateDoc)(a,{stage:O,lastProgressUpdate:(new Date).toISOString()}),await(0,Zp.addTaskLog)(b.id,{type:"progress_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:`Progress updated to ${O}`}),L(!0),setTimeout(()=>L(!1),1500)}catch(Jm){A("Failed to update progress: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3)}N(null)}else N(og(b)),P(!0)},children:_?(0,Eo.jsx)(ta,{}):(0,Eo.jsx)(Ko,{})}),(0,Eo.jsx)(eg,{open:n,onConfirm:async function(){if(b&&!i){o(!0);try{const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"tasks",b.id);await(0,Co.updateDoc)(t,{archived:!0}),r(!1),c({description:"Task archived.",onUndo:async()=>{await(0,Co.updateDoc)(t,{archived:!1})},onFinalize:async()=>{var e,t,n,r,i;await(0,Zp.addTaskLog)(b.id,{type:"archived",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Task archived"})},duration:1e4})}catch(Jm){A("Failed to archive task: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3)}o(!1)}},onCancel:()=>r(!1),submitting:i})]})]})]}),(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,margin:"10px 0"},children:[D&&(0,Eo.jsx)(la,{type:"error",message:D,style:{top:24,zIndex:99999}}),Et&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("button",{style:{...lg,color:b.archived?"#b82e2e":"var(--button-text)"},title:b.archived?"Task is archived":"Archive task","aria-label":"Archive task",disabled:b.archived,onClick:()=>r(!0),children:(0,Eo.jsx)(Wo,{size:22})}),(0,Eo.jsxs)("button",{style:lg,title:"Reassign Task",onClick:function(){const e=!Array.isArray(b.assignedEditors)||0===b.assignedEditors.length||b.assignedEditors.every(e=>!e||!e.editorId)?[{editorId:"",label:"Exterior",customLabel:""}]:b.assignedEditors.map(e=>({editorId:e.editorId||"",label:e.label&&e.label.length>0?e.label:"Exterior",customLabel:e.customLabel||""})),t=JSON.stringify(e);Le(e),ze(t),Ve(""),He(b.assignedPhotographer||""),Ke(b.assignedPhotographer||""),setTimeout(()=>We(!0),0)},children:[(0,Eo.jsx)(ia,{size:22})," Reassign"]}),Be&&(0,Eo.jsx)(tg,{open:Be,onClose:()=>We(!1),multiEditorAssignments:Me,users:v,handleEditorChange:function(e,t){Le(n=>n.map((n,r)=>r===e?{...n,editorId:t}:n))},handleLabelChange:function(e,t){Le(n=>n.map((n,r)=>r===e?{...n,label:t,customLabel:"Custom"===t?n.customLabel:""}:n))},handleCustomLabelChange:function(e,t){Le(n=>n.map((n,r)=>r===e?{...n,customLabel:t}:n))},addEditorAssignment:function(){Le(e=>[...e,{editorId:"",label:"Exterior",customLabel:""}])},removeEditorAssignment:function(e){Le(t=>t.filter((t,n)=>n!==e))},assignmentModalError:Ue,originalAssignments:Fe,iconBtn:lg,handleMultiEditorAssign:async function(){Ve("");try{var e,t,n,r,i;const o=Me.map(e=>e.editorId).filter(Boolean);if(o.length!==new Set(o).size)return void Ve("Duplicate editors are not allowed.");for(const e of Me)if("Custom"===e.label&&!e.customLabel.trim())return void Ve("Custom label cannot be blank.");const a=Me.filter(e=>e.editorId),s={};if(JSON.stringify(a)!==Fe&&(s.assignedEditors=a,s.assignedEditorIds=a.map(e=>e.editorId)),qe!==$e&&(s.assignedPhotographer=qe||null),0===Object.keys(s).length)return void Ve("No changes to save.");const l=(0,Co.getFirestore)(),u=(0,Co.doc)(l,"tasks",b.id);await(0,Co.updateDoc)(u,s);const c=Array.isArray(JSON.parse(Fe))?JSON.parse(Fe).map(e=>e.editorId):[],d=a.map(e=>e.editorId),h=d.filter(e=>!c.includes(e)),f=c.filter(e=>!d.includes(e)),p=e=>{if(!e)return"Unassigned";const t=v.find(t=>(t.uid||t.id)===e);return t?t.displayName||t.email||t.uid||t.id:e};let g=[];h.length>0&&g.push(`Added editor(s): ${h.map(p).join(", ")}`),f.length>0&&g.push(`Removed editor(s): ${f.map(p).join(", ")}`);let m="";if(qe!==$e){const e=p($e);m=`Photographer changed: ${e||"Unassigned"} \u2192 ${p(qe)||"Unassigned"}`}const y=[...g];m&&y.push(m);const x=y.length>0?y.join(", "):"No changes.";await(0,Zp.addTaskLog)(b.id,{type:"assignment_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:`Task assignments updated: ${x}`}),w(e=>e?{...e,assignedEditors:a,assignedPhotographer:qe||null}:e),We(!1)}catch(Jm){Ve("Failed to update assignments: "+(Jm.message||Jm))}},photographer:qe,setPhotographer:He,originalPhotographer:$e})]}),It&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsxs)("button",{style:lg,title:"Report Issue",onClick:()=>re(!0),children:[(0,Eo.jsx)(Bo,{size:22})," Report Issue"]}),(0,Eo.jsx)(ng,{open:ne,onClose:()=>re(!1),reportIssueText:ae,setReportIssueText:se,onSubmit:oe,submitting:ie,errorBanner:D})]})]})]}),(0,Eo.jsxs)("div",{style:ug,children:[(0,Eo.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:18},children:[(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Update Type:"})," ",(0,Eo.jsx)("span",{children:b.updateType})]}),"photos"===b.mediaType&&(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Property Type:"})," ",(0,Eo.jsx)("span",{children:b.propertyType||"-"})]}),(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Priority Request:"}),(0,Eo.jsx)("span",{children:(0,Eo.jsx)("input",{type:"checkbox",checked:tt,onChange:kt?async function(){if(!kt)return;const e=!tt;nt(e),console.log("Toggling priorityRequest to:",e);try{var t,n,r,i,o;const a=(0,Co.getFirestore)(),s=(0,Co.doc)(a,"tasks",b.id);await(0,Co.updateDoc)(s,{priorityRequest:e}),await(0,Zp.addTaskLog)(b.id,{type:"priority_request_change",user:{uid:(null===(t=S.userData)||void 0===t?void 0:t.id)||(null===(n=S.userData)||void 0===n?void 0:n.uid)||"unknown",displayName:(null===(r=S.userData)||void 0===r?void 0:r.displayName)||(null===(i=S.userData)||void 0===i?void 0:i.email)||(null===(o=S.userData)||void 0===o?void 0:o.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Priority request set to "+(e?"True":"False")}),it(!0),setTimeout(()=>it(!1),2e3)}catch(Jm){A("Failed to update priority request: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3),nt(!e)}}:void 0,readOnly:!kt,style:{accentColor:"#e74c3c",width:20,height:20,cursor:kt?"pointer":"default",marginRight:8,verticalAlign:"middle"}})})]}),(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Created by:"})," ",(0,Eo.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Eo.jsx)(oa,{size:16})," ",gt||"Unknown"]})]})]}),(0,Eo.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:18},children:[(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Created Date:"})," ",(0,Eo.jsx)("span",{children:ig(b.createdAt)})]}),(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Expected Completion:"}),(0,Eo.jsx)("span",{style:{gap:6,display:"flex",alignItems:"center"},children:b.expectedCompletion?ig(b.expectedCompletion):(0,Eo.jsx)("span",{style:dg,children:"Not Set"})}),("manager"===g||"photographer"===g)&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("button",{style:{marginLeft:4,background:"var(--button-bg)",border:"1.5px solid var(--button-border)",color:"var(--button-text)",borderRadius:7,padding:"4px 10px",fontWeight:600,fontSize:14,cursor:"pointer",transition:"background 0.15s, border 0.15s, color 0.15s"},onClick:()=>ue(!0),children:"Edit"}),(0,Eo.jsx)(Jp,{open:le,onClose:()=>ue(!1),onSave:async function(){fe(!0),me("");try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);let s=null,l="Expected completion date cleared";if(ce){if(!/^\d{4}-\d{2}-\d{2}$/.test(ce))return me("Date format invalid: "+ce),void fe(!1);const[e,t,n]=ce.split("-");if(!e||!t||!n||isNaN(e)||isNaN(t)||isNaN(n))return me("Date split invalid: "+[e,t,n].join(", ")),void fe(!1);const r=new Date(Number(e),Number(t)-1,Number(n),0,0,0,0);if(isNaN(r.getTime()))return me("Invalid time value after Date construction"),void fe(!1);s=r.toISOString(),l=`Expected completion date updated to ${ce}`}await(0,Co.updateDoc)(a,{expectedCompletion:s}),await(0,Zp.addTaskLog)(b.id,{type:"expected_completion_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:l}),ue(!1),d("Expected completion date updated!","success")}catch(Jm){me("Failed to update date: "+(Jm.message||Jm))}fe(!1)},onClear:async function(){fe(!0),me("");try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);await(0,Co.updateDoc)(a,{expectedCompletion:null}),await(0,Zp.addTaskLog)(b.id,{type:"expected_completion_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Expected completion date cleared"}),ue(!1),d("Expected completion date cleared!","success")}catch(Jm){me("Failed to clear date: "+(Jm.message||Jm))}fe(!1)},value:ce?{date:ce}:null,firestoreValue:b&&b.expectedCompletion?b.expectedCompletion:null,loading:he,error:ge,success:pe?"Expected completion date updated!":"",onChange:e=>de((null===e||void 0===e?void 0:e.date)||""),rangeEnabled:!1,title:"Select Expected Completion Date"})]})]}),["Scheduling","Shooting"].includes(og(b))&&(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Shooting Date:"}),"manager"===g||"photographer"===g?(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("span",{style:{display:"flex",alignItems:"center",gap:6},children:b.scheduledShootDate&&"object"===typeof b.scheduledShootDate&&b.scheduledShootDate.start&&b.scheduledShootDate.end?`${new Date(b.scheduledShootDate.start).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})} \u2013 ${new Date(b.scheduledShootDate.end).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}`:b.scheduledShootDate&&"string"===typeof b.scheduledShootDate?new Date(b.scheduledShootDate).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}):(0,Eo.jsx)("span",{style:dg,children:"Not scheduled"})}),(0,Eo.jsx)("button",{style:{padding:"4px 10px",borderRadius:6,background:"var(--button-bg)",color:"var(--text-main)",border:"1.5px solid var(--sidebar-border)",fontWeight:600,fontSize:14,cursor:"pointer",marginLeft:4},onClick:()=>{W(!0,"shooting date button click")},children:(og(b),"Edit")}),(0,Eo.jsx)(Jp,{open:V,onClose:()=>{W(!1,"DateAssignmentModal onClose")},onSave:async function(){if(z&&z.start&&z.end){H(!0),K("");try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);function s(e){const[t,n,r]=e.split("-");return new Date(Number(t),Number(n)-1,Number(r),12,0,0,0).toISOString()}const l={start:s(z.start),end:s(z.end)};await(0,Co.updateDoc)(a,{scheduledShootDate:l}),await(0,Zp.addTaskLog)(b.id,{type:"scheduled_shoot_date_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:`Scheduled shoot date updated to ${l.start} \u2013 ${l.end}`}),xt("Shooting date updated!")}catch(Jm){K("Failed to update date: "+(Jm.message||Jm))}H(!1)}},onClear:async function(){H(!0),K("");try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);await(0,Co.updateDoc)(a,{scheduledShootDate:null}),await(0,Zp.addTaskLog)(b.id,{type:"scheduled_shoot_date_update",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Scheduled shoot date cleared"}),xt("Shooting date updated!"),xt("Shooting date cleared!")}catch(Jm){K("Failed to clear date: "+(Jm.message||Jm))}H(!1)},value:z,firestoreValue:b&&"object"===typeof b.scheduledShootDate?b.scheduledShootDate:null,loading:q,error:$,onChange:e=>U(e),rangeEnabled:!0,title:"Select Shooting Date Range",unitCode:b.propertyName})]}):(0,Eo.jsx)("span",{style:{fontSize:15},children:b.scheduledShootDate&&"object"===typeof b.scheduledShootDate&&b.scheduledShootDate.start&&b.scheduledShootDate.end?`${new Date(b.scheduledShootDate.start).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})} \u2013 ${new Date(b.scheduledShootDate.end).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}`:b.scheduledShootDate&&"string"===typeof b.scheduledShootDate?new Date(b.scheduledShootDate).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}):"Not scheduled"})]}),["Editing","Publishing"].includes(og(b))&&(0,Eo.jsxs)("div",{style:{...cg,display:"flex",alignItems:"flex-start"},children:[(0,Eo.jsxs)("span",{style:{...dg},children:["Assigned Editor",Array.isArray(b.assignedEditors)&&b.assignedEditors.length>1?"s":"",":"]}),(0,Eo.jsx)("span",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:Array.isArray(b.assignedEditors)&&b.assignedEditors.length>0?b.assignedEditors.map((e,t)=>{const n=v.find(t=>(t.uid||t.id)===e.editorId),r=n?n.displayName||n.email||n.uid||n.id:e.editorId,i="Custom"===e.label?e.customLabel:e.label;return(0,Eo.jsxs)("span",{style:{display:"block"},children:[r," ",(0,Eo.jsxs)("span",{style:{color:"#888",fontSize:13},children:["(",i,")"]})]},e.editorId+"-"+(e.label||""))}):(0,Eo.jsx)("span",{style:dg,children:"Unassigned"})})]}),["Scheduling","Shooting"].includes(og(b))&&(0,Eo.jsxs)("div",{style:cg,children:[(0,Eo.jsx)("span",{style:dg,children:"Assigned Photographer:"}),ut?(0,Eo.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Eo.jsx)(oa,{size:16})," ",ut]}):(0,Eo.jsx)("span",{style:dg,children:"Unassigned"})]})]})]}),"editor"===g&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,Eo.jsx)("button",{style:{background:"#1d5413",width:"35%",color:"#fff",border:"none",borderRadius:8,padding:"10px 24px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px rgba(34,197,94,0.10)"},onClick:()=>s(!0),children:"Complete Editing"})}),a&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>s(!1),children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:32,minWidth:340,maxWidth:420,boxShadow:"0 4px 24px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",gap:18,alignItems:"stretch"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:20,marginBottom:6,color:"var(--text-main)"},children:"Complete Editing"}),Array.isArray(b.issues)&&b.issues.some(e=>"closed"!==e.status)&&(0,Eo.jsxs)("div",{style:{background:"#fff3cd",color:"#856404",border:"1px solid #ffeeba",padding:"8px 12px",borderRadius:4,marginBottom:12,fontWeight:500,display:"flex",alignItems:"center",gap:8},children:[(0,Eo.jsx)("span",{style:{fontSize:20,lineHeight:1},children:"\u26a0\ufe0f"}),"This task has unresolved issues."]}),(0,Eo.jsx)("div",{style:{fontWeight:500,color:"var(--label-text, #6b7a90)",fontSize:15,marginBottom:6},children:"Attach File Links:"}),j.map((e,t)=>(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[(0,Eo.jsx)("input",{type:"text",placeholder:"Label (optional)",value:e.label||"",onChange:e=>{const n=[...j];n[t]={...n[t],label:e.target.value},R(n)},style:{padding:"8px 10px",borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,width:130}}),(0,Eo.jsx)("input",{type:"url",placeholder:"Paste file URL (Dropbox, Google Drive, etc)",value:e.url||"",onChange:e=>{const n=[...j];n[t]={...n[t],url:e.target.value},R(n)},style:{padding:"8px 12px",borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,flex:1},autoFocus:0===t}),j.length>1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>R(j.filter((e,n)=>n!==t)),style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:18},title:"Remove",children:"\u2715"}),t===j.length-1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>R([...j,{url:"",label:""}]),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:18},title:"Add Link",children:"\uff0b"})]},t)),(0,Eo.jsx)("label",{style:{fontWeight:500,color:"var(--label-text, #6b7a90)",fontSize:15},children:"Notes:"}),(0,Eo.jsx)("textarea",{value:ye,onChange:e=>ve(e.target.value),style:{minHeight:70,borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",padding:"10px 12px",fontSize:15,resize:"vertical",marginBottom:10,background:"var(--bg-main, #fff)",color:"var(--text-main, #223)"},placeholder:"Add notes (optional)"}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,marginTop:10,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{style:{background:"var(--sidebar-bg, #e7eaf1)",color:"var(--text-main, #335)",border:"1.5px solid var(--sidebar-border, #ccd4e2)",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:()=>s(!1),children:"Cancel"}),(0,Eo.jsx)("button",{style:{background:"#3b82f6",color:"#fff",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:be?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.18)",opacity:be?.6:1},onClick:async function(){if(b){we(!0);try{var e,t,n,r,i;const o=(0,Co.getFirestore)(),a=(0,Co.doc)(o,"tasks",b.id);await(0,Co.updateDoc)(a,{assignedEditor:"",stage:"Publishing",pendingApproval:!0}),await(0,Zp.addTaskLog)(b.id,{type:"editing_completed",user:{uid:(null===(e=S.userData)||void 0===e?void 0:e.id)||(null===(t=S.userData)||void 0===t?void 0:t.uid)||"unknown",displayName:(null===(n=S.userData)||void 0===n?void 0:n.displayName)||(null===(r=S.userData)||void 0===r?void 0:r.email)||(null===(i=S.userData)||void 0===i?void 0:i.id)||"Unknown User"},timestamp:(new Date).toISOString(),description:"Edits submitted for review",notes:ye||""}),s(!1),ve(""),h("/dashboard",{state:{completedTask:!0}})}catch(Jm){A("Failed to submit completion: "+(Jm.message||Jm)),setTimeout(()=>A(null),2e3)}we(!1)}},disabled:be,children:be?"Submitting...":"Complete"})]})]})})]}),(0,Eo.jsxs)("div",{style:{marginTop:10,width:"100%"},children:[(0,Eo.jsxs)("div",{style:{display:"flex",borderBottom:"1.5px solid var(--sidebar-border)",gap:0},children:[(0,Eo.jsx)("button",{style:St("files"===Ye),onClick:()=>Qe("files"),children:"Files"}),(0,Eo.jsxs)("button",{style:St("comments"===Ye),onClick:()=>Qe("comments"),children:["Comments",bt.length>0&&(0,Eo.jsx)("span",{style:{display:"inline-block",minWidth:20,padding:"0 7px",marginLeft:7,fontSize:13,fontWeight:600,lineHeight:"20px",borderRadius:12,background:"var(--sidebar-border, #e0eafc)",color:"var(--text-main)",boxShadow:"0 1px 4px rgba(80,120,200,0.08)",verticalAlign:"middle",textAlign:"center"},children:bt.length})]}),(0,Eo.jsx)("button",{style:St("history"===Ye),onClick:()=>Qe("history"),children:"History"})]}),(0,Eo.jsxs)("div",{className:"tab-scroll",style:{background:"var(--bg-card)",borderRadius:"0 0 12px 12px",minHeight:120,marginTop:0,padding:"20px 12px",border:"1.5px solid var(--button-border)",borderTop:"none",maxHeight:240,overflowY:"auto"},children:["files"===Ye&&(0,Eo.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:16,minHeight:80},children:[I.length>0?[...I].sort((e,t)=>{const n=e.createdAt?new Date(e.createdAt).getTime():0;return(t.createdAt?new Date(t.createdAt).getTime():0)-n}).map((e,t)=>{let n="#f7c948";const r=(e.label||e.url||"").toLowerCase();return"raw"===r?n="#60a5fa":"1920"===r?n="#34d399":("o"===r||"original"===r||e.label&&["o","original"].includes(e.label.trim().toLowerCase()))&&(n="#1e3a8a"),(0,Eo.jsxs)("div",{style:{border:`2.5px solid ${n}`,borderRadius:18,padding:"10px 10px",width:"16%",minWidth:120,minHeight:90,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"var(--bg-card, #fff)",boxShadow:"0 2px 8px rgba(0,0,0,0.03)",position:"relative",overflow:"visible"},title:e.name,onClick:()=>{const t=document.createElement("a");t.href=e.url,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onMouseEnter:()=>u(e.id||t),onMouseLeave:()=>u(null),children:[Ct&&(0,Eo.jsx)("button",{style:{position:"absolute",top:10,right:10,width:24,height:24,borderRadius:"50%",background:"var(--bg-card)",border:"1.5px solid #ccc",color:"#c00",fontWeight:700,fontSize:15,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",opacity:l===(e.id||t)?1:0,pointerEvents:"auto",transition:"opacity 0.18s",zIndex:2},title:"Remove file",onClick:t=>{t.stopPropagation(),"function"===typeof T&&T(t=>t.map(t=>t.id===e.id?{...t,deleted:!0,deletedAt:(new Date).toISOString()}:t)),"function"===typeof c&&c({description:"File removed.",onUndo:async()=>{"function"===typeof T&&T(t=>t.map(t=>t.id===e.id?{...t,deleted:!1,deletedAt:null}:t))},onFinalize:async()=>{try{const t=(0,Co.getFirestore)(),n=e.id?(0,Co.doc)(t,"tasks",b.id,"files",e.id):null;if(!n)return;await(0,Co.updateDoc)(n,{deleted:!0,deletedAt:(new Date).toISOString()})}catch(t){A("Failed to remove file: "+(t.message||t))}},duration:1e4})},tabIndex:-1,children:"\u2715"}),(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:6},children:e.label||e.url}),(0,Eo.jsx)("div",{style:{fontSize:13,color:"#888",wordBreak:"break-all"},children:e.url.length>20?e.url.slice(0,20)+"...":e.url}),e.addedByDisplayName&&(0,Eo.jsxs)("div",{style:{fontSize:12,color:"#aaa",marginTop:4},children:["Added by: ",e.addedByDisplayName]})]},e.url||e.name||t)}):(0,Eo.jsx)("div",{style:{color:"#888",textAlign:"center",justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",width:"39%"}}),Ct&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("div",{style:{border:"2.5px solid transparent",borderRadius:18,padding:"10px 10px",width:"16%",minHeight:90,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"var(--bg-card, #fff)"},children:(0,Eo.jsx)("button",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:60,height:60,borderRadius:"50%",border:"2px solid var(--sidebar-border, #d1d5db)",background:"var(--button-bg, #f3f6ff)",color:"var(--text-main, #23272f)",boxShadow:"0 2px 8px rgba(60,60,90,0.06)",outline:"none",cursor:"pointer",fontSize:24,transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",position:"relative"},title:"Add Files",onClick:()=>Y(!0),onMouseOver:e=>{e.currentTarget.style.background="var(--button-bg-hover, #e6eaff)",e.currentTarget.style.color="var(--button-text-hover, #2563eb)",e.currentTarget.style.border="2px solid var(--button-text-hover, #2563eb)",e.currentTarget.style.boxShadow="0 4px 18px rgba(60,120,200,0.14)"},onMouseOut:e=>{e.currentTarget.style.background="var(--button-bg, #f3f6ff)",e.currentTarget.style.color="var(--text-main, #23272f)",e.currentTarget.style.border="2px solid var(--sidebar-border, #d1d5db)",e.currentTarget.style.boxShadow="0 2px 8px rgba(60,60,90,0.06)"},children:(0,Eo.jsx)(Jo,{size:26})})}),G&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Y(!1),children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:32,minWidth:340,maxWidth:420,boxShadow:"0 4px 24px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",gap:18,alignItems:"stretch"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:20,marginBottom:6,color:"var(--text-main)"},children:"Add File Links"}),J.map((e,t)=>(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[(0,Eo.jsx)("input",{type:"text",placeholder:"Label (optional)",value:e.label||"",onChange:e=>{const n=[...J];n[t]={...n[t],label:e.target.value},Z(n)},style:{padding:"8px 10px",borderRadius:7,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:15,width:130}}),(0,Eo.jsx)("input",{type:"url",placeholder:"Paste file URL (Dropbox, Google Drive, etc)",value:e.url||"",onChange:e=>{const n=[...J];n[t]={...n[t],url:e.target.value},Z(n)},style:{padding:"8px 12px",borderRadius:7,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:15,flex:1},autoFocus:0===t}),J.length>1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>Z(J.filter((e,n)=>n!==t)),style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:18},title:"Remove",children:"\u2715"}),t===J.length-1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>Z([...J,{url:"",label:""}]),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:18},title:"Add Link",children:"\uff0b"})]},t)),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,marginTop:10,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{style:{background:"var(--sidebar-bg)",color:"var(--text-main)",border:"1.5px solid var(--sidebar-border)",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:()=>Y(!1),children:"Cancel"}),(0,Eo.jsx)("button",{style:{background:"#1d5413",color:"#fff",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.18)"},onClick:async()=>{if(!J.some(e=>e.url&&e.url.trim()))return;X(!0);const e=(0,Co.getFirestore)();try{const t=m||S&&S.user,n=(null===t||void 0===t?void 0:t.displayName)||(null===t||void 0===t?void 0:t.email)||(null===t||void 0===t?void 0:t.uid)||"Unknown User",r=(null===t||void 0===t?void 0:t.uid)||"unknown",i=(new Date).toISOString(),o=J.filter(e=>e.url&&e.url.trim());await Promise.all(o.map(async t=>{await(0,Co.addDoc)((0,Co.collection)(e,"tasks",b.id,"files"),{url:t.url.trim(),label:t.label?t.label.trim():"",addedBy:r,addedByDisplayName:n,createdAt:i});const o=(0,Co.doc)(e,"tasks",b.id),a=await(0,Co.getDoc)(o);let s=Array.isArray(a.data().log)?[...a.data().log]:[];s.push({type:"file_added",user:{uid:r,displayName:n},timestamp:i,description:`${n} added a file.`}),await(0,Co.updateDoc)(o,{log:s})})),Z([{url:"",label:""}]),Y(!1)}catch(Jm){A("Failed to add files: "+(Jm.message||Jm))}X(!1)},disabled:J.every(e=>!e.url||!e.url.trim())||Q,children:Q?"Adding...":"Add Links"})]})]})})]})]}),"history"===Ye&&(0,Eo.jsx)("div",{children:Array.isArray(b.log)&&b.log.length>0?(0,Eo.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:b.log.map((e,t)=>{let n=e.description;return n&&n.includes("{user}")&&(n=n.replace("{user}",Rp(e.user,v))),(0,Eo.jsxs)("li",{style:{marginBottom:10,padding:"0 0 6px 0",borderBottom:"1px solid var(--border, #d1d5db)"},children:[(0,Eo.jsx)("div",{style:{fontWeight:400,fontSize:15,color:"var(--text-main, #23272f)",marginBottom:2},children:n}),(0,Eo.jsxs)("div",{style:{color:"var(--text-secondary, #888)",fontSize:12,marginTop:2},children:[Rp(e.user,v)&&(0,Eo.jsx)("span",{children:Rp(e.user,v)}),Rp(e.user,v)&&e.timestamp?(0,Eo.jsx)("span",{children:" \u2022 "}):null,e.timestamp&&(0,Eo.jsx)("span",{children:rg(e.timestamp)})]})]},t)})}):(0,Eo.jsx)("div",{style:{color:"#888",fontSize:14},children:"No history logs found."})}),"comments"===Ye&&(0,Eo.jsx)("div",{children:bt&&bt.length>0?(0,Eo.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:bt.map((e,t)=>{const n="issue_reported"===e.type,r="issue_resolved"===e.type;return(0,Eo.jsxs)("div",{style:r?{marginBottom:10,background:"rgba(40,167,69,0.07)",border:"1.5px solid #28a745",borderRadius:8,padding:"5px 14px",boxShadow:"0 1px 4px rgba(40,167,69,0.08)"}:n?{marginBottom:10,background:"rgba(184,46,46,0.07)",border:"1.5px solid #b82e2e",borderRadius:8,padding:"5px 14px",boxShadow:"0 1px 4px rgba(184,46,46,0.08)"}:{marginBottom:18,marginLeft:14},children:[n&&(0,Eo.jsx)("div",{style:{color:"#b82e2e",fontWeight:700,fontSize:14,marginBottom:2},children:"Issue Reported"}),r&&(0,Eo.jsx)("div",{style:{color:"#28a745",fontWeight:700,fontSize:14,marginBottom:2},children:"Issue Resolved"}),(n||r)&&(0,Eo.jsx)("div",{style:{fontSize:14,color:"var(--text-main)",marginBottom:e.description?2:0,fontWeight:500,whiteSpace:"pre-line"},children:e.description||(0,Eo.jsx)("span",{style:{color:"#888",fontWeight:400},children:"[No description]"})}),e.text||e.message?(0,Eo.jsx)("div",{style:{fontSize:14,color:"var(--text-main)",marginBottom:3},children:(e.text||e.message).split(/(@\[[^\]]+\]\([^)]+\))/g).map((e,t)=>{const n=e.match(/^@\[([^\]]+)\]\(([^)]+)\)$/);return n?(0,Eo.jsx)("span",{style:{color:"#3b82f6",fontWeight:600},children:n[1]},t):e})}):null,(0,Eo.jsxs)("div",{style:{color:"#888",fontSize:12},children:[e.user&&(0,Eo.jsx)("span",{children:Rp(e.user,v)})," ",e.timestamp||e.createdAt?(0,Eo.jsxs)("span",{children:[" | ",rg(e.timestamp||e.createdAt)]}):null]})]},e.id||t)})}):(0,Eo.jsx)("div",{style:{color:"#888",fontSize:14},children:"No comments yet."})})]}),"comments"===Ye&&(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:10,gap:8,position:"relative"},children:[(0,Eo.jsx)("input",{type:"text",value:ke,onChange:e=>{Te(e.target.value),((e,t)=>{const n=((e,t)=>{const n=e.slice(0,t),r=/(^|\s)@(\w*)$/.exec(n);return r?{query:r[2]||"",start:r.index+r[1].length,end:t}:null})(e,t);if(n){const e=n.query.toLowerCase(),t=v.filter(t=>(t.displayName||t.name||"").toLowerCase().includes(e)||(t.email||"").toLowerCase().includes(e));De(t),Ee(!0),_e(0),Ne({start:n.start,end:n.end})}else Ee(!1),De([]),Ne(null)})(e.target.value,e.target.selectionStart)},placeholder:"Add a comment...",style:{flex:1,padding:"8px 12px",borderRadius:7,border:"1.5px solid var(--button-border)",fontSize:15,background:"var(--bg-card)",color:"var(--text-main)"},disabled:Ze,onKeyDown:e=>{if(Ce)"ArrowDown"===e.key?(e.preventDefault(),_e(e=>Math.min(e+1,Ie.length-1))):"ArrowUp"===e.key?(e.preventDefault(),_e(e=>Math.max(e-1,0))):"Enter"===e.key?Ie[Ae]&&(e.preventDefault(),Ge(Ae)):"Escape"===e.key&&Ee(!1);else if("Enter"===e.key){const e=Array.from(new Set((ke.match(/@\w+/g)||[]).map(e=>e.slice(1)))).map(e=>Pe instanceof Map?Pe.get(e):void 0).filter(Boolean);Tt(ke,e)}},ref:Re,autoComplete:"off"}),(0,Eo.jsx)("button",{style:{...lg,minWidth:80,opacity:Ze?.6:1},onClick:()=>{const e=Array.from(new Set((ke.match(/@\w+/g)||[]).map(e=>e.slice(1)))).map(e=>Pe instanceof Map?Pe.get(e):void 0).filter(Boolean);Tt(ke,e)},disabled:Ze||!ke.trim(),children:Ze?"Posting...":"Post"}),Ce&&(0,Eo.jsx)("div",{style:{position:"absolute",left:0,top:"100%",width:"100%",background:"var(--bg-main)",border:"1.5px solid var(--sidebar-border)",borderRadius:8,marginTop:2,maxHeight:180,overflowY:"auto",boxShadow:"0 2px 12px rgba(80,120,200,0.09)",zIndex:20},children:0===Ie.length?(0,Eo.jsx)("div",{style:{padding:"10px 16px",color:"#888"},children:"No users found"}):Ie.map((e,t)=>(0,Eo.jsxs)("div",{style:{padding:"10px 16px",cursor:"pointer",fontSize:16,color:t===Ae?"var(--primary, #3b82f6)":"var(--text-main)",background:t===Ae?"var(--add-row-bg-hover, rgba(79,140,255,0.18))":"transparent",fontWeight:t===Ae?600:400},onMouseDown:e=>{e.preventDefault(),Ge(t)},onMouseEnter:()=>_e(t),children:[e.displayName||e.name||e.email,e.email&&(0,Eo.jsx)("span",{style:{color:"#888",fontSize:13,marginLeft:6},children:e.email})]},e.id||e.uid||e.email))})]})]})]})]}):(0,Eo.jsx)("div",{style:{padding:32,color:"#888"},children:"You do not have permission to view this task."}):(0,Eo.jsx)("div",{style:{padding:32,textAlign:"center",color:"var(--text-main)"},children:"Task not found."})},fg="PhotoTrackerApp (your@email.com)";function pg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M3.89,17.6c0-0.99,0.31-1.88,0.93-2.65s1.41-1.27,2.38-1.49c0.26-1.17,0.85-2.14,1.78-2.88c0.93-0.75,2-1.12,3.22-1.12\n\tc1.18,0,2.24,0.36,3.16,1.09c0.93,0.73,1.53,1.66,1.8,2.8h0.27c1.18,0,2.18,0.41,3.01,1.24s1.25,1.83,1.25,3\n\tc0,1.18-0.42,2.18-1.25,3.01s-1.83,1.25-3.01,1.25H8.16c-0.58,0-1.13-0.11-1.65-0.34S5.52,21,5.14,20.62\n\tc-0.38-0.38-0.68-0.84-0.91-1.36S3.89,18.17,3.89,17.6z M5.34,17.6c0,0.76,0.28,1.42,0.82,1.96s1.21,0.82,1.99,0.82h9.28\n\tc0.77,0,1.44-0.27,1.99-0.82c0.55-0.55,0.83-1.2,0.83-1.96c0-0.76-0.27-1.42-0.83-1.96c-0.55-0.54-1.21-0.82-1.99-0.82h-1.39\n\tc-0.1,0-0.15-0.05-0.15-0.15l-0.07-0.49c-0.1-0.94-0.5-1.73-1.19-2.35s-1.51-0.93-2.45-0.93c-0.94,0-1.76,0.31-2.46,0.94\n\tc-0.7,0.62-1.09,1.41-1.18,2.34l-0.07,0.42c0,0.1-0.05,0.15-0.16,0.15l-0.45,0.07c-0.72,0.06-1.32,0.36-1.81,0.89\n\tC5.59,16.24,5.34,16.87,5.34,17.6z M14.19,8.88c-0.1,0.09-0.08,0.16,0.07,0.21c0.43,0.19,0.79,0.37,1.08,0.55\n\tc0.11,0.03,0.19,0.02,0.22-0.03c0.61-0.57,1.31-0.86,2.12-0.86c0.81,0,1.5,0.27,2.1,0.81c0.59,0.54,0.92,1.21,0.99,2l0.09,0.64h1.42\n\tc0.65,0,1.21,0.23,1.68,0.7c0.47,0.47,0.7,1.02,0.7,1.66c0,0.6-0.21,1.12-0.62,1.57s-0.92,0.7-1.53,0.77c-0.1,0-0.15,0.05-0.15,0.16\n\tv1.13c0,0.11,0.05,0.16,0.15,0.16c1.01-0.06,1.86-0.46,2.55-1.19s1.04-1.6,1.04-2.6c0-1.06-0.37-1.96-1.12-2.7\n\tc-0.75-0.75-1.65-1.12-2.7-1.12h-0.15c-0.26-1-0.81-1.82-1.65-2.47c-0.83-0.65-1.77-0.97-2.8-0.97C16.28,7.29,15.11,7.82,14.19,8.88\n\tz"},child:[]}]})(e)}function gg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M1.56,16.9c0,0.9,0.22,1.73,0.66,2.49s1.04,1.36,1.8,1.8c0.76,0.44,1.58,0.66,2.47,0.66h10.83c0.89,0,1.72-0.22,2.48-0.66\n\tc0.76-0.44,1.37-1.04,1.81-1.8c0.44-0.76,0.67-1.59,0.67-2.49c0-0.66-0.14-1.33-0.42-2C22.62,13.98,23,12.87,23,11.6\n\tc0-0.71-0.14-1.39-0.41-2.04c-0.27-0.65-0.65-1.2-1.12-1.67C21,7.42,20.45,7.04,19.8,6.77c-0.65-0.28-1.33-0.41-2.04-0.41\n\tc-1.48,0-2.77,0.58-3.88,1.74c-0.77-0.44-1.67-0.66-2.7-0.66c-1.41,0-2.65,0.44-3.73,1.31c-1.08,0.87-1.78,1.99-2.08,3.35\n\tc-1.12,0.26-2.03,0.83-2.74,1.73S1.56,15.75,1.56,16.9z M3.27,16.9c0-0.84,0.28-1.56,0.84-2.17c0.56-0.61,1.26-0.96,2.1-1.06\n\tl0.5-0.03c0.12,0,0.19-0.06,0.19-0.18l0.07-0.54c0.14-1.08,0.61-1.99,1.41-2.71c0.8-0.73,1.74-1.09,2.81-1.09\n\tc1.1,0,2.06,0.37,2.87,1.1c0.82,0.73,1.27,1.63,1.37,2.71l0.07,0.58c0.02,0.11,0.09,0.17,0.21,0.17h1.61c0.88,0,1.64,0.32,2.28,0.96\n\tc0.64,0.64,0.96,1.39,0.96,2.27c0,0.91-0.32,1.68-0.95,2.32c-0.63,0.64-1.4,0.96-2.28,0.96H6.49c-0.88,0-1.63-0.32-2.27-0.97\n\tC3.59,18.57,3.27,17.8,3.27,16.9z M9.97,4.63c0,0.24,0.08,0.45,0.24,0.63l0.66,0.64c0.25,0.19,0.46,0.27,0.64,0.25\n\tc0.21,0,0.39-0.09,0.55-0.26s0.24-0.38,0.24-0.62c0-0.24-0.09-0.44-0.26-0.59l-0.59-0.66c-0.18-0.16-0.38-0.24-0.61-0.24\n\tc-0.24,0-0.45,0.08-0.62,0.25C10.05,4.19,9.97,4.39,9.97,4.63z M15.31,9.06c0.69-0.67,1.51-1,2.45-1c0.99,0,1.83,0.34,2.52,1.03\n\tc0.69,0.69,1.04,1.52,1.04,2.51c0,0.62-0.17,1.24-0.51,1.84C19.84,12.48,18.68,12,17.32,12H17C16.75,10.91,16.19,9.93,15.31,9.06z\n\t M16.94,3.78c0,0.26,0.08,0.46,0.23,0.62s0.35,0.23,0.59,0.23c0.26,0,0.46-0.08,0.62-0.23c0.16-0.16,0.23-0.36,0.23-0.62V1.73\n\tc0-0.24-0.08-0.43-0.24-0.59s-0.36-0.23-0.61-0.23c-0.24,0-0.43,0.08-0.59,0.23s-0.23,0.35-0.23,0.59V3.78z M22.46,6.07\n\tc0,0.26,0.07,0.46,0.22,0.62c0.21,0.16,0.42,0.24,0.62,0.24c0.18,0,0.38-0.08,0.59-0.24l1.43-1.43c0.16-0.18,0.24-0.39,0.24-0.64\n\tc0-0.24-0.08-0.44-0.24-0.6c-0.16-0.16-0.36-0.24-0.59-0.24c-0.24,0-0.43,0.08-0.58,0.24l-1.47,1.43\n\tC22.53,5.64,22.46,5.84,22.46,6.07z M23.25,17.91c0,0.24,0.08,0.45,0.25,0.63l0.65,0.63c0.15,0.16,0.34,0.24,0.58,0.24\n\ts0.44-0.08,0.6-0.25c0.16-0.17,0.24-0.37,0.24-0.62c0-0.22-0.08-0.42-0.24-0.58l-0.65-0.65c-0.16-0.16-0.35-0.24-0.57-0.24\n\tc-0.24,0-0.44,0.08-0.6,0.24C23.34,17.47,23.25,17.67,23.25,17.91z M24.72,11.6c0,0.23,0.09,0.42,0.26,0.58\n\tc0.16,0.16,0.37,0.24,0.61,0.24h2.04c0.23,0,0.42-0.08,0.58-0.23s0.23-0.35,0.23-0.59c0-0.24-0.08-0.44-0.23-0.6\n\ts-0.35-0.25-0.58-0.25h-2.04c-0.24,0-0.44,0.08-0.61,0.25C24.8,11.17,24.72,11.37,24.72,11.6z"},child:[]}]})(e)}function mg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M4.37,14.62c0-0.24,0.08-0.45,0.25-0.62c0.17-0.16,0.38-0.24,0.6-0.24h2.04c0.23,0,0.42,0.08,0.58,0.25\n\tc0.15,0.17,0.23,0.37,0.23,0.61S8,15.06,7.85,15.23c-0.15,0.17-0.35,0.25-0.58,0.25H5.23c-0.23,0-0.43-0.08-0.6-0.25\n\tC4.46,15.06,4.37,14.86,4.37,14.62z M7.23,21.55c0-0.23,0.08-0.43,0.23-0.61l1.47-1.43c0.15-0.16,0.35-0.23,0.59-0.23\n\tc0.24,0,0.44,0.08,0.6,0.23s0.24,0.34,0.24,0.57c0,0.24-0.08,0.46-0.24,0.64L8.7,22.14c-0.41,0.32-0.82,0.32-1.23,0\n\tC7.31,21.98,7.23,21.78,7.23,21.55z M7.23,7.71c0-0.23,0.08-0.43,0.23-0.61C7.66,6.93,7.87,6.85,8.1,6.85\n\tc0.22,0,0.42,0.08,0.59,0.24l1.43,1.47c0.16,0.15,0.24,0.35,0.24,0.59c0,0.24-0.08,0.44-0.24,0.6s-0.36,0.24-0.6,0.24\n\tc-0.24,0-0.44-0.08-0.59-0.24L7.47,8.32C7.31,8.16,7.23,7.95,7.23,7.71z M9.78,14.62c0-0.93,0.23-1.8,0.7-2.6s1.1-1.44,1.91-1.91\n\ts1.67-0.7,2.6-0.7c0.7,0,1.37,0.14,2.02,0.42c0.64,0.28,1.2,0.65,1.66,1.12c0.47,0.47,0.84,1.02,1.11,1.66\n\tc0.27,0.64,0.41,1.32,0.41,2.02c0,0.94-0.23,1.81-0.7,2.61c-0.47,0.8-1.1,1.43-1.9,1.9c-0.8,0.47-1.67,0.7-2.61,0.7\n\ts-1.81-0.23-2.61-0.7c-0.8-0.47-1.43-1.1-1.9-1.9C10.02,16.43,9.78,15.56,9.78,14.62z M11.48,14.62c0,0.98,0.34,1.81,1.03,2.5\n\tc0.68,0.69,1.51,1.04,2.49,1.04s1.81-0.35,2.5-1.04s1.04-1.52,1.04-2.5c0-0.96-0.35-1.78-1.04-2.47c-0.69-0.68-1.52-1.02-2.5-1.02\n\tc-0.97,0-1.8,0.34-2.48,1.02C11.82,12.84,11.48,13.66,11.48,14.62z M14.14,22.4c0-0.24,0.08-0.44,0.25-0.6s0.37-0.24,0.6-0.24\n\tc0.24,0,0.45,0.08,0.61,0.24s0.24,0.36,0.24,0.6v1.99c0,0.24-0.08,0.45-0.25,0.62c-0.17,0.17-0.37,0.25-0.6,0.25\n\ts-0.44-0.08-0.6-0.25c-0.17-0.17-0.25-0.38-0.25-0.62V22.4z M14.14,6.9V4.86c0-0.23,0.08-0.43,0.25-0.6C14.56,4.09,14.76,4,15,4\n\ts0.43,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6V6.9c0,0.23-0.08,0.42-0.25,0.58S15.23,7.71,15,7.71s-0.44-0.08-0.6-0.23\n\tS14.14,7.13,14.14,6.9z M19.66,20.08c0-0.23,0.08-0.42,0.23-0.56c0.15-0.16,0.34-0.23,0.56-0.23c0.24,0,0.44,0.08,0.6,0.23\n\tl1.46,1.43c0.16,0.17,0.24,0.38,0.24,0.61c0,0.23-0.08,0.43-0.24,0.59c-0.4,0.31-0.8,0.31-1.2,0l-1.42-1.42\n\tC19.74,20.55,19.66,20.34,19.66,20.08z M19.66,9.16c0-0.25,0.08-0.45,0.23-0.59l1.42-1.47c0.17-0.16,0.37-0.24,0.59-0.24\n\tc0.24,0,0.44,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6c0,0.25-0.08,0.46-0.24,0.62l-1.46,1.43c-0.18,0.16-0.38,0.24-0.6,0.24\n\tc-0.23,0-0.41-0.08-0.56-0.24S19.66,9.4,19.66,9.16z M21.92,14.62c0-0.24,0.08-0.44,0.24-0.62c0.16-0.16,0.35-0.24,0.57-0.24h2.02\n\tc0.23,0,0.43,0.09,0.6,0.26c0.17,0.17,0.26,0.37,0.26,0.6s-0.09,0.43-0.26,0.6c-0.17,0.17-0.37,0.25-0.6,0.25h-2.02\n\tc-0.23,0-0.43-0.08-0.58-0.25S21.92,14.86,21.92,14.62z"},child:[]}]})(e)}function yg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M2.62,21.05c0-0.24,0.08-0.45,0.25-0.61c0.17-0.16,0.38-0.24,0.63-0.24h18.67c0.25,0,0.45,0.08,0.61,0.24\n\tc0.16,0.16,0.24,0.36,0.24,0.61c0,0.23-0.08,0.43-0.25,0.58c-0.17,0.16-0.37,0.23-0.6,0.23H3.5c-0.25,0-0.46-0.08-0.63-0.23\n\tC2.7,21.47,2.62,21.28,2.62,21.05z M5.24,17.91c0-0.24,0.09-0.44,0.26-0.6c0.15-0.15,0.35-0.23,0.59-0.23h18.67\n\tc0.23,0,0.42,0.08,0.58,0.24c0.16,0.16,0.23,0.35,0.23,0.59c0,0.24-0.08,0.44-0.23,0.6c-0.16,0.17-0.35,0.25-0.58,0.25H6.09\n\tc-0.24,0-0.44-0.08-0.6-0.25C5.32,18.34,5.24,18.14,5.24,17.91z M5.37,15.52c0,0.09,0.05,0.13,0.15,0.13h1.43\n\tc0.06,0,0.13-0.05,0.2-0.16c0.24-0.52,0.59-0.94,1.06-1.27c0.47-0.33,0.99-0.52,1.55-0.56l0.55-0.07c0.11,0,0.17-0.06,0.17-0.18\n\tl0.07-0.5c0.11-1.08,0.56-1.98,1.37-2.7c0.81-0.72,1.76-1.08,2.85-1.08c1.08,0,2.02,0.36,2.83,1.07c0.8,0.71,1.26,1.61,1.37,2.68\n\tl0.08,0.57c0,0.11,0.07,0.17,0.2,0.17h1.59c0.64,0,1.23,0.17,1.76,0.52s0.92,0.8,1.18,1.37c0.07,0.11,0.14,0.16,0.21,0.16h1.43\n\tc0.12,0,0.17-0.07,0.14-0.23c-0.29-1.02-0.88-1.86-1.74-2.51c-0.87-0.65-1.86-0.97-2.97-0.97h-0.32c-0.33-1.33-1.03-2.42-2.1-3.27\n\ts-2.28-1.27-3.65-1.27c-1.4,0-2.64,0.44-3.73,1.32s-1.78,2-2.09,3.36c-0.85,0.2-1.6,0.6-2.24,1.21c-0.64,0.61-1.09,1.33-1.34,2.18\n\tv-0.04C5.37,15.45,5.37,15.48,5.37,15.52z M6.98,24.11c0-0.24,0.09-0.43,0.26-0.59c0.15-0.15,0.35-0.23,0.6-0.23h18.68\n\tc0.24,0,0.44,0.08,0.6,0.23c0.17,0.16,0.25,0.35,0.25,0.58c0,0.24-0.08,0.44-0.25,0.61c-0.17,0.17-0.37,0.25-0.6,0.25H7.84\n\tc-0.23,0-0.43-0.09-0.6-0.26C7.07,24.55,6.98,24.34,6.98,24.11z"},child:[]}]})(e)}function vg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M4.64,16.91c0-1.15,0.36-2.17,1.08-3.07c0.72-0.9,1.63-1.47,2.73-1.73c0.31-1.36,1.02-2.48,2.11-3.36s2.34-1.31,3.75-1.31\n\tc1.38,0,2.6,0.43,3.68,1.28c1.08,0.85,1.78,1.95,2.1,3.29h0.32c0.89,0,1.72,0.22,2.48,0.65s1.37,1.03,1.81,1.78\n\tc0.44,0.75,0.67,1.58,0.67,2.47c0,0.88-0.21,1.69-0.63,2.44c-0.42,0.75-1,1.35-1.73,1.8c-0.73,0.45-1.53,0.69-2.4,0.71\n\tc-0.13,0-0.2-0.06-0.2-0.17v-1.33c0-0.12,0.07-0.18,0.2-0.18c0.85-0.04,1.58-0.38,2.18-1.02s0.9-1.39,0.9-2.26s-0.33-1.62-0.98-2.26\n\ts-1.42-0.96-2.31-0.96h-1.61c-0.12,0-0.18-0.06-0.18-0.17l-0.08-0.58c-0.11-1.08-0.58-1.99-1.39-2.71\n\tc-0.82-0.73-1.76-1.09-2.85-1.09c-1.09,0-2.05,0.36-2.85,1.09c-0.81,0.73-1.26,1.63-1.36,2.71l-0.07,0.53c0,0.12-0.07,0.19-0.2,0.19\n\tl-0.53,0.03c-0.83,0.1-1.53,0.46-2.1,1.07s-0.85,1.33-0.85,2.16c0,0.87,0.3,1.62,0.9,2.26s1.33,0.98,2.18,1.02\n\tc0.11,0,0.17,0.06,0.17,0.18v1.33c0,0.11-0.06,0.17-0.17,0.17c-1.34-0.06-2.47-0.57-3.4-1.53S4.64,18.24,4.64,16.91z M9.99,23.6\n\tc0-0.04,0.01-0.11,0.04-0.2l1.63-5.77c0.06-0.19,0.17-0.34,0.32-0.44c0.15-0.1,0.31-0.15,0.46-0.15c0.07,0,0.15,0.01,0.24,0.03\n\tc0.24,0.04,0.42,0.17,0.54,0.37c0.12,0.2,0.15,0.42,0.08,0.67l-1.63,5.73c-0.12,0.43-0.4,0.64-0.82,0.64\n\tc-0.04,0-0.07-0.01-0.11-0.02c-0.06-0.02-0.09-0.03-0.1-0.03c-0.22-0.06-0.38-0.17-0.49-0.33C10.04,23.93,9.99,23.77,9.99,23.6z\n\t M12.61,26.41l2.44-8.77c0.04-0.19,0.14-0.34,0.3-0.44c0.16-0.1,0.32-0.15,0.49-0.15c0.09,0,0.18,0.01,0.27,0.03\n\tc0.22,0.06,0.38,0.19,0.49,0.39c0.11,0.2,0.13,0.41,0.07,0.64l-2.43,8.78c-0.04,0.17-0.13,0.31-0.29,0.43\n\tc-0.16,0.12-0.32,0.18-0.51,0.18c-0.09,0-0.18-0.02-0.25-0.05c-0.2-0.05-0.37-0.18-0.52-0.39C12.56,26.88,12.54,26.67,12.61,26.41z\n\t M16.74,23.62c0-0.04,0.01-0.11,0.04-0.23l1.63-5.77c0.06-0.19,0.16-0.34,0.3-0.44c0.15-0.1,0.3-0.15,0.46-0.15\n\tc0.08,0,0.17,0.01,0.26,0.03c0.21,0.06,0.36,0.16,0.46,0.31c0.1,0.15,0.15,0.31,0.15,0.47c0,0.03-0.01,0.08-0.02,0.14\n\ts-0.02,0.1-0.02,0.12l-1.63,5.73c-0.04,0.19-0.13,0.35-0.28,0.46s-0.32,0.17-0.51,0.17l-0.24-0.05c-0.2-0.06-0.35-0.16-0.46-0.32\n\tC16.79,23.94,16.74,23.78,16.74,23.62z"},child:[]}]})(e)}function bg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M4.64,16.95c0-1.16,0.35-2.18,1.06-3.08s1.62-1.48,2.74-1.76c0.31-1.36,1.01-2.48,2.1-3.36s2.34-1.31,3.75-1.31\n\tc1.38,0,2.6,0.43,3.68,1.28c1.08,0.85,1.78,1.95,2.1,3.29h0.32c0.89,0,1.72,0.22,2.48,0.66c0.76,0.44,1.37,1.04,1.81,1.8\n\tc0.44,0.76,0.67,1.59,0.67,2.48c0,1.32-0.46,2.47-1.39,3.42c-0.92,0.96-2.05,1.46-3.38,1.5c-0.13,0-0.2-0.06-0.2-0.17v-1.33\n\tc0-0.12,0.07-0.18,0.2-0.18c0.85-0.04,1.58-0.38,2.18-1.02s0.9-1.38,0.9-2.23c0-0.89-0.32-1.65-0.97-2.3s-1.42-0.97-2.32-0.97h-1.61\n\tc-0.12,0-0.18-0.06-0.18-0.17l-0.08-0.58c-0.11-1.08-0.58-1.99-1.39-2.72c-0.82-0.73-1.76-1.1-2.85-1.1c-1.1,0-2.05,0.37-2.86,1.11\n\tc-0.81,0.74-1.27,1.65-1.37,2.75l-0.06,0.5c0,0.12-0.07,0.19-0.2,0.19l-0.53,0.07c-0.83,0.07-1.53,0.41-2.1,1.04\n\ts-0.85,1.35-0.85,2.19c0,0.85,0.3,1.59,0.9,2.23s1.33,0.97,2.18,1.02c0.11,0,0.17,0.06,0.17,0.18v1.33c0,0.11-0.06,0.17-0.17,0.17\n\tc-1.34-0.04-2.47-0.54-3.4-1.5C5.1,19.42,4.64,18.27,4.64,16.95z M11,21.02c0-0.22,0.08-0.42,0.24-0.58\n\tc0.16-0.16,0.35-0.24,0.59-0.24c0.23,0,0.43,0.08,0.59,0.24c0.16,0.16,0.24,0.36,0.24,0.58c0,0.24-0.08,0.44-0.24,0.6\n\tc-0.16,0.17-0.35,0.25-0.59,0.25c-0.23,0-0.43-0.08-0.59-0.25C11.08,21.46,11,21.26,11,21.02z M11,24.65c0-0.24,0.08-0.44,0.24-0.6\n\tc0.16-0.15,0.35-0.23,0.58-0.23c0.23,0,0.43,0.08,0.59,0.23c0.16,0.16,0.24,0.35,0.24,0.59c0,0.24-0.08,0.43-0.24,0.59\n\tc-0.16,0.16-0.35,0.23-0.59,0.23c-0.23,0-0.43-0.08-0.59-0.23C11.08,25.08,11,24.88,11,24.65z M14.19,22.95\n\tc0-0.23,0.08-0.44,0.25-0.62c0.16-0.16,0.35-0.24,0.57-0.24c0.23,0,0.43,0.09,0.6,0.26c0.17,0.17,0.26,0.37,0.26,0.6\n\tc0,0.23-0.08,0.43-0.25,0.6c-0.17,0.17-0.37,0.25-0.61,0.25c-0.23,0-0.42-0.08-0.58-0.25S14.19,23.18,14.19,22.95z M14.19,19.33\n\tc0-0.23,0.08-0.43,0.25-0.6c0.18-0.16,0.37-0.24,0.57-0.24c0.24,0,0.44,0.08,0.61,0.25c0.17,0.17,0.25,0.36,0.25,0.6\n\tc0,0.23-0.08,0.43-0.25,0.59c-0.17,0.16-0.37,0.24-0.61,0.24c-0.23,0-0.42-0.08-0.58-0.24C14.27,19.76,14.19,19.56,14.19,19.33z\n\t M14.19,26.61c0-0.23,0.08-0.43,0.25-0.61c0.16-0.16,0.35-0.24,0.57-0.24c0.24,0,0.44,0.08,0.61,0.25c0.17,0.17,0.25,0.37,0.25,0.6\n\ts-0.08,0.43-0.25,0.59c-0.17,0.16-0.37,0.24-0.61,0.24c-0.23,0-0.42-0.08-0.58-0.24C14.27,27.03,14.19,26.84,14.19,26.61z\n\t M17.41,21.02c0-0.22,0.08-0.41,0.25-0.58c0.17-0.17,0.37-0.25,0.6-0.25c0.23,0,0.43,0.08,0.59,0.24c0.16,0.16,0.24,0.36,0.24,0.58\n\tc0,0.24-0.08,0.44-0.24,0.6c-0.16,0.17-0.35,0.25-0.59,0.25c-0.24,0-0.44-0.08-0.6-0.25C17.5,21.45,17.41,21.25,17.41,21.02z\n\t M17.41,24.65c0-0.22,0.08-0.42,0.25-0.6c0.16-0.15,0.36-0.23,0.6-0.23c0.24,0,0.43,0.08,0.59,0.23s0.23,0.35,0.23,0.59\n\tc0,0.24-0.08,0.43-0.23,0.59c-0.16,0.16-0.35,0.23-0.59,0.23c-0.24,0-0.44-0.08-0.6-0.24C17.5,25.07,17.41,24.88,17.41,24.65z"},child:[]}]})(e)}function wg(e){return Uo({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:"M4.63,16.91c0,1.11,0.33,2.1,0.99,2.97s1.52,1.47,2.58,1.79l-0.66,1.68c-0.03,0.14,0.02,0.22,0.14,0.22h2.13l-0.98,4.3h0.28\n\tl3.92-5.75c0.04-0.04,0.04-0.09,0.01-0.14c-0.03-0.05-0.08-0.07-0.15-0.07h-2.18l2.48-4.64c0.07-0.14,0.02-0.22-0.14-0.22h-2.94\n\tc-0.09,0-0.17,0.05-0.23,0.15l-1.07,2.87c-0.71-0.18-1.3-0.57-1.77-1.16c-0.47-0.59-0.7-1.26-0.7-2.01c0-0.83,0.28-1.55,0.85-2.17\n\tc0.57-0.61,1.27-0.97,2.1-1.07l0.53-0.07c0.13,0,0.2-0.06,0.2-0.18l0.07-0.51c0.11-1.08,0.56-1.99,1.37-2.72\n\tc0.81-0.73,1.76-1.1,2.85-1.1c1.09,0,2.04,0.37,2.85,1.1c0.82,0.73,1.28,1.64,1.4,2.72l0.07,0.58c0,0.11,0.06,0.17,0.18,0.17h1.6\n\tc0.91,0,1.68,0.32,2.32,0.95c0.64,0.63,0.97,1.4,0.97,2.28c0,0.85-0.3,1.59-0.89,2.21c-0.59,0.62-1.33,0.97-2.2,1.04\n\tc-0.13,0-0.2,0.06-0.2,0.18v1.37c0,0.11,0.07,0.17,0.2,0.17c1.33-0.04,2.46-0.55,3.39-1.51s1.39-2.11,1.39-3.45\n\tc0-0.9-0.22-1.73-0.67-2.49c-0.44-0.76-1.05-1.36-1.81-1.8c-0.77-0.44-1.6-0.66-2.5-0.66H20.1c-0.33-1.33-1.04-2.42-2.11-3.26\n\ts-2.3-1.27-3.68-1.27c-1.41,0-2.67,0.44-3.76,1.31s-1.79,1.99-2.1,3.36c-1.11,0.26-2.02,0.83-2.74,1.73S4.63,15.76,4.63,16.91z\n\t M12.77,26.62c0,0.39,0.19,0.65,0.58,0.77c0.01,0,0.05,0,0.11,0.01c0.06,0.01,0.11,0.01,0.14,0.01c0.17,0,0.33-0.05,0.49-0.15\n\tc0.16-0.1,0.27-0.26,0.32-0.48l2.25-8.69c0.06-0.24,0.04-0.45-0.07-0.65c-0.11-0.19-0.27-0.32-0.5-0.39\n\tc-0.17-0.02-0.26-0.03-0.26-0.03c-0.16,0-0.32,0.05-0.47,0.15c-0.15,0.1-0.26,0.25-0.31,0.45l-2.26,8.72\n\tC12.78,26.44,12.77,26.53,12.77,26.62z M16.93,23.56c0,0.13,0.03,0.26,0.1,0.38c0.14,0.22,0.31,0.37,0.51,0.44\n\tc0.11,0.03,0.21,0.05,0.3,0.05s0.2-0.02,0.32-0.08c0.21-0.09,0.35-0.28,0.42-0.57l1.44-5.67c0.03-0.14,0.05-0.23,0.05-0.27\n\tc0-0.15-0.05-0.3-0.16-0.45s-0.26-0.26-0.46-0.32c-0.17-0.02-0.26-0.03-0.26-0.03c-0.17,0-0.33,0.05-0.47,0.15\n\tc-0.14,0.1-0.24,0.25-0.3,0.45l-1.46,5.7c0,0.02,0,0.05-0.01,0.11C16.93,23.5,16.93,23.53,16.93,23.56z"},child:[]}]})(e)}const xg={display:"inline-block",background:"var(--turn-label-bg, #f97316)",color:"var(--turn-label-text, #fff)",borderRadius:12,padding:"2px 10px",fontSize:13,fontWeight:700,marginLeft:8,minWidth:44,textAlign:"center",boxShadow:"0 1px 4px rgba(249,115,22,0.15)"};function Sg(e){const t=e.toLowerCase();return t.includes("sunny")||t.includes("clear")?(0,Eo.jsx)(mg,{size:26,color:"#f7c948",title:"Sunny"}):t.includes("partly cloudy")||t.includes("mostly sunny")?(0,Eo.jsx)(gg,{size:26,color:"#c7d0e0",title:"Partly Cloudy"}):t.includes("cloudy")||t.includes("overcast")?(0,Eo.jsx)(pg,{size:26,color:"#a0aec0",title:"Cloudy"}):t.includes("thunderstorm")?(0,Eo.jsx)(wg,{size:26,color:"#6b7280",title:"Thunderstorm"}):t.includes("rain")||t.includes("showers")||t.includes("drizzle")?(0,Eo.jsx)(vg,{size:26,color:"#4f8ef7",title:"Rain"}):t.includes("snow")||t.includes("flurries")||t.includes("sleet")?(0,Eo.jsx)(bg,{size:26,color:"#b9e0f7",title:"Snow"}):t.includes("fog")||t.includes("mist")||t.includes("haze")?(0,Eo.jsx)(yg,{size:28,color:"#bfc9d1",title:"Fog"}):(0,Eo.jsx)(mg,{size:28,color:"#f7c948",title:"Weather"})}function kg(e){let{forecast:n,shortForecast:r}=e;const[i,o]=(0,t.useState)(!1),a=t.useRef(null);return(0,t.useEffect)(()=>{if(i)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e);function e(e){a.current&&!a.current.contains(e.target)&&o(!1)}},[i]),(0,Eo.jsxs)("span",{ref:a,style:{marginLeft:16,display:"inline-block",position:"relative"},children:[(0,Eo.jsx)("span",{onClick:()=>o(e=>!e),role:"button","aria-label":r||"Weather",tabIndex:0,style:{display:"inline-block",cursor:"pointer",borderRadius:8,outline:i?"2px solid #f97316":"none",boxShadow:i?"0 2px 16px rgba(80,120,200,0.13)":void 0,background:i?"rgba(247,201,72,0.10)":"transparent",transition:"box-shadow 0.15s, background 0.15s",marginRight:2},onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||o(e=>!e)},title:r||"Weather",children:Sg(r||"")}),i&&(0,Eo.jsx)("div",{style:{position:"absolute",left:0,top:"120%",width:"30vw",background:"var(--bg-card, #181a20)",color:"var(--text-main, #fff)",border:"2px solid var(--sidebar-border)",borderRadius:14,fontWeight:600,boxShadow:"0 6px 32px 0 rgba(60,100,180,0.13)",padding:"22px 20px 16px 20px",zIndex:30,fontSize:14,lineHeight:1.4,marginTop:8},children:n})]})}const Tg={fontWeight:700,fontSize:20,margin:"32px 0 8px 0",letterSpacing:.5,color:"var(--text-main)"},Cg={margin:"32px 0",color:"var(--text-secondary, #888)",fontSize:18,textAlign:"center"},Eg={width:"100%",borderCollapse:"collapse",marginBottom:0,background:"var(--bg-card, #181a20)",borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",overflow:"hidden"},Ig={background:"var(--table-header-bg)",color:"var(--text-main, #fff)",fontWeight:700,padding:"8px 12px",borderBottom:"2px solid var(--table-border, #2d313e)",textAlign:"left"},Dg={padding:"8px 12px",borderBottom:"1px solid var(--table-border, #2d313e)",color:"var(--text-main, #fff)"};function Ag(e){if(!e)return"";if(e.toDate)return e.toDate().toLocaleDateString();if("number"===typeof e&&e<1e12)return new Date(1e3*e).toLocaleDateString();if("number"===typeof e)return new Date(e).toLocaleDateString();const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString()}const _g={cursor:"pointer",transition:"background 0.15s"};const Pg=function(e){let{tasks:n,loading:r,enabledMediaTypes:i}=e;const o=t.useMemo(()=>{if(Array.isArray(i)&&i.length>0)return i;const e=Array.from(new Set((n||[]).map(e=>e.mediaType).filter(Boolean)));return e.length>0?e:["photos","3d_tours"]},[i,n]).length>1,[a,s]=(0,t.useState)([]);(0,t.useEffect)(()=>{(async function(){try{const e=await fetch("https://api.weather.gov/points/30.3755,-86.3587",{headers:{"User-Agent":fg}}),t=(await e.json()).properties.forecast;if(!t)throw new Error("No forecast URL found");const n=await fetch(t,{headers:{"User-Agent":fg}});return((await n.json()).properties.periods||[]).filter(e=>!/night/i.test(e.name)).map(e=>({name:e.name,detailedForecast:e.detailedForecast,shortForecast:e.shortForecast}))}catch(e){return console.error("Failed to fetch NOAA weather:",e),[]}})().then(s)},[]);const l=Do(),u=null===l||void 0===l?void 0:l.role,c=null===l||void 0===l?void 0:l.user,[d,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[g,m]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{let e=!1,t=(n||[]).filter(e=>"Scheduling"===e.stage&&!0!==e.archived);return"photographer"===u&&null!==c&&void 0!==c&&c.uid&&(t=n.filter(e=>e.assignedPhotographerId===c.uid)),!r&&t&&(t.length>0?(async()=>{const n=await(0,Yp.aC)(t);e||h(n)})():h({days:[]})),()=>{e=!0}},[n,r,u,c]),r)return(0,Eo.jsx)("div",{style:Cg,children:"Loading weekly availability..."});if(!d||!Array.isArray(d.days))return(0,Eo.jsxs)("div",{style:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:[(0,Eo.jsx)("div",{style:{border:"4px solid var(--table-border, #2d313e)",borderTop:"4px solid #f97316",borderRadius:"50%",width:48,height:48,animation:"spin 1s linear infinite"}}),(0,Eo.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]});const{days:y,tasksWithoutIcal:v}=d,b=Array.isArray(y)&&y.some(e=>Array.isArray(e.tasks)&&e.tasks.length>0);return(0,Eo.jsxs)("div",{style:{width:"100%",margin:"0 auto",maxWidth:1100},children:[Array.isArray(y)&&y.map((e,t)=>{const n=a[t];return(0,Eo.jsxs)("div",{children:[(0,Eo.jsxs)("div",{style:Tg,children:[e.label,n&&(0,Eo.jsx)(kg,{forecast:n.detailedForecast,shortForecast:n.shortForecast||""})]}),Array.isArray(e.tasks)&&0!==e.tasks.length?(0,Eo.jsx)("div",{style:{background:"var(--bg-card, #181a20)",borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:0,marginBottom:28,overflow:"hidden"},children:(0,Eo.jsxs)("table",{style:Eg,children:[(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{children:[o&&(0,Eo.jsx)("th",{style:{...Ig,width:"10%"},children:"Media Type"}),(0,Eo.jsx)("th",{style:Ig,children:"Property Name"}),(0,Eo.jsx)("th",{style:Ig,children:"Update Type"}),(0,Eo.jsx)("th",{style:Ig,children:"Priority Request"}),(0,Eo.jsx)("th",{style:Ig,children:"Created Date"}),(0,Eo.jsx)("th",{style:{...Ig,textAlign:"right"}})]})}),(0,Eo.jsx)("tbody",{children:e.tasks.map(e=>{let{task:t,isTurn:n}=e;return(0,Eo.jsxs)("tr",{style:_g,onClick:()=>p(t),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&p(t)},onMouseEnter:e=>{var t,n;const r="undefined"!==typeof window&&"dark"===(null===(t=window.document)||void 0===t||null===(n=t.documentElement)||void 0===n?void 0:n.getAttribute("data-theme"));e.currentTarget.style.background=r?"rgba(255,255,255,0.06)":"#f7faff",e.currentTarget.style.color="var(--text-main)"},onMouseLeave:e=>{e.currentTarget.style.background="",e.currentTarget.style.color="var(--text-main)"},children:[o&&(0,Eo.jsx)("td",{style:{...Dg,width:"10%"},children:(0,Eo.jsx)("div",{style:{display:"inline-block",background:lp(t.mediaType),color:"#fff",borderRadius:12,padding:"2px 10px",fontSize:13,fontWeight:700,minWidth:44,textAlign:"center",boxShadow:"0 1px 4px rgba(80,120,200,0.10)",marginBottom:3},children:up(t.mediaType)})}),(0,Eo.jsx)("td",{style:Dg,children:(0,Eo.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:(0,Eo.jsx)("div",{style:{fontWeight:600},children:t.propertyName})})}),(0,Eo.jsx)("td",{style:Dg,children:t.updateType}),(0,Eo.jsx)("td",{style:Dg,children:t.priorityRequest?"Yes":""}),(0,Eo.jsx)("td",{style:Dg,children:Ag(t.createdAt)}),(0,Eo.jsx)("td",{style:{...Dg,textAlign:"right"},children:n&&(0,Eo.jsx)("span",{style:xg,children:"TURN"})})]},t.id)})})]})}):(0,Eo.jsx)("div",{style:{...Cg,margin:0},children:"No available tasks for this day."})]},e.date)}),(0,Eo.jsxs)("div",{style:{marginTop:40},children:[(0,Eo.jsx)("div",{style:{...Tg,fontSize:18},children:"Tasks without Calendar"}),Array.isArray(v)&&0!==v.length?(0,Eo.jsx)("div",{style:{background:"var(--bg-card, #181a20)",borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:0,marginBottom:28,overflow:"hidden"},children:(0,Eo.jsxs)("table",{style:Eg,children:[(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{children:[o&&(0,Eo.jsx)("th",{style:{...Ig,width:"10%"},children:"Media Type"}),(0,Eo.jsx)("th",{style:Ig,children:"Property Name"}),(0,Eo.jsx)("th",{style:Ig,children:"Update Type"}),(0,Eo.jsx)("th",{style:Ig,children:"Priority Request"}),(0,Eo.jsx)("th",{style:Ig,children:"Created Date"})]})}),(0,Eo.jsx)("tbody",{children:v.map(e=>(0,Eo.jsxs)("tr",{style:_g,onClick:()=>p(e),tabIndex:0,onKeyDown:t=>{"Enter"===t.key&&p(e)},children:[o&&(0,Eo.jsx)("td",{style:{...Dg,width:"10%"},children:(0,Eo.jsx)("div",{style:{display:"inline-block",background:lp(e.mediaType),color:"#fff",borderRadius:12,padding:"2px 10px",fontSize:13,fontWeight:700,minWidth:44,textAlign:"center",boxShadow:"0 1px 4px rgba(80,120,200,0.10)",marginBottom:3},children:up(e.mediaType)})}),(0,Eo.jsx)("td",{style:Dg,children:(0,Eo.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:(0,Eo.jsx)("div",{style:{fontWeight:600},children:e.propertyName})})}),(0,Eo.jsx)("td",{style:Dg,children:e.updateType}),(0,Eo.jsx)("td",{style:Dg,children:e.priorityRequest?"Yes":""}),(0,Eo.jsx)("td",{style:Dg,children:Ag(e.createdAt)})]},e.id))})]})}):(0,Eo.jsx)("div",{style:Cg,children:"All tasks have calendars."}),!b&&(!Array.isArray(v)||0===v.length)&&(0,Eo.jsx)("div",{style:Cg,children:"No tasks are available this week!"}),f&&(0,Eo.jsx)(Cm,{sidebarWidth:68,onClose:()=>p(null),children:e=>(0,Eo.jsx)("div",{style:{marginTop:20,width:"100%",maxWidth:1200},children:(0,Eo.jsx)(hg,{taskId:f.id,task:f,role:u,currentUser:c,onCloseTask:()=>p(null)})})})]})]})},jg=e=>{let{open:r,onClose:i}=e;const[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(2),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)(""),[y,v]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[x,S]=(0,t.useState)(-1),k=y.length>=2?o.filter(e=>e.name&&e.name.toLowerCase().includes(y.toLowerCase())||e.unitCode&&e.unitCode.toLowerCase().includes(y.toLowerCase())):[];return(0,t.useEffect)(()=>{if(!r)return;(async()=>{h(!0),m("");try{const e=(0,Co.getFirestore)(To),t=(0,Co.doc)(e,"autocomplete","propertyNames"),n=await(0,Co.getDoc)(t);if(n.exists()){const e=n.data().names||[];a(e)}else a([])}catch(Jm){m("Failed to fetch property names."),a([])}h(!1)})()},[r]),r?(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.28)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:i,children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card, #fff)",borderRadius:16,padding:36,minWidth:440,minHeight:260,boxShadow:"0 8px 40px rgba(60,100,180,0.13)",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("h2",{style:{marginTop:0,marginBottom:20},children:"Gap Search"}),g&&(0,Eo.jsx)("div",{style:{color:"red",marginBottom:12},children:g}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:16,marginBottom:18,alignItems:"flex-end",width:"98%"},children:[(0,Eo.jsxs)("div",{style:{flex:2,position:"relative"},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,fontSize:15},children:"Property"}),(0,Eo.jsx)("br",{}),(0,Eo.jsx)("input",{type:"text",value:y,onChange:e=>{v(e.target.value),l(null)},onFocus:()=>y.length>=2&&k.length>0&&w(!0),onBlur:()=>setTimeout(()=>w(!1),120),onKeyDown:function(e){if(b&&0!==k.length)if("ArrowDown"===e.key)S(e=>Math.min(e+1,k.length-1)),e.preventDefault();else if("ArrowUp"===e.key)S(e=>Math.max(e-1,0)),e.preventDefault();else if("Enter"===e.key&&x>=0){const t=k[x];l(t),v(t.name),w(!1),S(-1),e.preventDefault()}else"Escape"===e.key&&(w(!1),S(-1))},style:{width:"100%",padding:"8px 12px",borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:16,outline:"none",background:"var(--bg-card)",color:"var(--text-main)",boxSizing:"border-box",marginBottom:2,marginTop:6},autoComplete:"off",disabled:d||0===o.length,required:!0}),g&&(0,Eo.jsx)("div",{style:{color:"#c00",marginTop:4,marginBottom:2,fontWeight:500},children:g}),b&&(0,Eo.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--main-bg, #222)",color:"var(--main-text, #fff)",border:"1px solid #333",borderRadius:8,zIndex:20,maxHeight:220,overflowY:"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.13)",marginTop:2},children:k.map((e,t)=>(0,Eo.jsxs)("div",{onMouseDown:()=>{l(e),v(e.name),w(!1)},style:{padding:"8px 14px",background:t===x?"#3b82f6":"inherit",color:t===x?"#fff":"inherit",cursor:"pointer",fontWeight:600},children:[(0,Eo.jsx)("span",{style:{fontWeight:600},children:e.name}),(0,Eo.jsx)("span",{style:{color:"#aaa",marginLeft:8,fontSize:13},children:e.unitCode&&e.unitCode!==e.name?`(${e.unitCode})`:null})]},e.unitCode||t))})]}),(0,Eo.jsxs)("div",{style:{flex:1,width:"20%"},children:[(0,Eo.jsx)("label",{style:{fontWeight:600,fontSize:15},children:"Minimum Gap"}),(0,Eo.jsx)("br",{}),(0,Eo.jsx)("input",{type:"number",min:2,value:u,onChange:e=>c(parseInt(e.target.value)||""),style:{width:"90%",color:"var(--text-main)",padding:"8px 12px",fontSize:16,borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",background:"var(--bg-card)",marginTop:6}})]})]}),(0,Eo.jsx)("button",{style:{background:"linear-gradient(90deg, #f97316, #fbbf24)",color:"#fff",fontWeight:700,fontSize:16,border:"none",borderRadius:8,padding:"10px 22px",cursor:"pointer",marginBottom:18,marginTop:2,boxShadow:"0 2px 12px rgba(249,115,22,0.10)",outline:"none",transition:"background 0.18s, box-shadow 0.18s",width:"100%"},disabled:!s||d||!u||u<2,onClick:async()=>{if(!u||u<2)m("Minimum gap must be at least 2 days.");else{h(!0),m(""),p([]);try{const e=await fetch(s.ical+"?_="+Date.now()),t=await e.text(),{parseICalEvents:r}=await Promise.resolve().then(n.bind(n,2882)),i=r(t);i.sort((e,t)=>e.start-t.start);const o=new Date;o.setHours(0,0,0,0);const a=new Date(o);a.setMonth(o.getMonth()+6);let l=new Date(o);const c=[];for(let n=0;n<=i.length;n++){const e=n<i.length?i[n].start:a;if(l<e){if(Math.floor((e-l)/864e5)>=u){const t=l.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),n=new Date(e);n.setDate(n.getDate()-1);const r=n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});c.push(`${t} - ${r}`)}}n<i.length&&i[n].end>l&&(l=new Date(i[n].end))}p(c),0===c.length&&m("No gaps found matching the criteria.")}catch(Jm){m("Failed to search for gaps. Please try again.")}h(!1)}},children:d?"Searching...":"Search"}),(0,Eo.jsx)("div",{style:{minHeight:40},children:f.length>0&&(0,Eo.jsx)("ul",{style:{paddingLeft:18},children:f.map((e,t)=>(0,Eo.jsx)("li",{children:e},t))})}),(0,Eo.jsx)("button",{style:{position:"absolute",top:16,right:16,background:"none",border:"none",fontSize:22,cursor:"pointer",color:"var(--text-secondary, #888)"},onClick:i,"aria-label":"Close",children:"\xd7"})]})}):null},Rg={background:"#fffbe7",border:"1.5px solid #f7d674",borderRadius:8,padding:"18px 18px 10px 18px",marginBottom:24,marginTop:8,color:"#665200",fontSize:16,boxShadow:"0 1px 6px rgba(80,120,200,0.07)",maxWidth:480,float:"right"},Og={margin:"12px 0 0 0",padding:"8px 18px",background:"#f7d674",color:"#665200",border:"none",borderRadius:5,fontWeight:600,fontSize:16,cursor:"pointer"};function Ng(){const{user:e}=Do(),[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)("");return(0,t.useEffect)(()=>{let t=!0;return async function(){o(!0),s("");try{var n,i;if(null===e||void 0===e||!e.uid)throw new Error("No user");const o=(0,Co.getFirestore)(),a=null===(n=(await(0,Co.getDoc)((0,Co.doc)(o,"users",e.uid))).data())||void 0===n||null===(i=n.permissions)||void 0===i?void 0:i.adminTesting;t&&(r(a),(0,Yp.he)(a))}catch(Jm){s("Failed to load admin testing state.")}o(!1)}(),()=>{t=!1}},[e]),(0,Eo.jsxs)("div",{style:Rg,children:[(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:17,marginBottom:8},children:"Admin iCal Debug Mode"}),(0,Eo.jsxs)("div",{style:{marginBottom:8},children:[(0,Eo.jsxs)("div",{children:[(0,Eo.jsx)("b",{children:"Status:"})," ",n?(0,Eo.jsx)("span",{style:{color:"#c90000"},children:"ENABLED"}):(0,Eo.jsx)("span",{style:{color:"#0b8600"},children:"DISABLED"})]}),(0,Eo.jsxs)("div",{style:{fontSize:14,marginTop:4},children:["When enabled, live iCal fetches are ",(0,Eo.jsx)("b",{children:"disabled"})," for this account. Only cached iCal data will be used.",(0,Eo.jsx)("br",{}),"Toggle again to restore live fetching."]})]}),a&&(0,Eo.jsx)("div",{style:{color:"#c90000",marginBottom:6},children:a}),(0,Eo.jsx)("button",{style:Og,onClick:async function(){o(!0),s("");try{var t;if(null===e||void 0===e||!e.uid)throw new Error("No user");const i=(0,Co.getFirestore)(),o=(0,Co.doc)(i,"users",e.uid),a=(null===(t=(await(0,Co.getDoc)(o)).data())||void 0===t?void 0:t.permissions)||{},s=!n;await(0,Co.updateDoc)(o,{permissions:{...a,adminTesting:s}}),r(s),(0,Yp.he)(s)}catch(Jm){s("Failed to update admin testing state.")}o(!1)},disabled:i,children:i?"Loading...":n?"Disable iCal Debug Mode":"Enable iCal Debug Mode"})]})}const Mg=e=>{var n,r;let{selectedTaskId:i,onTaskSelect:o,onFilteredTasksChange:a}=e;const s=Do(),l=s.userData,u=null!==l&&void 0!==l&&null!==(n=l.permissions)&&void 0!==n&&n.mediaTypes&&Array.isArray(l.permissions.mediaTypes)?l.permissions.mediaTypes:sp.map(e=>e.key),[c,d]=(0,t.useState)(u),[h,f]=(0,t.useState)("createdAt"),[p,g]=(0,t.useState)("desc"),[m,y]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),[w,x]=(0,t.useState)(!1),[S,k]=(0,t.useState)([]),[T,C]=(0,t.useState)(!1),E=s.role,[I,D]=(0,t.useState)([]),[A,_]=(0,t.useState)("all"),[P,j]=(0,t.useState)(!0),[R,O]=(0,t.useState)({}),N=!(!E||"string"!==typeof E||!E.trim())&&["manager","photographer"].includes(E.trim().toLowerCase()),[M,L]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!N)return;(async()=>{j(!0);const e=(0,Co.getFirestore)(),t=(0,Co.query)((0,Co.collection)(e,"tasks"),(0,Co.where)("stage","==","Scheduling")),n=(await(0,Co.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));D(n),j(!1);const r=[...new Set(n.map(e=>{var t;return e.createdBy||e.log&&(null===(t=e.log[0])||void 0===t?void 0:t.user)}))],i=await Promise.all(r.filter(Boolean).map(async t=>{try{const n=(0,Co.doc)(e,"users",t),r=await(0,Co.getDoc)(n);if(r.exists())return{id:t,...r.data()}}catch(Jm){}return{id:t}})),o={};i.forEach(e=>{e&&e.id&&(o[e.id]=e)}),O(o)})()},[N]);s.currentUser;let F=I.filter(e=>"Scheduling"===e.stage);if(w&&S.length>0?F=F.filter(e=>S.includes(e.unitCode)):"photographer"===E&&s.user&&s.user.uid&&(F=F.filter(e=>e.assignedPhotographer===s.user.uid&&"Scheduling"===e.stage)),F=F.filter(e=>c.includes(e.mediaType)),F=F.filter(e=>"all"===A||("new"===A?!0===e.isNewProperty:"existing"!==A||!1===e.isNewProperty)),!T&&m.trim()){const e=m.trim().toLowerCase();F=F.filter(t=>{const n=(t.propertyName||"").toLowerCase(),r=(t.updateType||"").toLowerCase(),i=(t.assignedEditorDisplayName||"").toLowerCase(),o=t.priorityRequest?"priority":"",a=t.createdAt?"string"===typeof t.createdAt?t.createdAt:t.createdAt.toDate?t.createdAt.toDate().toISOString():new Date(t.createdAt).toISOString():"";return n.includes(e)||r.includes(e)||i.includes(e)||o.includes(e)||a.includes(e)})}!T&&h&&(F=[...F].sort((e,t)=>{let n=e[h],r=t[h];return"createdAt"===h&&(n=n?"string"===typeof n?new Date(n):n.toDate?n.toDate():new Date(n):0,r=r?"string"===typeof r?new Date(r):r.toDate?r.toDate():new Date(r):0),n<r?"asc"===p?-1:1:n>r?"asc"===p?1:-1:0}));const z=t.useRef();return t.useEffect(()=>{const e=z.current;e&&e.length===F.length&&e.every((e,t)=>e.id===F[t].id)||"function"!==typeof a||(a(F),z.current=F)},[F,a]),(0,Eo.jsxs)("div",{className:"content-container",style:{minHeight:400,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},children:[!0===(null===l||void 0===l||null===(r=l.permissions)||void 0===r?void 0:r.adminTesting)&&(0,Eo.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:8},children:(0,Eo.jsx)(Ng,{})}),(0,Eo.jsxs)("div",{children:[(0,Eo.jsxs)("div",{style:{width:"100%",margin:"20px 0 10px 0",position:"relative",display:"flex",alignItems:"center",minHeight:64},children:[(0,Eo.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:0},children:[T&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,Eo.jsx)("button",{style:{background:"linear-gradient(90deg, #f97316, #fbbf24)",color:"#fff",fontWeight:700,fontSize:17,border:"none",borderRadius:10,padding:"8px 18px",marginRight:18,cursor:"pointer",boxShadow:"0 2px 12px rgba(249,115,22,0.10)",letterSpacing:.2,outline:"none",transition:"background 0.18s, box-shadow 0.18s"},onClick:()=>L(!0),children:"Gap Search"})}),(0,Eo.jsx)(jg,{open:M,onClose:()=>L(!1)})]}),(0,Eo.jsxs)("h1",{style:{fontWeight:700,color:"var(--text-main)",fontSize:28,letterSpacing:.5,margin:0,marginRight:18,display:"flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,Eo.jsx)(Ho,{style:{color:"#3b82f6",marginRight:12}})," Scheduling"]}),(0,Eo.jsx)("button",{style:{background:T?"#f97316":"#3b82f6",color:"#fff",border:"1.5px solid var(--sidebar-border)",borderRadius:8,padding:"8px 18px",marginLeft:0,fontWeight:600,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px rgba(80,120,200,0.07)",transition:"background 0.15s, border 0.15s",display:"inline-block",whiteSpace:"nowrap",zIndex:40},onClick:()=>C(e=>!e),children:T?"Show All":"Show Available"})]}),!T&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)("div",{style:{minWidth:120,maxWidth:220,flex:"0 0 220px",display:"flex",alignItems:"center",position:"absolute",justifyContent:"flex-start"},children:(0,Eo.jsx)(zp,{value:A,onChange:_,style:{width:"100%",minWidth:90,fontSize:14,padding:"4px 12px"}})}),(0,Eo.jsxs)("div",{style:{position:"absolute",right:24,top:"50%",transform:"translateY(-50%)",width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",zIndex:2,background:"transparent"},children:[(0,Eo.jsx)("input",{ref:e=>{},type:"text",placeholder:"Search tasks...",value:m,onChange:e=>{y(e.target.value)},style:{width:v?220:0,opacity:v?1:0,marginRight:v?12:0,transition:"width 0.35s cubic-bezier(.4,0,.2,1), opacity 0.23s cubic-bezier(.4,0,.2,1), margin 0.2s",padding:v?"8px 14px":"8px 0px",borderRadius:8,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-card)",color:"var(--text-main)",fontSize:16,outline:"none",boxShadow:v?"0 2px 8px rgba(80,120,200,0.07)":"none",pointerEvents:v?"auto":"none",minWidth:0,maxWidth:"100%"},onBlur:()=>{""===m&&b(!1)},onKeyDown:e=>{"Escape"===e.key&&(b(!1),y(""))}}),(0,Eo.jsx)("button",{title:v?"Close Search":"Search Tasks",style:{background:"var(--bg-card)",border:"1.5px solid var(--sidebar-border)",color:"var(--text-main)",borderRadius:10,padding:8,marginRight:0,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(80,120,200,0.05)",transition:"background 0.15s, border 0.15s"},onClick:()=>{b(e=>(e?""!==m&&y(""):setTimeout(()=>{},80),!e))},onMouseOver:e=>{e.currentTarget.style.background="var(--sidebar-bg)"},onMouseOut:e=>{e.currentTarget.style.background="var(--bg-card)"},children:(0,Eo.jsxs)("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[(0,Eo.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,Eo.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]})]}),T?(0,Eo.jsx)(Pg,{tasks:F,loading:P,enabledMediaTypes:u}):(0,Eo.jsxs)("div",{className:"scheduling-table-container",style:{flex:1,height:"76vh"},children:[(0,Eo.jsx)("style",{children:"\n              .scheduling-table-container {\n                background: var(--bg-main);\n                overflow-y: hidden;\n              }\n            "}),(0,Eo.jsx)(jp,{tasks:F,users:Object.values(R),onRowClick:e=>o(e.id),visibleColumns:["propertyName","updateType","emergency","createdAt",...u.length>1?["mediaType"]:[]],sortColumn:T?void 0:h,sortDirection:T?void 0:p,onSort:T?void 0:e=>{h===e?g("asc"===p?"desc":"asc"):(f(e),g("asc"))}})]})]}),!T&&u.length>1&&(0,Eo.jsx)("div",{style:{position:"relative",width:"100%",display:"flex",justifyContent:"center",marginTop:20,marginBottom:0},children:(0,Eo.jsx)(Up,{enabledMediaTypes:u,selectedMediaTypes:c,onChange:d,persistKey:"schedulingMediaTypeToggle"})})]})};function Lg(e){let{open:n,onClose:r,user:i,onSave:o}=e;const[a,s]=t.useState((null===i||void 0===i?void 0:i.permissions)||{}),l=t.useRef(null);if(t.useEffect(()=>{s((null===i||void 0===i?void 0:i.permissions)||{})},[i]),t.useEffect(()=>{function e(e){"Escape"===e.key&&r()}if(n)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,r]),!n)return null;return(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onMouseDown:e=>{l.current&&!l.current.contains(e.target)&&r()},"aria-modal":"true",role:"dialog",children:(0,Eo.jsxs)("div",{ref:l,style:{background:"var(--bg-card, #fff)",color:"var(--text-main, #181c24)",borderRadius:14,padding:32,minWidth:350,boxShadow:"0 4px 32px rgba(60,80,160,0.16)",display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"90vw"},onMouseDown:e=>e.stopPropagation(),children:[(0,Eo.jsx)("h2",{style:{marginBottom:18,fontWeight:800,fontSize:22},children:"Edit Permissions"}),(0,Eo.jsxs)("div",{style:{marginBottom:22,width:"100%"},children:[(0,Eo.jsxs)("label",{style:{display:"block",marginBottom:12,fontSize:16},children:[(0,Eo.jsx)("input",{type:"checkbox",checked:!!a.propertyManagement,onChange:(u="propertyManagement",e=>{s(t=>({...t,[u]:e.target.checked}))})}),(0,Eo.jsx)("span",{style:{marginLeft:8},children:"Property Management"})]}),(0,Eo.jsxs)("div",{style:{marginTop:40},children:[(0,Eo.jsx)("div",{style:{fontWeight:600,marginBottom:8,fontSize:15},children:"Enabled Media Types"}),(0,Eo.jsx)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:sp.map(e=>{const t=!!Array.isArray(a.mediaTypes)&&a.mediaTypes.includes(e.key);return(0,Eo.jsx)("button",{type:"button",onClick:()=>{s(t=>{let n=Array.isArray(t.mediaTypes)?[...t.mediaTypes]:[];return n.includes(e.key)?n=n.filter(t=>t!==e.key):n.push(e.key),{...t,mediaTypes:n}})},style:{background:t?e.color:"#f3f4f6",color:t?"#fff":"#222",border:t?"1.5px solid var(--bg-card)":"1.5px solid #d1d5db",borderRadius:16,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer",boxShadow:t?"0 2px 8px rgba(0,0,0,0.10)":"none",transition:"background 0.18s, color 0.18s, box-shadow 0.18s",outline:"none"},"aria-pressed":t,children:up(e.key)},e.key)})})]})]}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:18,width:"100%",justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{onClick:r,style:{background:"#eee",color:"var(--text-main, #181c24)",border:"none",borderRadius:6,padding:"7px 22px",cursor:"pointer",fontWeight:500,fontSize:15},children:"Cancel"}),(0,Eo.jsx)("button",{onClick:()=>{o(a),r()},style:{background:"#3b82f6",color:"#fff",border:"none",borderRadius:6,padding:"7px 22px",cursor:"pointer",fontWeight:600,fontSize:15,boxShadow:"0 2px 8px rgba(60,130,246,0.10)"},children:"Save"})]})]})});var u}function Fg(e){let{userId:n,onEditPermissions:r,userObj:i,setUsers:o}=e;const[a,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),[u,c]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&s(!1)}return a?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]),(0,Eo.jsxs)("div",{style:{position:"relative",display:"inline-block"},ref:l,children:[(0,Eo.jsx)("button",{"aria-label":"More options",style:{background:"none",border:"none",borderRadius:6,padding:6,cursor:"pointer",color:"var(--text-main)",transition:"background 0.15s"},onClick:()=>{s(e=>!e)},children:(0,Eo.jsx)(Xo,{size:22})}),a&&(0,Eo.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,width:180,background:"var(--bg-card)",color:"var(--text-main)",boxShadow:"0 8px 24px 0 rgba(60,80,160,0.13)",borderRadius:12,zIndex:9999,padding:0,margin:0,display:"flex",flexDirection:"column",gap:0,alignItems:"stretch"},children:[(0,Eo.jsx)("button",{style:{width:"100%",background:"none",border:"none",padding:"10px 18px",textAlign:"left",color:"var(--text-main)",cursor:"pointer",fontWeight:500,borderRadius:8,transition:"background 0.13s, color 0.13s"},onMouseDown:()=>{s(!1),r&&i&&r(i)},onMouseOver:e=>{e.currentTarget.style.background="#e3f0ff",e.currentTarget.style.color="#2366b8"},onMouseOut:e=>{e.currentTarget.style.background="none",e.currentTarget.style.color="var(--text-main)"},children:"Additional Permissions"}),(0,Eo.jsx)("button",{style:{width:"100%",background:"none",border:"none",padding:"10px 18px",textAlign:"left",color:"#d32f2f",cursor:"pointer",fontWeight:500,borderRadius:8,transition:"background 0.13s"},disabled:u,onClick:()=>h(!0),onMouseOver:e=>e.currentTarget.style.background="rgba(227,76,76,0.08)",onMouseOut:e=>e.currentTarget.style.background="none",children:"Delete User"}),d&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.32)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",color:"var(--text-main)",borderRadius:12,boxShadow:"0 8px 24px 0 rgba(60,80,160,0.13)",minWidth:320,maxWidth:"90vw",padding:32,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Eo.jsx)("div",{style:{fontSize:20,fontWeight:600,marginBottom:12},children:"Delete User?"}),(0,Eo.jsx)("div",{style:{marginBottom:24,textAlign:"center"},children:"Are you sure you want to delete this user profile? This action cannot be undone."}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,Eo.jsx)("button",{onClick:()=>h(!1),style:{padding:"8px 22px",borderRadius:8,border:"none",background:"var(--bg-secondary)",color:"var(--text-main)",fontWeight:500,cursor:"pointer",fontSize:16,marginRight:8},disabled:u,children:"Cancel"}),(0,Eo.jsx)("button",{onClick:async()=>{await async function(){c(!0);try{s(!1),console.log("Delete button clicked"),console.log("Attempting to delete user:",n);const e=(0,Co.getFirestore)();await(0,Co.deleteDoc)((0,Co.doc)(e,"users",n)),o(e=>{const t=e.filter(e=>e.id!==n);return console.log("User deleted, new users list:",t),t}),console.log("Successfully deleted user:",n)}catch(e){alert("Failed to delete user: "+(e.message||e.toString())),console.error("Delete user error:",e)}finally{c(!1)}}(),h(!1)},style:{padding:"8px 22px",borderRadius:8,border:"none",background:"#d32f2f",color:"#fff",fontWeight:600,cursor:"pointer",fontSize:16,opacity:u?.7:1},disabled:u,children:u?"Deleting...":"Delete"})]})]})})]})]})}const zg=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),{user:u,userData:c}=Do(),d=c&&"manager"===c.role,[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[m,y]=(0,t.useState)({}),[v,b]=(0,t.useState)(null),[w,x]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[T,C]=(0,t.useState)("standard"),[E,I]=(0,t.useState)(!1),[D,A]=(0,t.useState)(""),_=()=>{f(!1),A("")};(0,t.useEffect)(()=>{(async()=>{l(!0);const e=(0,Co.getFirestore)(),t=await(0,Co.getDocs)((0,Co.collection)(e,"users"));a(t.docs.map(e=>({id:e.id,...e.data()}))),l(!1)})()},[]);return(0,Eo.jsxs)("div",{style:{marginLeft:"68px",width:"auto",background:"var(--bg-main)",boxSizing:"border-box"},children:[(0,Eo.jsxs)("h2",{style:{fontSize:28,fontWeight:800,margin:"40px 0 28px",color:"var(--text-main)",letterSpacing:.2,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[(0,Eo.jsx)(aa,{style:{color:"#3b82f6",marginRight:12,verticalAlign:"middle"}})," User Management",d&&(0,Eo.jsx)("button",{title:"Approve Pending Users",style:{background:"none",border:"none",cursor:"pointer",marginLeft:4,padding:0,display:"flex",alignItems:"center"},onClick:()=>g(!0),children:(0,Eo.jsx)(ra,{style:{color:"#10b981",fontSize:22}})})]}),p&&(0,Eo.jsx)("div",{onClick:()=>g(!1),style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(20,24,32,0.33)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},children:(0,Eo.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"var(--bg-card, #fff)",color:"var(--text-main, #222)",borderRadius:16,padding:"32px 28px 28px 28px",width:"35%",boxShadow:"0 8px 48px 0 rgba(60,80,160,0.13)",border:"1.5px solid var(--sidebar-border, #e3e3e3)",position:"relative",transition:"background 0.2s, color 0.2s",animation:"fadeInModal 0.22s cubic-bezier(.39,1.12,.37,1)"},children:[(0,Eo.jsx)("h3",{style:{marginTop:0,marginBottom:18,fontWeight:700,color:"var(--text-main)",fontSize:22},children:"Approve Pending Users"}),(0,Eo.jsx)("button",{onClick:()=>g(!1),style:{position:"absolute",right:18,top:18,background:"none",border:"none",fontSize:22,cursor:"pointer",color:"var(--text-secondary, #888)",borderRadius:4,padding:2,lineHeight:1},title:"Close",tabIndex:0,"aria-label":"Close Modal",children:"\xd7"}),0===o.filter(e=>"pending"===e.role).length?(0,Eo.jsx)("div",{style:{color:"var(--text-secondary, #888)",padding:24},children:"No pending users."}):(0,Eo.jsx)("div",{children:o.filter(e=>"pending"===e.role).map(e=>(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:18,borderBottom:"1px solid var(--sidebar-border, #e3e3e3)",paddingBottom:10},children:[(0,Eo.jsxs)("div",{style:{flex:1},children:[(0,Eo.jsx)("div",{style:{fontWeight:600},children:e.displayName||e.email||e.id}),(0,Eo.jsx)("div",{style:{color:"var(--text-secondary, #888)",fontSize:13},children:e.email})]}),(0,Eo.jsxs)("select",{value:m[e.id]||"standard",onChange:t=>y(n=>({...n,[e.id]:t.target.value})),style:{marginRight:10,borderRadius:6,padding:"4px 8px",border:"1.5px solid var(--sidebar-border, #e3e3e3)",background:"var(--bg-main, #f5f7fa)",color:"var(--text-main, #222)"},children:[(0,Eo.jsx)("option",{value:"standard",children:"Standard"}),(0,Eo.jsx)("option",{value:"editor",children:"Editor"}),(0,Eo.jsx)("option",{value:"photographer",children:"Photographer"}),(0,Eo.jsx)("option",{value:"manager",children:"Manager"})]}),(0,Eo.jsx)("button",{disabled:v===e.id,onClick:()=>(async e=>{const t=m[e]||"standard";b(e);const n=(0,Co.getFirestore)();await(0,Co.updateDoc)((0,Co.doc)(n,"users",e),{role:t}),a(n=>n.map(n=>n.id===e?{...n,role:t}:n)),b(null)})(e.id),style:{background:"var(--accent-green, #10b981)",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:600,marginRight:6,cursor:"pointer",transition:"background 0.18s"},children:"Approve"}),(0,Eo.jsx)("button",{disabled:v===e.id,onClick:()=>(async e=>{b(e);const t=(0,Co.getFirestore)();await(0,Co.updateDoc)((0,Co.doc)(t,"users",e),{role:"deleted"}),a(t=>t.filter(t=>t.id!==e)),b(null)})(e.id),style:{background:"var(--accent-red, #e11d48)",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:600,cursor:"pointer",transition:"background 0.18s"},children:"Delete"})]},e.id))})]})}),s?(0,Eo.jsx)("div",{style:{color:"#888",fontSize:16,marginTop:48},children:"Loading users..."}):(0,Eo.jsxs)("div",{style:{width:"100%",maxWidth:980,margin:"0 auto",borderRadius:20,boxShadow:"0 8px 48px 0 rgba(60,80,160,0.13)",background:"var(--bg-card)",overflow:"hidden",display:"flex",flexDirection:"column",minHeight:320,position:"relative"},children:[(0,Eo.jsx)("button",{title:"Add User",onClick:()=>{f(!0),x(""),k(""),C("standard"),A("")},style:{position:"absolute",top:12,right:18,background:"var(--sidebar-bg, #f5f7fa)",border:"none",borderRadius:"50%",width:34,height:34,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 4px rgba(80,120,200,0.08)",cursor:"pointer",color:"#3b82f6",zIndex:10,transition:"background 0.14s"},children:(0,Eo.jsx)(Jo,{size:20})}),(0,Eo.jsx)("div",{style:{flex:1,overflowX:"auto",overflowY:"auto",height:"100%"},children:(0,Eo.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,background:"var(--bg-card)",tableLayout:"fixed",fontSize:16,minWidth:600},children:[(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{style:{background:"var(--bg-main)",color:"var(--text-main)",position:"sticky",top:0,zIndex:2},children:[(0,Eo.jsx)("th",{style:{width:"30%",padding:"18px 14px",fontWeight:700,fontSize:16,textAlign:"left",borderBottom:"2.5px solid var(--sidebar-border, #e3e3e3)",letterSpacing:.2},children:"Display Name"}),(0,Eo.jsx)("th",{style:{width:"35%",padding:"18px 14px",fontWeight:700,fontSize:16,textAlign:"left",borderBottom:"2.5px solid var(--sidebar-border, #e3e3e3)",letterSpacing:.2},children:"Email"}),(0,Eo.jsx)("th",{style:{width:"25%",padding:"18px 14px",fontWeight:700,fontSize:16,textAlign:"left",borderBottom:"2.5px solid var(--sidebar-border, #e3e3e3)",letterSpacing:.2},children:"Role"}),(0,Eo.jsx)("th",{style:{width:"10%",borderBottom:"2.5px solid var(--sidebar-border, #e3e3e3)"}})]})}),(0,Eo.jsx)("tbody",{children:o.map((e,t)=>(0,Eo.jsxs)("tr",{style:{background:t%2===0?"var(--bg-main)":"var(--bg-card)",transition:"background 0.18s",borderBottom:"1.5px solid var(--sidebar-border, #e3e3e3)",cursor:"default"},onMouseOver:e=>e.currentTarget.style.background="rgba(120,130,160,0.10)",onMouseOut:e=>e.currentTarget.style.background=t%2===0?"var(--bg-main)":"var(--bg-card)",children:[(0,Eo.jsx)("td",{style:{width:"30%",padding:"14px 14px",fontWeight:600,color:"var(--text-main)",maxWidth:220,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.displayName||"-"}),(0,Eo.jsx)("td",{style:{width:"35%",padding:"14px 14px",fontWeight:400,color:"var(--text-main)",maxWidth:270,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.email||"-"}),(0,Eo.jsx)("td",{style:{width:"25%",padding:"10px 14px",minWidth:170},children:(0,Eo.jsxs)("select",{value:e.role||"",onChange:t=>(async(e,t)=>{const n=(0,Co.getFirestore)();await(0,Co.updateDoc)((0,Co.doc)(n,"users",e),{role:t}),a(n=>n.map(n=>n.id===e?{...n,role:t}:n))})(e.id,t.target.value),style:{fontSize:16,padding:"8px 20px",borderRadius:9,border:"1.5px solid var(--sidebar-border, #e3e3e3)",background:"var(--bg-main)",color:"var(--text-main)",fontWeight:600},disabled:!d||e.id===c.id,children:[(0,Eo.jsx)("option",{value:"manager",children:"Manager"}),(0,Eo.jsx)("option",{value:"editor",children:"Editor"}),(0,Eo.jsx)("option",{value:"photographer",children:"Photographer"}),(0,Eo.jsx)("option",{value:"standard",children:"Standard"}),(0,Eo.jsx)("option",{value:"pending",children:"Pending"})]})}),(0,Eo.jsx)("td",{style:{width:"10%",padding:"10px 0",textAlign:"center",position:"relative"},children:(0,Eo.jsx)(Fg,{userId:e.id,userObj:e,onEditPermissions:e=>{i(e),n(!0)},setUsers:a})})]},e.id))})]})})]}),(0,Eo.jsx)(Lg,{open:e,onClose:()=>n(!1),user:r,onSave:async e=>{if(!r)return;const t=(0,Co.getFirestore)();await(0,Co.updateDoc)((0,Co.doc)(t,"users",r.id),{permissions:e}),a(t=>t.map(t=>t.id===r.id?{...t,permissions:e}:t))}}),h&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.14)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:_,children:(0,Eo.jsxs)("form",{onClick:e=>e.stopPropagation(),onSubmit:async e=>{if(e.preventDefault(),w.trim()){I(!0),A("");try{const e=(0,Co.getFirestore)(),t={displayName:w.trim(),email:S||"",role:T.trim()||"pending",createdAt:(new Date).toISOString()};if(S.trim()){if(o.find(e=>e.email&&e.email.toLowerCase()===S.trim().toLowerCase()))return A("A user with this email already exists."),void I(!1)}const n=(0,Co.collection)(e,"users"),r=await(0,Co.addDoc)(n,t);a(e=>[...e,{...t,id:r.id}]),_()}catch(t){A("Failed to create user: "+(t.message||t.toString()))}I(!1)}else A("Full name is required.")},style:{boxShadow:"0 4px 32px rgba(60,80,160,0.16)",padding:32,minWidth:340,display:"flex",flexDirection:"column",gap:18,position:"relative",color:"var(--text-main, #f3f4f6)",background:"var(--bg-card)",borderRadius:16},children:[(0,Eo.jsx)("style",{children:"\n            form input::placeholder {\n              color: #aeb5c7;\n              opacity: 1;\n            }\n          "}),(0,Eo.jsx)("button",{type:"button",onClick:_,style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:24,color:"#aaa",cursor:"pointer"},"aria-label":"Close",children:"\xd7"}),(0,Eo.jsx)("h3",{style:{margin:0,fontWeight:700,fontSize:20},children:"Add New User"}),(0,Eo.jsxs)("label",{style:{fontWeight:600,fontSize:15,width:"100%",display:"block",marginBottom:6},children:["Full Name",(0,Eo.jsx)("input",{type:"text",value:w,onChange:e=>x(e.target.value),style:{width:"100%",boxSizing:"border-box",padding:8,borderRadius:7,border:"1.5px solid var(--sidebar-border, #3b4252)",marginTop:4,marginBottom:8,fontSize:15,background:"var(--bg-main, #23272f)",color:"var(--text-main, #f3f4f6)"},placeholder:"Enter full name",required:!0})]}),(0,Eo.jsxs)("label",{style:{fontWeight:600,fontSize:15,width:"100%",display:"block",marginBottom:6},children:["Email",(0,Eo.jsx)("input",{type:"email",value:S,onChange:e=>k(e.target.value),style:{width:"100%",boxSizing:"border-box",padding:8,borderRadius:7,border:"1.5px solid var(--sidebar-border, #3b4252)",marginTop:4,marginBottom:8,fontSize:15,background:"var(--bg-main, #23272f)",color:"var(--text-main, #f3f4f6)"},placeholder:"Enter email"})]}),(0,Eo.jsxs)("label",{style:{fontWeight:600,fontSize:15,width:"100%",display:"block",marginBottom:6},children:["Role",(0,Eo.jsxs)("select",{value:T,onChange:e=>C(e.target.value),style:{width:"100%",boxSizing:"border-box",padding:8,borderRadius:7,border:"1.5px solid var(--sidebar-border, #3b4252)",marginTop:4,marginBottom:8,fontSize:15,background:"var(--bg-main, #23272f)",color:"var(--text-main, #f3f4f6)"},children:[(0,Eo.jsx)("option",{value:"pending",children:"pending"}),(0,Eo.jsx)("option",{value:"standard",children:"standard"}),(0,Eo.jsx)("option",{value:"editor",children:"editor"}),(0,Eo.jsx)("option",{value:"manager",children:"manager"}),(0,Eo.jsx)("option",{value:"photographer",children:"photographer"}),(0,Eo.jsx)("option",{value:"contractor",children:"contractor"})]})]}),D&&(0,Eo.jsx)("div",{style:{color:"#b82e2e",fontWeight:500,marginTop:-8},children:D}),(0,Eo.jsx)("button",{type:"submit",disabled:E,style:{marginTop:8,background:"#3b82f6",color:"#fff",border:"none",borderRadius:8,padding:"10px 0",fontWeight:700,fontSize:16,cursor:E?"not-allowed":"pointer",opacity:E?.7:1,transition:"background 0.18s"},children:E?"Creating...":"Create User"})]})})]})},Ug=e=>{let{onClick:n,visible:r}=e;const[i,o]=(0,t.useState)(0),{user:a,role:s}=Do();return(0,t.useEffect)(()=>{const e=(0,Co.getFirestore)(),t=(0,Co.query)((0,Co.collectionGroup)(e,"issues"),(0,Co.where)("status","==","open"));let n;return n="editor"===s&&null!==a&&void 0!==a&&a.uid?(0,Co.onSnapshot)(t,async t=>{const n=t.docs.map(e=>{const t=e.ref.path.split("/"),n=t[t.indexOf("tasks")+1];return{id:e.id,...e.data(),taskId:n}}),r=[...new Set(n.map(e=>e.taskId))],i=await Promise.all(r.map(async t=>{try{const n=(0,Co.doc)(e,"tasks",t),r=await(0,Co.getDoc)(n);if(r.exists())return{id:t,...r.data()}}catch(Jm){}return{id:t}})),s={};i.forEach(e=>{e&&e.id&&(s[e.id]=e)});const l=n.filter(e=>{const t=s[e.taskId];return t&&t.assignedEditor===a.uid&&4===t.progressState});o(l.length)}):(0,Co.onSnapshot)(t,e=>{o(e.size)}),()=>n&&n()},[s,a]),r?(0,Eo.jsxs)("button",{title:"View Issues",onClick:n,style:{background:"none",border:"none",position:"relative",marginTop:24,cursor:"pointer",width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Eo.jsx)(Bo,{size:28,color:"#b82e2e"}),i>0&&(0,Eo.jsx)("span",{style:{position:"absolute",top:0,right:-5,background:"#b82e2e",color:"#fff",borderRadius:999,fontSize:13,fontWeight:700,minWidth:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0px",boxShadow:"0 1px 4px rgba(184,46,46,0.14)"},children:i})]}):null},Vg=e=>{let{onClick:n,visible:r}=e;const[i,o]=(0,t.useState)(0),{role:a}=Do();return(0,t.useEffect)(()=>{if(!r)return;const e=(0,Co.getFirestore)(),t=(0,Co.query)((0,Co.collection)(e,"tasks"),(0,Co.where)("stage","==","Scheduling"));return(0,Co.onSnapshot)(t,e=>{o(e.size)})},[r,a]),r?(0,Eo.jsxs)("button",{onClick:n,style:{position:"relative",background:"none",border:"none",marginTop:24,cursor:"pointer",width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10},children:[(0,Eo.jsx)(Ho,{size:28,color:"var(--text-main)"}),i>0&&(0,Eo.jsx)("span",{style:{position:"absolute",top:0,right:-5,background:"#4f8cff",color:"#fff",borderRadius:999,fontSize:13,fontWeight:700,minWidth:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0px",boxShadow:"0 1px 4px rgba(79,140,255,0.14)"},children:i})]}):null};function Bg(e){let{onClick:t,visible:n}=e;return n?(0,Eo.jsx)("button",{title:"Completed Tasks",style:{position:"relative",width:44,height:44,background:"none",border:"none",padding:0,cursor:"pointer",outline:"none",marginTop:24},onClick:t,"aria-label":"Completed Tasks",children:(0,Eo.jsx)(qo,{size:28,color:"#8fe395"})}):null}const Wg=(0,t.createContext)();function qg(){return(0,t.useContext)(Wg)}function Hg(e){let{children:n}=e;const[r,i]=(0,t.useState)(!1),o=(0,t.useCallback)(()=>i(!0),[]),a=(0,t.useCallback)(()=>i(!1),[]);return(0,Eo.jsx)(Wg.Provider,{value:{showSettings:r,openSettings:o,closeSettings:a},children:n})}const $g={width:68,height:"100dvh",background:"var(--sidebar-bg)",borderRight:"1.5px solid var(--sidebar-border)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",position:"fixed",left:0,top:0,zIndex:100,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:0},Kg={background:"none",border:"none",padding:0,margin:0,cursor:"pointer",color:"var(--text-main)",outline:"none",width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,transition:"background 0.15s"},Gg=e=>{let{role:n}=e;const{userManager:r}=Do(),[i,o]=t.useState(()=>localStorage.getItem("theme")||"light"),a=J(),s=ee();t.useEffect(()=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i)},[i]);return(0,Eo.jsxs)("nav",{style:$g,children:["standard"!==n&&(0,Eo.jsx)("button",{title:"Dashboard",style:{...Kg,marginTop:24},onClick:()=>s("/dashboard"),children:(0,Eo.jsx)($o,{size:28})}),("editor"===n||"photographer"===n||"standard"===n||"manager"===n)&&(0,Eo.jsx)("button",{title:"Task Lookup",style:{...Kg,background:"/task-lookup"===a.pathname?"var(--sidebar-active)":"none",marginTop:24},onClick:()=>s("/task-lookup"),children:(0,Eo.jsx)(Zo,{size:28})}),["manager","editor"].includes(n)&&"standard"!==n&&(0,Eo.jsx)(Ug,{visible:!0,style:{...Kg,marginTop:24},onClick:()=>s("/issues")}),("manager"===n||"photographer"===n)&&(0,Eo.jsx)(Vg,{visible:!0,onClick:()=>s("/scheduling")}),("manager"===n||r)&&"standard"!==n&&(0,Eo.jsx)("button",{title:"User Management",style:{...Kg,marginTop:24},onClick:()=>s("/user-management"),children:(0,Eo.jsx)(aa,{size:28})}),"manager"===n&&(0,Eo.jsx)(Bg,{visible:!0,onClick:()=>s("/completed-tasks")}),(0,Eo.jsx)("button",{title:"light"===i?"Switch to dark mode":"Switch to light mode",style:{...Kg,marginBottom:20,marginTop:"auto",background:"dark"===i?"#222":"#f7faff",color:"dark"===i?"#ffe484":"#335"},onClick:()=>o("light"===i?"dark":"light"),children:"light"===i?(0,Eo.jsx)(Qo,{size:24}):(0,Eo.jsx)(ea,{size:24})}),("manager"===n||"editor"===n||"photographer"===n)&&(0,Eo.jsx)(Yg,{}),(0,Eo.jsx)("button",{title:"Logout",style:{...Kg,marginBottom:16},onClick:async()=>{await Jr(So)},children:(0,Eo.jsx)(Go,{size:28})})]})};function Yg(){const{openSettings:e}=qg();return(0,Eo.jsx)("button",{title:"Settings",style:{...Kg,marginBottom:16,background:"none",color:"var(--text-main)",transition:"background 0.18s"},onClick:e,onMouseOver:e=>{e.currentTarget.style.background="var(--sidebar-hover-bg, #e6eaff)"},onMouseOut:e=>{e.currentTarget.style.background="none"},children:(0,Eo.jsxs)("svg",{width:"26",height:"26",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",style:{color:"var(--text-main)"},children:[(0,Eo.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,Eo.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 4.6 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09c0 .7.4 1.3 1 1.51a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 8c.7 0 1.3.4 1.51 1H21a2 2 0 1 1 0 4h-.09c-.11.61-.41 1.16-.91 1.51z"})]})})}const Qg="P7HF5F7EEG";async function Xg(e){let{query:t,page:n=0,hitsPerPage:r=25,filters:i}=e;const o=`https://${Qg}-dsn.algolia.net/1/indexes/tasks/query`,a={query:t,page:n,hitsPerPage:r,...i?{filters:i}:{facetFilters:'stage="Completed"'}};let s;try{if(s=await fetch(o,{method:"POST",headers:{"X-Algolia-Application-Id":Qg,"X-Algolia-API-Key":"85334946fb1fff4c0562f395d3c425a9","Content-Type":"application/json"},body:JSON.stringify(a)}),!s.ok)throw new Error("Algolia search failed");return await s.json()}catch(l){throw l}}function Jg(){const e=ee(),{publicId:n}=te(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(!1),[u,c]=(0,t.useState)(""),[d,h]=(0,t.useState)(null),[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)("completedDate"),[y,v]=(0,t.useState)("desc"),[b,w]=(0,t.useState)(!0),[x,S]=(0,t.useState)(null),[k,T]=(0,t.useState)(0),[C,E]=(0,t.useState)(!1),[I,D]=(0,t.useState)(!0),[A,_]=(0,t.useState)(!1),P=(0,t.useRef)(null),j=(0,t.useRef)(),{role:R,currentUser:O}=Do(),[N,M]=(0,t.useState)("");(0,t.useEffect)(()=>{const e=setTimeout(()=>{M(u)},350);return()=>clearTimeout(e)},[u]);const[L,F]=(0,t.useState)(!1);(0,t.useEffect)(()=>{a(!0),T(0),D(!0),F(!1);let e=setTimeout(()=>{F(!0)},5e3);return(async()=>{try{const e=await Xg({query:N.trim(),page:0,hitsPerPage:25}),t=e.hits.filter(e=>"Completed"===e.stage&&!0!==e.archived);i(t),D(e.nbPages>1)}catch{i([]),D(!1)}a(!1),clearTimeout(e),F(!1)})(),()=>clearTimeout(e)},[N]);const z=(()=>{let e=null,t=!1;return async()=>{!I||A||t||(t=!0,clearTimeout(e),e=setTimeout(async()=>{_(!0);try{const e=k+1,t=await Xg({query:u,page:e,hitsPerPage:20});i(e=>[...e,...t.hits]),T(e),D(e+1<t.nbPages)}catch{D(!1)}_(!1),t=!1},200))}})(),U=t.useCallback(e=>{o||A||(j.current&&j.current.disconnect(),j.current=new window.IntersectionObserver(e=>{e[0].isIntersecting&&z()}),e&&j.current.observe(e))},[o,A,I,k,u]);(0,t.useEffect)(()=>{(async()=>{try{const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"users"),n=await(0,Co.getDocs)(t);p(n.docs.map(e=>({id:e.id,...e.data()})))}catch{p([])}})()},[]);t.useMemo(()=>{let e=r.filter(e=>!0!==e.archived);if(u.trim()){const t=u.trim().toLowerCase();e=e.filter(e=>{var n,r;const i=(e.propertyName||"").toLowerCase(),o=(null===(n=e.prettyPropertyName)||void 0===n||null===(r=n.toLowerCase)||void 0===r?void 0:r.call(n))||"",a=(e.propertyType||"").toLowerCase(),s=(e.updateType||"").toLowerCase(),l=(e.id||"").toLowerCase(),u=e.lastProgressUpdate||e.stageUpdated||e.completedAt||e.updatedAt||e.createdAt||null;let c="";if(u){const e=new Date(u);isNaN(e)||(c=e.toLocaleString().toLowerCase())}return[i,o,a,s,l,c].some(e=>e&&e.includes(t))})}return e=e.sort((e,t)=>{let n=e[g],r=t[g];if(null==n&&(n=""),null==r&&(r=""),"propertyName"===g||"updateType"===g||"assignedEditorDisplayName"===g)return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===y?-1:1:n>r?"asc"===y?1:-1:0;if("completedDate"===g){const n=new Date(e.completedDate),r=new Date(t.completedDate),i=n instanceof Date&&!isNaN(n),o=r instanceof Date&&!isNaN(r);return i||o?i?o?"asc"===y?n-r:r-n:"asc"===y?-1:1:"asc"===y?1:-1:0}return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===y?-1:1:n>r?"asc"===y?1:-1:0}),e},[r,u,g,y]);return(0,t.useEffect)(()=>{!async function(){if(n){let t=r.find(e=>e.publicId===n||e.id===n||e.objectID===n);if(t)h(t);else try{const e=await Xg({query:"",hitsPerPage:1,filters:`stage=Completed AND publicId=${parseInt(n,10)}`});console.log("Algolia modal fetch hits:",e.hits),t=e.hits.find(e=>String(e.publicId)===String(n)||String(e.id)===String(n)||String(e.objectID)===String(n)),t?(i(e=>e.some(e=>e.publicId===t.publicId||e.id===t.id||e.objectID===t.objectID)?e:[t,...e]),h(t)):h(null)}catch(e){console.error("Error fetching from Algolia for publicId",n,e),h(null)}}else h(null)}()},[n,r]),(0,Eo.jsxs)("div",{style:{padding:32,maxWidth:1200,margin:"0 auto"},children:[(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24},children:[(0,Eo.jsx)("h2",{style:{fontWeight:700,fontSize:28,margin:0},children:"Completed Tasks"}),(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:18},children:[(0,Eo.jsx)("input",{ref:P,type:"text",placeholder:"Search completed tasks...",value:u,onChange:e=>c(e.target.value),style:{width:s?240:0,opacity:s?1:0,marginRight:s?12:0,transition:"width 0.35s cubic-bezier(.4,0,.2,1), opacity 0.23s cubic-bezier(.4,0,.2,1), margin 0.2s",padding:s?"8px 14px":"8px 0px",borderRadius:8,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-card)",color:"var(--text-main)",fontSize:16,outline:"none",boxShadow:s?"0 2px 8px rgba(80,120,200,0.07)":"none",pointerEvents:s?"auto":"none",minWidth:0,maxWidth:320},onBlur:()=>{""===u&&l(!1)},onKeyDown:e=>{"Escape"===e.key&&(l(!1),c(""))}}),(0,Eo.jsx)("button",{title:s?"Close Search":"Search Completed Tasks",style:{background:"var(--bg-card)",border:"1.5px solid #ddd",color:"var(--text-main)",borderRadius:10,borderColor:"var(--sidebar-border)",padding:8,marginRight:16,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(80,120,200,0.05)",transition:"background 0.15s, border 0.15s"},onClick:()=>{l(e=>(e?""!==u&&c(""):setTimeout(()=>P.current&&P.current.focus(),80),!e))},onMouseOver:e=>{e.currentTarget.style.background="var(--sidebar-bg)"},onMouseOut:e=>{e.currentTarget.style.background="var(--bg-card)"},children:(0,Eo.jsx)(Zo,{size:22})})]})]}),(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:14,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:0,minHeight:360,width:"100%",minWidth:800},children:[L?(0,Eo.jsx)("div",{style:{textAlign:"center",padding:48,fontSize:18},children:"Loading completed tasks..."}):(0,Eo.jsx)(jp,{tasks:r,visibleColumns:["propertyName","updateType","completedDate"],onRowClick:t=>e(`/completed-tasks/${t.publicId}`),users:f,sortColumn:g,sortDirection:y,onSort:e=>{g===e?v("asc"===y?"desc":"asc"):(m(e),v("asc"))},customHeaders:{completedDate:"Completed Date"},customCellRenderers:{completedDate:e=>{if(!e.completedDate)return"-";const t=new Date(e.completedDate);return isNaN(t)?"-":t.toLocaleString()}},rowProps:(e,t)=>({ref:t===r.length-1&&r.length>0?U:void 0}),enableRowProps:!0}),(o||A)&&(0,Eo.jsx)("div",{style:{textAlign:"center",padding:24,fontSize:16},children:"Loading more tasks..."}),!(o||A||L)&&0===r.length&&(0,Eo.jsx)("div",{style:{textAlign:"center",padding:48,fontSize:18},children:"No results found."})]}),d&&(0,Eo.jsx)(Cm,{sidebarWidth:0,onClose:()=>e("/completed-tasks"),children:t=>(0,Eo.jsx)("div",{style:{marginTop:20,width:"100%",maxWidth:1200},children:(0,Eo.jsx)(hg,{taskId:(null===d||void 0===d?void 0:d.id)||(null===d||void 0===d?void 0:d.objectID)||(null===d||void 0===d?void 0:d.publicId),role:R,currentUser:O,users:f,onAddFiles:()=>{},onCloseTask:()=>e("/completed-tasks"),onReassign:()=>{},onReportIssue:()=>{}})})})]})}var Zg=n(5766),em=n.n(Zg);function tm(e){let{open:n,onClose:r,onUpload:i}=e;const[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(!1),d=(0,t.useRef)(),[h,f]=(0,t.useState)(!1),p=e=>{e&&(e.name.endsWith(".csv")?(l(""),f(!0),em().parse(e,{header:!0,skipEmptyLines:!0,complete:async t=>{try{const n=t.data.map(e=>{let n="";if("string"===typeof e.iCal&&e.iCal.trim())n=e.iCal.trim();else if("string"===typeof e["iCal Link"]&&e["iCal Link"].trim())n=e["iCal Link"].trim();else if(Array.isArray(t.meta&&t.meta.fields)&&t.meta.fields.length>=46){const r=t.meta.fields[45];"string"===typeof e[r]&&e[r].trim()&&(n=e[r].trim())}return{name:"string"===typeof e.Name?e.Name.trim():"",unitCode:"string"===typeof e["Unit Code"]?e["Unit Code"].trim():"",ical:n}}).filter(e=>e.name&&e.unitCode),o=(0,Co.getFirestore)(To);await(0,Co.setDoc)((0,Co.doc)(o,"autocomplete","propertyNames"),{names:n}),f(!1),a(!0),i(e),setTimeout(()=>{a(!1),r()},1800)}catch(n){l("Failed to upload property names."),f(!1)}},error:()=>{l("Failed to parse CSV file."),f(!1)}})):l("Only CSV files are allowed."))};if(!n)return null;return(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(la,{visible:o,message:"Property names updated successfully!",type:"success",autoHideDuration:1800}),(0,Eo.jsx)("div",{onClick:e=>{e.target===e.currentTarget&&r()},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",color:"var(--text-main)",borderRadius:12,padding:"32px",minWidth:340,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("h2",{style:{marginBottom:26},children:"Upload Property Names CSV"}),(0,Eo.jsxs)("div",{onClick:()=>d.current&&d.current.click(),onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:e=>{e.preventDefault(),c(!1)},onDrop:e=>{e.preventDefault(),c(!1);const t=e.dataTransfer.files[0];p(t)},style:{border:u?"2.5px solid #3b82f6":"2.5px dashed #b8c6e6",background:u?"rgba(59,130,246,0.08)":"var(--sidebar-bg, #232b3a)",borderRadius:10,padding:"32px 12px",marginBottom:18,width:"100%",minHeight:90,textAlign:"center",cursor:"pointer",color:"var(--text-main, #fff)",fontSize:16,fontWeight:500,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,transition:"border 0.18s, background 0.18s"},children:[(0,Eo.jsx)(na,{size:32,color:u?"#3b82f6":"#b8c6e6",style:{marginBottom:8}}),(0,Eo.jsx)("span",{style:{fontWeight:500},children:u?"Drop your CSV file here...":"Drag and drop a CSV file here, or click to select"}),(0,Eo.jsx)("input",{ref:d,type:"file",accept:".csv",onChange:async e=>{const t=e.target.files[0];p(t)},style:{display:"none"}})]}),s&&(0,Eo.jsx)("div",{style:{color:"#c00",marginBottom:8},children:s})]})})]})}const nm="notifications/debugOverride",rm="notifications/settings",im="config/notifications";const om={background:"#fffbe7",border:"1.5px solid #f7d674",borderRadius:8,padding:"18px 18px 10px 18px",marginBottom:24,marginTop:8,color:"#665200",fontSize:16,boxShadow:"0 1px 6px rgba(200,180,50,0.07)",maxWidth:480},am={margin:"12px 0 0 0",padding:"8px 18px",background:"#f7d674",color:"#665200",border:"none",borderRadius:5,fontWeight:600,fontSize:16,cursor:"pointer"};function sm(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)("");return(0,t.useEffect)(()=>{let e=!0;return async function(){i(!0),l("");try{var t;const r=(0,Co.getFirestore)(),i=(null===(t=(await(0,Co.getDoc)((0,Co.doc)(r,"notifications","settings"))).data())||void 0===t?void 0:t.adminDebugEmail)||"";a(i);const o=await async function(){const e=(0,Co.getFirestore)(),t=await(0,Co.getDoc)((0,Co.doc)(e,nm));return t.exists()?t.data():{enabled:!1,backup:null}}();if(!e)return;n(o.enabled)}catch(Jm){l("Failed to load admin debug state.")}i(!1)}(),()=>{e=!1}},[]),(0,Eo.jsxs)("div",{style:om,children:[(0,Eo.jsx)("div",{style:{fontWeight:700,fontSize:17,marginBottom:8},children:"Admin Debug Notification Redirect"}),(0,Eo.jsxs)("div",{style:{marginBottom:8},children:[(0,Eo.jsxs)("div",{children:[(0,Eo.jsx)("b",{children:"Status:"})," ",e?(0,Eo.jsx)("span",{style:{color:"#c90000"},children:"ENABLED"}):(0,Eo.jsx)("span",{style:{color:"#0b8600"},children:"DISABLED"})]}),(0,Eo.jsxs)("div",{children:[(0,Eo.jsx)("b",{children:"Admin Email:"})," ",(0,Eo.jsx)("span",{style:{color:"#0055b0"},children:o||(0,Eo.jsx)("em",{children:"Not set"})})]}),(0,Eo.jsxs)("div",{style:{fontSize:14,marginTop:4},children:["When enabled, all notification recipients are temporarily set to the admin email above. Toggle again to restore previous lists. ",(0,Eo.jsx)("br",{}),(0,Eo.jsxs)("b",{children:["To change the admin email, update ",(0,Eo.jsx)("code",{children:"notifications/settings.adminDebugEmail"})," in Firestore."]})]})]}),s&&(0,Eo.jsx)("div",{style:{color:"#c90000",marginBottom:6},children:s}),(0,Eo.jsx)("button",{style:am,onClick:async function(){i(!0),l("");try{if(!o)throw new Error("No admin debug email set in Firestore (notifications/settings.adminDebugEmail)");e?(await async function(){const e=(0,Co.getFirestore)(),t=await(0,Co.getDoc)((0,Co.doc)(e,nm));if(!t.exists()||!t.data().backup)return;const{backup:n}=t.data();await(0,Co.setDoc)((0,Co.doc)(e,rm),{mediaRequestCreation:n.mediaRequestCreation,taskCompletion:n.taskCompletion,issueCreation:n.issueCreation,taskComment:n.taskComment},{merge:!0}),await(0,Co.setDoc)((0,Co.doc)(e,im),{stagnantTaskRecipients:n.stagnantTaskRecipients,priorityRequestRecipients:n.priorityRequestRecipients,stagnantTaskThresholdDays:n.stagnantTaskThresholdDays},{merge:!0}),await(0,Co.setDoc)((0,Co.doc)(e,nm),{enabled:!1,backup:null})}(),n(!1)):(await async function(e){var t,n,r,i,o,a,s;const l=(0,Co.getFirestore)(),u=await(0,Co.getDoc)((0,Co.doc)(l,rm)),c=await(0,Co.getDoc)((0,Co.doc)(l,im)),d={mediaRequestCreation:(null===(t=u.data())||void 0===t?void 0:t.mediaRequestCreation)||[],taskCompletion:(null===(n=u.data())||void 0===n?void 0:n.taskCompletion)||[],issueCreation:(null===(r=u.data())||void 0===r?void 0:r.issueCreation)||[],taskComment:(null===(i=u.data())||void 0===i?void 0:i.taskComment)||[],stagnantTaskRecipients:(null===(o=c.data())||void 0===o?void 0:o.stagnantTaskRecipients)||[],priorityRequestRecipients:(null===(a=c.data())||void 0===a?void 0:a.priorityRequestRecipients)||[],stagnantTaskThresholdDays:(null===(s=c.data())||void 0===s?void 0:s.stagnantTaskThresholdDays)||14};await(0,Co.setDoc)((0,Co.doc)(l,rm),{mediaRequestCreation:[e],taskCompletion:[e],issueCreation:[e],taskComment:[e]},{merge:!0}),await(0,Co.setDoc)((0,Co.doc)(l,im),{stagnantTaskRecipients:[e],priorityRequestRecipients:[e]},{merge:!0}),await(0,Co.setDoc)((0,Co.doc)(l,nm),{enabled:!0,backup:d,adminEmail:e})}(o),n(!0))}catch(Jm){l(Jm.message||"Failed to toggle debug mode.")}i(!1)},disabled:r||!o,children:r?"Loading...":e?"Disable Debug Redirect":"Enable Debug Redirect"})]})}const lm={background:"none",border:"none",fontSize:20,borderRadius:"50%",cursor:"pointer",width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:4,marginRight:2,lineHeight:1,outline:"none",userSelect:"none",transition:"background 0.15s, border 0.15s"},um={...lm,color:"var(--primary, #22a06b)"},cm={...lm,color:"var(--danger, #c00)"},dm={display:"flex",flexDirection:"column",gap:8,padding:"10px 0 0 0"},hm={cursor:"pointer",padding:12,display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:700,fontSize:17,letterSpacing:"-0.2px",color:"var(--text-main)",borderBottom:"1px solid var(--sidebar-border)",background:"transparent",borderRadius:8,transition:"background 0.15s"};function fm(e){var n;let{open:r,onClose:i,onSuccess:o}=e;const{userData:a}=Do(),[s,l]=(0,t.useState)(null),[u,c]=(0,t.useState)({}),[d,h]=(0,t.useState)({mediaRequestCreation:[""],taskCompletion:[""],issueCreation:[""],taskComment:[""],stagnantTaskRecipients:[""],priorityRequestRecipients:[""]}),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),[y,v]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[x,S]=(0,t.useState)(14);(0,t.useEffect)(()=>{if(!r)return;p(!0),v(""),w(!1);(async()=>{try{const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"notifications","settings"),n=await(0,Co.getDoc)(t);let r=[""],i=[""];if("manager"===(null===a||void 0===a?void 0:a.role)){const t=(0,Co.doc)(e,"config","notifications"),n=await(0,Co.getDoc)(t);n.exists()?(r=Array.isArray(n.data().stagnantTaskRecipients)?n.data().stagnantTaskRecipients:n.data().stagnantTaskRecipients?String(n.data().stagnantTaskRecipients).split(",").map(e=>e.trim()).filter(Boolean):[""],i=Array.isArray(n.data().priorityRequestRecipients)?n.data().priorityRequestRecipients:n.data().priorityRequestRecipients?String(n.data().priorityRequestRecipients).split(",").map(e=>e.trim()).filter(Boolean):[""],"number"===typeof n.data().stagnantTaskThresholdDays?S(n.data().stagnantTaskThresholdDays):S(14)):S(14)}n.exists()?h({mediaRequestCreation:Array.isArray(n.data().mediaRequestCreation)?n.data().mediaRequestCreation:n.data().mediaRequestCreation?n.data().mediaRequestCreation.split(",").map(e=>e.trim()).filter(Boolean):[""],taskCompletion:Array.isArray(n.data().taskCompletion)?n.data().taskCompletion:n.data().taskCompletion?n.data().taskCompletion.split(",").map(e=>e.trim()).filter(Boolean):[""],issueCreation:Array.isArray(n.data().issueCreation)?n.data().issueCreation:n.data().issueCreation?n.data().issueCreation.split(",").map(e=>e.trim()).filter(Boolean):[""],taskComment:Array.isArray(n.data().taskComment)?n.data().taskComment:n.data().taskComment?n.data().taskComment.split(",").map(e=>e.trim()).filter(Boolean):[""],stagnantTaskRecipients:r,priorityRequestRecipients:i}):h({mediaRequestCreation:[""],taskCompletion:[""],issueCreation:[""],taskComment:[""],stagnantTaskRecipients:r,priorityRequestRecipients:i})}catch(Jm){v("Failed to load notification emails.")}p(!1)})()},[r,null===a||void 0===a?void 0:a.role]);return r?(0,Eo.jsx)("div",{style:pm,onClick:e=>{e.target===e.currentTarget&&i()},children:(0,Eo.jsxs)("div",{style:{...gm,display:"flex",flexDirection:"column",maxHeight:"90vh",minHeight:0},children:[(0,Eo.jsx)("button",{"aria-label":"Close",onClick:i,style:wm,children:"\xd7"}),(0,Eo.jsx)("h2",{style:{margin:0,fontWeight:700,color:"var(--text-main)",fontSize:22,marginBottom:18,textAlign:"center",letterSpacing:"-0.5px"},children:"Notification Management"}),(null===a||void 0===a||null===(n=a.permissions)||void 0===n?void 0:n.adminTesting)&&(0,Eo.jsx)(sm,{}),(0,Eo.jsx)("style",{children:"\n          .notif-modal-scroll::-webkit-scrollbar {\n            width: 10px;\n          }\n          .notif-modal-scroll::-webkit-scrollbar-thumb {\n            background: var(--scrollbar-thumb, #c1c8d1);\n            border-radius: 8px;\n          }\n          .notif-modal-scroll::-webkit-scrollbar-track {\n            background: var(--scrollbar-track, transparent);\n          }\n          .notif-modal-scroll {\n            scrollbar-width: thin;\n            scrollbar-color: var(--scrollbar-thumb, #c1c8d1) var(--scrollbar-track, transparent);\n          }\n        "}),(0,Eo.jsx)("div",{className:"notif-modal-scroll",style:{flex:1,minHeight:0,overflowY:"auto",paddingBottom:8},children:f?(0,Eo.jsx)("div",{style:{textAlign:"center",padding:32},children:"Loading..."}):(0,Eo.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{m(!0),v("");try{const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"notifications","settings");if(await(0,Co.setDoc)(t,{mediaRequestCreation:d.mediaRequestCreation.filter(e=>e.trim()),taskCompletion:d.taskCompletion.filter(e=>e.trim()),issueCreation:d.issueCreation.filter(e=>e.trim()),taskComment:d.taskComment.filter(e=>e.trim())},{merge:!0}),"manager"===(null===a||void 0===a?void 0:a.role)){const t=(0,Co.doc)(e,"config","notifications");await(0,Co.setDoc)(t,{stagnantTaskRecipients:d.stagnantTaskRecipients.filter(e=>e.trim()),stagnantTaskThresholdDays:x,priorityRequestRecipients:d.priorityRequestRecipients.filter(e=>e.trim())},{merge:!0})}o&&o(),i()}catch(e){v("Failed to save emails.")}m(!1)})()},style:{display:"flex",flexDirection:"column",gap:0},children:[[{key:"mediaRequestCreation",label:"Media Request Creation"},{key:"taskCompletion",label:"Task Completion"},{key:"issueCreation",label:"Issue Creation"},{key:"taskComment",label:"Task Comment (Task Lookup Page)"},{key:"stagnantTaskRecipients",label:"Stagnant Task"},{key:"priorityRequestRecipients",label:"Priority Request"}].filter(e=>"stagnantTaskRecipients"!==e.key&&"priorityRequestRecipients"!==e.key||"manager"===(null===a||void 0===a?void 0:a.role)).map(e=>{var t,n;const r=d[e.key]||[""],i=r.filter(e=>e.trim());return(0,Eo.jsxs)("div",{style:{border:"1px solid var(--sidebar-border)",borderRadius:10,marginBottom:16,background:"var(--bg-card)"},children:[(0,Eo.jsxs)("div",{style:{...hm,background:s===e.key?"undefined"!==typeof window&&"dark"===(null===(t=window.document)||void 0===t||null===(n=t.documentElement)||void 0===n?void 0:n.getAttribute("data-theme"))?"rgba(255,255,255,0.06)":"#f7faff":"transparent"},onClick:()=>{return t=e.key,void c(e=>({...e,[t]:!e[t]}));var t},onMouseEnter:()=>l(e.key),onMouseLeave:()=>l(null),children:[(0,Eo.jsx)("span",{children:e.label}),(0,Eo.jsxs)("span",{style:{fontWeight:400,fontSize:13,color:"var(--text-main)"},children:[u[e.key]?"\u25b2":"\u25bc",!u[e.key]&&i.length>0&&(0,Eo.jsxs)("span",{style:{marginLeft:10,color:"var(--text-main)",fontSize:13},children:[i.length," recipient",i.length>1?"s":""]})]})]}),u[e.key]&&(0,Eo.jsxs)("div",{style:dm,children:[(0,Eo.jsx)("div",{style:{color:"var(--text-main)",fontSize:13,marginBottom:6},children:e.description}),"stagnantTaskRecipients"===e.key&&"manager"===(null===a||void 0===a?void 0:a.role)&&(0,Eo.jsx)("div",{style:{marginBottom:12},children:(0,Eo.jsxs)("div",{style:{marginLeft:8},children:[(0,Eo.jsx)("label",{style:{...ym,marginBottom:2},children:"Days before notification is sent:"}),(0,Eo.jsx)("input",{type:"number",min:1,max:90,value:x,onChange:e=>S(Number(e.target.value)),style:{...mm,width:80,display:"inline-block",marginBottom:0,marginRight:10,marginLeft:8}})]})}),r.map((t,n)=>(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:0},children:[(0,Eo.jsx)("input",{type:"email",value:t,onChange:t=>((e,t,n)=>{h(r=>{const i=[...r[e]];return i[t]=n,{...r,[e]:i}}),w(!1)})(e.key,n,t.target.value),style:mm,className:"global-input",placeholder:"Enter email",required:0===i.length&&0===n}),r.length>1&&(0,Eo.jsx)("button",{type:"button","aria-label":"Remove",onClick:()=>((e,t)=>{h(n=>{const r=[...n[e]];return r.splice(t,1),{...n,[e]:r.length?r:[""]}})})(e.key,n),style:cm,children:(0,Eo.jsx)(sa,{})}),n===r.length-1&&(0,Eo.jsx)("button",{type:"button","aria-label":"Add",onClick:()=>(e=>{h(t=>({...t,[e]:[...t[e],""]}))})(e.key),style:um,children:(0,Eo.jsx)(Jo,{})})]},n))]})]},e.key)}),y&&(0,Eo.jsx)("div",{style:{color:"var(--error)",margin:"8px 0",fontWeight:500},children:y}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,marginTop:12,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{type:"button",onClick:i,style:vm,disabled:g,children:"Cancel"}),(0,Eo.jsx)("button",{type:"submit",style:bm,disabled:g,children:g?"Saving...":"Save"})]})]})})]})}):null}const pm={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.24)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},gm={background:"var(--bg-card)",borderRadius:14,boxShadow:"0 4px 24px rgba(80,120,200,0.15)",padding:"32px 28px 24px 28px",minWidth:440,maxWidth:"92vw",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative"},mm={borderRadius:8,border:"1.5px solid var(--sidebar-border)",padding:"12px 10px",fontSize:16,marginBottom:18,background:"var(--bg-main)",color:"var(--text-main)",width:"100%",boxSizing:"border-box"},ym={color:"var(--label-text, #6b7a90)",fontWeight:500,marginBottom:4,marginTop:4,alignSelf:"flex-start"},vm={background:"var(--sidebar-bg)",border:"1.5px solid var(--sidebar-border)",color:"var(--text-main)",borderRadius:8,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer"},bm={background:"#3b82f6",border:"none",color:"#fff",borderRadius:8,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer"},wm={position:"absolute",top:18,right:18,background:"none",border:"none",color:"#888",fontSize:22,cursor:"pointer"},xm={padding:"2rem",display:"flex",flexDirection:"column",alignItems:"flex-start",background:"var(--main-bg)",borderRadius:8,minWidth:300,margin:"2rem auto"},Sm={marginTop:24,padding:"0.75rem 1.5rem",background:"#0061FF",color:"white",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},km=e=>{var n;let{onLinkDropbox:r}=e;const{userData:i}=Do(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(!1),[u,c]=(0,t.useState)(!1),d=(0,t.useRef)(null);return t.useEffect(()=>{if(u)return d.current=setTimeout(()=>c(!1),3e3),()=>clearTimeout(d.current)},[u]),(0,Eo.jsxs)("div",{style:xm,children:[(0,Eo.jsx)(la,{message:"Notification emails saved successfully.",visible:u,type:"success",onClose:()=>c(!1)}),(0,Eo.jsx)("h2",{children:"Settings"}),"manager"===(null===i||void 0===i?void 0:i.role)&&(0,Eo.jsx)("button",{style:Sm,onClick:()=>l(!0),children:"Manage Notifications"}),!0===(null===i||void 0===i||null===(n=i.permissions)||void 0===n?void 0:n.propertyManagement)&&(0,Eo.jsx)("button",{style:Sm,onClick:()=>a(!0),children:"Update Property CSV"}),(0,Eo.jsx)(fm,{open:s,onClose:()=>l(!1),onSuccess:()=>c(!0)}),(0,Eo.jsx)(tm,{open:o,onClose:()=>a(!1),onUpload:e=>{console.log("CSV file uploaded:",e)}})]})},Tm=()=>{const[e,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[l,u]=(0,t.useState)({}),[c,d]=(0,t.useState)({}),[h,f]=(0,t.useState)(null),[p,g]=(0,t.useState)(null),[m,y]=(0,t.useState)(""),[v,b]=(0,t.useState)([{url:"",label:""}]),[w,x]=(0,t.useState)(!1),[S,k]=(0,t.useState)(""),{role:T,user:C}=Do();(0,t.useEffect)(()=>{(async()=>{s(!0);const e=(0,Co.getFirestore)(),t=(0,Co.query)((0,Co.collectionGroup)(e,"issues"),(0,Co.where)("status","==","open")),n=(await(0,Co.getDocs)(t)).docs.map(e=>{const t=e.ref.path.split("/"),n=t[t.indexOf("tasks")+1];return{id:e.id,...e.data(),taskId:n}});let r=n;if("editor"===T){const e=[...new Set(n.map(e=>e.taskId))],t=await Promise.all(e.map(async e=>{try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"tasks",e),r=await(0,Co.getDoc)(n);if(r.exists())return{id:e,...r.data()}}catch(Jm){}return{id:e}})),i={};t.forEach(e=>{e&&e.id&&(i[e.id]=e)}),r=n.filter(e=>{const t=i[e.taskId];return t&&t.assignedEditor===C.uid&&4===t.progressState}),u(i)}o(r),s(!1);const i=[...new Set(r.map(e=>e.taskId))],a=[...new Set(n.map(e=>e.createdBy))],l=await Promise.all(i.map(async e=>{try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"tasks",e),r=await(0,Co.getDoc)(n);if(r.exists())return{id:e,...r.data()}}catch(Jm){}return{id:e}})),c={};l.forEach(e=>{e&&e.id&&(c[e.id]=e)}),u(c);const h=await Promise.all(a.map(async e=>{try{const t=(0,Co.getFirestore)(),n=(0,Co.doc)(t,"users",e),r=await(0,Co.getDoc)(n);if(r.exists())return{id:e,...r.data()}}catch(Jm){}return{id:e}})),f={};h.forEach(e=>{e&&e.id&&(f[e.id]=e)}),d(f)})()},[]);const E=()=>{g(null),y(""),b([{url:"",label:""}]),k("")};return a?(0,Eo.jsx)("div",{style:{padding:32,alignItems:"center"},children:"Loading issues..."}):(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(la,{type:"success",visible:e,message:"Issue resolved successfully!",onClose:()=>r(!1),autoHideDuration:4e3}),(0,Eo.jsxs)("div",{style:{marginLeft:"68px",padding:"20px 48px",height:"90vh",minHeight:400,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},children:[(0,Eo.jsxs)("h2",{style:{fontSize:26,fontWeight:700,marginBottom:20},children:[(0,Eo.jsx)(Bo,{style:{color:"#b82e2e",marginRight:8}})," Active Issues"]}),0===i.length?(0,Eo.jsx)("div",{style:{color:"#888",fontSize:16},children:"No active issues found."}):(0,Eo.jsxs)("div",{style:{flex:1,borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",background:"var(--bg-card)",overflow:"hidden",display:"flex",flexDirection:"column",minHeight:300},children:[(0,Eo.jsx)("style",{children:"\n            .issue-table-scroll::-webkit-scrollbar {\n              width: 10px;\n            }\n            .issue-table-scroll::-webkit-scrollbar-thumb {\n              background: var(--scrollbar-thumb, #c1c8d1);\n              border-radius: 8px;\n            }\n            .issue-table-scroll::-webkit-scrollbar-track {\n              background: var(--scrollbar-track, transparent);\n            }\n            .issue-table-scroll {\n              scrollbar-width: thin;\n              scrollbar-color: var(--scrollbar-thumb, #c1c8d1) var(--scrollbar-track, transparent);\n            }\n            .issue-row:hover {\n              background: rgba(59, 130, 246, 0.08) !important;\n              cursor: pointer;\n            }\n          "}),(0,Eo.jsx)("div",{className:"issue-table-scroll",style:{flex:1,overflowY:"auto",height:"100%"},children:(0,Eo.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",background:"var(--bg-card)",tableLayout:"fixed"},children:[(0,Eo.jsxs)("colgroup",{children:[(0,Eo.jsx)("col",{style:{width:"14%"}}),(0,Eo.jsx)("col",{style:{width:"38%"}}),(0,Eo.jsx)("col",{style:{width:"15%"}}),(0,Eo.jsx)("col",{style:{width:"18%"}}),(0,Eo.jsx)("col",{style:{width:"15%"}})]}),(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{style:{background:"var(--table-header-bg)"},children:[(0,Eo.jsx)("th",{style:{width:"14%",padding:"12px 10px",fontWeight:600,fontSize:15,textAlign:"left"},children:"Task"}),(0,Eo.jsx)("th",{style:{width:"38%",padding:"12px 10px",fontWeight:600,fontSize:15,textAlign:"left"},children:"Description"}),(0,Eo.jsx)("th",{style:{width:"15%",padding:"12px 10px",fontWeight:600,fontSize:15,textAlign:"left"},children:"Reported By"}),(0,Eo.jsx)("th",{style:{width:"18%",padding:"12px 10px",fontWeight:600,fontSize:15,textAlign:"left"},children:"Created At"}),(0,Eo.jsx)("th",{style:{width:"15%",padding:"12px 10px",fontWeight:600,fontSize:15,textAlign:"left"},children:"Action"})]})}),(0,Eo.jsx)("tbody",{children:i.map(e=>{var t,n,r;return(0,Eo.jsxs)("tr",{className:"issue-row",style:{borderBottom:"1px solid #f1c4c4",transition:"background 0.18s",cursor:"pointer"},onClick:()=>f(e.taskId),children:[(0,Eo.jsx)("td",{style:{width:"14%",padding:"10px 8px",fontWeight:600,color:"#3b82f6",wordBreak:"break-word",whiteSpace:"pre-line",textAlign:"left"},children:(null===(t=l[e.taskId])||void 0===t?void 0:t.propertyName)||e.taskId}),(0,Eo.jsx)("td",{style:{width:"38%",padding:"10px 8px",color:"var(--text-main)",fontWeight:500,wordBreak:"break-word",whiteSpace:"pre-line",textAlign:"left"},children:e.description}),(0,Eo.jsx)("td",{style:{width:"15%",padding:"10px 8px",wordBreak:"break-word",whiteSpace:"pre-line",textAlign:"left"},children:(null===(n=c[e.createdBy])||void 0===n?void 0:n.displayName)||(null===(r=c[e.createdBy])||void 0===r?void 0:r.email)||e.createdBy}),(0,Eo.jsx)("td",{style:{width:"18%",padding:"10px 8px",wordBreak:"break-word",whiteSpace:"pre-line",textAlign:"left"},children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,Eo.jsx)("td",{style:{width:"15%",padding:"10px 8px",textAlign:"left"},children:(0,Eo.jsxs)("button",{style:{background:"#1d5413",color:"#fff",border:"none",borderRadius:6,padding:"6px 16px",fontWeight:600,fontSize:14,cursor:"pointer",display:"flex",alignItems:"center",gap:6},onClick:t=>{t.stopPropagation(),((e,t)=>{const n=i.find(n=>n.id===t&&n.taskId===e);g(n),y(""),b([{url:"",label:""}]),k("")})(e.taskId,e.id)},children:[(0,Eo.jsx)(qo,{size:16,style:{marginRight:2}})," Resolve"]})})]},e.id+e.taskId)})})]})})]}),p&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:1200,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.target===e.currentTarget&&E()},children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card, #fff)",color:"var(--text-main, #223)",borderRadius:14,maxWidth:420,width:"100%",minWidth:0,margin:"40px 16px 0 16px",overflow:"auto",position:"relative",padding:"28px 20px 24px 20px",boxShadow:"0 4px 32px rgba(40,60,120,0.22)",display:"flex",flexDirection:"column",gap:16,maxHeight:"calc(100vh - 80px)"},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("h3",{style:{marginBottom:8},children:"Resolve Issue"}),(0,Eo.jsx)("div",{style:{fontSize:15,marginBottom:6},children:"You may add notes and/or upload files to attach to this resolution (optional)."}),(0,Eo.jsx)("textarea",{style:{width:"100%",maxWidth:"100%",minWidth:0,minHeight:70,borderRadius:8,border:"1.5px solid var(--input-border, #b8c6e6)",background:"var(--bg-main, #fff)",color:"var(--text-main, #223)",padding:"10px 12px",fontSize:15,marginBottom:10,boxSizing:"border-box",resize:"vertical",overflowWrap:"break-word"},placeholder:"Resolution notes (optional)",value:m,onChange:e=>y(e.target.value),disabled:w}),(0,Eo.jsx)("label",{style:{fontWeight:500,color:"var(--label-text, #6b7a90)",fontSize:15,marginBottom:6},children:"Attach Links:"}),v.map((e,t)=>(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[(0,Eo.jsx)("input",{type:"text",placeholder:"Label (optional)",value:e.label||"",onChange:e=>{const n=[...v];n[t]={...n[t],label:e.target.value},b(n)},style:{padding:"8px 10px",borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,width:130}}),(0,Eo.jsx)("input",{type:"url",placeholder:"Paste file URL (Dropbox, Google Drive, etc)",value:e.url||"",onChange:e=>{const n=[...v];n[t]={...n[t],url:e.target.value},b(n)},style:{padding:"8px 12px",borderRadius:7,border:"1.5px solid var(--input-border, #b8c6e6)",fontSize:15,flex:1},autoFocus:0===t}),v.length>1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>b(v.filter((e,n)=>n!==t)),style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:18},title:"Remove",children:"\u2715"}),t===v.length-1&&(0,Eo.jsx)("button",{type:"button",onClick:()=>b([...v,{url:"",label:""}]),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:18},title:"Add Link",children:"\uff0b"})]},t)),S&&(0,Eo.jsx)("div",{style:{color:"#b82e2e",fontSize:14,marginBottom:6},children:S}),(0,Eo.jsxs)("div",{style:{display:"flex",gap:12,marginTop:10,justifyContent:"flex-end"},children:[(0,Eo.jsx)("button",{style:{background:"var(--sidebar-bg, #e7eaf1)",color:"var(--text-main, #335)",border:"1.5px solid var(--sidebar-border, #ccd4e2)",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:E,disabled:w,children:"Cancel"}),(0,Eo.jsx)("button",{style:{background:"#1d5413",color:"#fff",border:"none",borderRadius:7,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.18)",opacity:w?.7:1},onClick:async()=>{if(p){x(!0),k("");try{const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"tasks",p.taskId,"issues",p.id);let i=[];const a=v.filter(e=>e.url&&e.url.trim());await(0,Co.updateDoc)(t,{status:"closed",resolvedAt:(new Date).toISOString(),resolvedBy:{uid:(null===C||void 0===C?void 0:C.uid)||"unknown",displayName:(null===C||void 0===C?void 0:C.displayName)||(null===C||void 0===C?void 0:C.email)||(null===C||void 0===C?void 0:C.uid)||"Unknown User"},resolveNotes:m||"",resolveLinks:a});(0,Co.doc)(e,"tasks",p.taskId);const{addTaskComment:s,addTaskLog:l}=await Promise.resolve().then(n.bind(n,2608));await s(p.taskId,{user:{uid:(null===C||void 0===C?void 0:C.uid)||"unknown",displayName:(null===C||void 0===C?void 0:C.displayName)||(null===C||void 0===C?void 0:C.email)||(null===C||void 0===C?void 0:C.uid)||"Unknown User"},message:m||"",timestamp:(new Date).toISOString(),type:"issue_resolved",files:i}),await l(p.taskId,{type:"issue_resolved",user:{uid:(null===C||void 0===C?void 0:C.uid)||"unknown",displayName:(null===C||void 0===C?void 0:C.displayName)||(null===C||void 0===C?void 0:C.email)||(null===C||void 0===C?void 0:C.uid)||"Unknown User"},timestamp:(new Date).toISOString(),files:i,description:"Issue resolved"}),o(e=>e.filter(e=>e.id!==p.id||e.taskId!==p.taskId)),g(null),y(""),b([{url:"",label:""}]),r(!0)}catch(Jm){k(Jm.message||"Failed to resolve issue.")}x(!1)}},disabled:w,children:w?"Submitting...":"Submit & Resolve"})]})]})}),h&&(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.target===e.currentTarget&&f(null)},children:(0,Eo.jsx)("div",{style:{display:"flex",flexDirection:"column",borderRadius:14,maxWidth:1200,width:"100%",marginTop:20,overflowY:"auto",position:"relative",padding:24},children:(0,Eo.jsx)(hg,{taskId:h,role:T,users:Object.values(c)})})})]})]})};function Cm(e){let{sidebarWidth:n,children:r,onClose:i}=e;const[o,a]=t.useState(!1);t.useEffect(()=>{a(!0)},[]);const s=()=>{a(!1),setTimeout(()=>{i&&i()},350)};return(0,Eo.jsx)("div",{style:{position:"fixed",left:n,top:0,width:`calc(100vw - ${n}px)`,height:"100vh",background:"var(--overlay-bg)",zIndex:99999,display:"flex",alignItems:"flex-start",justifyContent:"center",overflowY:"auto",opacity:o?1:0,transition:"opacity 0.35s cubic-bezier(.4,0,.2,1)"},onClick:e=>{e.target===e.currentTarget&&s()},children:"function"===typeof r?r(s):r})}const Em=()=>{var e,r;const i=J(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)([]),[u,c]=(0,t.useState)({});(0,t.useEffect)(()=>{(async()=>{try{const e=(0,Co.getFirestore)(),t=await Promise.resolve().then(n.bind(n,5472)).then(t=>t.doc(e,"autocomplete","propertyNames")),r=await Promise.resolve().then(n.bind(n,5472)).then(e=>e.getDoc(t));if(r.exists()&&Array.isArray(r.data().names)){const e=r.data().names;l(e);const t={};e.forEach(e=>{let{name:n,unitCode:r}=e;r&&(t[r.toLowerCase()]=n)}),c(t)}}catch(e){}})()},[]);const d=ee(),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[m,y]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[w,x]=(0,t.useState)("both");t.useEffect(()=>(window.openSettingsPage=()=>b(!0),()=>{window.openSettingsPage=void 0}),[]);const S=()=>{const e=`https://www.dropbox.com/oauth2/authorize?client_id=37xch7ymqezwp8f&response_type=code&redirect_uri=${encodeURIComponent("https://us-central1-photo-tracker-59878.cloudfunctions.net/dropboxAuthCallback")}&token_access_type=offline`;window.location.href=e},{user:k,role:T,loading:C,roleLoading:E,userData:I}=Do(),[D,A]=(0,t.useState)(!1),[_,P]=(0,t.useState)([]),[j,R]=(0,t.useState)([]),[O,N]=(0,t.useState)(!0),[M,L]=(0,t.useState)([]),[F,z]=(0,t.useState)("propertyName"),[U,V]=(0,t.useState)("asc"),[B,W]=(0,t.useState)(!1),[q,H]=(0,t.useState)(""),$=t.useRef(null),K=async()=>{N(!0);const e=(0,Co.getFirestore)();let t=(0,Co.collection)(e,"tasks");"editor"===T?t=(0,Co.query)(t,(0,Co.where)("assignedEditorIds","array-contains",k.uid)):"manager"===T&&(t=(0,Co.query)(t));try{let e=(await(0,Co.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));"editor"!==T&&"manager"!==T||(e=e.filter(e=>"Completed"!==e.stage&&!0!==e.archived)),P(e)}catch(n){P([])}N(!1)};(0,t.useEffect)(()=>{k&&T&&!C&&!E&&K()},[k,T,C,E]),(0,t.useEffect)(()=>{var e;null!==I&&void 0!==I&&null!==(e=I.permissions)&&void 0!==e&&e.mediaTypes&&(I.mediaTypeToggle&&Array.isArray(I.mediaTypeToggle)&&I.mediaTypeToggle.length>0?R(I.mediaTypeToggle.filter(e=>I.permissions.mediaTypes.includes(e))):R([...I.permissions.mediaTypes]))},[I]),(0,t.useEffect)(()=>{i.state&&i.state.completedTask&&(a(!0),Y(null),K(),window.history.replaceState({},document.title))},[i.state]);const[G,Y]=t.useState(null),{publicId:Q}=te(),[X,Z]=t.useState(!1),ne=null!==I&&void 0!==I&&null!==(e=I.permissions)&&void 0!==e&&e.mediaTypes&&Array.isArray(I.permissions.mediaTypes)?I.permissions.mediaTypes:sp.map(e=>e.key);(0,t.useEffect)(()=>{(async()=>{try{const e=(0,Co.getFirestore)(),t=(0,Co.collection)(e,"users"),n=(await(0,Co.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));L(n)}catch(e){L([])}})()},[]);const re=e=>Rp(e,M);return(0,t.useEffect)(()=>{if(Q&&_.length>0&&!G&&!h&&!p&&!m&&!v&&!D){const e=_.find(e=>String(e.publicId)===String(Q));e&&Y(e)}},[Q,_,G,h,p,m,v,D]),C||E||O||0===M.length?(0,Eo.jsx)("div",{style:{textAlign:"center",marginTop:80,fontSize:20},children:"Loading tasks..."}):(0,Eo.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-main)"},children:[o&&(0,Eo.jsx)(la,{message:"Task marked complete!",visible:o,type:"success",onClose:()=>a(!1)}),(0,Eo.jsx)(Gg,{onDashboard:()=>{A(!1),f(!1),g(!1),y(!1)},onIssues:()=>{A(!0),f(!1),g(!1),y(!1)},onPendingTasks:()=>{f(!0),A(!1),g(!1),y(!1)},onUserManagement:()=>{g(!0),f(!1),A(!1),y(!1)},onCompletedTasks:()=>{y(!0),f(!1),A(!1),g(!1)},role:T}),v&&(0,Eo.jsx)(Cm,{sidebarWidth:68,onClose:()=>b(!1),children:e=>(0,Eo.jsx)("div",{style:{marginTop:64,width:"100%",maxWidth:480},children:(0,Eo.jsx)(km,{onLinkDropbox:S})})}),(0,Eo.jsx)("div",{style:{flex:1,marginLeft:68},children:p?(0,Eo.jsx)(zg,{}):h?(0,Eo.jsx)(Mg,{}):m?(0,Eo.jsx)(Jg,{}):D?(0,Eo.jsx)(Tm,{}):(0,Eo.jsxs)("main",{style:{minHeight:"100vh",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:[(0,Eo.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",marginBottom:16,marginTop:20},children:[(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:18},children:[(0,Eo.jsx)("h1",{style:{fontWeight:700,color:"var(--text-main)",marginLeft:40,fontSize:28,letterSpacing:.5,alignSelf:"flex-start",marginBottom:0,marginRight:16},children:"Open Tasks"}),(null===I||void 0===I||null===(r=I.permissions)||void 0===r?void 0:r.mediaTypes)&&I.permissions.mediaTypes.length>1&&(0,Eo.jsx)(Up,{enabledMediaTypes:I.permissions.mediaTypes,selectedMediaTypes:j,onChange:R,persistKey:"mediaTypeToggle"})]}),(0,Eo.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:18},children:[(0,Eo.jsx)("input",{ref:$,type:"text",placeholder:"Search tasks...",value:q,onChange:e=>H(e.target.value),style:{width:B?240:0,opacity:B?1:0,marginRight:B?12:0,transition:"width 0.35s cubic-bezier(.4,0,.2,1), opacity 0.23s cubic-bezier(.4,0,.2,1), margin 0.2s",padding:B?"8px 14px":"8px 0px",borderRadius:8,border:"1.5px solid var(--sidebar-border)",background:"var(--bg-card)",color:"var(--text-main)",fontSize:16,outline:"none",boxShadow:B?"0 2px 8px rgba(80,120,200,0.07)":"none",pointerEvents:B?"auto":"none",minWidth:0,maxWidth:320},onBlur:()=>{""===q&&W(!1)},onKeyDown:e=>{"Escape"===e.key&&(W(!1),H(""))}}),(0,Eo.jsx)("button",{title:B?"Close Search":"Search Tasks",style:{background:"var(--bg-card)",border:"1.5px solid var(--sidebar-border)",color:"var(--text-main)",borderRadius:10,padding:8,marginRight:16,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(80,120,200,0.05)",transition:"background 0.15s, border 0.15s"},onClick:()=>{W(e=>(e?""!==q&&H(""):setTimeout(()=>$.current&&$.current.focus(),80),!e))},onMouseOver:e=>{e.currentTarget.style.background="var(--sidebar-bg)"},onMouseOut:e=>{e.currentTarget.style.background="var(--bg-card)"},children:(0,Eo.jsx)(Zo,{size:22})}),(0,Eo.jsx)("div",{style:{marginRight:20},children:(0,Eo.jsx)(zp,{value:w,onChange:x})})]})]}),(0,Eo.jsx)("div",{style:{background:"var(--bg-card)",boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:0,minHeight:360,width:"100%",height:"90vh",minWidth:800},children:(0,Eo.jsx)("div",{className:"dashboard-task-table-wrap",children:(0,Eo.jsx)(jp,{visibleColumns:[...ne.length>1?["mediaType"]:[],"propertyName","updateType","emergency","createdAt","progressState","assignedEditorDisplayName","expectedCompletion"],columnWidths:{mediaType:{width:"5%",maxWidth:160},propertyName:{width:"15%",maxWidth:240},updateType:{width:"25%",maxWidth:180},emergency:{width:"5%",maxWidth:60},createdAt:{width:"9%",maxWidth:110},progressState:{width:"20%",maxWidth:80},assignedEditorDisplayName:{width:"13%",maxWidth:180},expectedCompletion:{width:"8%",maxWidth:180}},tasks:(()=>{let e=_.filter(e=>!e.archived);if(e=e.filter(e=>!0!==e.archived),e=e.filter(e=>6!==e.progressState),"photographer"===T&&k&&k.uid&&(e=e.filter(e=>e.assignedPhotographer===k.uid&&e.progressState>=0&&e.progressState<=2)),"new"===w?e=e.filter(e=>e.isNewProperty):"existing"===w&&(e=e.filter(e=>!e.isNewProperty)),q.trim()){const e=q.trim().toLowerCase();return _.filter(e=>!0!==e.archived).filter(e=>j.includes(e.mediaType)).map(e=>({...e,assignedEditorDisplayNames:Array.isArray(e.assignedEditorIds)?e.assignedEditorIds.map(e=>re(e)):[],assignedPhotographerDisplayName:e.assignedPhotographer?re(e.assignedPhotographer):""})).filter(t=>{var n,r;const i=(t.propertyName||"").toLowerCase();return[i,(null===(n=u[i])||void 0===n||null===(r=n.toLowerCase)||void 0===r?void 0:r.call(n))||"",t.propertyType,t.mediaType,t.updateType,...t.assignedEditorDisplayNames,t.assignedPhotographer,t.assignedPhotographerDisplayName,t.id].some(t=>t&&t.toString().toLowerCase().includes(e))}).sort((e,t)=>{let n=e[F],r=t[F];if(null==n&&(n=""),null==r&&(r=""),"propertyName"===F||"updateType"===F||"assignedEditorDisplayName"===F)return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===U?-1:1:n>r?"asc"===U?1:-1:0;if("progressState"===F)return"asc"===U?n-r:r-n;if("emergency"===F)return"asc"===U?n===r?0:n?-1:1:n===r?0:n?1:-1;if("expectedCompletion"===F){const e=n?new Date(n):null,t=r?new Date(r):null,i=e&&!isNaN(e),o=t&&!isNaN(t);return i||o?i?o?"asc"===U?e-t:t-e:"asc"===U?-1:1:"asc"===U?1:-1:0}return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===U?-1:1:n>r?"asc"===U?1:-1:0})}return e=e.filter(e=>j.includes(e.mediaType)),[...e].map(e=>({...e,assignedEditorDisplayName:e.assignedEditor?re(e.assignedEditor):"Unassigned"})).sort((e,t)=>{let n=e[F],r=t[F];if(null==n&&(n=""),null==r&&(r=""),"propertyName"===F||"updateType"===F||"assignedEditorDisplayName"===F)return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===U?-1:1:n>r?"asc"===U?1:-1:0;if("progressState"===F)return"asc"===U?n-r:r-n;if("emergency"===F)return"asc"===U?n===r?0:n?-1:1:n===r?0:n?1:-1;if("expectedCompletion"===F){const e=n?new Date(n):null,t=r?new Date(r):null,i=e&&!isNaN(e),o=t&&!isNaN(t);return i||o?i?o?"asc"===U?e-t:t-e:"asc"===U?-1:1:"asc"===U?1:-1:0}return n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n<r?"asc"===U?-1:1:n>r?"asc"===U?1:-1:0})})(),onRowClick:e=>{Y(e),e&&void 0!==e.publicId&&d(`/dashboard/tasks/${e.publicId}`)},sortColumn:F,sortDirection:U,onSort:e=>{F===e?V("asc"===U?"desc":"asc"):(z(e),V("asc"))},users:M})})}),G&&(0,Eo.jsx)(Cm,{sidebarWidth:68,onClose:()=>{Y(null),d("/dashboard")},children:e=>(0,Eo.jsx)(Eo.Fragment,{children:(0,Eo.jsx)("div",{style:{marginTop:20,width:"100%",maxWidth:1200},children:(0,Eo.jsx)(hg,{taskId:null===G||void 0===G?void 0:G.id,fileLinks:null===G||void 0===G?void 0:G.fileLinks,task:G,role:T,users:M,onAddFiles:()=>alert("Add files"),onCloseTask:()=>alert("Close/Complete task"),onReassign:()=>alert("Reassign task"),onReportIssue:()=>alert("Report issue")})})})}),("manager"===T||"photographer"===T)&&(0,Eo.jsx)("button",{onClick:()=>Z(!0),style:{position:"fixed",right:32,bottom:32,width:60,height:60,borderRadius:"50%",background:"#3b82f6",color:"#fff",border:"none",boxShadow:"0 4px 16px rgba(80,120,200,0.13)",fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:500,cursor:"pointer",transition:"background 0.2s"},title:"Create New Task",children:(0,Eo.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:(0,Eo.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Eo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})}),X&&(0,Eo.jsx)(Cm,{sidebarWidth:68,onClose:()=>Z(!1),children:e=>(0,Eo.jsx)("div",{style:{marginTop:20,width:"100%",maxWidth:1e3},children:(0,Eo.jsx)(cp,{users:M,onSubmit:async t=>{N(!0);try{const[{getFirestore:r,collection:i,addDoc:o},{getFunctions:a,httpsCallable:s}]=await Promise.all([Promise.resolve().then(n.bind(n,5472)),Promise.resolve().then(n.bind(n,2395))]),l=r(),u=a(),c=(new Date).toISOString(),d=[];if(t.assignees.editor){const e=M.find(e=>e.uid===t.assignees.editor);d.push({editorId:t.assignees.editor,label:(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.email)||"Editor",customLabel:""})}const h=d.map(e=>e.editorId),f={mediaType:t.mediaType,propertyName:t.propertyName,isNewProperty:t.isNewProperty,propertyType:t.propertyType,updateType:t.updateType,priorityRequest:t.priorityRequest,assignedPhotographer:t.assignees.photographer,expectedCompletion:t.expectedCompletion?new Date(t.expectedCompletion).toISOString():null,createdAt:c,progressState:1,assignedEditors:d,assignedEditorIds:h,log:[{type:"created",timestamp:c,user:{uid:(null===k||void 0===k?void 0:k.uid)||"unknown",displayName:(null===k||void 0===k?void 0:k.displayName)||(null===k||void 0===k?void 0:k.email)||"Unknown User"},progressState:1,description:"Task created"}]},p=s(u,"createTaskWithPublicId"),g=await p({taskData:f}),{taskId:m,publicId:y}=g.data,v=(t.fileLinks||[]).map(e=>e.trim()).filter(Boolean);v.length>0&&await Promise.all(v.map(e=>o(i(l,"tasks",m,"files"),{url:e,addedBy:(null===k||void 0===k?void 0:k.uid)||"unknown",createdAt:(new Date).toISOString()}))),t.notes&&t.notes.trim().length>0&&await o(i(l,"tasks",m,"comments"),{text:t.notes,createdAt:(new Date).toISOString(),user:{displayName:(null===k||void 0===k?void 0:k.displayName)||(null===k||void 0===k?void 0:k.email)||"Unknown User",uid:(null===k||void 0===k?void 0:k.uid)||"unknown"}}),K(),e()}catch(r){alert("Failed to create task: "+(r&&r.message?r.message:r))}finally{N(!1)}},onCancel:e})})})]})})]})};function Im(e){let{sidebarWidth:n=0,children:r,onClose:i}=e;const[o,a]=(0,t.useState)(!1);(0,t.useEffect)(()=>{a(!0)},[]);const s=()=>{a(!1),setTimeout(()=>{i&&i()},50)};return(0,Eo.jsx)("div",{className:"settings-overlay"+(o?" open":""),style:{position:"fixed",left:n,top:0,width:`calc(100vw - ${n}px)`,height:"100vh",background:"var(--overlay-bg)",zIndex:99999,display:"flex",alignItems:"flex-start",justifyContent:"center",overflowY:"auto"},onClick:e=>{e.target===e.currentTarget&&s()},children:"function"===typeof r?r(s):r})}const Dm=()=>(0,Eo.jsx)("div",{style:{height:"60vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-main)",color:"var(--text-main)",flexDirection:"column",fontSize:22,fontWeight:500,textAlign:"center",padding:32},children:(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",boxShadow:"0 2px 16px rgba(80,120,200,0.07)",borderRadius:18,padding:"48px 32px",maxWidth:420,width:"100%"},children:["Your account is ",(0,Eo.jsx)("b",{children:"pending approval"}),".",(0,Eo.jsx)("br",{}),(0,Eo.jsx)("span",{style:{color:"#888",fontSize:18,marginTop:16,display:"block"},children:"Contact management to gain access."}),(0,Eo.jsxs)("button",{onClick:()=>Jr(So),style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"32px auto 0 auto",background:"none",border:"none",color:"#b82e2e",cursor:"pointer",fontSize:18,borderRadius:8,padding:"10px 18px",transition:"background 0.18s"},"aria-label":"Log out",title:"Log out",children:[(0,Eo.jsx)(Go,{size:26,style:{marginRight:10}})," Log out"]})]})});var Am=n(2395);const _m={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.24)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},Pm={background:"var(--bg-card)",borderRadius:12,boxShadow:"0 4px 24px rgba(80,120,200,0.15)",padding:"32px 28px 24px 28px",minWidth:340,maxWidth:"90vw",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative"},jm={borderRadius:8,border:"1.5px solid var(--sidebar-border)",padding:"12px 10px",fontSize:16,minHeight:80,marginBottom:18,resize:"vertical",background:"var(--bg-main)",color:"var(--text-main)",width:"100%",boxSizing:"border-box"},Rm={background:"#3b82f6",color:"#fff",border:"none",borderRadius:8,padding:"10px 0",fontWeight:600,fontSize:16,cursor:"pointer",marginTop:8,width:"100%"},Om={position:"absolute",top:18,right:18,background:"none",border:"none",color:"#888",fontSize:22,cursor:"pointer"};function Nm(e){let{open:n,onClose:r,onSubmit:i,submitting:o,error:a,confirmationMessage:s}=e;const[l,u]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),h=(0,t.useRef)();if(!n)return null;return(0,Eo.jsx)("div",{style:_m,onClick:e=>{e.target!==e.currentTarget||o||c||r()},children:(0,Eo.jsxs)("div",{style:Pm,children:[(0,Eo.jsx)("button",{style:Om,onClick:r,"aria-label":"Close",children:"\xd7"}),(0,Eo.jsx)("h3",{style:{fontWeight:600,fontSize:20,marginBottom:18,textAlign:"center"},children:"Send Message"}),c?(0,Eo.jsx)("div",{style:{color:"#219e4a",fontWeight:600,textAlign:"center",fontSize:18,padding:"30px 0 18px 0"},children:s||"Message sent!"}):(0,Eo.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&i(l.trim(),{onSuccess:()=>{d(!0),u(""),h.current=setTimeout(()=>{d(!1),r()},1200)}})},style:{display:"flex",flexDirection:"column",gap:0},children:[(0,Eo.jsx)("textarea",{style:jm,value:l,onChange:e=>u(e.target.value),placeholder:"Enter your message...",required:!0,disabled:o,maxLength:600,autoFocus:!0}),a&&(0,Eo.jsx)("div",{style:{color:"#c00",marginBottom:10},children:a}),(0,Eo.jsx)("button",{type:"submit",style:Rm,disabled:o||!l.trim(),children:o?"Submitting...":"Submit"})]})]})})}function Mm(e){const{NAMES:t}=Ep(null===e||void 0===e?void 0:e.mediaType);if(!e)return t[0];if("string"===typeof e.stage){const n=e.stage.replace("Ready to Publish","Publishing");if(t.includes(n))return n}return t[0]}const Lm=e=>{let{tasks:n=[],onAddNew:r}=e;const{user:i}=Do(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(!1),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1);return(0,Eo.jsxs)("div",{style:{width:"100%",borderRadius:14,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",background:"var(--bg-card)",overflow:"hidden",marginTop:16},children:[(0,Eo.jsxs)("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",background:"var(--bg-card)"},children:[(0,Eo.jsx)("thead",{children:(0,Eo.jsxs)("tr",{children:[(0,Eo.jsx)("th",{style:{width:"15%",textAlign:"left",padding:"14px 6px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15},children:"Media Type"}),(0,Eo.jsx)("th",{style:{width:"30%",textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15},children:"Update Type"}),(0,Eo.jsx)("th",{style:{width:"30%",textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15},children:"Progress"}),(0,Eo.jsx)("th",{style:{width:"15%",textAlign:"left",padding:"14px 12px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15},children:"Completed Date"}),(0,Eo.jsx)("th",{style:{width:"10%",textAlign:"center",padding:"14px 6px",color:"var(--text-main)",fontWeight:600,background:"var(--table-header-bg, var(--sidebar-bg))",fontSize:15}})]})}),(0,Eo.jsxs)("tbody",{children:[0===n.length?(0,Eo.jsx)("tr",{children:(0,Eo.jsx)("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-main)",padding:32},children:"No tasks to display."})}):n.map((e,t)=>{let n=e.completedDate||e.lastProgressUpdate||e.stageUpdated||e.completedAt||e.updatedAt||e.createdAt||null,r="";if(n)if("object"===typeof n&&n.seconds)r=new Date(1e3*n.seconds).toLocaleDateString();else if("string"===typeof n||"number"===typeof n){const e=new Date(n);r=isNaN(e)?"":e.toLocaleDateString()}const i="Completed"===Mm(e);return(0,Eo.jsxs)("tr",{children:[(0,Eo.jsx)("td",{style:{padding:"14px 12px",fontSize:15,color:"var(--text-main)"},children:(0,Eo.jsx)("span",{style:{display:"inline-block",background:lp(e.mediaType),color:"#fff",borderRadius:12,padding:"3px 12px",fontSize:13,fontWeight:600,marginRight:8,verticalAlign:"middle",minWidth:0,maxWidth:120,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:up(e.mediaType)})}),(0,Eo.jsx)("td",{style:{padding:"14px 12px",fontSize:15,color:"var(--text-main)"},children:e.updateType}),(0,Eo.jsx)("td",{style:{padding:"14px 12px",fontSize:15,color:"var(--text-main)",display:"flex",alignItems:"center",gap:12},children:(0,Eo.jsx)(Ip,{stage:Mm(e),mediaType:e.mediaType,isStalled:e.isStalled})}),(0,Eo.jsx)("td",{style:{padding:"14px 12px",fontSize:15,color:"var(--text-main)"},children:i&&r?r:""}),(0,Eo.jsx)("td",{style:{textAlign:"center",padding:"10px 6px"},children:(0,Eo.jsx)("button",{title:"Add comment",style:{background:"#f3f6ff",border:"none",borderRadius:"50%",padding:8,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 4px rgba(80,120,200,0.08)",transition:"background 0.15s"},onClick:()=>{a(!0),l(e)},children:(0,Eo.jsx)(Yo,{size:22,color:"#4f8cff"})})})]},e.id||t)}),(0,Eo.jsx)("tr",{children:(0,Eo.jsx)("td",{colSpan:5,style:{padding:0,background:"transparent"},children:(0,Eo.jsx)("button",{type:"button",style:{width:"100%",background:"var(--add-row-bg, rgba(79,140,255,0.10))",color:"var(--text-main)",border:"none",borderTop:"1.5px solid var(--sidebar-border, #e3e8f0)",borderRadius:"0 0 14px 14px",padding:"10px 0",fontWeight:600,fontSize:14,cursor:"pointer",transition:"background 0.16s",outline:"none",letterSpacing:.1},onMouseOver:e=>{e.currentTarget.style.background="var(--add-row-bg-hover, rgba(79,140,255,0.18))"},onMouseOut:e=>{e.currentTarget.style.background="var(--add-row-bg, rgba(79,140,255,0.10))"},onClick:r,tabIndex:0,children:"+ Request New"})})})]})]}),(0,Eo.jsx)(Nm,{open:o,onClose:()=>{a(!1),l(null),p(!1),h("")},onSubmit:async function(e){let{onSuccess:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s&&s.id){c(!0),h("");try{const n=(0,Co.getFirestore)(),r=(0,Co.collection)(n,"tasks",s.id,"comments");await(0,Co.addDoc)(r,{text:e,user:(null===i||void 0===i?void 0:i.uid)||"unknown",createdAt:(0,Co.serverTimestamp)(),timestamp:(new Date).toISOString(),createdVia:"TaskLookupPage",mediaType:"Photos"});p(!0),t&&t()}catch(n){h("Failed to submit comment. Please try again.")}c(!1)}},submitting:u,error:d,confirmationMessage:"Comment submitted!"})]})},Fm=["Full Reshoot","Interior/Exterior Update","Construction Update","Specific Owner Request","Other"],zm={background:"var(--bg-card)",color:"var(--text-main)",borderRadius:16,boxShadow:"0 2px 16px rgba(80,120,200,0.07)",padding:"32px 32px 60px",maxWidth:"65%",justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center",margin:"64px auto",width:"calc(100% - 68px)"},Um={display:"flex",alignItems:"center",background:"var(--sidebar-bg)",borderRadius:8,padding:"6px 12px",width:"90%",boxShadow:"0 1px 4px rgba(80,120,200,0.06)"},Vm={border:"none",outline:"none",background:"transparent",color:"var(--text-main)",fontSize:18,flex:1,marginLeft:10},Bm=()=>{const e=J(),n=(t,n)=>{const r=new URLSearchParams(e.search);return n?r.set(t,n):r.delete(t),r.toString()?`?${r.toString()}`:""},{user:r,role:i}=Do(),o=(0,t.useRef)(!1),a=(0,t.useRef)(!1),[s,l]=(0,t.useState)([]),[u,c]=(0,t.useState)({}),[d,h]=(0,t.useState)({}),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(!1),[y,v]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[x,S]=(0,t.useState)(-1),[k,T]=(0,t.useState)(null),[C,E]=(0,t.useState)(""),[I,D]=(0,t.useState)([]),[A,_]=(0,t.useState)(!1),[P,j]=(0,t.useState)(""),[R,O]=(0,t.useState)([]);(0,t.useEffect)(()=>{const t=(n="property",new URLSearchParams(e.search).get(n));var n;if(t&&d&&d[t.toLowerCase()]&&k!==t){var r;T(t);const e=(null===(r=d[t.toLowerCase()])||void 0===r?void 0:r.name)||t;m(!1),p(e),w(!1),E(""),j(""),L(t)}!t&&k&&(T(null),p(""),m(!1),w(!1),D([]),O([]))},[e.search,d]),(0,t.useEffect)(()=>{(async()=>{try{const e=(0,Co.getFirestore)(),t=(0,Co.doc)(e,"autocomplete","propertyNames"),n=await(0,Co.getDoc)(t);if(n.exists()&&Array.isArray(n.data().names)){const e=n.data().names;l(e);const t={},r={};e.forEach(e=>{let{name:n,unitCode:i}=e;i&&(r[i.toLowerCase()]={name:n,unitCode:i},t[i.toLowerCase()]=i),n&&(t[n.toLowerCase()]=i)}),c(t),h(r)}}catch(e){}})()},[]),(0,t.useEffect)(()=>{if(f.length>=2){const e=f.toLowerCase(),t=s.filter(t=>t.name.toLowerCase().includes(e)||t.unitCode.toLowerCase().includes(e));v(t.map(e=>e.unitCode)),w(g&&t.length>0),S(-1)}else v([]),w(!1),S(-1)},[f,s,g]);const N=e=>{var t;te(n("property",e),{replace:!1}),o.current=!0,a.current=!0,T(e);const r=(null===(t=d[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===t?void 0:t.name)||e;p(r),w(!1),E(""),j(""),L(e),setTimeout(()=>{o.current=!1,a.current=!1},250)},M=(()=>{if(!f)return!1;const e=f.toLowerCase();return!!u[e]})(),L=async e=>{if(e){_(!0),j(""),D([]),O([]);try{const t=(0,Co.getFirestore)();console.log("[TaskLookup] Fetching tasks for unit code:",e);const n=(0,Co.query)((0,Co.collection)(t,"tasks"),(0,Co.where)("propertyName","==",e));console.log("[TaskLookup] Firestore query:",n);const r=(await(0,Co.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}));console.log("[TaskLookup] Fetched tasks:",r),D(r);const i=Array.from(new Set(r.map(e=>e.assignedEditor).filter(Boolean))),o=await Promise.all(i.map(async e=>{try{const n=(0,Co.doc)(t,"users",e),r=await(0,Co.getDoc)(n);if(r.exists())return{id:e,...r.data()}}catch(n){console.warn("[TaskLookup] Failed to fetch user",e,n)}return{id:e}}));O(o)}catch(t){console.error("[TaskLookup] Error fetching tasks or users:",t),j("Failed to fetch tasks. Please try again. "+(t&&t.message?t.message:""))}_(!1)}},[F,z]=(0,t.useState)(!1),[U,V]=(0,t.useState)(Fm[0]),[B,W]=(0,t.useState)(""),[q,H]=(0,t.useState)(""),[$,K]=(0,t.useState)(!1),[G,Y]=(0,t.useState)(""),[Q,X]=(0,t.useState)(!1),Z=()=>{V(Fm[0]),W(""),H(""),K(!1),Y("")},te=ee();return(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(la,{type:"success",visible:Q,message:"Task created successfully!",onClose:()=>X(!1),autoHideDuration:4e3}),(0,Eo.jsxs)("div",{style:zm,children:[(0,Eo.jsx)("h2",{style:{marginBottom:24,fontWeight:600},children:"Media Status Lookup"}),(0,Eo.jsxs)("form",{onSubmit:e=>{if(M){const e=f.toLowerCase(),t=u[e];te(n("property",t),{replace:!1})}if(e.preventDefault(),j(""),!M)return void E("Please select a property name or code from the list.");E("");const t=f.toLowerCase(),r=u[t];T(r),L(r)},style:{position:"relative",width:320},autoComplete:"off",children:[(0,Eo.jsxs)("div",{style:Um,children:[(0,Eo.jsx)(Zo,{size:22,color:"var(--text-main)"}),(0,Eo.jsx)("input",{style:Vm,type:"text",placeholder:"Search property name...",value:f,onChange:e=>{p(e.target.value),m(!0),E(""),a.current||k||w(y.length>0)},onFocus:()=>{m(!0),a.current||k||w(y.length>0)},onBlur:()=>{setTimeout(()=>w(!1),100)},onKeyDown:e=>{b&&("ArrowDown"===e.key?S(e=>Math.min(e+1,y.length-1)):"ArrowUp"===e.key?S(e=>Math.max(e-1,0)):"Enter"===e.key&&x>=0&&y[x]&&(N(y[x]),e.preventDefault()))},autoComplete:"off",spellCheck:!1})]}),b&&(0,Eo.jsx)("div",{style:{position:"absolute",left:0,right:0,top:"100%",background:"var(--main-bg, #222)",color:"var(--main-text, #fff)",border:"1px solid #333",borderRadius:8,zIndex:20,maxHeight:220,overflowY:"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.13)",marginTop:2},children:y.map((e,t)=>{var n,r,i,o,a;return(0,Eo.jsxs)("div",{onMouseDown:()=>N(e),onMouseEnter:()=>S(t),style:{padding:"8px 14px",background:t===x?"#3b82f6":"inherit",color:t===x?"#fff":"inherit",cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,Eo.jsx)("span",{style:{fontWeight:600},children:(null===(n=d[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===n?void 0:n.name)||e}),(0,Eo.jsx)("span",{style:{color:t===x?"#e0eaff":"#aaa",marginLeft:8,fontSize:13},children:null!==(r=d[null===e||void 0===e?void 0:e.toLowerCase()])&&void 0!==r&&r.unitCode&&(null===(i=d[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===i?void 0:i.unitCode)!==(null===(o=d[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===o?void 0:o.name)?`(${null===(a=d[null===e||void 0===e?void 0:e.toLowerCase()])||void 0===a?void 0:a.unitCode})`:null})]},e)})}),(0,Eo.jsx)("button",{type:"submit",style:{marginTop:18,width:"100%",background:"#3b82f6",color:"#fff",border:"none",borderRadius:8,padding:"8px 0",fontWeight:600,fontSize:16,cursor:"pointer"},children:"Search"}),C&&(0,Eo.jsx)("div",{style:{color:"#c00",marginTop:8},children:C})]}),k&&(0,Eo.jsxs)("div",{style:{width:"100%",maxWidth:1200,margin:"40px auto 0 auto"},children:[(0,Eo.jsxs)("div",{style:{fontWeight:600,fontSize:19,marginBottom:18,color:"var(--text-main)"},children:["Tasks for: ",(0,Eo.jsx)("span",{style:{color:"#3b82f6"},children:k})]}),A?(0,Eo.jsx)("div",{style:{padding:32,textAlign:"center",color:"#888"},children:"Loading tasks..."}):(0,Eo.jsxs)("div",{style:{width:"100%",marginTop:24},children:[P&&(0,Eo.jsx)("div",{style:{color:"#c00",padding:18,background:"#fff0f0",borderRadius:8,marginBottom:12},children:P}),(0,Eo.jsx)("div",{style:{position:"relative"},children:(0,Eo.jsx)(Lm,{tasks:I.filter(e=>!0!==e.archived),onAddNew:()=>z(!0)})})]}),F&&(0,Eo.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Eo.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",zIndex:9999},onClick:()=>{z(!1),Z()}}),(0,Eo.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:18,boxShadow:"0 6px 32px rgba(50,80,160,0.18)",padding:38,minWidth:350,maxWidth:410,width:"100%",position:"relative",display:"flex",flexDirection:"column",alignItems:"stretch",zIndex:1e4},onClick:e=>e.stopPropagation(),children:[(0,Eo.jsx)("button",{"aria-label":"Close",onClick:()=>{z(!1),Z()},style:{position:"absolute",top:16,right:16,background:"none",border:"none",fontSize:26,color:"#b8c6e6",cursor:"pointer",zIndex:2,padding:0},type:"button",children:"\xd7"}),(0,Eo.jsx)("h3",{style:{margin:0,marginBottom:18,fontWeight:700,color:"var(--text-main)",fontSize:22,textAlign:"left"},children:"Create New Task"}),(0,Eo.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),K(!0),Y("");try{var t,n;const e=(0,Co.getFirestore)(),o=(0,Am.getFunctions)(),a=(0,Am.httpsCallable)(o,"createTaskWithPublicId"),s=(new Date).toISOString(),l=(null===(t=d[null===k||void 0===k||null===(n=k.unitCode)||void 0===n?void 0:n.toLowerCase()])||void 0===t?void 0:t.ical)||null,u={createdVia:"TaskLookupPage",propertyName:k,updateType:"Other"===U?B:U,createdAt:s,mediaType:"photos",stage:"Scheduling",stageUpdated:s,ical:l,assignedEditors:[],assignedEditorIds:[],log:[{type:"created",timestamp:s,user:{uid:(null===r||void 0===r?void 0:r.uid)||"unknown",displayName:(null===r||void 0===r?void 0:r.displayName)||(null===r||void 0===r?void 0:r.email)||(null===r||void 0===r?void 0:r.uid)||"Unknown User"},stage:"Scheduling",description:"Task created"}]},c=await a({taskData:u}),{taskId:h,publicId:f}=c.data;if(q&&q.trim()){const t=null!==r&&void 0!==r&&r.uid?`${r.uid}`:"(system)";await(0,Co.addDoc)((0,Co.collection)(e,"tasks",h,"comments"),{text:q,user:t,createdAt:(0,Co.serverTimestamp)(),timestamp:(new Date).toISOString()})}z(!1),Z(),L(k),"standard"!==i?te(`/tasks/${f}`):X(!0)}catch(o){Y("Failed to create task: "+(o&&o.message?o.message:""))}K(!1)},children:[(0,Eo.jsxs)("div",{style:{marginBottom:18},children:[(0,Eo.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Update Type:"}),Fm.map(e=>(0,Eo.jsxs)("label",{style:{display:"block",marginBottom:6,fontWeight:500},children:[(0,Eo.jsx)("input",{type:"radio",name:"updateType",value:e,checked:U===e,onChange:()=>V(e),style:{marginRight:8}}),e]},e)),"Other"===U&&(0,Eo.jsx)("input",{type:"text",placeholder:"Enter custom update type",value:B,onChange:e=>W(e.target.value),style:{width:"100%",marginTop:8,padding:"10px 12px",borderRadius:8,border:"1.5px solid var(--input-border, #b8c6e6)",background:"var(--bg-input)",color:"var(--text-main)",fontSize:15,outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:e=>e.target.style.borderColor="var(--primary, #3b82f6)",onBlur:e=>e.target.style.borderColor="var(--input-border, #b8c6e6)",required:!0})]}),(0,Eo.jsxs)("div",{style:{marginBottom:18},children:[(0,Eo.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Notes:"}),(0,Eo.jsx)("textarea",{value:q,onChange:e=>H(e.target.value),placeholder:"Add any relevant notes (will appear as a comment)",style:{width:"100%",minHeight:70,borderRadius:8,border:"1.5px solid var(--input-border, #b8c6e6)",background:"var(--bg-input)",color:"var(--text-main)",padding:"10px 12px",fontSize:15,outline:"none",transition:"border-color 0.2s",resize:"vertical",boxSizing:"border-box"},onFocus:e=>e.target.style.borderColor="var(--primary, #3b82f6)",onBlur:e=>e.target.style.borderColor="var(--input-border, #b8c6e6)"})]}),G&&(0,Eo.jsx)("div",{style:{color:"#c00",marginBottom:10},children:G}),(0,Eo.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:(0,Eo.jsx)("button",{type:"submit",style:{background:"#3b82f6",border:"none",color:"#fff",borderRadius:8,padding:"7px 18px",fontWeight:600,fontSize:15,cursor:"pointer"},disabled:$||"Other"===U&&!B,children:$?"Creating...":"Create Task"})})]})]})]})]}),!k&&(0,Eo.jsx)("div",{style:{marginTop:42,color:"#888",fontSize:15,maxWidth:450,textAlign:"center"},children:"To create a new media request, first select the property above."})]})]})},Wm=e=>{let{children:t}=e;const{role:n,loading:r,roleLoading:i}=Do();return r||i?null:"standard"===n?(0,Eo.jsx)(ge,{to:"/blank-dashboard",replace:!0}):t};const qm=(0,t.createContext)();function Hm(e){let{children:n}=e;const[r,i]=(0,t.useState)([]),o=(0,t.useRef)(0),a=(0,t.useCallback)(async(e,t,n,r)=>{const a=++o.current,s={paused:!1,cancelled:!1};i(n=>[...n,{id:a,file:e,progress:0,status:"uploading",control:s,error:null,dropboxPath:t}]);try{await async function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{paused:!1,cancelled:!1};const o=8388608,a=e.size;let s=0,l=null,u=0,c=!1;async function d(){for(;i.paused;)await new Promise(e=>setTimeout(e,250));if(i.cancelled)throw new Error("Upload cancelled")}const h="https://chunkeddropboxupload-owwuszp6nq-uc.a.run.app";async function f(e){return new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result.split(",")[1]),r.onerror=n,r.readAsDataURL(e)})}const p=e.slice(0,o);let g=null,m={chunk:await f(p),offset:0,path:t,accessToken:n,isLast:e.size<=o};if(console.log("Uploading first chunk to:",h,m),g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),!g.ok)throw new Error(await g.text());const y=await g.json();for(l=y.sessionId||y.session_id,s=p.size,u=p.size,r&&r(Math.min(s/a*100,100),s,a),console.log("After first chunk:",{offset:u,totalSize:a,finished:c});u<a;){await d();const i=e.slice(u,u+o),p=u+o>=a;if(m={chunk:await f(i),offset:u,path:t,accessToken:n,sessionId:l,isLast:p},console.log("Uploading chunk to:",h,m),g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),!g.ok)throw new Error(await g.text());if(u+=i.size,s=u,r&&r(Math.min(s/a*100,100),s,a),p)return c=!0,await g.json()}throw new Error("Upload did not finish")}(e,t,n,e=>{i(t=>t.map(t=>t.id===a?{...t,progress:e}:t))},s),i(e=>e.map(e=>e.id===a?{...e,progress:100,status:"done"}:e)),r&&r(null)}catch(Jm){i(t=>t.map(t=>t.id===a?{...t,status:"error",error:Jm.message}:t)),r&&r(Jm)}},[]);return(0,Eo.jsx)(qm.Provider,{value:{uploads:r,startUpload:a,pauseUpload:e=>i(t=>t.map(t=>t.id===e?(t.control.paused=!0,{...t}):t)),resumeUpload:e=>i(t=>t.map(t=>t.id===e?(t.control.paused=!1,{...t}):t)),cancelUpload:e=>i(t=>t.map(t=>t.id===e?(t.control.cancelled=!0,{...t}):t)),removeUpload:e=>i(t=>t.filter(t=>t.id!==e))},children:n})}function $m(e){let{children:n}=e;const{isMobile:r,isPortrait:i}=function(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(window.innerHeight>window.innerWidth);return(0,t.useEffect)(()=>{const e=()=>{i(window.innerHeight>window.innerWidth)};return n(/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),{isMobile:e,isPortrait:r}}();return t.useEffect(()=>(r&&i?(document.body.style.position="fixed",document.body.style.overflow="hidden",document.body.style.width="100vw",document.body.style.height="100vh"):(document.body.style.position="",document.body.style.overflow="",document.body.style.width="",document.body.style.height=""),()=>{document.body.style.position="",document.body.style.overflow="",document.body.style.width="",document.body.style.height=""}),[r,i]),r&&i?(0,Eo.jsxs)("div",{style:{position:"fixed",inset:0,background:"#fff",zIndex:1e4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:24},children:[(0,Eo.jsx)("h2",{style:{color:"#333",textAlign:"center"},children:"Please rotate your device for the best experience."}),(0,Eo.jsx)("p",{style:{color:"#666",marginTop:12,textAlign:"center"},children:"It is reccomended to set zoom to 50% for optimal performance."})]}):(0,Eo.jsx)(Eo.Fragment,{children:n})}function Km(){const{showSettings:e,closeSettings:t}=qg();return e?(0,Eo.jsx)(Im,{sidebarWidth:68,onClose:t,children:e=>(0,Eo.jsx)("div",{style:{marginTop:64,width:"100%",maxWidth:480},children:(0,Eo.jsx)(km,{})})}):null}function Gm(){const{banner:e,hideBanner:t}=$p();return(0,Eo.jsx)(la,{visible:e.visible,message:e.message,type:e.type,onClose:t})}function Ym(){const{user:e,loading:t,role:n,roleLoading:r}=Do();return t||r?null:(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(Km,{}),(0,Eo.jsx)(xe,{children:e?(0,Eo.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-main)"},children:[(0,Eo.jsx)(Gg,{role:n}),(0,Eo.jsx)("div",{style:{flex:1},children:(0,Eo.jsxs)(ve,{children:["pending"===n&&(0,Eo.jsx)(me,{path:"*",element:(0,Eo.jsx)(Dm,{})}),"standard"===n&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(me,{path:"/task-lookup",element:(0,Eo.jsx)(Bm,{})}),(0,Eo.jsx)(me,{path:"/tasks/:publicId",element:(0,Eo.jsx)(hg,{usePublicId:!0})}),(0,Eo.jsx)(me,{path:"*",element:(0,Eo.jsx)(ge,{to:"/task-lookup",replace:!0})})]}),"editor"===n&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(me,{path:"/dashboard",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/dashboard/tasks/:publicId",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/task-lookup",element:(0,Eo.jsx)(Bm,{})}),(0,Eo.jsx)(me,{path:"/tasks/:publicId",element:(0,Eo.jsx)(hg,{usePublicId:!0})}),(0,Eo.jsx)(me,{path:"/issues",element:(0,Eo.jsx)(Tm,{})}),(0,Eo.jsx)(me,{path:"/user-management",element:(0,Eo.jsx)(zg,{})}),(0,Eo.jsx)(me,{path:"*",element:(0,Eo.jsx)(ge,{to:"/dashboard",replace:!0})})]}),"photographer"===n&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(me,{path:"/dashboard",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/dashboard/tasks/:publicId",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/task-lookup",element:(0,Eo.jsx)(Bm,{})}),(0,Eo.jsx)(me,{path:"/tasks/:publicId",element:(0,Eo.jsx)(hg,{usePublicId:!0})}),(0,Eo.jsx)(me,{path:"/scheduling",element:(0,Eo.jsx)(Mg,{})}),(0,Eo.jsx)(me,{path:"/completed-tasks",element:(0,Eo.jsx)(Jg,{})}),(0,Eo.jsx)(me,{path:"/completed-tasks/:publicId",element:(0,Eo.jsx)(Jg,{})}),(0,Eo.jsx)(me,{path:"/issues",element:(0,Eo.jsx)(Tm,{})}),(0,Eo.jsx)(me,{path:"/user-management",element:(0,Eo.jsx)(zg,{})}),(0,Eo.jsx)(me,{path:"*",element:(0,Eo.jsx)(ge,{to:"/dashboard",replace:!0})})]}),"manager"===n&&(0,Eo.jsxs)(Eo.Fragment,{children:[(0,Eo.jsx)(me,{path:"/dashboard",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/dashboard/tasks/:publicId",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})}),(0,Eo.jsx)(me,{path:"/task-lookup",element:(0,Eo.jsx)(Bm,{})}),(0,Eo.jsx)(me,{path:"/scheduling",element:(0,Eo.jsx)(Mg,{})}),(0,Eo.jsx)(me,{path:"/completed-tasks",element:(0,Eo.jsx)(Jg,{})}),(0,Eo.jsx)(me,{path:"/completed-tasks/:publicId",element:(0,Eo.jsx)(Jg,{})}),(0,Eo.jsx)(me,{path:"/issues",element:(0,Eo.jsx)(Tm,{})}),(0,Eo.jsx)(me,{path:"/user-management",element:(0,Eo.jsx)(zg,{})}),(0,Eo.jsx)(me,{path:"*",element:(0,Eo.jsx)(ge,{to:"/dashboard",replace:!0})})]}),n&&!["pending","standard","editor","photographer","manager"].includes(n)&&(0,Eo.jsx)(me,{path:"/*",element:(0,Eo.jsx)(Wm,{children:(0,Eo.jsx)(Em,{})})})]})})]}):(0,Eo.jsx)(_o,{})})]})}const Qm=function(){return(0,Eo.jsx)(Bp,{children:(0,Eo.jsxs)(Hp,{children:[(0,Eo.jsx)(Gm,{}),(0,Eo.jsx)(Ao,{children:(0,Eo.jsx)(Hm,{children:(0,Eo.jsx)(Hg,{children:(0,Eo.jsxs)($m,{children:[(0,Eo.jsx)(Km,{}),(0,Eo.jsx)(Ym,{})]})})})})]})})},Xm=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,Eo.jsx)(t.StrictMode,{children:(0,Eo.jsx)(Qm,{})})),Xm()})()})();
//# sourceMappingURL=main.b0217e21.js.map